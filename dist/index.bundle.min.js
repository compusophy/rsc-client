!function(){var createModuleFactory=function(t){var e;return function(i){return e||t(e={exports:{},parent:i},e.exports),e.exports}},_$packetHandlers_230=createModuleFactory((function(t,e){t.exports=function(t){const e=((i=_$packetHandlers_230({})).appearance=_$appearance_225({}),i.bank=_$bank_226({}),i["close-connection"]=_$closeConnection_227({}),i.death=_$death_228({}),i.duel=_$duel_229({}),i.index=_$packetHandlers_230({}),i.inventory=_$inventory_231({}),i["logout-deny"]=_$logoutDeny_232({}),i.messages=_$messages_233({}),i["option-list"]=_$optionList_234({}),i["player-stats"]=_$playerStats_235({}),i.prayer=_$prayer_236({}),i["region-entity-update"]=_$regionEntityUpdate_237({}),i["region-ground-items"]=_$regionGroundItems_238({}),i["region-npc-update"]=_$regionNpcUpdate_239({}),i["region-npcs"]=_$regionNpcs_240({}),i["region-objects"]=_$regionObjects_241({}),i["region-player-update"]=_$regionPlayerUpdate_242({}),i["region-players"]=_$regionPlayers_243({}),i["region-wall-objects"]=_$regionWallObjects_244({}),i.settings=_$settings_245({}),i.shop=_$shop_246({}),i.sleep=_$sleep_247({}),i.social=_$social_248({}),i.sound=_$sound_249({}),i["teleport-bubble"]=_$teleportBubble_250({}),i.trade=_$trade_251({}),i["world-info"]=_$worldInfo_252({}),i);var i;const r={};for(const[s,n]of Object.entries(e))if(!/^_|index/.test(s))for(const[e,i]of Object.entries(n))r[e]=i.bind(t);return r}})),_$worldInfo_252=createModuleFactory((function(t,e){t.exports={[_$server_224.WORLD_INFO]:function(t){this.loadingArea=!0,this.localPlayerServerIndex=_$utility_288.getUnsignedShort(t,1),this.planeWidth=_$utility_288.getUnsignedShort(t,3),this.planeHeight=_$utility_288.getUnsignedShort(t,5),this.planeIndex=_$utility_288.getUnsignedShort(t,7),this.planeMultiplier=_$utility_288.getUnsignedShort(t,9),this.planeHeight-=this.planeIndex*this.planeMultiplier}}})),_$trade_251=createModuleFactory((function(t,e){t.exports={[_$server_224.TRADE_OPEN]:function(t){const e=_$utility_288.getUnsignedShort(t,1);null!==this.playerServer[e]&&(this.tradeRecipientName=this.playerServer[e].name),this.showDialogTrade=!0,this.tradeRecipientAccepted=!1,this.tradeAccepted=!1,this.tradeItemsCount=0,this.tradeRecipientItemsCount=0},[_$server_224.TRADE_CLOSE]:function(){this.showDialogTrade=!1,this.showDialogTradeConfirm=!1},[_$server_224.TRADE_ITEMS]:function(t){this.tradeRecipientItemsCount=255&t[1];let e=2;for(let i=0;i<this.tradeRecipientItemsCount;i++)this.tradeRecipientItems[i]=_$utility_288.getUnsignedShort(t,e),e+=2,this.tradeRecipientItemCount[i]=_$utility_288.getUnsignedInt(t,e),e+=4;this.tradeRecipientAccepted=!1,this.tradeAccepted=!1},[_$server_224.TRADE_RECIPIENT_STATUS]:function(t){this.tradeRecipientAccepted=!!t[1]},[_$server_224.TRADE_STATUS]:function(t){this.tradeAccepted=!!t[1]},[_$server_224.TRADE_CONFIRM_OPEN]:function(t){this.showDialogTradeConfirm=!0,this.tradeConfirmAccepted=!1,this.showDialogTrade=!1;let e=1;this.tradeRecipientConfirmHash=_$utility_288.getUnsignedLong(t,e),e+=8,this.tradeRecipientConfirmItemsCount=255&t[e++];for(let i=0;i<this.tradeRecipientConfirmItemsCount;i++)this.tradeRecipientConfirmItems[i]=_$utility_288.getUnsignedShort(t,e),e+=2,this.tradeRecipientConfirmItemCount[i]=_$utility_288.getUnsignedInt(t,e),e+=4;this.tradeConfirmItemsCount=255&t[e++];for(let i=0;i<this.tradeConfirmItemsCount;i++)this.tradeConfirmItems[i]=_$utility_288.getUnsignedShort(t,e),e+=2,this.tradeConfirmItemCount[i]=_$utility_288.getUnsignedInt(t,e),e+=4}}})),_$teleportBubble_250=createModuleFactory((function(t,e){t.exports={[_$server_224.TELEPORT_BUBBLE]:function(t){if(this.teleportBubbleCount<50){const e=255&t[1],i=t[2]+this.localRegionX,r=t[3]+this.localRegionY;this.teleportBubbleType[this.teleportBubbleCount]=e,this.teleportBubbleTime[this.teleportBubbleCount]=0,this.teleportBubbleX[this.teleportBubbleCount]=i,this.teleportBubbleY[this.teleportBubbleCount]=r,this.teleportBubbleCount++}}}})),_$sound_249=createModuleFactory((function(t,e){t.exports={[_$server_224.SOUND]:function(t,e){const i=(r=t.slice(1,e),Array.from(r).map(t=>String.fromCharCode(t)).join(""));var r;this.playSoundFile(i)}}})),_$social_248=createModuleFactory((function(t,e){t.exports={[_$server_224.FRIEND_LIST]:function(t){this.friendListCount=_$utility_288.getUnsignedByte(t[1]);for(let e=0;e<this.friendListCount;e++)this.friendListHashes[e]=_$utility_288.getUnsignedLong(t,2+9*e),this.friendListOnline[e]=_$utility_288.getUnsignedByte(t[10+9*e]);this.sortFriendsList()},[_$server_224.FRIEND_STATUS_CHANGE]:function(t){const e=_$utility_288.getUnsignedLong(t,1),i=255&t[9];for(let r=0;r<this.friendListCount;r++)if(this.friendListHashes[r].equals(e))return 0===this.friendListOnline[r]&&0!==i&&this.showServerMessage(`@pri@${_$utility_288.hashToUsername(e)} has logged in`),0!==this.friendListOnline[r]&&0===i&&this.showServerMessage(`@pri@${_$utility_288.hashToUsername(e)} has logged out`),this.friendListOnline[r]=i,void this.sortFriendsList();this.friendListHashes[this.friendListCount]=e,this.friendListOnline[this.friendListCount]=i,this.friendListCount++,this.sortFriendsList()},[_$server_224.FRIEND_MESSAGE]:function(t,e){const i=_$utility_288.getUnsignedLong(t,1),r=_$utility_288.getUnsignedInt(t,9);for(let n=0;n<this.maxSocialListSize;n++)if(this.messageTokens[n]===r)return;this.messageTokens[this.messageIndex]=r,this.messageIndex=(this.messageIndex+1)%_$gameConnection_211.maxSocialListSize;let s=_$chatMessage_208.descramble(t,13,e-13);this.options.wordFilter&&(s=_$wordFilter_290.filter(s)),this.showServerMessage(`@pri@${_$utility_288.hashToUsername(i)}: tells you ${s}`)},[_$server_224.IGNORE_LIST]:function(t){this.ignoreListCount=_$utility_288.getUnsignedByte(t[1]);for(let e=0;e<this.ignoreListCount;e++)this.ignoreList[e]=_$utility_288.getUnsignedLong(t,2+8*e)}}})),_$sleep_247=createModuleFactory((function(t,e){t.exports={[_$server_224.SLEEP_OPEN]:function(t){this.isSleeping||(this.fatigueSleeping=this.statFatigue),this.isSleeping=!0,this.inputTextCurrent="",this.inputTextFinal="",this.surface.readSleepWord(this.spriteTexture+1,t),this.sleepingStatusText=null},[_$server_224.SLEEP_CLOSE]:function(){this.isSleeping=!1},[_$server_224.SLEEP_INCORRECT]:function(){this.sleepingStatusText="Incorrect - Please wait..."},[_$server_224.PLAYER_STAT_FATIGUE_ASLEEP]:function(t){this.fatigueSleeping=_$utility_288.getUnsignedShort(t,1)}}})),_$shop_246=createModuleFactory((function(t,e){t.exports={[_$server_224.SHOP_OPEN]:function(t){this.showDialogShop=!0;let e=1;const i=255&t[e++],r=t[e++];this.shopSellPriceMod=255&t[e++],this.shopBuyPriceMod=255&t[e++];for(let s=0;s<40;s++)this.shopItem[s]=-1;for(let s=0;s<i;s++)this.shopItem[s]=_$utility_288.getUnsignedShort(t,e),e+=2,this.shopItemCount[s]=_$utility_288.getUnsignedShort(t,e),e+=2,this.shopItemPrice[s]=t[e++];if(1===r){let t=39;for(let e=0;e<this.inventoryItemsCount&&!(t<i);e++){let i=!1;for(let t=0;t<40;t++)if(this.shopItem[t]===this.inventoryItemId[e]){i=!0;break}10===this.inventoryItemId[e]&&(i=!0),i||(this.shopItem[t]=32767&this.inventoryItemId[e],this.shopItemCount[t]=0,this.shopItemPrice[t]=0,t--)}}this.shopSelectedItemIndex>=0&&this.shopSelectedItemIndex<40&&this.shopItem[this.shopSelectedItemIndex]!==this.shopSelectedItemType&&(this.shopSelectedItemIndex=-1,this.shopSelectedItemType=-2)},[_$server_224.SHOP_CLOSE]:function(){this.showDialogShop=!1}}})),_$settings_245=createModuleFactory((function(t,e){t.exports={[_$server_224.PRIVACY_SETTINGS]:function(t){this.settingsBlockChat=t[1],this.settingsBlockPrivate=t[2],this.settingsBlockTrade=t[3],this.settingsBlockDuel=t[4]},[_$server_224.GAME_SETTINGS]:function(t){this.optionCameraModeAuto=!!_$utility_288.getUnsignedByte(t[1]),this.optionMouseButtonOne=!!_$utility_288.getUnsignedByte(t[2]),this.optionSoundDisabled=!!_$utility_288.getUnsignedByte(t[3])}}})),_$regionWallObjects_244=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_WALL_OBJECTS]:function(t,e){for(let i=1;i<e;)if(255===_$utility_288.getUnsignedByte(t[i])){let e=0;const r=this.localRegionX+t[i+1]>>3,s=this.localRegionY+t[i+2]>>3;i+=3;for(let t=0;t<this.wallObjectCount;t++){const i=(this.wallObjectX[t]>>3)-r,n=(this.wallObjectY[t]>>3)-s;0!==i||0!==n?(t!==e&&(this.wallObjectModel[e]=this.wallObjectModel[t],this.wallObjectModel[e].key=e+1e4,this.wallObjectX[e]=this.wallObjectX[t],this.wallObjectY[e]=this.wallObjectY[t],this.wallObjectDirection[e]=this.wallObjectDirection[t],this.wallObjectId[e]=this.wallObjectId[t]),e++):(this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]))}this.wallObjectCount=e}else{const e=_$utility_288.getUnsignedShort(t,i);i+=2;const r=this.localRegionX+t[i++],s=this.localRegionY+t[i++],n=t[i++];let o=0;for(let t=0;t<this.wallObjectCount;t++)this.wallObjectX[t]!==r||this.wallObjectY[t]!==s||this.wallObjectDirection[t]!==n?(t!==o&&(this.wallObjectModel[o]=this.wallObjectModel[t],this.wallObjectModel[o].key=o+1e4,this.wallObjectX[o]=this.wallObjectX[t],this.wallObjectY[o]=this.wallObjectY[t],this.wallObjectDirection[o]=this.wallObjectDirection[t],this.wallObjectId[o]=this.wallObjectId[t]),o++):(this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]));if(this.wallObjectCount=o,65535!==e){this.world._setObjectAdjacency_from4(r,s,n,e);const t=this.createModel(r,s,n,e,this.wallObjectCount);this.wallObjectModel[this.wallObjectCount]=t,this.wallObjectX[this.wallObjectCount]=r,this.wallObjectY[this.wallObjectCount]=s,this.wallObjectId[this.wallObjectCount]=e,this.wallObjectDirection[this.wallObjectCount++]=n}}}}})),_$regionPlayers_243=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_PLAYERS]:function(t,e){this.knownPlayerCount=this.playerCount;for(let u=0;u<this.knownPlayerCount;u++)this.knownPlayers[u]=this.players[u];let i=8;this.localRegionX=_$utility_288.getBitMask(t,i,11),i+=11,this.localRegionY=_$utility_288.getBitMask(t,i,13),i+=13;const r=_$utility_288.getBitMask(t,i,4);i+=4;const s=this.loadNextRegion(this.localRegionX,this.localRegionY);this.localRegionX-=this.regionX,this.localRegionY-=this.regionY;const n=this.localRegionX*this.magicLoc+64,o=this.localRegionY*this.magicLoc+64;s&&(this.localPlayer.waypointCurrent=0,this.localPlayer.movingStep=0,this.localPlayer.currentX=this.localPlayer.waypointsX[0]=n,this.localPlayer.currentY=this.localPlayer.waypointsY[0]=o),this.playerCount=0,this.localPlayer=this.createPlayer(this.localPlayerServerIndex,n,o,r);const a=_$utility_288.getBitMask(t,i,8);i+=8;for(let u=0;u<a;u++){const e=this.knownPlayers[u+1],r=_$utility_288.getBitMask(t,i,1);if(i++,0!==r){const r=_$utility_288.getBitMask(t,i,1);if(i++,0===r){const r=_$utility_288.getBitMask(t,i,3);i+=3;let s=e.waypointCurrent,n=e.waypointsX[s],o=e.waypointsY[s];2!==r&&1!==r&&3!==r||(n+=this.magicLoc),6!==r&&5!==r&&7!==r||(n-=this.magicLoc),4!==r&&3!==r&&5!==r||(o+=this.magicLoc),0!==r&&1!==r&&7!==r||(o-=this.magicLoc),e.animationNext=r,e.waypointCurrent=s=(s+1)%10,e.waypointsX[s]=n,e.waypointsY[s]=o}else{if(12==(12&_$utility_288.getBitMask(t,i,4))){i+=2;continue}e.animationNext=_$utility_288.getBitMask(t,i,4),i+=4}}this.players[this.playerCount++]=e}let h=0;for(;i+24<8*e;){const e=_$utility_288.getBitMask(t,i,11);i+=11;let r=_$utility_288.getBitMask(t,i,5);i+=5,r>15&&(r-=32);let s=_$utility_288.getBitMask(t,i,5);i+=5,s>15&&(s-=32);const n=_$utility_288.getBitMask(t,i,4);i+=4;const o=_$utility_288.getBitMask(t,i,1);i++;const a=(this.localRegionX+r)*this.magicLoc+64,u=(this.localRegionY+s)*this.magicLoc+64;this.createPlayer(e,a,u,n),0===o&&(this.playerServerIndexes[h++]=e)}if(h>0){this.packetStream.newPacket(_$client_223.KNOWN_PLAYERS),this.packetStream.putShort(h);for(let t=0;t<h;t++){const e=this.playerServer[this.playerServerIndexes[t]];this.packetStream.putShort(e.serverIndex),this.packetStream.putShort(e.serverId)}this.packetStream.sendPacket(),h=0}}}})),_$regionPlayerUpdate_242=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_PLAYER_UPDATE]:function(t){const e=_$utility_288.getUnsignedShort(t,1);let i=3;for(let r=0;r<e;r++){const e=_$utility_288.getUnsignedShort(t,i);i+=2;const r=this.playerServer[e],s=t[i++];if(0===s){const e=_$utility_288.getUnsignedShort(t,i);i+=2,null!==r&&(r.bubbleTimeout=150,r.bubbleItem=e)}else if(1===s){const e=t[i];if(i++,null!==r){let s=_$chatMessage_208.descramble(t,i,e);this.options.wordFilter&&(s=_$wordFilter_290.filter(s));let n=!1;for(let t=0;t<this.ignoreListCount;t++)if(this.ignoreList[t]===r.hash){n=!0;break}n||(r.messageTimeout=150,r.message=s,this.showMessage(`${r.name}: ${r.message}`,2))}i+=e}else if(2===s){const e=_$utility_288.getUnsignedByte(t[i++]),s=_$utility_288.getUnsignedByte(t[i++]),n=_$utility_288.getUnsignedByte(t[i++]);null!==r&&(r.damageTaken=e,r.healthCurrent=s,r.healthMax=n,r.combatTimer=200,r===this.localPlayer&&(this.playerStatCurrent[3]=s,this.playerStatBase[3]=n,this.showDialogWelcome=!1,this.showDialogServerMessage=!1))}else if(3===s){const e=_$utility_288.getUnsignedShort(t,i);i+=2;const s=_$utility_288.getUnsignedShort(t,i);i+=2,null!==r&&(r.incomingProjectileSprite=e,r.attackingNpcServerIndex=s,r.attackingPlayerServerIndex=-1,r.projectileRange=this.projectileMaxRange)}else if(4===s){const e=_$utility_288.getUnsignedShort(t,i);i+=2;const s=_$utility_288.getUnsignedShort(t,i);i+=2,null!==r&&(r.incomingProjectileSprite=e,r.attackingPlayerServerIndex=s,r.attackingNpcServerIndex=-1,r.projectileRange=this.projectileMaxRange)}else if(5===s)if(null!==r){r.serverId=_$utility_288.getUnsignedShort(t,i),i+=2,r.hash=_$utility_288.getUnsignedLong(t,i),i+=8,r.name=_$utility_288.hashToUsername(r.hash);const e=_$utility_288.getUnsignedByte(t[i]);i++;for(let s=0;s<e;s++)r.equippedItem[s]=_$utility_288.getUnsignedByte(t[i]),i++;for(let t=e;t<12;t++)r.equippedItem[t]=0;r.colourHair=255&t[i++],r.colourTop=255&t[i++],r.colourBottom=255&t[i++],r.colourSkin=255&t[i++],r.level=255&t[i++],r.skullVisible=255&t[i++]}else i+=14,i+=_$utility_288.getUnsignedByte(t[i])+1;else if(6===s){const e=t[i++];if(null!==r){const s=_$chatMessage_208.descramble(t,i,e);r.messageTimeout=150,r.message=s,r===this.localPlayer&&this.showMessage(`${r.name}: ${r.message}`,5)}i+=e}}}}})),_$regionObjects_241=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_OBJECTS]:function(t,e){for(let i=1;i<e;)if(255===_$utility_288.getUnsignedByte(t[i])){let e=0;const r=this.localRegionX+t[i+1]>>3,s=this.localRegionY+t[i+2]>>3;i+=3;for(let t=0;t<this.objectCount;t++){const i=(this.objectX[t]>>3)-r,n=(this.objectY[t]>>3)-s;0!==i||0!==n?(t!==e&&(this.objectModel[e]=this.objectModel[t],this.objectModel[e].key=e,this.objectX[e]=this.objectX[t],this.objectY[e]=this.objectY[t],this.objectId[e]=this.objectId[t],this.objectDirection[e]=this.objectDirection[t]),e++):(this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]))}this.objectCount=e}else{const e=_$utility_288.getUnsignedShort(t,i);i+=2;const r=this.localRegionX+t[i++],s=this.localRegionY+t[i++];let n=0;for(let t=0;t<this.objectCount;t++)this.objectX[t]!==r||this.objectY[t]!==s?(t!==n&&(this.objectModel[n]=this.objectModel[t],this.objectModel[n].key=n,this.objectX[n]=this.objectX[t],this.objectY[n]=this.objectY[t],this.objectId[n]=this.objectId[t],this.objectDirection[n]=this.objectDirection[t]),n++):(this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]));if(this.objectCount=n,6e4!==e){const t=this.world.getTileDirection(r,s);let i=0,n=0;0===t||4===t?(i=_$gameData_212.objectWidth[e],n=_$gameData_212.objectHeight[e]):(n=_$gameData_212.objectWidth[e],i=_$gameData_212.objectHeight[e]);const o=(r+r+i)*this.magicLoc/2|0,a=(s+s+n)*this.magicLoc/2|0,h=_$gameData_212.objectModelIndex[e],u=this.gameModels[h].copy();this.scene.addModel(u),u.key=this.objectCount,u.rotate(0,32*t,0),u.translate(o,-this.world.getElevation(o,a),a),u._setLight_from6(!0,48,48,-50,-10,-50),this.world.removeObject2(r,s,e),74===e&&u.translate(0,-480,0),this.objectX[this.objectCount]=r,this.objectY[this.objectCount]=s,this.objectId[this.objectCount]=e,this.objectDirection[this.objectCount]=t,this.objectModel[this.objectCount++]=u}}}}})),_$regionNpcs_240=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_NPCS]:function(t,e){this.npcCacheCount=this.npcCount,this.npcCount=0;for(let s=0;s<this.npcCacheCount;s++)this.npcsCache[s]=this.npcs[s];let i=8;const r=_$utility_288.getBitMask(t,i,8);i+=8;for(let s=0;s<r;s++){const e=this.npcsCache[s],r=_$utility_288.getBitMask(t,i,1);if(i++,0!==r){const r=_$utility_288.getBitMask(t,i,1);if(i++,0===r){const r=_$utility_288.getBitMask(t,i,3);i+=3;let s=e.waypointCurrent,n=e.waypointsX[s],o=e.waypointsY[s];2!==r&&1!==r&&3!==r||(n+=this.magicLoc),6!==r&&5!==r&&7!==r||(n-=this.magicLoc),4!==r&&3!==r&&5!==r||(o+=this.magicLoc),0!==r&&1!==r&&7!==r||(o-=this.magicLoc),e.animationNext=r,e.waypointCurrent=s=(s+1)%10,e.waypointsX[s]=n,e.waypointsY[s]=o}else{if(12==(12&_$utility_288.getBitMask(t,i,4))){i+=2;continue}e.animationNext=_$utility_288.getBitMask(t,i,4),i+=4}}this.npcs[this.npcCount++]=e}for(;i+34<8*e;){const e=_$utility_288.getBitMask(t,i,12);i+=12;let r=_$utility_288.getBitMask(t,i,5);i+=5,r>15&&(r-=32);let s=_$utility_288.getBitMask(t,i,5);i+=5,s>15&&(s-=32);const n=_$utility_288.getBitMask(t,i,4);i+=4;const o=(this.localRegionX+r)*this.magicLoc+64,a=(this.localRegionY+s)*this.magicLoc+64;let h=_$utility_288.getBitMask(t,i,10);i+=10,h>=_$gameData_212.npcCount&&(h=24),this.addNpc(e,o,a,n,h)}}}})),_$regionNpcUpdate_239=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_NPC_UPDATE]:function(t){const e=_$utility_288.getUnsignedShort(t,1);let i=3;for(let r=0;r<e;r++){const e=_$utility_288.getUnsignedShort(t,i);i+=2;const r=this.npcsServer[e],s=_$utility_288.getUnsignedByte(t[i++]);if(1===s){const e=_$utility_288.getUnsignedShort(t,i);i+=2;const s=t[i++];if(null!==r){const n=_$chatMessage_208.descramble(t,i,s);r.messageTimeout=150,r.message=n,e===this.localPlayer.serverIndex&&this.showMessage(`@yel@${_$gameData_212.npcName[r.npcId]}: `+r.message,5)}i+=s}else if(2===s){const e=_$utility_288.getUnsignedByte(t[i++]),s=_$utility_288.getUnsignedByte(t[i++]),n=_$utility_288.getUnsignedByte(t[i++]);null!==r&&(r.damageTaken=e,r.healthCurrent=s,r.healthMax=n,r.combatTimer=200)}}}}})),_$regionGroundItems_238=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_GROUND_ITEMS]:function(t,e){for(let i=1;i<e;)if(255===_$utility_288.getUnsignedByte(t[i])){let e=0;const r=this.localRegionX+t[i+1]>>3,s=this.localRegionY+t[i+2]>>3;i+=3;for(let t=0;t<this.groundItemCount;t++){const i=(this.groundItemX[t]>>3)-r,n=(this.groundItemY[t]>>3)-s;0===i&&0===n||(t!==e&&(this.groundItemX[e]=this.groundItemX[t],this.groundItemY[e]=this.groundItemY[t],this.groundItemID[e]=this.groundItemID[t],this.groundItemZ[e]=this.groundItemZ[t]),e++)}this.groundItemCount=e}else{let e=_$utility_288.getUnsignedShort(t,i);i+=2;const r=this.localRegionX+t[i++],s=this.localRegionY+t[i++];if(0==(32768&e)){this.groundItemX[this.groundItemCount]=r,this.groundItemY[this.groundItemCount]=s,this.groundItemID[this.groundItemCount]=e,this.groundItemZ[this.groundItemCount]=0;for(let t=0;t<this.objectCount;t++)if(this.objectX[t]===r&&this.objectY[t]===s){this.groundItemZ[this.groundItemCount]=_$gameData_212.objectElevation[this.objectId[t]];break}this.groundItemCount++}else{e&=32767;let t=0;for(let i=0;i<this.groundItemCount;i++)this.groundItemX[i]!==r||this.groundItemY[i]!==s||this.groundItemID[i]!==e?(i!==t&&(this.groundItemX[t]=this.groundItemX[i],this.groundItemY[t]=this.groundItemY[i],this.groundItemID[t]=this.groundItemID[i],this.groundItemZ[t]=this.groundItemZ[i]),t++):e=-123;this.groundItemCount=t}}}}})),_$regionEntityUpdate_237=createModuleFactory((function(t,e){t.exports={[_$server_224.REGION_ENTITY_UPDATE]:function(t,e){const i=(e-1)/4|0;for(let r=0;r<i;r++){const e=this.localRegionX+_$utility_288.getSignedShort(t,1+4*r)>>3,i=this.localRegionY+_$utility_288.getSignedShort(t,3+4*r)>>3;let s=0;for(let t=0;t<this.groundItemCount;t++){const r=(this.groundItemX[t]>>3)-e,n=(this.groundItemY[t]>>3)-i;0===r&&0===n||(t!==s&&(this.groundItemX[s]=this.groundItemX[t],this.groundItemY[s]=this.groundItemY[t],this.groundItemID[s]=this.groundItemID[t],this.groundItemZ[s]=this.groundItemZ[t]),s++)}this.groundItemCount=s,s=0;for(let t=0;t<this.objectCount;t++){const r=(this.objectX[t]>>3)-e,n=(this.objectY[t]>>3)-i;0!==r||0!==n?(t!==s&&(this.objectModel[s]=this.objectModel[t],this.objectModel[s].key=s,this.objectX[s]=this.objectX[t],this.objectY[s]=this.objectY[t],this.objectId[s]=this.objectId[t],this.objectDirection[s]=this.objectDirection[t]),s++):(this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]))}this.objectCount=s,s=0;for(let t=0;t<this.wallObjectCount;t++){const r=(this.wallObjectX[t]>>3)-e,n=(this.wallObjectY[t]>>3)-i;0!==r||0!==n?(t!==s&&(this.wallObjectModel[s]=this.wallObjectModel[t],this.wallObjectModel[s].key=s+1e4,this.wallObjectX[s]=this.wallObjectX[t],this.wallObjectY[s]=this.wallObjectY[t],this.wallObjectDirection[s]=this.wallObjectDirection[t],this.wallObjectId[s]=this.wallObjectId[t]),s++):(this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]))}this.wallObjectCount=s}}}})),_$prayer_236=createModuleFactory((function(t,e){t.exports={[_$server_224.PRAYER_STATUS]:function(t,e){for(let i=0;i<e-1;i++){const e=1===t[i+1];!this.prayerOn[i]&&e&&this.playSoundFile("prayeron"),this.prayerOn[i]&&!e&&this.playSoundFile("prayeroff"),this.prayerOn[i]=e}}}})),_$playerStats_235=createModuleFactory((function(t,e){t.exports={[_$server_224.PLAYER_STAT_LIST]:function(t){let e=1;for(let i=0;i<this.playerStatCurrent.length;i++)this.playerStatCurrent[i]=_$utility_288.getUnsignedByte(t[e++]);for(let i=0;i<this.playerStatBase.length;i++)this.playerStatBase[i]=_$utility_288.getUnsignedByte(t[e++]);for(let i=0;i<this.playerExperience.length;i++)this.playerExperience[i]=_$utility_288.getUnsignedInt(t,e),e+=4;this.playerQuestPoints=_$utility_288.getUnsignedByte(t[e++])},[_$server_224.PLAYER_STAT_EQUIPMENT_BONUS]:function(t){for(let e=0;e<this.playerStatEquipment.length;e++)this.playerStatEquipment[e]=_$utility_288.getUnsignedByte(t[1+e])},[_$server_224.PLAYER_STAT_EXPERIENCE_UPDATE]:function(t){const e=255&t[1];this.playerExperience[e]=_$utility_288.getUnsignedInt(t,2)},[_$server_224.PLAYER_STAT_UPDATE]:function(t){let e=1;const i=255&t[e++];this.playerStatCurrent[i]=_$utility_288.getUnsignedByte(t[e++]),this.playerStatBase[i]=_$utility_288.getUnsignedByte(t[e++]),this.playerExperience[i]=_$utility_288.getUnsignedInt(t,e),e+=4},[_$server_224.PLAYER_STAT_FATIGUE]:function(t){this.statFatigue=_$utility_288.getUnsignedShort(t,1)},[_$server_224.PLAYER_QUEST_LIST]:function(t){for(let e=0;e<this.questComplete.length;e++)this.questComplete[e]=!!t[e+1]}}})),_$optionList_234=createModuleFactory((function(t,e){t.exports={[_$server_224.OPTION_LIST]:function(t){this.showOptionMenu=!0;const e=_$utility_288.getUnsignedByte(t[1]);this.optionMenuCount=e;let i=2;for(let s=0;s<e;s++){const e=_$utility_288.getUnsignedByte(t[i++]);this.optionMenuEntry[s]=(r=t.slice(i,i+e),Array.from(r).map(t=>String.fromCharCode(t)).join("")),i+=e}var r},[_$server_224.OPTION_LIST_CLOSE]:function(){this.showOptionMenu=!1}}})),_$messages_233=createModuleFactory((function(t,e){function i(t){return Array.from(t).map(t=>String.fromCharCode(t)).join("")}t.exports={[_$server_224.MESSAGE]:function(t,e){const r=i(t.slice(1,e));this.showServerMessage(r)},[_$server_224.SERVER_MESSAGE]:function(t,e){this.serverMessage=i(t.slice(1,e)),this.showDialogServerMessage=!0,this.serverMessageBoxTop=!1},[_$server_224.SERVER_MESSAGE_ONTOP]:function(t,e){this.serverMessage=i(t.slice(1,e)),this.showDialogServerMessage=!0,this.serverMessageBoxTop=!0},[_$server_224.WELCOME]:function(t){this.welcomScreenAlreadyShown||(this.welcomeLastLoggedInIP=_$utility_288.getUnsignedInt(t,1),this.welcomeLastLoggedInDays=_$utility_288.getUnsignedShort(t,5),this.welcomeRecoverySetDays=255&t[7],this.welcomeUnreadMessages=_$utility_288.getUnsignedShort(t,8),this.showDialogWelcome=!0,this.welcomScreenAlreadyShown=!0,this.welcomeLastLoggedInHost=null)},[_$server_224.SYSTEM_UPDATE]:function(t){this.systemUpdate=32*_$utility_288.getUnsignedShort(t,1)}}})),_$logoutDeny_232=createModuleFactory((function(t,e){t.exports={[_$server_224.LOGOUT_DENY]:function(){this.cantLogout()}}})),_$inventory_231=createModuleFactory((function(t,e){t.exports={[_$server_224.INVENTORY_ITEMS]:function(t){let e=1;this.inventoryItemsCount=255&t[e++];for(let i=0;i<this.inventoryItemsCount;i++){const r=_$utility_288.getUnsignedShort(t,e);e+=2,this.inventoryItemId[i]=32767&r,this.inventoryEquipped[i]=r/32768|0,0===_$gameData_212.itemStackable[32767&r]?(this.inventoryItemStackCount[i]=_$utility_288.getStackInt(t,e),this.inventoryItemStackCount[i]>=128?e+=4:e++):this.inventoryItemStackCount[i]=1}},[_$server_224.INVENTORY_ITEM_UPDATE]:function(t){let e=1,i=1;const r=255&t[e++],s=_$utility_288.getUnsignedShort(t,e);e+=2,0===_$gameData_212.itemStackable[32767&s]&&((i=_$utility_288.getStackInt(t,e))>=128?e+=4:e++),this.inventoryItemId[r]=32767&s,this.inventoryEquipped[r]=s/32768|0,this.inventoryItemStackCount[r]=i,r>=this.inventoryItemsCount&&(this.inventoryItemsCount=r+1)},[_$server_224.INVENTORY_ITEM_REMOVE]:function(t){const e=255&t[1];this.inventoryItemsCount--;for(let i=e;i<this.inventoryItemsCount;i++)this.inventoryItemId[i]=this.inventoryItemId[i+1],this.inventoryItemStackCount[i]=this.inventoryItemStackCount[i+1],this.inventoryEquipped[i]=this.inventoryEquipped[i+1]}}})),_$duel_229=createModuleFactory((function(t,e){t.exports={[_$server_224.DUEL_OPEN]:function(t){const e=_$utility_288.getUnsignedShort(t,1);this.playerServer[e]&&(this.duelOpponentName=this.playerServer[e].name),this.showDialogDuel=!0,this.duelOfferItemCount=0,this.duelOfferOpponentItemCount=0,this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1,this.duelSettingsRetreat=!1,this.duelSettingsMagic=!1,this.duelSettingsPrayer=!1,this.duelSettingsWeapons=!1},[_$server_224.DUEL_CLOSE]:function(){this.showDialogDuel=!1,this.showDialogDuelConfirm=!1},[_$server_224.DUEL_UPDATE]:function(t){this.duelOfferOpponentItemCount=255&t[1];let e=2;for(let i=0;i<this.duelOfferOpponentItemCount;i++)this.duelOfferOpponentItemId[i]=_$utility_288.getUnsignedShort(t,e),e+=2,this.duelOfferOpponentItemStack[i]=_$utility_288.getUnsignedInt(t,e),e+=4;this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1},[_$server_224.DUEL_SETTINGS]:function(t){this.duelSettingsRetreat=!!t[1],this.duelSettingsMagic=!!t[2],this.duelSettingsPrayer=!!t[3],this.duelSettingsWeapons=!!t[4],this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1},[_$server_224.DUEL_OPPONENT_ACCEPTED]:function(t){this.duelOfferOpponentAccepted=!!t[1]},[_$server_224.DUEL_ACCEPTED]:function(t){this.duelOfferAccepted=!!t[1]},[_$server_224.DUEL_CONFIRM_OPEN]:function(t){this.showDialogDuelConfirm=!0,this.duelAccepted=!1,this.showDialogDuel=!1;let e=1;this.duelOpponentNameHash=_$utility_288.getUnsignedLong(t,e),e+=8,this.duelOpponentItemsCount=255&t[e++];for(let i=0;i<this.duelOpponentItemsCount;i++)this.duelOpponentItems[i]=_$utility_288.getUnsignedShort(t,e),e+=2,this.duelOpponentItemCount[i]=_$utility_288.getUnsignedInt(t,e),e+=4;this.duelItemsCount=255&t[e++];for(let i=0;i<this.duelItemsCount;i++)this.duelItems[i]=_$utility_288.getUnsignedShort(t,e),e+=2,this.duelItemCount[i]=_$utility_288.getUnsignedInt(t,e),e+=4;this.duelOptionRetreat=255&t[e++],this.duelOptionMagic=255&t[e++],this.duelOptionPrayer=255&t[e++],this.duelOptionWeapons=255&t[e++]}}})),_$death_228=createModuleFactory((function(t,e){t.exports={[_$server_224.PLAYER_DIED]:function(){this.deathScreenTimeout=250}}})),_$closeConnection_227=createModuleFactory((function(t,e){t.exports={[_$server_224.CLOSE_CONNECTION]:function(){this.closeConnection()}}})),_$bank_226=createModuleFactory((function(t,e){t.exports={[_$server_224.BANK_OPEN]:function(t){this.showDialogBank=!0;let e=1;this.newBankItemCount=255&t[e++],this.bankItemsMax=255&t[e++];for(let i=0;i<this.newBankItemCount;i++)this.newBankItems[i]=_$utility_288.getUnsignedShort(t,e),e+=2,this.newBankItemsCount[i]=_$utility_288.getStackInt(t,e),this.newBankItemsCount[i]>=128?e+=4:e++;this.updateBankItems()},[_$server_224.BANK_CLOSE]:function(){this.showDialogBank=!1},[_$server_224.BANK_UPDATE]:function(t){let e=1;const i=255&t[e++],r=_$utility_288.getUnsignedShort(t,e);e+=2;const s=_$utility_288.getStackInt(t,e);if(s>=128?e+=4:e++,0===s){this.newBankItemCount--;for(let t=i;t<this.newBankItemCount;t++)this.newBankItems[t]=this.newBankItems[t+1],this.newBankItemsCount[t]=this.newBankItemsCount[t+1]}else this.newBankItems[i]=r,this.newBankItemsCount[i]=s,i>=this.newBankItemCount&&(this.newBankItemCount=i+1);this.updateBankItems()}}})),_$appearance_225=createModuleFactory((function(t,e){t.exports={[_$server_224.APPEARANCE]:function(){this.showAppearanceChange=!0}}})),_$ui_265=createModuleFactory((function(t,e){t.exports=function(t){const e=((i=_$ui_265({}))._colours=_$_colours_260({}),i["appearance-panel"]=_$appearancePanel_261({}),i["bank-dialog"]=_$bankDialog_262({}),i["chat-message-tabs"]=_$chatMessageTabs_263({}),i["combat-style"]=_$combatStyle_264({}),i.index=_$ui_265({}),i["inventory-tab"]=_$inventoryTab_266({}),i["login-panels"]=_$loginPanels_267({}),i["logout-dialog"]=_$logoutDialog_268({}),i["magic-tab"]=_$magicTab_269({}),i["minimap-tab"]=_$minimapTab_270({}),i["mobile-ui"]=_$mobileUi_271({}),i["option-menu"]=_$optionMenu_272({}),i["options-tab"]=_$optionsTab_273({}),i["password-dialog"]=_$passwordDialog_274({}),i["player-info-tab"]=_$playerInfoTab_275({}),i["recovery-panel"]=_$recoveryPanel_276({}),i["report-dialog"]=_$reportDialog_277({}),i["server-message-dialog"]=_$serverMessageDialog_278({}),i["set-active-ui-tab"]=_$setActiveUiTab_279({}),i["shop-dialog"]=_$shopDialog_280({}),i.sleep=_$sleep_281({}),i["social-dialog"]=_$socialDialog_282({}),i["social-tab"]=_$socialTab_283({}),i["trade-confirm-dialog"]=_$tradeConfirmDialog_284({}),i["trade-dialog"]=_$tradeDialog_285({}),i["welcome-dialog"]=_$welcomeDialog_286({}),i["wilderness-dialog"]=_$wildernessDialog_287({}),i);var i;for(const[r,s]of Object.entries(e))if(!/^_|index/.test(r))for(const[e,i]of Object.entries(s))t[e]="function"==typeof i?i.bind(t):i}})),_$wildernessDialog_287=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={showUiWildWarn:0,drawDialogWildWarn:function(){let t=97;this.surface.drawBox(86,77,340,180,i.black),this.surface.drawBoxEdge(86,77,340,180,i.white),this.surface.drawStringCenter("Warning! Proceed with caution",256,t,4,i.red),t+=26,this.surface.drawStringCenter("If you go much further north you will enter the",256,t,1,i.white),t+=13,this.surface.drawStringCenter("wilderness. This a very dangerous area where",256,t,1,i.white),t+=13,this.surface.drawStringCenter("other players can attack you!",256,t,1,i.white),t+=22,this.surface.drawStringCenter("The further north you go the more dangerous it",256,t,1,i.white),t+=13,this.surface.drawStringCenter("becomes, but the more treasure you will find.",256,t,1,i.white),t+=22,this.surface.drawStringCenter("In the wilderness an indicator at the bottom-right",256,t,1,i.white),t+=13,this.surface.drawStringCenter("of the screen will show the current level of danger",256,t,1,i.white),t+=22;let e=i.white;this.mouseY>t-12&&this.mouseY<=t&&this.mouseX>181&&this.mouseX<331&&(e=i.red),this.surface.drawStringCenter("Click here to close window",256,t,1,e),0!==this.mouseButtonClick&&(this.mouseY>t-12&&this.mouseY<=t&&this.mouseX>181&&this.mouseX<331&&(this.showUiWildWarn=2),(this.mouseX<86||this.mouseX>426||this.mouseY<77||this.mouseY>257)&&(this.showUiWildWarn=2),this.mouseButtonClick=0)}}})),_$welcomeDialog_286=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawDialogWelcome:function(){let t=65;201!==this.welcomeRecoverySetDays&&(t+=60),this.welcomeUnreadMessages>0&&(t+=60),0!==this.welcomeLastLoggedInIP&&(t+=45);let e=167-(t/2|0);this.surface.drawBox(56,167-(t/2|0),400,t,0),this.surface.drawBoxEdge(56,167-(t/2|0),400,t,i.white),e+=20,this.surface.drawStringCenter("Welcome to RuneScape "+this.loginUser,256,e,4,i.yellow),e+=30;let r=null;if(r=0===this.welcomeLastLoggedInDays?"earlier today":1===this.welcomeLastLoggedInDays?"yesterday":this.welcomeLastLoggedInDays+" days ago",0!==this.welcomeLastLoggedInIP&&(this.surface.drawStringCenter("You last logged in "+r,256,e,1,i.white),e+=15,null===this.welcomeLastLoggedInHost&&(this.welcomeLastLoggedInHost=this.getHostnameIP(this.welcomeLastLoggedInIP)),this.surface.drawStringCenter("from: "+this.welcomeLastLoggedInHost,256,e,1,i.white),e+=15,e+=15),this.welcomeUnreadMessages>0){const t=i.white;this.surface.drawStringCenter("Jagex staff will NEVER email you. We use the",256,e,1,t),e+=15,this.surface.drawStringCenter("message-centre on this website instead.",256,e,1,t),e+=15,1===this.welcomeUnreadMessages?this.surface.drawStringCenter("You have @yel@0@whi@ unread messages in your message-centre",256,e,1,i.white):this.surface.drawStringCenter("You have @gre@"+(this.welcomeUnreadMessages-1)+" unread messages @whi@in your message-centre",256,e,1,i.white),e+=15,e+=15}if(201!==this.welcomeRecoverySetDays){if(200===this.welcomeRecoverySetDays)this.surface.drawStringCenter("You have not yet set any password recovery questions.",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("We strongly recommend you do so now to secure your account.",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("Do this from the 'account management' area on our front webpage",256,e,1,i.orange),e+=15;else{let t=null;t=0===this.welcomeRecoverySetDays?"Earlier today":1===this.welcomeRecoverySetDays?"Yesterday":this.welcomeRecoverySetDays+" days ago",this.surface.drawStringCenter(t+" you changed your recovery questions",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("If you do not remember making this change then cancel it immediately",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("Do this from the 'account management' area on our front webpage",256,e,1,i.orange),e+=15}e+=15}let s=i.white;this.mouseY>e-12&&this.mouseY<=e&&this.mouseX>106&&this.mouseX<406&&(s=i.red),this.surface.drawStringCenter("Click here to close window",256,e,1,s),1===this.mouseButtonClick&&(s===i.red&&(this.showDialogWelcome=!1),(this.mouseX<86||this.mouseX>426)&&(this.mouseY<167-(t/2|0)||this.mouseY>167+(t/2|0))&&(this.showDialogWelcome=!1)),this.mouseButtonClick=0},showDialogWelcome:!1}})),_$tradeDialog_285=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawDialogTrade:function(){if(0!==this.mouseButtonClick&&0===this.mouseButtonItemCountIncrement&&(this.mouseButtonItemCountIncrement=1),this.mouseButtonItemCountIncrement>0){const t=this.mouseX-22,e=this.mouseY-36;if(t>=0&&e>=0&&t<468&&e<262){if(t>216&&e>30&&t<462&&e<235){const i=((t-217)/49|0)+5*((e-31)/34|0);if(i>=0&&i<this.inventoryItemsCount){let t=!1,e=0;const r=this.inventoryItemId[i];for(let s=0;s<this.tradeItemsCount;s++)if(this.tradeItems[s]===r)if(0===_$gameData_212.itemStackable[r])for(let e=0;e<this.mouseButtonItemCountIncrement;e++)this.tradeItemCount[s]<this.inventoryItemStackCount[i]&&this.tradeItemCount[s]++,t=!0;else e++;if(this.getInventoryCount(r)<=e&&(t=!0),1===_$gameData_212.itemSpecial[r]&&(this.showMessage("This object cannot be traded with other players",3),t=!0),!t&&this.tradeItemsCount<12&&(this.tradeItems[this.tradeItemsCount]=r,this.tradeItemCount[this.tradeItemsCount]=1,this.tradeItemsCount++,t=!0),t){this.packetStream.newPacket(_$client_223.TRADE_ITEM_UPDATE),this.packetStream.putByte(this.tradeItemsCount);for(let t=0;t<this.tradeItemsCount;t++)this.packetStream.putShort(this.tradeItems[t]),this.packetStream.putInt(this.tradeItemCount[t]);this.packetStream.sendPacket(),this.tradeRecipientAccepted=!1,this.tradeAccepted=!1}}}if(t>8&&e>30&&t<205&&e<133){const i=((t-9)/49|0)+4*((e-31)/34|0);if(i>=0&&i<this.tradeItemsCount){const t=this.tradeItems[i];for(let e=0;e<this.mouseButtonItemCountIncrement;e++){if(!(0===_$gameData_212.itemStackable[t]&&this.tradeItemCount[i]>1)){this.tradeItemsCount--,this.mouseButtonDownTime=0;for(let t=i;t<this.tradeItemsCount;t++)this.tradeItems[t]=this.tradeItems[t+1],this.tradeItemCount[t]=this.tradeItemCount[t+1];break}this.tradeItemCount[i]--}this.packetStream.newPacket(_$client_223.TRADE_ITEM_UPDATE),this.packetStream.putByte(this.tradeItemsCount);for(let e=0;e<this.tradeItemsCount;e++)this.packetStream.putShort(this.tradeItems[e]),this.packetStream.putInt(this.tradeItemCount[e]);this.packetStream.sendPacket(),this.tradeRecipientAccepted=!1,this.tradeAccepted=!1}}t>=217&&e>=238&&t<=286&&e<=259&&(this.tradeAccepted=!0,this.packetStream.newPacket(_$client_223.TRADE_ACCEPT),this.packetStream.sendPacket()),t>=394&&e>=238&&t<463&&e<259&&(this.showDialogTrade=!1,this.packetStream.newPacket(_$client_223.TRADE_DECLINE),this.packetStream.sendPacket())}else 0!==this.mouseButtonClick&&(this.showDialogTrade=!1,this.packetStream.newPacket(_$client_223.TRADE_DECLINE),this.packetStream.sendPacket());this.mouseButtonClick=0,this.mouseButtonItemCountIncrement=0}if(this.showDialogTrade){this.surface.drawBox(22,36,468,12,192),this.surface.drawBoxAlpha(22,48,468,18,i.grey,160),this.surface.drawBoxAlpha(22,66,8,248,i.grey,160),this.surface.drawBoxAlpha(227,66,11,248,i.grey,160),this.surface.drawBoxAlpha(484,66,6,248,i.grey,160),this.surface.drawBoxAlpha(30,169,197,22,i.grey,160),this.surface.drawBoxAlpha(30,294,197,20,i.grey,160),this.surface.drawBoxAlpha(238,271,246,43,i.grey,160),this.surface.drawBoxAlpha(30,66,197,103,i.lightGrey2,160),this.surface.drawBoxAlpha(30,191,197,103,i.lightGrey2,160),this.surface.drawBoxAlpha(238,66,246,205,i.lightGrey2,160);for(let t=0;t<4;t++)this.surface.drawLineHoriz(30,66+34*t,197,i.black);for(let t=0;t<4;t++)this.surface.drawLineHoriz(30,191+34*t,197,i.black);for(let t=0;t<7;t++)this.surface.drawLineHoriz(238,66+34*t,246,i.black);for(let t=0;t<6;t++)t<5&&(this.surface.drawLineVert(30+49*t,66,103,i.black),this.surface.drawLineVert(30+49*t,191,103,i.black)),this.surface.drawLineVert(238+49*t,66,205,i.black);this.surface.drawString("Trading with: "+this.tradeRecipientName,23,46,1,i.white),this.surface.drawString("Your Offer",31,63,4,i.white),this.surface.drawString("Opponent's Offer",31,188,4,i.white),this.surface.drawString("Your Inventory",238,63,4,i.white),this.tradeAccepted||this.surface._drawSprite_from3(239,274,this.spriteMedia+25),this.surface._drawSprite_from3(416,274,this.spriteMedia+26),this.tradeRecipientAccepted&&(this.surface.drawStringCenter("Other player",363,282,1,i.white),this.surface.drawStringCenter("has accepted",363,292,1,i.white)),this.tradeAccepted&&(this.surface.drawStringCenter("Waiting for",274,282,1,i.white),this.surface.drawStringCenter("other player",274,292,1,i.white));for(let t=0;t<this.inventoryItemsCount;t++){const e=239+t%5*49,r=67+34*(t/5|0);this.surface._spriteClipping_from9(e,r,48,32,this.spriteItem+_$gameData_212.itemPicture[this.inventoryItemId[t]],_$gameData_212.itemMask[this.inventoryItemId[t]],0,0,!1),0===_$gameData_212.itemStackable[this.inventoryItemId[t]]&&this.surface.drawString(this.inventoryItemStackCount[t].toString(),e+1,r+10,1,i.yellow)}for(let t=0;t<this.tradeItemsCount;t++){const e=31+t%4*49,r=67+34*(t/4|0);this.surface._spriteClipping_from9(e,r,48,32,this.spriteItem+_$gameData_212.itemPicture[this.tradeItems[t]],_$gameData_212.itemMask[this.tradeItems[t]],0,0,!1),0===_$gameData_212.itemStackable[this.tradeItems[t]]&&this.surface.drawString(this.tradeItemCount[t].toString(),e+1,r+10,1,i.yellow),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>r&&this.mouseY<r+32&&this.surface.drawString(_$gameData_212.itemName[this.tradeItems[t]]+": @whi@"+_$gameData_212.itemDescription[this.tradeItems[t]],30,309,1,i.yellow)}for(let t=0;t<this.tradeRecipientItemsCount;t++){const e=31+t%4*49,r=192+34*(t/4|0);this.surface._spriteClipping_from9(e,r,48,32,this.spriteItem+_$gameData_212.itemPicture[this.tradeRecipientItems[t]],_$gameData_212.itemMask[this.tradeRecipientItems[t]],0,0,!1),0===_$gameData_212.itemStackable[this.tradeRecipientItems[t]]&&this.surface.drawString(this.tradeRecipientItemCount[t].toString(),e+1,r+10,1,i.yellow),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>r&&this.mouseY<r+32&&this.surface.drawString(_$gameData_212.itemName[this.tradeRecipientItems[t]]+": @whi@"+_$gameData_212.itemDescription[this.tradeRecipientItems[t]],30,309,1,i.yellow)}}},showDialogTrade:!1}})),_$tradeConfirmDialog_284=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawDialogTradeConfirm:function(){this.surface.drawBox(22,36,468,16,192),this.surface.drawBoxAlpha(22,52,468,246,i.grey,160),this.surface.drawStringCenter("Please confirm your trade with @yel@"+_$utility_288.hashToUsername(this.tradeRecipientConfirmHash),256,48,1,i.white),this.surface.drawStringCenter("You are about to give:",139,66,1,i.yellow);for(let t=0;t<this.tradeConfirmItemsCount;t++){let e=_$gameData_212.itemName[this.tradeConfirmItems[t]];0===_$gameData_212.itemStackable[this.tradeConfirmItems[t]]&&(e+=" x "+_$utility_288.formatConfirmAmount(this.tradeConfirmItemCount[t])),this.surface.drawStringCenter(e,139,78+12*t,1,i.white)}0===this.tradeConfirmItemsCount&&this.surface.drawStringCenter("Nothing!",139,78,1,i.white),this.surface.drawStringCenter("In return you will receive:",373,66,1,i.yellow);for(let t=0;t<this.tradeRecipientConfirmItemsCount;t++){let e=_$gameData_212.itemName[this.tradeRecipientConfirmItems[t]];0===_$gameData_212.itemStackable[this.tradeRecipientConfirmItems[t]]&&(e+=" x "+_$utility_288.formatConfirmAmount(this.tradeRecipientConfirmItemCount[t])),this.surface.drawStringCenter(e,373,78+12*t,1,i.white)}0===this.tradeRecipientConfirmItemsCount&&this.surface.drawStringCenter("Nothing!",373,78,1,i.white),this.surface.drawStringCenter("Are you sure you want to do this?",256,236,4,i.cyan),this.surface.drawStringCenter("There is NO WAY to reverse a trade if you change your mind.",256,251,1,i.white),this.surface.drawStringCenter("Remember that not all players are trustworthy",256,266,1,i.white),this.tradeConfirmAccepted?this.surface.drawStringCenter("Waiting for other player...",256,286,1,i.yellow):(this.surface._drawSprite_from3(105,274,this.spriteMedia+25),this.surface._drawSprite_from3(339,274,this.spriteMedia+26)),1===this.mouseButtonClick&&((this.mouseX<22||this.mouseY<36||this.mouseX>490||this.mouseY>298)&&(this.showDialogTradeConfirm=!1,this.packetStream.newPacket(_$client_223.TRADE_DECLINE),this.packetStream.sendPacket()),this.mouseX>=105&&this.mouseX<=210&&this.mouseY>=274&&this.mouseY<=295&&(this.tradeConfirmAccepted=!0,this.packetStream.newPacket(_$client_223.TRADE_CONFIRM_ACCEPT),this.packetStream.sendPacket()),this.mouseX>=339&&this.mouseX<=445&&this.mouseY>=274&&this.mouseY<=295&&(this.showDialogTradeConfirm=!1,this.packetStream.newPacket(_$client_223.TRADE_DECLINE),this.packetStream.sendPacket()),this.mouseButtonClick=0)},showDialogTradeConfirm:!1}})),_$socialTab_283=createModuleFactory((function(t,e){const i=_$_colours_260({}),r=["Friends","Ignore"];t.exports={drawUiTabSocial:function(t){let e=this.gameWidth-196-3,s=36;if(this.options.mobile?(e=35,s=this.gameHeight/2-91):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+5),this.uiOpenX=e,this.uiOpenY=s,this.uiOpenWidth=196,this.uiOpenHeight=182,this.surface.drawBoxAlpha(e,s+24,196,158,i.lightGrey,128),this.surface.drawLineHoriz(e,s+182-16,196,i.black),this.surface.drawTabs(e,s,196,24,r,this.uiTabSocialSubTab),this.panelSocialList.clearList(this.controlListSocialPlayers),0===this.uiTabSocialSubTab)for(let i=0;i<this.friendListCount;i++){let t=null;t=255===this.friendListOnline[i]?"@gre@":this.friendListOnline[i]>0?"@yel@":"@red@",this.panelSocialList.addListEntry(this.controlListSocialPlayers,i,`${t}${_$utility_288.hashToUsername(this.friendListHashes[i])}~${e+126}~@whi@Remove`)}else if(1===this.uiTabSocialSubTab)for(let i=0;i<this.ignoreListCount;i++)this.panelSocialList.addListEntry(this.controlListSocialPlayers,i,"@yel@"+_$utility_288.hashToUsername(this.ignoreList[i])+`~${e+126}~@whi@Remove`);this.panelSocialList.drawPanel();const n=this.options.mobile?"Tap":"Click";if(0===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);if(t>=0&&this.mouseX<e+176){const r=_$utility_288.hashToUsername(this.friendListHashes[t]);this.mouseX>e+116?this.surface.drawStringCenter(`${n} to remove ${r}`,e+98,s+35,1,i.white):255===this.friendListOnline[t]?this.surface.drawStringCenter(`${n} to message ${r}`,e+98,s+35,1,i.white):this.friendListOnline[t]>0?this.friendListOnline[t]<200?this.surface.drawStringCenter(r+" is on world "+(this.friendListOnline[t]-9),e+98,s+35,1,i.white):this.surface.drawStringCenter(r+" is on classic "+(this.friendListOnline[t]-219),e+98,s+35,1,i.white):this.surface.drawStringCenter(r+" is offline",e+98,s+35,1,i.white)}else this.surface.drawStringCenter(n+" a name to send a message",e+98,s+35,1,i.white);let r=i.black;r=this.mouseX>e&&this.mouseX<e+196&&this.mouseY>s+182-16&&this.mouseY<s+182?i.yellow:i.white,this.surface.drawStringCenter(n+" here to add a friend",e+98,s+182-3,1,r)}else if(1===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);t>=0&&this.mouseX<e+176&&this.mouseX>e+116?this.mouseX>e+116&&this.surface.drawStringCenter(n+" to remove "+_$utility_288.hashToUsername(this.ignoreList[t]),e+98,s+35,1,i.white):this.surface.drawStringCenter("Blocking messages from:",e+98,s+35,1,i.white);let r=i.black;r=this.mouseX>e&&this.mouseX<e+196&&this.mouseY>s+182-16&&this.mouseY<s+182?i.yellow:i.white,this.surface.drawStringCenter(n+" here to add a name",e+98,s+182-3,1,r)}if(!t)return;const o=this.mouseX-e,a=this.mouseY-s;if(o>=0&&a>=0&&o<196&&a<182){if(this.panelSocialList.handleMouse(o+e,a+s,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),a<=24&&1===this.mouseButtonClick&&(o<98&&1===this.uiTabSocialSubTab?(this.uiTabSocialSubTab=0,this.panelSocialList.resetListProps(this.controlListSocialPlayers)):o>98&&0===this.uiTabSocialSubTab&&(this.uiTabSocialSubTab=1,this.panelSocialList.resetListProps(this.controlListSocialPlayers))),1===this.mouseButtonClick&&0===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);t>=0&&o<176&&(o>116?this.friendRemove(this.friendListHashes[t]):0!==this.friendListOnline[t]&&(this.showDialogSocialInput=2,this.privateMessageTarget=this.friendListHashes[t],this.inputPMCurrent="",this.inputPMFinal=""))}if(1===this.mouseButtonClick&&1===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);t>=0&&o<176&&o>116&&this.ignoreRemove(this.ignoreList[t])}a>166&&1===this.mouseButtonClick&&(this.inputTextCurrent="",this.inputTextFinal="",0===this.uiTabSocialSubTab?this.showDialogSocialInput=1:1===this.uiTabSocialSubTab&&(this.showDialogSocialInput=3)),this.mouseButtonClick=0}},uiTabSocialSubTab:0}})),_$socialDialog_282=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawDialogSocialInput:function(){if(0!==this.mouseButtonClick){if(this.mouseButtonClick=0,1===this.showDialogSocialInput&&(this.mouseX<106||this.mouseY<145||this.mouseX>406||this.mouseY>215))return void(this.showDialogSocialInput=0);if(2===this.showDialogSocialInput&&(this.mouseX<6||this.mouseY<145||this.mouseX>506||this.mouseY>215))return void(this.showDialogSocialInput=0);if(3===this.showDialogSocialInput&&(this.mouseX<106||this.mouseY<145||this.mouseX>406||this.mouseY>215))return void(this.showDialogSocialInput=0);if(this.mouseX>236&&this.mouseX<276&&this.mouseY>193&&this.mouseY<213)return void(this.showDialogSocialInput=0)}let t=145;if(1===this.showDialogSocialInput){if(this.surface.drawBox(106,t,300,70,0),this.surface.drawBoxEdge(106,t,300,70,i.white),t+=20,this.surface.drawStringCenter("Enter name to add to friends list",256,t,4,i.white),t+=20,this.surface.drawStringCenter(this.inputTextCurrent+"*",256,t,4,i.white),this.inputTextFinal.length>0){const t=this.inputTextFinal.trim(),e=_$utility_288.usernameToHash(t);this.inputTextCurrent="",this.inputTextFinal="",this.showDialogSocialInput=0,t.length>0&&!e.equals(this.localPlayer.hash)&&this.friendAdd(t)}}else if(2===this.showDialogSocialInput){this.surface.drawBox(6,t,500,70,0),this.surface.drawBoxEdge(6,t,500,70,i.white),t+=20;const e=_$utility_288.hashToUsername(this.privateMessageTarget);if(this.surface.drawStringCenter("Enter message to send to "+e,256,t,4,i.white),t+=20,this.surface.drawStringCenter(this.inputPMCurrent+"*",256,t,4,i.white),this.inputPMFinal.length>0){let t=this.inputPMFinal;this.inputPMCurrent="",this.inputPMFinal="",this.showDialogSocialInput=0;const i=_$chatMessage_208.scramble(t);this.sendPrivateMessage(this.privateMessageTarget,_$chatMessage_208.scrambledBytes,i),t=_$chatMessage_208.descramble(_$chatMessage_208.scrambledBytes,0,i),this.options.wordFilter&&(t=_$wordFilter_290.filter(t)),this.showServerMessage(`@pri@You tell ${e}: ${t}`)}}else if(3===this.showDialogSocialInput&&(this.surface.drawBox(106,t,300,70,0),this.surface.drawBoxEdge(106,t,300,70,i.white),t+=20,this.surface.drawStringCenter("Enter name to add to ignore list",256,t,4,i.white),t+=20,this.surface.drawStringCenter(this.inputTextCurrent+"*",256,t,4,i.white),this.inputTextFinal.length>0)){const t=this.inputTextFinal.trim(),e=_$utility_288.usernameToHash(t);this.inputTextCurrent="",this.inputTextFinal="",this.showDialogSocialInput=0,t.length>0&&!e.equals(this.localPlayer.hash)&&this.ignoreAdd(t)}let e=i.white;this.mouseX>236&&this.mouseX<276&&this.mouseY>193&&this.mouseY<213&&(e=i.yellow),this.surface.drawStringCenter("Cancel",256,208,1,e)},resetPMText:function(){this.inputPMCurrent="",this.inputPMFinal=""},showDialogSocialInput:0}})),_$sleep_281=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawSleep:function(){this.surface.fadeToBlack(),Math.random()<=.15&&this.surface.drawStringCenter("ZZZ",80*Math.random()|0,Math.random()*this.gameHeight|0,5,Math.random()*i.white|0),Math.random()<=.15&&this.surface.drawStringCenter("ZZZ",this.gameWidth-(80*Math.random()|0),Math.random()*this.gameHeight|0,5,Math.random()*i.white|0),this.surface.drawBox((this.gameWidth/2|0)-100,160,200,40,i.black),this.surface.drawStringCenter("You are sleeping",this.gameWidth/2|0,50,7,i.yellow),this.surface.drawStringCenter(`Fatigue: ${100*this.fatigueSleeping/750|0}%`,this.gameWidth/2|0,90,7,i.yellow),this.surface.drawStringCenter("When you want to wake up just use your",this.gameWidth/2|0,140,5,i.white),this.surface.drawStringCenter("keyboard to type the word in the box below",this.gameWidth/2|0,160,5,i.white),this.surface.drawStringCenter(this.inputTextCurrent+"*",this.gameWidth/2|0,180,5,i.cyan),null===this.sleepingStatusText?this.surface._drawSprite_from3((this.gameWidth/2|0)-127,230,this.spriteTexture+1):this.surface.drawStringCenter(this.sleepingStatusText,this.gameWidth/2|0,260,5,i.red),this.surface.drawBoxEdge((this.gameWidth/2|0)-128,229,257,42,i.white),this.drawChatMessageTabs(),this.surface.drawStringCenter("If you can't read the word",this.gameWidth/2|0,290,1,i.white),this.surface.drawStringCenter(`@yel@${this.options.mobile?"tap":"click"} here@whi@ to get a different one`,this.gameWidth/2|0,305,1,i.white),this.surface.draw(this.graphics,0,0)},handleSleepInput:function(){this.inputTextFinal.length>0&&(/^::lostcon$/i.test(this.inputTextFinal)?this.packetStream.closeStream():/^::closecon$/.test(this.inputTextFinal)?this.closeConnection():(this.packetStream.newPacket(_$client_223.SLEEP_WORD),this.packetStream.putString(this.inputTextFinal),this.sleepWordDelay||(this.packetStream.putByte(0),this.sleepWordDelay=!0),this.packetStream.sendPacket(),this.inputTextCurrent="",this.inputTextFinal="",this.sleepingStatusText="Please wait...")),1===this.lastMouseButtonDown&&this.mouseY>275&&this.mouseY<310&&this.mouseX>56&&this.mouseX<456&&(this.packetStream.newPacket(_$client_223.SLEEP_WORD),this.packetStream.putString("-null-"),this.sleepWordDelay||(this.packetStream.putByte(0),this.sleepWordDelay=!0),this.packetStream.sendPacket(),this.inputTextCurrent="",this.inputTextFinal="",this.sleepingStatusText="Please wait..."),this.lastMouseButtonDown=0},isSleeping:!1}})),_$shopDialog_280=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawDialogShop:function(){if(0!==this.mouseButtonClick){this.mouseButtonClick=0;const t=this.mouseX-52,e=this.mouseY-44;if(!(t>=0&&e>=12&&t<408&&e<246))return this.packetStream.newPacket(_$client_223.SHOP_CLOSE),this.packetStream.sendPacket(),void(this.showDialogShop=!1);{let i=0;for(let r=0;r<5;r++)for(let s=0;s<8;s++){const n=7+49*s,o=28+34*r;t>n&&t<n+49&&e>o&&e<o+34&&-1!==this.shopItem[i]&&(this.shopSelectedItemIndex=i,this.shopSelectedItemType=this.shopItem[i]),i++}if(this.shopSelectedItemIndex>=0){const i=this.shopItem[this.shopSelectedItemIndex];if(-1!==i){if(this.shopItemCount[this.shopSelectedItemIndex]>0&&t>298&&e>=204&&t<408&&e<=215){let t=this.shopBuyPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];t<10&&(t=10);const e=t*_$gameData_212.itemBasePrice[i]/100|0;this.packetStream.newPacket(_$client_223.SHOP_BUY),this.packetStream.putShort(this.shopItem[this.shopSelectedItemIndex]),this.packetStream.putInt(e),this.packetStream.sendPacket()}if(this.getInventoryCount(i)>0&&t>2&&e>=229&&t<112&&e<=240){let t=this.shopSellPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];t<10&&(t=10);const e=t*_$gameData_212.itemBasePrice[i]/100|0;this.packetStream.newPacket(_$client_223.SHOP_SELL),this.packetStream.putShort(this.shopItem[this.shopSelectedItemIndex]),this.packetStream.putInt(e),this.packetStream.sendPacket()}}}}}this.surface.drawBox(52,44,408,12,192),this.surface.drawBoxAlpha(52,56,408,17,i.grey,160),this.surface.drawBoxAlpha(52,73,8,170,i.grey,160),this.surface.drawBoxAlpha(451,73,9,170,i.grey,160),this.surface.drawBoxAlpha(52,243,408,47,i.grey,160),this.surface.drawString("Buying and selling items",53,54,1,i.white);let t=i.white;this.mouseX>372&&this.mouseY>=44&&this.mouseX<460&&this.mouseY<56&&(t=i.red),this.surface.drawStringRight("Close window",458,54,1,t),this.surface.drawString("Shops stock in green",54,68,1,i.green),this.surface.drawString("Number you own in blue",187,68,1,i.cyan),this.surface.drawString(`Your money: ${this.getInventoryCount(10)}gp`,332,68,1,i.yellow);let e=0;for(let s=0;s<5;s++)for(let t=0;t<8;t++){const r=59+49*t,n=72+34*s;this.shopSelectedItemIndex===e?this.surface.drawBoxAlpha(r,n,49,34,i.red,160):this.surface.drawBoxAlpha(r,n,49,34,i.lightGrey2,160),this.surface.drawBoxEdge(r,n,50,35,0),-1!==this.shopItem[e]&&(this.surface._spriteClipping_from9(r,n,48,32,this.spriteItem+_$gameData_212.itemPicture[this.shopItem[e]],_$gameData_212.itemMask[this.shopItem[e]],0,0,!1),this.surface.drawString(this.shopItemCount[e].toString(),r+1,n+10,1,i.green),this.surface.drawStringRight(this.getInventoryCount(this.shopItem[e]).toString(),r+47,n+10,1,i.cyan)),e++}if(this.surface.drawLineHoriz(57,266,398,0),-1===this.shopSelectedItemIndex)return void this.surface.drawStringCenter("Select an object to buy or sell",256,258,3,i.yellow);const r=this.shopItem[this.shopSelectedItemIndex];if(-1!==r){if(this.shopItemCount[this.shopSelectedItemIndex]>0){let e=this.shopBuyPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];e<10&&(e=10);const s=e*_$gameData_212.itemBasePrice[r]/100|0;this.surface.drawString(`Buy a new ${_$gameData_212.itemName[r]} for `+s+"gp",54,258,1,i.yellow),t=i.white,this.mouseX>350&&this.mouseY>=248&&this.mouseX<460&&this.mouseY<=259&&(t=i.red),this.surface.drawStringRight("Click here to buy",457,258,3,t)}else this.surface.drawStringCenter("This item is not currently available to buy",256,258,3,i.yellow);if(this.getInventoryCount(r)>0){let e=this.shopSellPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];e<10&&(e=10);const s=e*_$gameData_212.itemBasePrice[r]/100|0;return this.surface.drawStringRight(`Sell your ${_$gameData_212.itemName[r]} for `+s+"gp",457,283,1,i.yellow),t=i.white,this.mouseX>54&&this.mouseY>=273&&this.mouseX<164&&this.mouseY<=284&&(t=i.red),void this.surface.drawString("Click here to sell",54,283,3,t)}this.surface.drawStringCenter("You do not have any of this item to sell",256,283,3,i.yellow)}}}})),_$setActiveUiTab_279=createModuleFactory((function(t,e){t.exports={setActiveUITab:function(){0===this.showUITab&&this.mouseX>=this.gameWidth-35&&this.mouseY>=3&&this.mouseX<this.gameWidth-3&&this.mouseY<35&&(this.showUITab=1),0===this.showUITab&&this.mouseX>=this.gameWidth-35-33&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-33&&this.mouseY<35&&(this.showUITab=2,this.minimapRandom1=(13*Math.random()|0)-6,this.minimapRandom2=(23*Math.random()|0)-11),0===this.showUITab&&this.mouseX>=this.gameWidth-35-66&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-66&&this.mouseY<35&&(this.showUITab=3),0===this.showUITab&&this.mouseX>=this.gameWidth-35-99&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-99&&this.mouseY<35&&(this.showUITab=4),0===this.showUITab&&this.mouseX>=this.gameWidth-35-132&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-132&&this.mouseY<35&&(this.showUITab=5),0===this.showUITab&&this.mouseX>=this.gameWidth-35-165&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-165&&this.mouseY<35&&(this.showUITab=6),0!==this.showUITab&&this.mouseX>=this.gameWidth-35&&this.mouseY>=3&&this.mouseX<this.gameWidth-3&&this.mouseY<26&&(this.showUITab=1),0!==this.showUITab&&2!==this.showUITab&&this.mouseX>=this.gameWidth-35-33&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-33&&this.mouseY<26&&(this.showUITab=2,this.minimapRandom1=(13*Math.random()|0)-6,this.minimapRandom2=(23*Math.random()|0)-11),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-66&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-66&&this.mouseY<26&&(this.showUITab=3),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-99&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-99&&this.mouseY<26&&(this.showUITab=4),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-132&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-132&&this.mouseY<26&&(this.showUITab=5),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-165&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-165&&this.mouseY<26&&(this.showUITab=6),1===this.showUITab&&(this.mouseX<this.gameWidth-248||this.mouseY>36+34*(this.inventoryMaxItemCount/5|0))&&(this.showUITab=0),3===this.showUITab&&(this.mouseX<this.gameWidth-199||this.mouseY>316)&&(this.showUITab=0),2!==this.showUITab&&4!==this.showUITab&&5!==this.showUITab||!(this.mouseX<this.gameWidth-199||this.mouseY>240)||(this.showUITab=0),6===this.showUITab&&(this.mouseX<this.gameWidth-199||this.mouseY>311)&&(this.showUITab=0)},setActiveMobileUITab:function(){const t=this.gameWidth-32-3,e=this.gameHeight/2-49;let i=e;for(let r=0;r<6;r+=1){const s=r>2?3:t;if(this.mouseX>=s&&this.mouseX<=s+32&&this.mouseY>=i&&this.mouseY<=i+32){if(0===this.showUITab)return void(this.showUITab=r+1);if(this.showUITab===r+1)return}2===r?i=e:i+=33}0!==this.showUITab&&(this.mouseX<this.uiOpenX||this.mouseX>this.uiOpenX+this.uiOpenWidth||this.mouseY<this.uiOpenY||this.mouseY>this.uiOpenY+this.uiOpenHeight)&&(this.showUITab=0)}}})),_$serverMessageDialog_278=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={serverMessageBoxTop:!1,drawDialogServerMessage:function(){let t=100;this.serverMessageBoxTop&&(t=450,t=300),this.surface.drawBox(56,167-(t/2|0),400,t,i.black),this.surface.drawBoxEdge(56,167-(t/2|0),400,t,i.white),this.surface.drawParagraph(this.serverMessage,256,167-(t/2|0)+20,1,i.white,360);const e=157+(t/2|0);let r=i.white;this.mouseY>e-12&&this.mouseY<=e&&this.mouseX>106&&this.mouseX<406&&(r=i.red),this.surface.drawStringCenter("Click here to close window",256,e,1,r),1===this.mouseButtonClick&&(r===i.red&&(this.showDialogServerMessage=!1),(this.mouseX<56||this.mouseX>456)&&(this.mouseY<167-(t/2|0)||this.mouseY>167+(t/2|0))&&(this.showDialogServerMessage=!1)),this.mouseButtonClick=0}}})),_$reportDialog_277=createModuleFactory((function(t,e){const i=_$_colours_260({}),r=["Offensive language","Item scamming","Password scamming","Bug abuse","Jagex Staff impersonation","Account sharing/trading","Macroing","Mutiple logging in","Encouraging others to break rules","Misuse of customer support","Advertising / website","Real world item trading"];t.exports={drawDialogReportAbuse:function(){this.reportAbuseOffence=0;let t=135;for(let i=0;i<12;i++)this.mouseX>66&&this.mouseX<446&&this.mouseY>=t-12&&this.mouseY<t+3&&(this.reportAbuseOffence=i+1),t+=14;if(0!==this.mouseButtonClick&&0!==this.reportAbuseOffence)return this.mouseButtonClick=0,this.showDialogReportAbuseStep=2,this.inputTextCurrent="",void(this.inputTextFinal="");if(t+=15,0!==this.mouseButtonClick){if(this.mouseButtonClick=0,this.mouseX<56||this.mouseY<35||this.mouseX>456||this.mouseY>325)return void(this.showDialogReportAbuseStep=0);if(this.mouseX>66&&this.mouseX<446&&this.mouseY>=t-15&&this.mouseY<t+5)return void(this.showDialogReportAbuseStep=0)}this.surface.drawBox(56,35,400,290,i.black),this.surface.drawBoxEdge(56,35,400,290,i.white),t=50,this.surface.drawStringCenter("This form is for reporting players who are breaking our rules",256,t,1,i.white),t+=15,this.surface.drawStringCenter("Using it sends a snapshot of the last 60 secs of activity to us",256,t,1,i.white),t+=15,this.surface.drawStringCenter("If you misuse this form you will be banned",256,t,1,i.orange),t+=25,this.surface.drawStringCenter("First indicate which of our 12 rules is being broken. For a detailed",256,t,1,i.yellow),t+=15,this.surface.drawStringCenter("explanation of each rule please read the manual on our website.",256,t,1,i.yellow),t+=15;for(let s=1;s<r.length+1;s+=1){let e=i.black;this.reportAbuseOffence===s?(this.surface.drawBoxEdge(66,t-12,380,15,i.white),e=i.orange):e=i.white;const n=r[s-1];this.surface.drawStringCenter(`${s}: ${n}`,256,t,1,e),t+=14}t+=15;let e=i.white;this.mouseX>196&&this.mouseX<316&&this.mouseY>t-15&&this.mouseY<t+5&&(e=i.yellow),this.surface.drawStringCenter("Click here to cancel",256,t,1,e)},drawDialogReportAbuseInput:function(){if(this.inputTextFinal.length>0){const t=this.inputTextFinal.trim();if(this.inputTextCurrent="",this.inputTextFinal="",t.length>0){const e=_$utility_288.usernameToHash(t);this.packetStream.newPacket(_$client_223.REPORT_ABUSE),this.packetStream.putLong(e),this.packetStream.putByte(this.reportAbuseOffence),this.packetStream.putByte(this.reportAbuseMute?1:0),this.packetStream.sendPacket()}return void(this.showDialogReportAbuseStep=0)}this.surface.drawBox(56,130,400,100,i.black),this.surface.drawBoxEdge(56,130,400,100,i.white);let t=160;if(this.surface.drawStringCenter("Now type the name of the offending player, and press enter",256,t,1,i.yellow),t+=18,this.surface.drawStringCenter(`Name: ${this.inputTextCurrent}*`,256,t,4,i.white),this.moderatorLevel>0){t=207;let e=i.white,r="OFF";this.reportAbuseMute&&(e=i.orange,r="ON"),this.surface.drawStringCenter(`Moderator option: Mute player for 48 hours: <${r}>`,256,t,1,e),this.mouseX>106&&this.mouseX<406&&this.mouseY>t-13&&this.mouseY<t+2&&1===this.mouseButtonClick&&(this.mouseButtonClick=0,this.reportAbuseMute=!this.reportAbuseMute)}t=222;let e=i.white;this.mouseX>196&&this.mouseX<316&&this.mouseY>t-13&&this.mouseY<t+2&&(e=i.yellow,1===this.mouseButtonClick&&(this.mouseButtonClick=0,this.showDialogReportAbuseStep=0)),this.surface.drawStringCenter("Click here to cancel",256,t,1,e),1===this.mouseButtonClick&&(this.mouseX<56||this.mouseX>456||this.mouseY<130||this.mouseY>230)&&(this.mouseButtonClick=0,this.showDialogReportAbuseStep=0)},reportAbuseMute:!1,reportAbuseOffence:0,showDialogReportAbuseStep:0}})),_$recoveryPanel_276=createModuleFactory((function(t,e){const i=[];i.length=5,i.fill(null),t.exports={selectedRecoverQuestions:i,selectedRecoverIDs:new Int32Array([0,1,2,3,4]),controlRecoverNewQuestions:new Int32Array(5),controlRecoverNewAnswers:new Int32Array(5),controlRecoverNewQuestionButtons:new Int32Array(5),controlRecoverCustomQuestionButtons:new Int32Array(5),controlRecoverCreateButton:0}})),_$playerInfoTab_275=createModuleFactory((function(t,e){const i=_$_colours_260({}),r=["Stats","Quests"],s=["Attack","Defense","Strength","Hits","Ranged","Prayer","Magic","Cooking","Woodcut","Fletching","Fishing","Firemaking","Crafting","Smithing","Mining","Herblaw","Agility","Thieving"],n=["Attack","Defense","Strength","Hits","Ranged","Prayer","Magic","Cooking","Woodcutting","Fletching","Fishing","Firemaking","Crafting","Smithing","Mining","Herblaw","Agility","Thieving"],o=["Armour","WeaponAim","WeaponPower","Magic","Prayer"],a=[];let h=0;for(let c=0;c<99;c++){const t=c+1;h+=t+300*Math.pow(2,t/7)|0,a[c]=268435452&h}const u=["Witch's house","Lost city","Hero's quest","Druidic ritual","Merlin's crystal","Scorpion catcher","Family crest","Tribal totem","Fishing contest","Monk's friend","Temple of Ikov","Clock tower","The Holy Grail","Fight Arena","Tree Gnome Village","The Hazeel Cult","Sheep Herder","Plague City","Sea Slug","Waterfall quest","Biohazard","Jungle potion","Grand tree","Shilo village","Underground pass","Observatory quest","Tourist trap","Watchtower","Dwarf Cannon","Murder Mystery","Digsite","Gertrude's Cat","Legend's Quest"].map(t=>t+" (members)"),l=["Black knight's fortress","Cook's assistant","Demon slayer","Doric's quest","The restless ghost","Goblin diplomacy","Ernest the chicken","Imp catcher","Pirate's treasure","Prince Ali rescue","Romeo & Juliet","Sheep shearer","Shield of Arrav","The knight's sword","Vampire slayer","Witch's potion","Dragon slayer"].concat(u);t.exports={drawUiTabPlayerInfo:function(t){let e=275;0===this.uiTabPlayerInfoSubTab&&(this.options.totalExperience||this.options.remainingExperience)&&(e+=12);let h=this.gameWidth-196-3,u=36;if(this.options.mobile?(h-=32,u=this.gameHeight/2-e/2|0):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+3),this.uiOpenX=h,this.uiOpenY=u,this.uiOpenWidth=196,this.uiOpenHeight=e,this.surface.drawBoxAlpha(h,u+24,196,e-24,i.lightGrey,128),this.surface.drawLineHoriz(h,u+24,196,i.black),this.surface.drawTabs(h,u,196,24,r,this.uiTabPlayerInfoSubTab),0===this.uiTabPlayerInfoSubTab){let t=u+36,e=-1,r=0;this.surface.drawString("Skills",h+5,t,3,i.yellow),t+=13;for(let n=0;n<9;n++){r+=this.playerExperience[n],r+=this.playerExperience[n+9];let o=i.white;this.mouseX>h+3&&this.mouseY>=t-11&&this.mouseY<t+2&&this.mouseX<h+90&&(o=i.red,e=n),this.surface.drawString(`${s[n]}:@yel@${this.playerStatCurrent[n]}/`+this.playerStatBase[n],h+5,t,1,o),o=i.white,this.mouseX>=h+90&&this.mouseY>=t-13-11&&this.mouseY<t-13+2&&this.mouseX<h+196&&(o=i.red,e=n+9),this.surface.drawString(s[n+9]+":@yel@"+this.playerStatCurrent[n+9]+"/"+this.playerStatBase[n+9],h+98-5,t-13,1,o),t+=13}this.surface.drawString("Quest Points:@yel@"+this.playerQuestPoints,h+98-5,t-13,1,i.white),t+=12,this.surface.drawString(`Fatigue: @yel@${100*this.statFatigue/750|0}%`,h+5,t-13,1,i.white),t+=8,this.surface.drawString("Equipment Status",h+5,t,3,i.yellow),t+=12;for(let s=0;s<3;s++)this.surface.drawString(o[s]+":@yel@"+this.playerStatEquipment[s],h+5,t,1,i.white),s<2&&this.surface.drawString(o[s+3]+":@yel@"+this.playerStatEquipment[s+3],h+98+25,t,1,i.white),t+=13;if(t+=6,this.surface.drawLineHoriz(h,t-15,196,i.black),-1!==e){this.surface.drawString(n[e]+" skill",h+5,t,1,i.yellow),t+=12;let r=a[0];for(let t=0;t<98;t++)this.playerExperience[e]>=a[t]&&(r=a[t+1]);const s=this.playerExperience[e];this.surface.drawString("Total xp: "+(s/4|0),h+5,t,1,i.white),t+=12,this.surface.drawString("Next level at: "+(r/4|0),h+5,t,1,i.white),this.options.remainingExperience&&(t+=12,this.surface.drawString("Remaining xp: "+((r-s)/4|0),h+5,t,1,i.white))}else{this.surface.drawString("Overall levels",h+5,t,1,i.yellow),t+=12;let e=0;for(let t=0;t<n.length;t++)e+=this.playerStatBase[t];this.surface.drawString("Skill total: "+e,h+5,t,1,i.white),t+=12,this.options.totalExperience&&(this.surface.drawString("Total xp: "+r,h+5,t,1,i.white),t+=12),this.surface.drawString("Combat level: "+this.localPlayer.level,h+5,t,1,i.white),t+=12}}else if(1===this.uiTabPlayerInfoSubTab){this.panelQuestList.clearList(this.controlListQuest),this.panelQuestList.addListEntry(this.controlListQuest,0,"@whi@Quest-list (green=completed)");for(let t=0;t<l.length;t++)this.panelQuestList.addListEntry(this.controlListQuest,t+1,(this.questComplete[t]?"@gre@":"@red@")+l[t]);this.panelQuestList.drawPanel()}if(!t)return;const c=this.mouseX-h,f=this.mouseY-u;c>=0&&f>=0&&c<196&&f<e&&(1===this.uiTabPlayerInfoSubTab&&this.panelQuestList.handleMouse(c+h,f+u,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),f<=24&&1===this.mouseButtonClick&&(c<98?this.uiTabPlayerInfoSubTab=0:c>98&&(this.uiTabPlayerInfoSubTab=1)))},uiTabPlayerInfoSubTab:0}})),_$passwordDialog_274=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawDialogChangePassword:function(){if(0!==this.mouseButtonClick&&(this.mouseButtonClick=0,this.mouseX<106||this.mouseY<150||this.mouseX>406||this.mouseY>210))return void(this.showChangePasswordStep=0);this.surface.drawBox(106,150,300,60,i.black),this.surface.drawBoxEdge(106,150,300,60,i.white);let t=172,e="";if(6===this.showChangePasswordStep){this.surface.drawStringCenter("Please enter your current password",256,t,4,i.white),t+=25,e="*";for(let t=0;t<this.inputTextCurrent.length;t++)e="X"+e;if(this.surface.drawStringCenter(e,256,t,4,i.white),this.inputTextFinal.length>0)return this.changePasswordOld=this.inputTextFinal,this.inputTextCurrent="",this.inputTextFinal="",void(this.showChangePasswordStep=1)}else if(1===this.showChangePasswordStep){this.surface.drawStringCenter("Please enter your new password",256,t,4,i.white),t+=25,e="*";for(let t=0;t<this.inputTextCurrent.length;t++)e="X"+e;if(this.surface.drawStringCenter(e,256,t,4,i.white),this.inputTextFinal.length>0)return this.changePasswordNew=this.inputTextFinal,this.inputTextCurrent="",this.inputTextFinal="",this.changePasswordNew.length>=5?void(this.showChangePasswordStep=2):void(this.showChangePasswordStep=5)}else if(2==this.showChangePasswordStep){this.surface.drawStringCenter("Enter password again to confirm",256,t,4,i.white),t+=25,e="*";for(let t=0;t<this.inputTextCurrent.length;++t)e="X"+e;if(this.surface.drawStringCenter(e,256,t,4,i.white),this.inputTextFinal.length>0)return this.inputTextFinal.toLowerCase()===this.changePasswordNew.toLowerCase()?(this.showChangePasswordStep=4,void this.changePassword(this.changePasswordOld,this.changePasswordNew)):void(this.showChangePasswordStep=3)}else{if(3===this.showChangePasswordStep)return this.surface.drawStringCenter("Passwords do not match!",256,t,4,i.white),t+=25,void this.surface.drawStringCenter("Press any key to close",256,t,4,i.white);if(4===this.showChangePasswordStep)return this.surface.drawStringCenter("Ok, your request has been sent",256,t,4,i.white),t+=25,void this.surface.drawStringCenter("Press any key to close",256,t,4,i.white);5===this.showChangePasswordStep&&(this.surface.drawStringCenter("Password must be at",256,t,4,i.white),t+=25,this.surface.drawStringCenter("least 5 letters long",256,t,4,i.white))}},showChangePasswordStep:0}})),_$optionsTab_273=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawUiTabOptions:function(t){let e=this.gameWidth-196-3,r=36;this.options.mobile?(e=35,r=this.gameHeight/2-132.5|0):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+6),this.uiOpenX=e,this.uiOpenY=r,this.uiOpenWidth=196,this.uiOpenHeight=265,this.surface.drawBoxAlpha(e,r,196,65,i.darkGrey,160),this.surface.drawBoxAlpha(e,r+65,196,65,i.lightGrey3,160),this.surface.drawBoxAlpha(e,r+130,196,95,i.darkGrey,160),this.surface.drawBoxAlpha(e,r+225,196,40,i.lightGrey3,160);const s=e+3;let n=r+15;if(this.surface.drawString(`Game options - ${this.options.mobile?"tap":"click"} to toggle`,s,n,1,i.black),n+=15,this.surface.drawString("Camera angle mode - "+(this.optionCameraModeAuto?"@gre@Auto":"@red@Manual"),s,n,1,i.white),n+=15,this.surface.drawString(this.options.mobile?"Single tap mode - "+(this.optionMouseButtonOne?"@gre@on":"@red@off"):"Mouse buttons - "+(this.optionMouseButtonOne?"@red@One":"@gre@Two"),s,n,1,i.white),n+=15,this.members&&this.surface.drawString("Sound effects - "+(this.optionSoundDisabled?"@red@off":"@gre@on"),s,n,1,i.white),n+=15,this.options.accountManagement){n+=5,this.surface.drawString("Security settings",s,n,1,0),n+=15;let t=i.white;this.mouseX>s&&this.mouseX<s+196&&this.mouseY>n-12&&this.mouseY<n+4&&(t=i.yellow),this.surface.drawString("Change password",s,n,1,t),n+=15,t=i.white,this.mouseX>s&&this.mouseX<s+196&&this.mouseY>n-12&&this.mouseY<n+4&&(t=i.yellow),this.surface.drawString("Change recovery questions",s,n,1,t),n+=30}else this.surface.drawString("To change your contact details,",s,n,0,i.white),n+=15,this.surface.drawString("password, recovery questions, etc..",s,n,0,i.white),n+=15,this.surface.drawString("please select 'account management'",s,n,0,i.white),n+=15,0===this.referID?this.surface.drawString("from the runescape.com front page",s,n,0,i.white):1===this.referID?this.surface.drawString("from the link below the gamewindow",s,n,0,i.white):this.surface.drawString("from the runescape front webpage",s,n,0,i.white),n+=20;this.surface.drawString("Privacy settings. Will be applied to",e+3,n,1,i.black),n+=15,this.surface.drawString("all people not on your friends list",e+3,n,1,i.black),n+=15,this.surface.drawString("Block chat messages: "+(this.settingsBlockChat?"@gre@<on>":"@red@<off>"),e+3,n,1,i.white),n+=15,this.surface.drawString("Block private messages: "+(this.settingsBlockPrivate?"@gre@<on>":"@red@<off>"),e+3,n,1,i.white),n+=15,this.surface.drawString("Block trade requests: "+(this.settingsBlockTrade?"@gre@<on>":"@red@<off>"),e+3,n,1,i.white),n+=15,this.members&&this.surface.drawString("Block duel requests: "+(this.settingsBlockDuel?"@gre@<on>":"@red@<off>"),e+3,n,1,i.white),n+=20,this.surface.drawString("Always logout when you finish",s,n,1,i.black),n+=15;let o=i.white;if(this.mouseX>s&&this.mouseX<s+196&&this.mouseY>n-12&&this.mouseY<n+4&&(o=i.yellow),this.surface.drawString((this.options.mobile?"Tap":"Click")+" here to logout",e+3,n,1,o),!t)return;const a=this.mouseX-e,h=this.mouseY-r;if(a>=0&&h>=0&&a<196&&h<265){const t=e+3;let i=r+30;this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.optionCameraModeAuto=!this.optionCameraModeAuto,this.packetStream.newPacket(_$client_223.SETTINGS_GAME),this.packetStream.putByte(0),this.packetStream.putByte(this.optionCameraModeAuto?1:0),this.packetStream.sendPacket()),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.optionMouseButtonOne=!this.optionMouseButtonOne,this.packetStream.newPacket(_$client_223.SETTINGS_GAME),this.packetStream.putByte(2),this.packetStream.putByte(this.optionMouseButtonOne?1:0),this.packetStream.sendPacket()),i+=15,this.members&&this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.optionSoundDisabled=!this.optionSoundDisabled,this.packetStream.newPacket(_$client_223.SETTINGS_GAME),this.packetStream.putByte(3),this.packetStream.putByte(this.optionSoundDisabled?1:0),this.packetStream.sendPacket()),this.options.accountManagement?(i+=35,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.showChangePasswordStep=6,this.inputTextCurrent="",this.inputTextFinal=""),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.packetStream.newPacket(_$client_223.RECOVER_SET_REQUEST),this.packetStream.sendPacket()),i+=30):i+=75;let s=!1;i+=35,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockChat=1-this.settingsBlockChat,s=!0),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockPrivate=1-this.settingsBlockPrivate,s=!0),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockTrade=1-this.settingsBlockTrade,s=!0),i+=15,this.members&&this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockDuel=1-this.settingsBlockDuel,s=!0),i+=15,s&&this.sendPrivacySettings(this.settingsBlockChat,this.settingsBlockPrivate,this.settingsBlockTrade,this.settingsBlockDuel),i+=20,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&this.sendLogout(),this.mouseButtonClick=0}}}})),_$optionMenu_272=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawOptionMenu:function(){const t=this.options.mobile?5:1,e=this.options.mobile?18:12,r=5*e,s=this.options.mobile?48:6,n=this.options.mobile?this.gameHeight/2-r/2|0:0;if(0!==this.mouseButtonClick){for(let i=0;i<this.optionMenuCount;i++)if(!(this.mouseX<s-6||this.mouseX>=s-6+this.surface.textWidth(this.optionMenuEntry[i],t)||this.mouseY<=n+i*e||this.mouseY>=n+(e+i*e))){this.packetStream.newPacket(_$client_223.CHOOSE_OPTION),this.packetStream.putByte(i),this.packetStream.sendPacket();break}return this.mouseButtonClick=0,void(this.showOptionMenu=!1)}for(let o=0;o<this.optionMenuCount;o++){let r=i.cyan;!this.options.mobile&&this.mouseX>s-6&&this.mouseX<s-6+this.surface.textWidth(this.optionMenuEntry[o],t)&&this.mouseY>n+o*e&&this.mouseY<n+(o*e+e)&&(r=i.red),this.surface.drawString(this.optionMenuEntry[o],s,n+(e+o*e),t,r)}}}})),_$mobileUi_271=createModuleFactory((function(t,e){const i={uiLeft:"./ui-left.png",uiRight:"./ui-right.png"};for(const r of Object.keys(i)){const t=new Image;t.src=i[r],i[r]=t}t.exports={drawMobileUI:function(){const t=this.gameWidth-32-3,e=this.gameHeight/2-49;this.graphics.ctx.globalAlpha=.5;let r=e;for(let s=0;s<6;s+=1){const n=this.showUITab===s+1,o=s>2?3:t;n&&(this.graphics.ctx.globalAlpha=1),this.graphics.ctx.fillStyle=n?"#000083":"#b5b5b4",this.graphics.ctx.fillRect(o,r,32,32),n&&(this.graphics.ctx.drawImage(s>2?i.uiLeft:i.uiRight,0,s>2?33*(s-3):33*s,32,32,o,r,32,32),this.graphics.ctx.globalAlpha=.5),2===s?r=e:r+=33}this.graphics.ctx.drawImage(i.uiRight,t,e),this.graphics.ctx.drawImage(i.uiLeft,3,e),this.graphics.ctx.globalAlpha=1}}})),_$minimapTab_270=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawMinimapEntity:function(t,e,i){this.surface.setPixel(t,e,i),this.surface.setPixel(t-1,e,i),this.surface.setPixel(t+1,e,i),this.surface.setPixel(t,e-1,i),this.surface.setPixel(t,e+1,i)},drawUiTabMinimap:function(t){let e=this.gameWidth-156-3,r=36;this.options.mobile?(e-=32,r=this.gameHeight/2-76):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+2),this.uiOpenX=e,this.uiOpenY=r,this.uiOpenWidth=156,this.uiOpenHeight=152,this.surface.drawBox(e,r,156,152,0),this.surface.setBounds(e,r,e+156,r+152);const s=192+this.minimapRandom2,n=this.cameraRotation+this.minimapRandom1&255;let o=3*(this.localPlayer.currentX-6040)*s/2048|0,a=3*(this.localPlayer.currentY-6040)*s/2048|0;const h=_$scene_257.sinCosCache[1024-4*n&1023],u=_$scene_257.sinCosCache[1024+(1024-4*n&1023)],l=a*h+o*u>>18;a=a*u-o*h>>18,o=l,this.surface.drawMinimapSprite(e+78-o,r+76+a,this.spriteMedia-1,n+64&255,s);for(let d=0;d<this.objectCount;d++){let t=3*(this.objectX[d]*this.magicLoc+64-this.localPlayer.currentX)*s/2048|0,n=3*(this.objectY[d]*this.magicLoc+64-this.localPlayer.currentY)*s/2048|0;const o=n*h+t*u>>18;n=n*u-t*h>>18,t=o,this.drawMinimapEntity(e+78+t,r+76-n,i.cyan)}for(let d=0;d<this.groundItemCount;d++){let t=3*(this.groundItemX[d]*this.magicLoc+64-this.localPlayer.currentX)*s/2048|0,n=3*(this.groundItemY[d]*this.magicLoc+64-this.localPlayer.currentY)*s/2048|0;const o=n*h+t*u>>18;n=n*u-t*h>>18,t=o,this.drawMinimapEntity(e+78+t,r+76-n,i.red)}for(let d=0;d<this.npcCount;d++){const t=this.npcs[d];let n=3*(t.currentX-this.localPlayer.currentX)*s/2048|0,o=3*(t.currentY-this.localPlayer.currentY)*s/2048|0;const a=o*h+n*u>>18;o=o*u-n*h>>18,n=a,this.drawMinimapEntity(e+78+n,r+76-o,i.yellow)}for(let d=0;d<this.playerCount;d++){const t=this.players[d];let n=3*(t.currentX-this.localPlayer.currentX)*s/2048|0,o=3*(t.currentY-this.localPlayer.currentY)*s/2048|0;const a=o*h+n*u>>18;o=o*u-n*h>>18,n=a;let l=i.white;for(let e=0;e<this.friendListCount;e++)if(t.hash.equals(this.friendListHashes[e])&&255===this.friendListOnline[e]){l=i.green;break}this.drawMinimapEntity(e+78+n,r+76-o,l)}if(this.surface.drawCircle(e+78,r+76,2,i.white,255),this.surface.drawMinimapSprite(e+19,r+19,this.spriteMedia+24,this.cameraRotation+128&255,128),this.surface.setBounds(0,0,this.gameWidth,this.gameHeight+12),!t)return;const c=this.mouseX-e,f=this.mouseY-r;if(this.options.resetCompass&&1===this.mouseButtonClick&&c>0&&c<=32&&f>0&&f<=32)return this.cameraRotation=128,void(this.mouseButtonClick=0);if(c>=0&&f>=0&&c<196&&f<152){let t=16384*(this.mouseX-(e+78))/(3*s)|0,i=16384*(this.mouseY-(r+76))/(3*s)|0;const n=i*h+t*u>>15;i=i*u-t*h>>15,t=n,t+=this.localPlayer.currentX,i=this.localPlayer.currentY-i,1===this.mouseButtonClick&&(this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t/128|0,i/128|0,!1),this.mouseButtonClick=0)}}}})),_$magicTab_269=createModuleFactory((function(t,e){const i=_$_colours_260({}),r=["Magic","Prayers"];t.exports={drawUiTabMagic:function(t){let e=this.gameWidth-196-3,s=36;if(this.options.mobile?(e=35,s=this.gameHeight/2-91):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+4),this.uiOpenX=e,this.uiOpenY=s,this.uiOpenWidth=196,this.uiOpenHeight=182,this.surface.drawBoxAlpha(e,s+24,196,158,i.lightGrey,128),this.surface.drawLineHoriz(e,s+113,196,i.black),this.surface.drawTabs(e,s,196,24,r,this.uiTabMagicSubTab),0===this.uiTabMagicSubTab){this.panelMagic.clearList(this.controlListMagic);const t=this.playerStatCurrent[6];for(let e=0;e<_$gameData_212.spellCount;e++){let i="@yel@";for(let t=0;t<_$gameData_212.spellRunesRequired[e];t++){const r=_$gameData_212.spellRunesId[e][t],s=_$gameData_212.spellRunesCount[e][t];if(!this.hasInventoryItems(r,s)){i="@whi@";break}}_$gameData_212.spellLevel[e]>t&&(i="@bla@"),this.panelMagic.addListEntry(this.controlListMagic,e,`${i}Level ${_$gameData_212.spellLevel[e]}: `+_$gameData_212.spellName[e])}this.panelMagic.drawPanel();const r=this.panelMagic.getListEntryIndex(this.controlListMagic);if(-1!==r){this.surface.drawString("Level "+_$gameData_212.spellLevel[r]+": "+_$gameData_212.spellName[r],e+2,s+124,1,i.yellow),this.surface.drawString(_$gameData_212.spellDescription[r],e+2,s+136,0,i.white);for(let t=0;t<_$gameData_212.spellRunesRequired[r];t++){const n=_$gameData_212.spellRunesId[r][t],o=this.getInventoryCount(n),a=_$gameData_212.spellRunesCount[r][t];let h="@red@";this.hasInventoryItems(n,a)&&(h="@gre@"),this.surface._drawSprite_from3(e+2+44*t,s+150,this.spriteItem+_$gameData_212.itemPicture[n]),this.surface.drawString(`${h}${o}/${a}`,e+2+44*t,s+150,1,i.white)}}else this.surface.drawString("Point at a spell for a description",e+2,s+124,1,i.black)}else if(1===this.uiTabMagicSubTab){this.panelMagic.clearList(this.controlListMagic);for(let e=0;e<_$gameData_212.prayerCount;e++){let t="@whi@";_$gameData_212.prayerLevel[e]>this.playerStatBase[5]&&(t="@bla@"),this.prayerOn[e]&&(t="@gre@"),this.panelMagic.addListEntry(this.controlListMagic,e,`${t}Level ${_$gameData_212.prayerLevel[e]}: `+_$gameData_212.prayerName[e])}this.panelMagic.drawPanel();const t=this.panelMagic.getListEntryIndex(this.controlListMagic);-1!==t?(this.surface.drawStringCenter(`Level ${_$gameData_212.prayerLevel[t]}: `+_$gameData_212.prayerName[t],e+98,s+130,1,i.yellow),this.surface.drawStringCenter(_$gameData_212.prayerDescription[t],e+98,s+145,0,i.white),this.surface.drawStringCenter("Drain rate: "+_$gameData_212.prayerDrain[t],e+98,s+160,1,i.black)):this.surface.drawString("Point at a prayer for a description",e+2,s+124,1,i.black)}if(!t)return;const n=this.mouseX-e,o=this.mouseY-s;if(n>=0&&o>=0&&n<196&&o<182){if(this.panelMagic.handleMouse(n+e,o+s,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),o<=24&&1===this.mouseButtonClick&&(n<98&&1===this.uiTabMagicSubTab?(this.uiTabMagicSubTab=0,this.panelMagic.resetListProps(this.controlListMagic)):n>98&&0===this.uiTabMagicSubTab&&(this.uiTabMagicSubTab=1,this.panelMagic.resetListProps(this.controlListMagic))),1===this.mouseButtonClick&&0===this.uiTabMagicSubTab){const t=this.panelMagic.getListEntryIndex(this.controlListMagic);if(-1!==t){const e=this.playerStatCurrent[6];if(_$gameData_212.spellLevel[t]>e)this.showMessage("Your magic ability is not high enough for this spell",3);else{let e=0;for(e=0;e<_$gameData_212.spellRunesRequired[t];e++){const i=_$gameData_212.spellRunesId[t][e];if(!this.hasInventoryItems(i,_$gameData_212.spellRunesCount[t][e])){this.showMessage("You don't have all the reagents you need for this spell",3),e=-1;break}}e===_$gameData_212.spellRunesRequired[t]&&(this.selectedSpell=t,this.selectedItemInventoryIndex=-1)}}}if(1===this.mouseButtonClick&&1===this.uiTabMagicSubTab){const t=this.panelMagic.getListEntryIndex(this.controlListMagic);if(-1!==t){const e=this.playerStatBase[5];_$gameData_212.prayerLevel[t]>e?this.showMessage("Your prayer ability is not high enough for this prayer",3):0===this.playerStatCurrent[5]?this.showMessage("You have run out of prayer points. Return to a church to recharge",3):this.prayerOn[t]?(this.packetStream.newPacket(_$client_223.PRAYER_OFF),this.packetStream.putByte(t),this.packetStream.sendPacket(),this.prayerOn[t]=!1,this.playSoundFile("prayeroff")):(this.packetStream.newPacket(_$client_223.PRAYER_ON),this.packetStream.putByte(t),this.packetStream.sendPacket(),this.prayerOn[t]=!0,this.playSoundFile("prayeron"))}}this.mouseButtonClick=0}},uiTabMagicSubTab:0}})),_$logoutDialog_268=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawDialogLogout:function(){this.surface.drawBox(126,137,260,60,i.black),this.surface.drawBoxEdge(126,137,260,60,i.white),this.surface.drawStringCenter("Logging out...",256,173,5,i.white)}}})),_$loginPanels_267=createModuleFactory((function(t,e){t.exports={controlRecoverQuestions:new Int32Array(5),controlRecoverAnswers:new Int32Array(5),loginScreen:0,createLoginPanels:function(){this.panelLoginWelcome=new _$panel_254(this.surface,50);const t=this.gameWidth/2|0;let e=40;const i=this.options.mobile?"Tap":"Click";if(this.members?(this.panelLoginWelcome.addTextCentre(t,200+e,"Welcome to RuneScape",4,!0),this.panelLoginWelcome.addTextCentre(t,215+e,"You need a members account to use this server",4,!0),this.panelLoginWelcome.addButtonBackground(t,250+e,200,35),this.panelLoginWelcome.addTextCentre(t,250+e,i+" here to login",5,!1),this.controlWelcomeExistingUser=this.panelLoginWelcome.addButton(t,250+e,200,35)):(this.panelLoginWelcome.addTextCentre(t,200+e,i+" on an option",5,!0),this.panelLoginWelcome.addButtonBackground(t-100,240+e,120,35),this.panelLoginWelcome.addTextCentre(t-100,240+e,"New User",5,!1),this.controlWelcomeNewUser=this.panelLoginWelcome.addButton(t-100,240+e,120,35),this.panelLoginWelcome.addButtonBackground(t+100,240+e,120,35),this.panelLoginWelcome.addTextCentre(t+100,240+e,"Existing User",5,!1),this.controlWelcomeExistingUser=this.panelLoginWelcome.addButton(t+100,240+e,120,35)),this.panelLoginNewUser=new _$panel_254(this.surface,50),this.options.accountManagement){e=70,this.controlRegisterStatus=this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please enter all the requested details",4,!0);let i=e+25;this.panelLoginNewUser.addButtonBackground(t,i+17,250,34),this.panelLoginNewUser.addTextCentre(t,i+8,"Choose a Username",4,!1),this.controlRegisterUser=this.panelLoginNewUser.addTextInput(t,i+25,200,40,4,12,!1,!1),i+=40,this.panelLoginNewUser.addButtonBackground(t-115,i+17,220,34),this.panelLoginNewUser.addTextCentre(t-115,i+8,"Choose a Password",4,!1),this.controlRegisterPassword=this.panelLoginNewUser.addTextInput(t-115,i+25,220,40,4,20,!0,!1),this.panelLoginNewUser.addButtonBackground(t+115,i+17,220,34),this.panelLoginNewUser.addTextCentre(t+115,i+8,"Confirm Password",4,!1),this.controlRegisterConfirmPassword=this.panelLoginNewUser.addTextInput(t+115,i+25,220,40,4,20,!0,!1),i+=60,this.controlRegisterCheckbox=this.panelLoginNewUser.addCheckbox(t-196-7,i-7,14,14),this.panelLoginNewUser.addText(t-181,i,"I have read and agreed to the terms and conditions",4,!0),i+=15,this.panelLoginNewUser.addTextCentre(t,i,"(to view these click the relevant link below this game window)",4,!0),i+=20,this.panelLoginNewUser.addButtonBackground(t-100,i+17,150,34),this.panelLoginNewUser.addTextCentre(t-100,i+17,"Submit",5,!1),this.controlRegisterSubmit=this.panelLoginNewUser.addButton(t-100,i+17,150,34),this.panelLoginNewUser.addButtonBackground(t+100,i+17,150,34),this.panelLoginNewUser.addTextCentre(t+100,i+17,"Cancel",5,!1),this.controlRegisterCancel=this.panelLoginNewUser.addButton(t+100,i+17,150,34)}else e=230,0===this.referID?(this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please go back to the",4,!0),e+=20,this.panelLoginNewUser.addTextCentre(t,e+8,"www.runescape.com front page, and choose 'create account'",4,!0)):1===this.referID?(this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please click on the",4,!0),e+=20,this.panelLoginNewUser.addTextCentre(t,e+8,"'create account' link below the game window",4,!0)):(this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please go back to the",4,!0),e+=20,this.panelLoginNewUser.addTextCentre(t,e+8,"runescape front webpage and choose 'create account'",4,!0)),e+=30,this.panelLoginNewUser.addButtonBackground(t,e+17,150,34),this.panelLoginNewUser.addTextCentre(t,e+17,"Ok",5,!1),this.controlLoginNewOK=this.panelLoginNewUser.addButton(t,e+17,150,34);this.panelLoginExistingUser=new _$panel_254(this.surface,50),e=230,this.controlLoginStatus=this.panelLoginExistingUser.addTextCentre(t,e-10,"Please enter your username and password",4,!0),e+=28,this.panelLoginExistingUser.addButtonBackground(t-116,e,200,40),this.panelLoginExistingUser.addTextCentre(t-116,e-10,"Username:",4,!1),this.controlLoginUser=this.panelLoginExistingUser.addTextInput(t-116,e+10,200,40,4,12,!1,!1),e+=47,this.panelLoginExistingUser.addButtonBackground(t-66,e,200,40),this.panelLoginExistingUser.addTextCentre(t-66,e-10,"Password:",4,!1),this.controlLoginPassword=this.panelLoginExistingUser.addTextInput(t-66,e+10,200,40,4,20,!0,!1),e-=55,this.panelLoginExistingUser.addButtonBackground(t+154,e,120,25),this.panelLoginExistingUser.addTextCentre(t+154,e,"Ok",4,!1),this.controlLoginOk=this.panelLoginExistingUser.addButton(t+154,e,120,25),e+=30,this.panelLoginExistingUser.addButtonBackground(t+154,e,120,25),this.panelLoginExistingUser.addTextCentre(t+154,e,"Cancel",4,!1),this.controlLoginCancel=this.panelLoginExistingUser.addButton(t+154,e,120,25),this.options.accountManagement&&(e+=30,this.panelLoginExistingUser.addButtonBackground(t+154,e,160,25),this.panelLoginExistingUser.addTextCentre(t+154,e,"I've lost my password",4,!1),this.controlLoginRecover=this.panelLoginExistingUser.addButton(t+154,e,160,25))},drawLoginScreens:function(){let t;if(this.welcomScreenAlreadyShown=!1,this.surface.interlace=!1,this.surface.blackScreen(),t=this.options.accountManagement?0===this.loginScreen||2===this.loginScreen:this.loginScreen>=0&&this.loginScreen<=3){const t=2*this.loginTimer%3072;t<1024?(this.surface._drawSprite_from3(0,10,this.spriteLogo),t>768&&this.surface._drawSpriteAlpha_from4(0,10,this.spriteLogo+1,t-768)):t<2048?(this.surface._drawSprite_from3(0,10,this.spriteLogo+1),t>1792&&this.surface._drawSpriteAlpha_from4(0,10,this.spriteMedia+10,t-1792)):(this.surface._drawSprite_from3(0,10,this.spriteMedia+10),t>2816&&this.surface._drawSpriteAlpha_from4(0,10,this.spriteLogo,t-2816))}0===this.loginScreen?this.panelLoginWelcome.drawPanel():1===this.loginScreen?this.panelLoginNewUser.drawPanel():2===this.loginScreen&&this.panelLoginExistingUser.drawPanel(),this.surface._drawSprite_from3(0,this.gameHeight-4,this.spriteMedia+22),this.surface.draw(this.graphics,0,0)},handleLoginScreenInput:async function(){if(this.worldFullTimeout>0&&this.worldFullTimeout--,0===this.loginScreen){if(this.panelLoginWelcome.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.panelLoginWelcome.isClicked(this.controlWelcomeNewUser)&&(this.loginScreen=1,this.options.accountManagement&&(this.panelLoginNewUser.updateText(this.controlRegisterUser,""),this.panelLoginNewUser.updateText(this.controlRegisterPassword,""),this.panelLoginNewUser.updateText(this.controlRegisterConfirmPassword,""),this.panelLoginNewUser.setFocus(this.controlRegisterUser),this.panelLoginNewUser.toggleCheckbox(this.controlRegisterCheckbox,!1),this.panelLoginNewUser.updateText(this.controlRegisterStatus,"To create an account please enter all the requested details"))),this.panelLoginWelcome.isClicked(this.controlWelcomeExistingUser))return this.loginScreen=2,this.panelLoginExistingUser.updateText(this.controlLoginStatus,"Please enter your username and password"),this.panelLoginExistingUser.updateText(this.controlLoginUser,""),this.panelLoginExistingUser.updateText(this.controlLoginPassword,""),void this.panelLoginExistingUser.setFocus(this.controlLoginUser)}else if(1===this.loginScreen)if(this.panelLoginNewUser.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.options.accountManagement){if(this.options.mobile&&1===this.lastMouseButtonDown&&this.mouseX>=74&&this.mouseX<=474&&this.mouseY>=188&&this.mouseY<=216)return this.panelLoginNewUser.toggleCheckbox(this.controlRegisterCheckbox,!this.panelLoginNewUser.isActivated(this.controlRegisterCheckbox)),void(this.lastMouseButtonDown=0);if(this.panelLoginNewUser.isClicked(this.controlRegisterCancel))return void(this.loginScreen=0);if(this.panelLoginNewUser.isClicked(this.controlRegisterUser))return void this.panelLoginNewUser.setFocus(this.controlRegisterPassword);if(this.panelLoginNewUser.isClicked(this.controlRegisterPassword))return void this.panelLoginNewUser.setFocus(this.controlRegisterConfirmPassword);if(this.panelLoginNewUser.isClicked(this.controlRegisterConfirmPassword)||this.panelLoginNewUser.isClicked(this.controlRegisterSubmit)){const t=this.panelLoginNewUser.getText(this.controlRegisterUser),e=this.panelLoginNewUser.getText(this.controlRegisterPassword),i=this.panelLoginNewUser.getText(this.controlRegisterConfirmPassword);if(!t||0===t.length||!e||0===e.length||!i||0===i.length)return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@Please fill in ALL requested information to continue!");if(e!==i)return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@The two passwords entered are not the same as each other!");if(e.length<5)return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@Your password must be at least 5 letters long");if(!this.panelLoginNewUser.isActivated(this.controlRegisterCheckbox))return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@You must agree to the terms+conditions to continue");this.panelLoginNewUser.updateText(this.controlRegisterStatus,"Please wait... Creating new account"),this.drawLoginScreens(),this.resetTimings(),this.registerUser=this.panelLoginNewUser.getText(this.controlRegisterUser),this.registerPassword=this.panelLoginNewUser.getText(this.controlRegisterPassword),await this.register(this.registerUser,this.registerPassword)}}else this.panelLoginNewUser.isClicked(this.controlLoginNewOK)&&(this.loginScreen=0);else if(2===this.loginScreen)if(this.panelLoginExistingUser.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.panelLoginExistingUser.isClicked(this.controlLoginCancel))this.loginScreen=0;else if(this.panelLoginExistingUser.isClicked(this.controlLoginUser))this.panelLoginExistingUser.setFocus(this.controlLoginPassword);else if(this.panelLoginExistingUser.isClicked(this.controlLoginPassword)||this.panelLoginExistingUser.isClicked(this.controlLoginOk))this.loginUser=this.panelLoginExistingUser.getText(this.controlLoginUser),this.loginPass=this.panelLoginExistingUser.getText(this.controlLoginPassword),await this.login(this.loginUser,this.loginPass,!1);else if(this.panelLoginExistingUser.isClicked(this.controlLoginRecover)){if(this.loginUser=this.panelLoginExistingUser.getText(this.controlLoginUser),0===this.loginUser.trim().length)return void this.showLoginScreenStatus("You must enter your username to recover your password","");await this.recoverAttempt(this.loginUser)}},renderLoginScreenViewports:function(){this.world._loadSection_from3(2423,2423,0),this.world.addModels(this.gameModels);let t=9728,e=6400,i=1100,r=888;this.scene.clipFar3d=4100,this.scene.clipFar2d=4100,this.scene.fogZFalloff=1,this.scene.fogZDistance=4e3,this.surface.blackScreen(),this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,r,0,2*i),this.scene.render(),this.surface.fadeToBlack(),this.surface.fadeToBlack(),this.surface.drawBox(0,0,this.gameWidth,6,0);for(let s=6;s>=1;s--)this.surface.drawLineAlpha(0,s,0,s,this.gameWidth,8);this.surface.drawBox(0,194,512,20,0);for(let s=6;s>=1;s--)this.surface.drawLineAlpha(0,s,0,194-s,this.gameWidth,8);this.surface._drawSprite_from3((this.gameWidth/2|0)-(this.surface.spriteWidth[this.spriteMedia+10]/2|0),15,this.spriteMedia+10),this.surface._drawSprite_from5(this.spriteLogo,0,0,this.gameWidth,200),this.surface.drawWorld(this.spriteLogo),t=9216,e=9216,i=1100,r=888,this.scene.clipFar3d=4100,this.scene.clipFar2d=4100,this.scene.fogZFalloff=1,this.scene.fogZDistance=4e3,this.surface.blackScreen(),this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,r,0,2*i),this.scene.render(),this.surface.fadeToBlack(),this.surface.fadeToBlack(),this.surface.drawBox(0,0,this.gameWidth,6,0);for(let s=6;s>=1;s--)this.surface.drawLineAlpha(0,s,0,s,this.gameWidth,8);this.surface.drawBox(0,194,this.gameWidth,20,0);for(let s=6;s>=1;s--)this.surface.drawLineAlpha(0,s,0,194-s,this.gameWidth,8);this.surface._drawSprite_from3((this.gameWidth/2|0)-(this.surface.spriteWidth[this.spriteMedia+10]/2|0),15,this.spriteMedia+10),this.surface._drawSprite_from5(this.spriteLogo+1,0,0,this.gameWidth,200),this.surface.drawWorld(this.spriteLogo+1);for(let s=0;s<64;s++)this.scene.removeModel(this.world.roofModels[0][s]),this.scene.removeModel(this.world.wallModels[1][s]),this.scene.removeModel(this.world.roofModels[1][s]),this.scene.removeModel(this.world.wallModels[2][s]),this.scene.removeModel(this.world.roofModels[2][s]);t=11136,e=10368,i=500,r=376,this.scene.clipFar3d=4100,this.scene.clipFar2d=4100,this.scene.fogZFalloff=1,this.scene.fogZDistance=4e3,this.surface.blackScreen(),this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,r,0,2*i),this.scene.render(),this.surface.fadeToBlack(),this.surface.fadeToBlack(),this.surface.drawBox(0,0,this.gameWidth,6,0);for(let s=6;s>=1;s--)this.surface.drawLineAlpha(0,s,0,s,this.gameWidth,8);this.surface.drawBox(0,194,this.gameWidth,20,0);for(let s=6;s>=1;s--)this.surface.drawLineAlpha(0,s,0,194,this.gameWidth,8);this.surface._drawSprite_from3((this.gameWidth/2|0)-(this.surface.spriteWidth[this.spriteMedia+10]/2|0),15,this.spriteMedia+10),this.surface._drawSprite_from5(this.spriteMedia+10,0,0,this.gameWidth,200),this.surface.drawWorld(this.spriteMedia+10)}}})),_$inventoryTab_266=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={drawUiTabInventory:function(t){let e=this.gameWidth-245-3,r=36;this.options.mobile?(e-=32,r=this.gameHeight/2-102):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+1),this.uiOpenX=e,this.uiOpenY=r,this.uiOpenWidth=245,this.uiOpenHeight=204;for(let o=0;o<this.inventoryMaxItemCount;o++){const t=e+o%5*49,s=r+34*(o/5|0);if(o<this.inventoryItemsCount&&1===this.inventoryEquipped[o]?this.surface.drawBoxAlpha(t,s,49,34,i.red,128):this.surface.drawBoxAlpha(t,s,49,34,i.darkGrey,128),o<this.inventoryItemsCount){const e=this.spriteItem+_$gameData_212.itemPicture[this.inventoryItemId[o]],r=_$gameData_212.itemMask[this.inventoryItemId[o]];this.surface._spriteClipping_from9(t,s,49,32,e,r,0,0,!1),0===_$gameData_212.itemStackable[this.inventoryItemId[o]]&&this.surface.drawString(this.inventoryItemStackCount[o].toString(),t+1,s+10,1,i.yellow)}}for(let o=1;o<=4;o++)this.surface.drawLineVert(e+49*o,r,34*(this.inventoryMaxItemCount/5|0),i.black);for(let o=1;o<=(this.inventoryMaxItemCount/5|0)-1;o++)this.surface.drawLineHoriz(e,r+34*o,245,i.black);if(!t)return;const s=this.mouseX-e,n=this.mouseY-r;if(s>=0&&n>=0&&s<245&&n<34*(this.inventoryMaxItemCount/5|0)){const t=(s/49|0)+5*(n/34|0);if(t<this.inventoryItemsCount){const e=this.inventoryItemId[t],i="@lre@"+_$gameData_212.itemName[e];if(this.selectedSpell>=0){if(3===_$gameData_212.spellType[this.selectedSpell])return this.menuItemText1[this.menuItemsCount]=`Cast ${_$gameData_212.spellName[this.selectedSpell]} on`,this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=600,this.menuIndex[this.menuItemsCount]=t,this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,void this.menuItemsCount++}else{if(this.selectedItemInventoryIndex>=0)return this.menuItemText1[this.menuItemsCount]=`Use ${this.selectedItemName} with:`,this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=610,this.menuIndex[this.menuItemsCount]=t,this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,void this.menuItemsCount++;1===this.inventoryEquipped[t]?(this.menuItemText1[this.menuItemsCount]="Remove",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=620,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++):0!==_$gameData_212.itemWearable[e]&&(0!=(24&_$gameData_212.itemWearable[e])?this.menuItemText1[this.menuItemsCount]="Wield":this.menuItemText1[this.menuItemsCount]="Wear",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=630,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++),""!==_$gameData_212.itemCommand[e]&&(this.menuItemText1[this.menuItemsCount]=_$gameData_212.itemCommand[e],this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=640,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Use",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=650,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Drop",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=660,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=3600,this.menuIndex[this.menuItemsCount]=e,this.menuItemsCount++}}}}}})),_$combatStyle_264=createModuleFactory((function(t,e){const i=_$_colours_260({}),r=["Controlled (+1 of each)","Aggressive (+3 strength)","Accurate (+3 attack)","Defensive (+3 defense)"],s=20*(r.length+1);t.exports={combatStyle:0,drawDialogCombatStyle:function(){let t=7,e=15;if(this.options.mobile&&(t=48,e=this.gameHeight/2-s/2|0),0!==this.mouseButtonClick)for(let i=0;i<r.length+1;i++)if(!(i<=0||this.mouseX<=t||this.mouseX>=t+175||this.mouseY<=e+20*i||this.mouseY>=e+20*i+20)){this.combatStyle=i-1,this.mouseButtonClick=0,this.packetStream.newPacket(_$client_223.COMBAT_STYLE),this.packetStream.putByte(this.combatStyle),this.packetStream.sendPacket();break}for(let s=0;s<r.length+1;s++){const r=s===this.combatStyle+1?i.red:12500670;this.surface.drawBoxAlpha(t,e+20*s,175,20,r,128),this.surface.drawLineHoriz(t,e+20*s,175,i.black),this.surface.drawLineHoriz(t,e+20*s+20,175,i.black)}let n=16;this.surface.drawStringCenter("Select combat style",t+87,e+n,3,i.white),n+=20;for(const s of r)this.surface.drawStringCenter(s,t+87,e+n,3,i.black),n+=20}}})),_$chatMessageTabs_263=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={createMessageTabPanel:function(){this.panelMessageTabs=new _$panel_254(this.surface,10);let t=269;this.options.mobile&&(t=15),this.controlTextListAll=this.panelMessageTabs.addTextListInput(7,t+55+(this.options.mobile?12:0),498,14,1,80,!1,!0),this.controlTextListChat=this.panelMessageTabs.addTextList(5,t,502,56,1,20,!0),this.controlTextListQuest=this.panelMessageTabs.addTextList(5,t,502,56,1,20,!0),this.controlTextListPrivate=this.panelMessageTabs.addTextList(5,t,502,56,1,20,!0),this.options.mobile||this.panelMessageTabs.setFocus(this.controlTextListAll)},drawChatMessageTabs:function(){const t=this.gameWidth/2-256|0;let e=this.gameHeight-4;this.options.mobile?(e=8,this.surface.drawMinimapSprite(t+256-103,e,this.spriteMedia+23,128,128),this.surface.drawMinimapSprite(t+256+404,e,this.spriteMedia+23,128,128),e=10):(this.surface._drawSprite_from3(t,e,this.spriteMedia+23),e=this.gameHeight+6);let r=i.chatPurple;0===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashAll%30>15&&(r=i.chatRed),this.surface.drawStringCenter("All messages",t+54,e,0,r),r=i.chatPurple,1===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashHistory%30>15&&(r=i.chatRed),this.surface.drawStringCenter("Chat history",t+155,e,0,r),r=i.chatPurple,2===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashQuest%30>15&&(r=i.chatRed),this.surface.drawStringCenter("Quest history",t+255,e,0,r),r=i.chatPurple,3===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashPrivate%30>15&&(r=i.chatRed),this.surface.drawStringCenter("Private history",t+355,e,0,r),this.surface.drawStringCenter("Report abuse",t+457,e,0,i.white)},handleMesssageTabsInput:async function(){const t=this.gameWidth/2-256|0,e=this.mouseX-t;if((this.options.mobile&&this.mouseY<15||!this.options.mobile&&this.mouseY>this.gameHeight-4)&&(e>15&&e<96&&1===this.lastMouseButtonDown&&(this.messageTabSelected=0),e>110&&e<194&&1===this.lastMouseButtonDown&&(this.messageTabSelected=1,this.panelMessageTabs.controlFlashText[this.controlTextListChat]=999999),e>215&&e<295&&1===this.lastMouseButtonDown&&(this.messageTabSelected=2,this.panelMessageTabs.controlFlashText[this.controlTextListQuest]=999999),e>315&&e<395&&1===this.lastMouseButtonDown&&(this.messageTabSelected=3,this.panelMessageTabs.controlFlashText[this.controlTextListPrivate]=999999),e>417&&e<497&&1===this.lastMouseButtonDown&&(this.showDialogReportAbuseStep=1,this.reportAbuseOffence=0,this.inputTextCurrent="",this.inputTextFinal=""),this.lastMouseButtonDown=0,this.mouseButtonDown=0),this.options.mobile&&this.mouseY>=72||this.panelMessageTabs.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),this.options.mobile&&this.lastMouseButtonDown&&(this.panelMessageTabs.controlText[this.controlTextListAll].length||(this.panelMessageTabs.focusControlIndex=-1)),this.options.mobile&&this.lastMouseButtonDown&&this.showUITab<3&&this.mouseX<=108&&this.mouseY>=72&&this.mouseY<=98&&(this.panelMessageTabs.setFocus(this.controlTextListAll),this.lastMouseButtonDown=0),this.messageTabSelected>0&&this.mouseX>=494&&this.mouseY>=this.gameHeight-66&&(this.lastMouseButtonDown=0),this.panelMessageTabs.isClicked(this.controlTextListAll)){let t=this.panelMessageTabs.getText(this.controlTextListAll);if(this.panelMessageTabs.updateText(this.controlTextListAll,""),this.options.mobile&&(this.panelMessageTabs.focusControlIndex=-1),/^::/.test(t))/^::closecon$/i.test(t)?this.packetStream.closeStream():/^::logout/i.test(t)?this.closeConnection():/^::lostcon$/i.test(t)?await this.lostConnection():this.sendCommandString(t.substring(2));else{const e=_$chatMessage_208.scramble(t);this.sendChatMessage(_$chatMessage_208.scrambledBytes,e),t=_$chatMessage_208.descramble(_$chatMessage_208.scrambledBytes,0,e),this.options.wordFilter&&(t=_$wordFilter_290.filter(t)),this.localPlayer.messageTimeout=150,this.localPlayer.message=t,this.showMessage(`${this.localPlayer.name}: ${t}`,2)}}if(0===this.messageTabSelected)for(let i=0;i<5;i++)this.messageHistoryTimeout[i]>0&&this.messageHistoryTimeout[i]--},drawChatMessageTabsPanel:function(){if(0===this.messageTabSelected){let t=this.gameHeight-18;this.options.mobile&&(t=74);for(let e=0;e<5;e++)this.messageHistoryTimeout[e]<=0||this.surface.drawString(this.messageHistory[e],7,t-12*e,1,i.yellow)}this.options.mobile&&-1===this.panelMessageTabs.focusControlIndex&&this.surface.drawString("[Tap here to chat]",6,88,2,i.white),this.panelMessageTabs.hide(this.controlTextListChat),this.panelMessageTabs.hide(this.controlTextListQuest),this.panelMessageTabs.hide(this.controlTextListPrivate),1===this.messageTabSelected?this.panelMessageTabs.show(this.controlTextListChat):2===this.messageTabSelected?this.panelMessageTabs.show(this.controlTextListQuest):3===this.messageTabSelected&&this.panelMessageTabs.show(this.controlTextListPrivate),_$panel_254.textListEntryHeightMod=2,this.panelMessageTabs.drawPanel(),_$panel_254.textListEntryHeightMod=0}}})),_$bankDialog_262=createModuleFactory((function(t,e){const i=_$_colours_260({});t.exports={bankActivePage:0,drawDialogBank:function(){if(this.bankActivePage>0&&this.bankItemCount<=48&&(this.bankActivePage=0),this.bankActivePage>1&&this.bankItemCount<=96&&(this.bankActivePage=1),this.bankActivePage>2&&this.bankItemCount<=144&&(this.bankActivePage=2),(this.bankSelectedItemSlot>=this.bankItemCount||this.bankSelectedItemSlot<0)&&(this.bankSelectedItemSlot=-1),-1!==this.bankSelectedItemSlot&&this.bankItems[this.bankSelectedItemSlot]!==this.bankSelectedItem&&(this.bankSelectedItemSlot=-1,this.bankSelectedItem=-2),0!==this.mouseButtonClick){this.mouseButtonClick=0;let t=this.mouseX-((this.gameWidth/2|0)-204),e=this.mouseY-((this.gameHeight/2|0)-167);if(t>=0&&e>=12&&t<408&&e<280){let i=48*this.bankActivePage;for(let s=0;s<6;s++)for(let r=0;r<8;r++){const n=7+49*r,o=28+34*s;t>n&&t<n+49&&e>o&&e<o+34&&i<this.bankItemCount&&-1!==this.bankItems[i]&&(this.bankSelectedItem=this.bankItems[i],this.bankSelectedItemSlot=i),i++}t=52,e=3;let r=0;if(-1!==(r=this.bankSelectedItemSlot<0?-1:this.bankItems[this.bankSelectedItemSlot])){let i=this.bankItemsCount[this.bankSelectedItemSlot];1===_$gameData_212.itemStackable[r]&&i>1&&(i=1),i>=1&&this.mouseX>=t+220&&this.mouseY>=e+238&&this.mouseX<t+250&&this.mouseY<=e+249&&(this.packetStream.newPacket(_$client_223.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(1),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=5&&this.mouseX>=t+250&&this.mouseY>=e+238&&this.mouseX<t+280&&this.mouseY<=e+249&&(this.packetStream.newPacket(_$client_223.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(5),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=25&&this.mouseX>=t+280&&this.mouseY>=e+238&&this.mouseX<t+305&&this.mouseY<=e+249&&(this.packetStream.newPacket(_$client_223.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(25),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=100&&this.mouseX>=t+305&&this.mouseY>=e+238&&this.mouseX<t+335&&this.mouseY<=e+249&&(this.packetStream.newPacket(_$client_223.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(100),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=500&&this.mouseX>=t+335&&this.mouseY>=e+238&&this.mouseX<t+368&&this.mouseY<=e+249&&(this.packetStream.newPacket(_$client_223.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(500),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=2500&&this.mouseX>=t+370&&this.mouseY>=e+238&&this.mouseX<t+400&&this.mouseY<=e+249&&(this.packetStream.newPacket(_$client_223.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(2500),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),this.getInventoryCount(r)>=1&&this.mouseX>=t+220&&this.mouseY>=e+263&&this.mouseX<t+250&&this.mouseY<=e+274&&(this.packetStream.newPacket(_$client_223.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(1),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=5&&this.mouseX>=t+250&&this.mouseY>=e+263&&this.mouseX<t+280&&this.mouseY<=e+274&&(this.packetStream.newPacket(_$client_223.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(5),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=25&&this.mouseX>=t+280&&this.mouseY>=e+263&&this.mouseX<t+305&&this.mouseY<=e+274&&(this.packetStream.newPacket(_$client_223.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(25),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=100&&this.mouseX>=t+305&&this.mouseY>=e+263&&this.mouseX<t+335&&this.mouseY<=e+274&&(this.packetStream.newPacket(_$client_223.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(100),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=500&&this.mouseX>=t+335&&this.mouseY>=e+263&&this.mouseX<t+368&&this.mouseY<=e+274&&(this.packetStream.newPacket(_$client_223.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(500),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=2500&&this.mouseX>=t+370&&this.mouseY>=e+263&&this.mouseX<t+400&&this.mouseY<=e+274&&(this.packetStream.newPacket(_$client_223.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(2500),this.packetStream.putInt(2271560481),this.packetStream.sendPacket())}}else if(this.bankItemCount>48&&t>=50&&t<=115&&e<=12)this.bankActivePage=0;else if(this.bankItemCount>48&&t>=115&&t<=180&&e<=12)this.bankActivePage=1;else if(this.bankItemCount>96&&t>=180&&t<=245&&e<=12)this.bankActivePage=2;else{if(!(this.bankItemCount>144&&t>=245&&t<=310&&e<=12))return this.packetStream.newPacket(_$client_223.BANK_CLOSE),this.packetStream.sendPacket(),void(this.showDialogBank=!1);this.bankActivePage=3}}const t=(this.gameWidth/2|0)-204,e=(this.gameHeight/2|0)-167;this.surface.drawBox(t,e,408,12,192),this.surface.drawBoxAlpha(t,e+12,408,17,i.grey,160),this.surface.drawBoxAlpha(t,e+29,8,204,i.grey,160),this.surface.drawBoxAlpha(t+399,e+29,9,204,i.grey,160),this.surface.drawBoxAlpha(t,e+233,408,47,i.grey,160),this.surface.drawString("Bank",t+1,e+10,1,i.white);let r=50;if(this.bankItemCount>48){let s=i.white;0===this.bankActivePage?s=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(s=i.yellow),this.surface.drawString("<page 1>",t+r,e+10,1,s),r+=65,s=i.white,1===this.bankActivePage?s=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(s=i.yellow),this.surface.drawString("<page 2>",t+r,e+10,1,s),r+=65}if(this.bankItemCount>96){let s=i.white;2===this.bankActivePage?s=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(s=i.yellow),this.surface.drawString("<page 3>",t+r,e+10,1,s),r+=65}if(this.bankItemCount>144){let s=i.white;3===this.bankActivePage?s=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(s=i.yellow),this.surface.drawString("<page 4>",t+r,e+10,1,s),r+=65}let s=i.white;this.mouseX>t+320&&this.mouseY>=e&&this.mouseX<t+408&&this.mouseY<e+12&&(s=i.red),this.surface.drawStringRight("Close window",t+406,e+10,1,s),this.surface.drawString("Number in bank in green",t+7,e+24,1,i.green),this.surface.drawString("Number held in blue",t+289,e+24,1,i.cyan);let n=48*this.bankActivePage;for(let a=0;a<6;a++)for(let r=0;r<8;r++){const s=t+7+49*r,o=e+28+34*a;this.bankSelectedItemSlot===n?this.surface.drawBoxAlpha(s,o,49,34,i.red,160):this.surface.drawBoxAlpha(s,o,49,34,i.lightGrey2,160),this.surface.drawBoxEdge(s,o,50,35,0),n<this.bankItemCount&&-1!==this.bankItems[n]&&(this.surface._spriteClipping_from9(s,o,48,32,this.spriteItem+_$gameData_212.itemPicture[this.bankItems[n]],_$gameData_212.itemMask[this.bankItems[n]],0,0,!1),this.surface.drawString(this.bankItemsCount[n].toString(),s+1,o+10,1,i.green),this.surface.drawStringRight(this.getInventoryCount(this.bankItems[n]).toString(),s+47,o+29,1,i.cyan)),n++}if(this.surface.drawLineHoriz(t+5,e+256,398,0),-1===this.bankSelectedItemSlot)return void this.surface.drawStringCenter("Select an object to withdraw or deposit",t+204,e+248,3,i.yellow);let o=0;if(-1!==(o=this.bankSelectedItemSlot<0?-1:this.bankItems[this.bankSelectedItemSlot])){let r=this.bankItemsCount[this.bankSelectedItemSlot];1===_$gameData_212.itemStackable[o]&&r>1&&(r=1),r>0&&(this.surface.drawString("Withdraw "+_$gameData_212.itemName[o],t+2,e+248,1,i.white),s=i.white,this.mouseX>=t+220&&this.mouseY>=e+238&&this.mouseX<t+250&&this.mouseY<=e+249&&(s=i.red),this.surface.drawString("One",t+222,e+248,1,s),r>=5&&(s=i.white,this.mouseX>=t+250&&this.mouseY>=e+238&&this.mouseX<t+280&&this.mouseY<=e+249&&(s=i.red),this.surface.drawString("Five",t+252,e+248,1,s)),r>=25&&(s=i.white,this.mouseX>=t+280&&this.mouseY>=e+238&&this.mouseX<t+305&&this.mouseY<=e+249&&(s=i.red),this.surface.drawString("25",t+282,e+248,1,s)),r>=100&&(s=i.white,this.mouseX>=t+305&&this.mouseY>=e+238&&this.mouseX<t+335&&this.mouseY<=e+249&&(s=i.red),this.surface.drawString("100",t+307,e+248,1,s)),r>=500&&(s=i.white,this.mouseX>=t+335&&this.mouseY>=e+238&&this.mouseX<t+368&&this.mouseY<=e+249&&(s=i.red),this.surface.drawString("500",t+337,e+248,1,s)),r>=2500&&(s=i.white,this.mouseX>=t+370&&this.mouseY>=e+238&&this.mouseX<t+400&&this.mouseY<=e+249&&(s=i.red),this.surface.drawString("2500",t+370,e+248,1,s))),this.getInventoryCount(o)>0&&(this.surface.drawString("Deposit "+_$gameData_212.itemName[o],t+2,e+273,1,i.white),s=i.white,this.mouseX>=t+220&&this.mouseY>=e+263&&this.mouseX<t+250&&this.mouseY<=e+274&&(s=i.red),this.surface.drawString("One",t+222,e+273,1,s),this.getInventoryCount(o)>=5&&(s=i.white,this.mouseX>=t+250&&this.mouseY>=e+263&&this.mouseX<t+280&&this.mouseY<=e+274&&(s=i.red),this.surface.drawString("Five",t+252,e+273,1,s)),this.getInventoryCount(o)>=25&&(s=i.white,this.mouseX>=t+280&&this.mouseY>=e+263&&this.mouseX<t+305&&this.mouseY<=e+274&&(s=i.red),this.surface.drawString("25",t+282,e+273,1,s)),this.getInventoryCount(o)>=100&&(s=i.white,this.mouseX>=t+305&&this.mouseY>=e+263&&this.mouseX<t+335&&this.mouseY<=e+274&&(s=i.red),this.surface.drawString("100",t+307,e+273,1,s)),this.getInventoryCount(o)>=500&&(s=i.white,this.mouseX>=t+335&&this.mouseY>=e+263&&this.mouseX<t+368&&this.mouseY<=e+274&&(s=i.red),this.surface.drawString("500",t+337,e+273,1,s)),this.getInventoryCount(o)>=2500&&(s=i.white,this.mouseX>=t+370&&this.mouseY>=e+263&&this.mouseX<t+400&&this.mouseY<=e+274&&(s=i.red),this.surface.drawString("2500",t+370,e+273,1,s)))}}}})),_$appearancePanel_261=createModuleFactory((function(t,e){function i(t,e,i,r){t.addBoxRounded(i,r,53,41);const s=e.split("\n");1===s.length?t.addTextCentre(i,r,e,1,!0):(t.addTextCentre(i,r-8,s[0],1,!0),t.addTextCentre(i,r+8,s[1],1,!0));const n=t.addButton(i-40,r,20,20);t.addSprite(i-40,r,_$panel_254.baseSpriteStart+7);const o=t.addButton(i+40,r,20,20);return t.addSprite(i+40,r,_$panel_254.baseSpriteStart+6),{leftButton:n,rightButton:o}}t.exports={createAppearancePanel:function(){this.panelAppearance=new _$panel_254(this.surface,100);const t=256;this.panelAppearance.addTextCentre(t,10,"Please design Your Character",4,!0);let e=24;this.panelAppearance.addTextCentre(201,e+110,"Front",3,!0),this.panelAppearance.addTextCentre(t,e+110,"Side",3,!0),this.panelAppearance.addTextCentre(311,e+110,"Back",3,!0),e+=145;const{leftButton:r,rightButton:s}=i(this.panelAppearance,"Head\nType",202,e);this.controlButtonAppearanceHeadLeft=r,this.controlButtonAppearanceHeadRight=s;const{leftButton:n,rightButton:o}=i(this.panelAppearance,"Hair\nColor",310,e);this.controlButtonAppearanceHairLeft=n,this.controlButtonAppearanceHairRight=o,e+=50;const{leftButton:a,rightButton:h}=i(this.panelAppearance,"Gender",202,e);this.controlButtonAppearanceGenderLeft=a,this.controlButtonAppearanceGenderRight=h;const{leftButton:u,rightButton:l}=i(this.panelAppearance,"Top\nColor",310,e);this.controlButtonAppearanceTopLeft=u,this.controlButtonAppearanceTopRight=l,e+=50;const{leftButton:c,rightButton:f}=i(this.panelAppearance,"Skin\nColor",202,e);this.controlButtonAppearanceSkinLeft=c,this.controlButtonAppearanceSkinRight=f;const{leftButton:d,rightButton:m}=i(this.panelAppearance,"Bottom\nColor",310,e);this.controlButtonAppearanceBottomLeft=d,this.controlButtonAppearanceBottomRight=m,e+=47,this.panelAppearance.addButtonBackground(t,e,200,30),this.panelAppearance.addTextCentre(t,e,"Accept",4,!1),this.controlButtonAppearanceAccept=this.panelAppearance.addButton(t,e,200,30)},handleAppearancePanelInput:function(){if(this.panelAppearance.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.panelAppearance.isClicked(this.controlButtonAppearanceHeadLeft))do{this.appearanceHeadType=(this.appearanceHeadType-1+_$gameData_212.animationCount)%_$gameData_212.animationCount}while(1!=(3&_$gameData_212.animationGender[this.appearanceHeadType])||0==(_$gameData_212.animationGender[this.appearanceHeadType]&4*this.appearanceHeadGender));if(this.panelAppearance.isClicked(this.controlButtonAppearanceHeadRight))do{this.appearanceHeadType=(this.appearanceHeadType+1)%_$gameData_212.animationCount}while(1!=(3&_$gameData_212.animationGender[this.appearanceHeadType])||0==(_$gameData_212.animationGender[this.appearanceHeadType]&4*this.appearanceHeadGender));if(this.panelAppearance.isClicked(this.controlButtonAppearanceHairLeft)&&(this.appearanceHairColour=(this.appearanceHairColour-1+this.characterHairColours.length)%this.characterHairColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceHairRight)&&(this.appearanceHairColour=(this.appearanceHairColour+1)%this.characterHairColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceGenderLeft)||this.panelAppearance.isClicked(this.controlButtonAppearanceGenderRight)){for(this.appearanceHeadGender=3-this.appearanceHeadGender;1!=(3&_$gameData_212.animationGender[this.appearanceHeadType])||0==(_$gameData_212.animationGender[this.appearanceHeadType]&4*this.appearanceHeadGender);this.appearanceHeadType=(this.appearanceHeadType+1)%_$gameData_212.animationCount);for(;2!=(3&_$gameData_212.animationGender[this.appearanceBodyGender])||0==(_$gameData_212.animationGender[this.appearanceBodyGender]&4*this.appearanceHeadGender);this.appearanceBodyGender=(this.appearanceBodyGender+1)%_$gameData_212.animationCount);}this.panelAppearance.isClicked(this.controlButtonAppearanceTopLeft)&&(this.appearanceTopColour=(this.appearanceTopColour-1+this.characterTopBottomColours.length)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceTopRight)&&(this.appearanceTopColour=(this.appearanceTopColour+1)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceSkinLeft)&&(this.appearanceSkinColour=(this.appearanceSkinColour-1+this.characterSkinColours.length)%this.characterSkinColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceSkinRight)&&(this.appearanceSkinColour=(this.appearanceSkinColour+1)%this.characterSkinColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceBottomLeft)&&(this.appearanceBottomColour=(this.appearanceBottomColour-1+this.characterTopBottomColours.length)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceBottomRight)&&(this.appearanceBottomColour=(this.appearanceBottomColour+1)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceAccept)&&(this.packetStream.newPacket(_$client_223.APPEARANCE),this.packetStream.putByte(this.appearanceHeadGender),this.packetStream.putByte(this.appearanceHeadType),this.packetStream.putByte(this.appearanceBodyGender),this.packetStream.putByte(this.appearance2Colour),this.packetStream.putByte(this.appearanceHairColour),this.packetStream.putByte(this.appearanceTopColour),this.packetStream.putByte(this.appearanceBottomColour),this.packetStream.putByte(this.appearanceSkinColour),this.packetStream.sendPacket(),this.surface.blackScreen(),this.showAppearanceChange=!1)},drawAppearancePanelCharacterSprites:function(){this.surface.interlace=!1,this.surface.blackScreen(),this.panelAppearance.drawPanel();const t=25;this.surface._spriteClipping_from6(169,t,64,102,_$gameData_212.animationNumber[this.appearance2Colour],this.characterTopBottomColours[this.appearanceBottomColour]),this.surface._spriteClipping_from9(169,t,64,102,_$gameData_212.animationNumber[this.appearanceBodyGender],this.characterTopBottomColours[this.appearanceTopColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from9(169,t,64,102,_$gameData_212.animationNumber[this.appearanceHeadType],this.characterHairColours[this.appearanceHairColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from6(224,t,64,102,_$gameData_212.animationNumber[this.appearance2Colour]+6,this.characterTopBottomColours[this.appearanceBottomColour]),this.surface._spriteClipping_from9(224,t,64,102,_$gameData_212.animationNumber[this.appearanceBodyGender]+6,this.characterTopBottomColours[this.appearanceTopColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from9(224,t,64,102,_$gameData_212.animationNumber[this.appearanceHeadType]+6,this.characterHairColours[this.appearanceHairColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from6(279,t,64,102,_$gameData_212.animationNumber[this.appearance2Colour]+12,this.characterTopBottomColours[this.appearanceBottomColour]),this.surface._spriteClipping_from9(279,t,64,102,_$gameData_212.animationNumber[this.appearanceBodyGender]+12,this.characterTopBottomColours[this.appearanceTopColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from9(279,t,64,102,_$gameData_212.animationNumber[this.appearanceHeadType]+12,this.characterHairColours[this.appearanceHairColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._drawSprite_from3(0,this.gameHeight,this.spriteMedia+22),this.surface.draw(this.graphics,0,0)}}})),_$_colours_260=createModuleFactory((function(t,e){t.exports={black:0,white:16777215,grey:10000536,darkGrey:11908533,lightGrey:14474460,lightGrey2:13684944,lightGrey3:13224393,red:16711680,yellow:16776960,cyan:65535,green:65280,orange:16744448,chatPurple:13158655,chatOrange:16762930,chatRed:16724530}})),_$asn1_27=createModuleFactory((function(t,e){var i=e;i.bignum=_$bn_41,i.define=_$api_28({}).define,i.base=_$base_30({}),i.constants=_$constants_34({}),i.decoders=_$decoders_36({}),i.encoders=_$encoders_39({})})),_$encoders_39=createModuleFactory((function(t,e){var i=e;i.der=_$der_38({}),i.pem=_$pem_40({})})),_$pem_40=createModuleFactory((function(t,e){var i=_$der_38({});function r(t){i.call(this,t),this.enc="pem"}_$inherits_browser_130(r,i),t.exports=r,r.prototype.encode=function(t,e){for(var r=i.prototype.encode.call(this,t).toString("base64"),s=["-----BEGIN "+e.label+"-----"],n=0;n<r.length;n+=64)s.push(r.slice(n,n+64));return s.push("-----END "+e.label+"-----"),s.join("\n")}})),_$der_38=createModuleFactory((function(t,e){var i=_$buffer_73({}).Buffer,r=_$asn1_27({}),s=r.base,n=r.constants.der;function o(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new a,this.tree._init(t.body)}function a(t){s.Node.call(this,"der",t)}function h(t){return t<10?"0"+t:t}t.exports=o,o.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},_$inherits_browser_130(a,s.Node),a.prototype._encodeComposite=function(t,e,r,s){var o,a=function(t,e,i,r){var s;if("seqof"===t?t="seq":"setof"===t&&(t="set"),n.tagByName.hasOwnProperty(t))s=n.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);s=t}return s>=31?r.error("Multi-octet tag encoding unsupported"):(e||(s|=32),s|n.tagClassByName[i||"universal"]<<6)}(t,e,r,this.reporter);if(s.length<128)return(o=new i(2))[0]=a,o[1]=s.length,this._createEncoderBuffer([o,s]);for(var h=1,u=s.length;u>=256;u>>=8)h++;(o=new i(2+h))[0]=a,o[1]=128|h,u=1+h;for(var l=s.length;l>0;u--,l>>=8)o[u]=255&l;return this._createEncoderBuffer([o,s])},a.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var r=new i(2*t.length),s=0;s<t.length;s++)r.writeUInt16BE(t.charCodeAt(s),2*s);return this._createEncoderBuffer(r)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},a.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var s=0;s<t.length;s++)t[s]|=0}else if(Array.isArray(t))for(t=t.slice(),s=0;s<t.length;s++)t[s]|=0;if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}var n=0;for(s=0;s<t.length;s++){var o=t[s];for(n++;o>=128;o>>=7)n++}var a=new i(n),h=a.length-1;for(s=t.length-1;s>=0;s--)for(o=t[s],a[h--]=127&o;(o>>=7)>0;)a[h--]=128|127&o;return this._createEncoderBuffer(a)},a.prototype._encodeTime=function(t,e){var i,r=new Date(t);return"gentime"===e?i=[h(r.getFullYear()),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[h(r.getFullYear()%100),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},a.prototype._encodeNull=function(){return this._createEncoderBuffer("")},a.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){var r=t.toArray();!t.sign&&128&r[0]&&r.unshift(0),t=new i(r)}if(i.isBuffer(t)){var s=t.length;0===t.length&&s++;var n=new i(s);return t.copy(n),0===t.length&&(n[0]=0),this._createEncoderBuffer(n)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);s=1;for(var o=t;o>=256;o>>=8)s++;for(o=(n=new Array(s)).length-1;o>=0;o--)n[o]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(new i(n))},a.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},a.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},a.prototype._skipDefault=function(t,e,i){var r,s=this._baseState;if(null===s.default)return!1;var n=t.join();if(void 0===s.defaultBuffer&&(s.defaultBuffer=this._encodeValue(s.default,e,i).join()),n.length!==s.defaultBuffer.length)return!1;for(r=0;r<n.length;r++)if(n[r]!==s.defaultBuffer[r])return!1;return!0}})),_$decoders_36=createModuleFactory((function(t,e){var i=e;i.der=_$der_35({}),i.pem=_$pem_37({})})),_$pem_37=createModuleFactory((function(t,e){var i=_$buffer_73({}).Buffer,r=_$der_35({});function s(t){r.call(this,t),this.enc="pem"}_$inherits_browser_130(s,r),t.exports=s,s.prototype.decode=function(t,e){for(var s=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,h=-1,u=0;u<s.length;u++){var l=s[u].match(o);if(null!==l&&l[2]===n){if(-1!==a){if("END"!==l[1])break;h=u;break}if("BEGIN"!==l[1])break;a=u}}if(-1===a||-1===h)throw new Error("PEM section not found for: "+n);var c=s.slice(a+1,h).join("");c.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new i(c,"base64");return r.prototype.decode.call(this,f,e)}})),_$der_35=createModuleFactory((function(t,e){var i=_$asn1_27({}),r=i.base,s=i.bignum,n=i.constants.der;function o(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new a,this.tree._init(t.body)}function a(t){r.Node.call(this,"der",t)}function h(t,e){var i=t.readUInt8(e);if(t.isError(i))return i;var r=n.tagClass[i>>6],s=0==(32&i);if(31==(31&i)){var o=i;for(i=0;128==(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;i<<=7,i|=127&o}}else i&=31;return{cls:r,primitive:s,tag:i,tagStr:n.tag[i]}}function u(t,e,i){var r=t.readUInt8(i);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;var s=127&r;if(s>4)return t.error("length octect is too long");r=0;for(var n=0;n<s;n++){r<<=8;var o=t.readUInt8(i);if(t.isError(o))return o;r|=o}return r}t.exports=o,o.prototype.decode=function(t,e){return t instanceof r.DecoderBuffer||(t=new r.DecoderBuffer(t,e)),this.tree._decode(t,e)},_$inherits_browser_130(a,r.Node),a.prototype._peekTag=function(t,e,i){if(t.isEmpty())return!1;var r=t.save(),s=h(t,'Failed to peek tag: "'+e+'"');return t.isError(s)?s:(t.restore(r),s.tag===e||s.tagStr===e||s.tagStr+"of"===e||i)},a.prototype._decodeTag=function(t,e,i){var r=h(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var s=u(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(s))return s;if(!i&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==s)return t.skip(s,'Failed to match body of: "'+e+'"');var n=t.save(),o=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(o)?o:(s=t.offset-n.offset,t.restore(n),t.skip(s,'Failed to match body of: "'+e+'"'))},a.prototype._skipUntilEnd=function(t,e){for(;;){var i=h(t,e);if(t.isError(i))return i;var r,s=u(t,i.primitive,e);if(t.isError(s))return s;if(r=i.primitive||null!==s?t.skip(s):this._skipUntilEnd(t,e),t.isError(r))return r;if("end"===i.tagStr)break}},a.prototype._decodeList=function(t,e,i,r){for(var s=[];!t.isEmpty();){var n=this._peekTag(t,"end");if(t.isError(n))return n;var o=i.decode(t,"der",r);if(t.isError(o)&&n)break;s.push(o)}return s},a.prototype._decodeStr=function(t,e){if("bitstr"===e){var i=t.readUInt8();return t.isError(i)?i:{unused:i,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var s="",n=0;n<r.length/2;n++)s+=String.fromCharCode(r.readUInt16BE(2*n));return s}if("numstr"===e){var o=t.raw().toString("ascii");return this._isNumstr(o)?o:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var a=t.raw().toString("ascii");return this._isPrintstr(a)?a:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},a.prototype._decodeObjid=function(t,e,i){for(var r,s=[],n=0;!t.isEmpty();){var o=t.readUInt8();n<<=7,n|=127&o,0==(128&o)&&(s.push(n),n=0)}128&o&&s.push(n);var a=s[0]/40|0,h=s[0]%40;if(r=i?s:[a,h].concat(s.slice(1)),e){var u=e[r.join(" ")];void 0===u&&(u=e[r.join(".")]),void 0!==u&&(r=u)}return r},a.prototype._decodeTime=function(t,e){var i=t.raw().toString();if("gentime"===e)var r=0|i.slice(0,4),s=0|i.slice(4,6),n=0|i.slice(6,8),o=0|i.slice(8,10),a=0|i.slice(10,12),h=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|i.slice(0,2),s=0|i.slice(2,4),n=0|i.slice(4,6),o=0|i.slice(6,8),a=0|i.slice(8,10),h=0|i.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,s-1,n,o,a,h,0)},a.prototype._decodeNull=function(t){return null},a.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},a.prototype._decodeInt=function(t,e){var i=t.raw(),r=new s(i);return e&&(r=e[r.toString(10)]||r),r},a.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}})),_$constants_34=createModuleFactory((function(t,e){var i=e;i._reverse=function(t){var e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);var r=t[i];e[r]=i})),e},i.der=_$der_33({})})),_$der_33=createModuleFactory((function(t,e){var i=_$constants_34({});e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=i._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=i._reverse(e.tag)})),_$base_30=createModuleFactory((function(t,e){var i=e;i.Reporter=_$reporter_32.Reporter,i.DecoderBuffer=_$buffer_29({}).DecoderBuffer,i.EncoderBuffer=_$buffer_29({}).EncoderBuffer,i.Node=_$Node_31({})})),_$Node_31=createModuleFactory((function(t,i){var r=_$base_30({}).Reporter,s=_$base_30({}).EncoderBuffer,n=_$base_30({}).DecoderBuffer,o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],a=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function h(t,e){var i={};this._baseState=i,i.enc=t,i.parent=e||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}t.exports=h;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){var t=this._baseState,e={};u.forEach((function(i){e[i]=t[i]}));var i=new this.constructor(e.parent);return i._baseState=e,i},h.prototype._wrap=function(){var t=this._baseState;a.forEach((function(e){this[e]=function(){var i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}}),this)},h.prototype._init=function(t){var e=this._baseState;t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this)},h.prototype._useArgs=function(t){var e=this._baseState,i=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==i.length&&(e.children=i,i.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach((function(i){i==(0|i)&&(i|=0);var r=t[i];e[r]=i})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){h.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),o.forEach((function(t){h.prototype[t]=function(){var e=this._baseState,i=Array.prototype.slice.call(arguments);return e.tag=t,this._useArgs(i),this}})),h.prototype.use=function(t){return this._baseState.use=t,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(t){var e=this._baseState;return e.default=t,e.optional=!0,this},h.prototype.explicit=function(t){return this._baseState.explicit=t,this},h.prototype.implicit=function(t){return this._baseState.implicit=t,this},h.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},h.prototype.key=function(t){return this._baseState.key=t,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(t){return this._baseState.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},h.prototype.contains=function(t){return this._baseState.contains=t,this},h.prototype._decode=function(t,i){var r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,i));var s,o=r.default,a=!0,h=null;if(null!==r.key&&(h=t.enterKey(r.key)),r.optional){var u=null;if(null!==r.explicit?u=r.explicit:null!==r.implicit?u=r.implicit:null!==r.tag&&(u=r.tag),null!==u||r.any){if(a=this._peekTag(t,u,r.any),t.isError(a))return a}else{var l=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,i):this._decodeChoice(t,i),a=!0}catch(e){a=!1}t.restore(l)}}if(r.obj&&a&&(s=t.enterObject()),a){if(null!==r.explicit){var c=this._decodeTag(t,r.explicit);if(t.isError(c))return c;t=c}var f=t.offset;if(null===r.use&&null===r.choice){r.any&&(l=t.save());var d=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(d))return d;r.any?o=t.raw(l):t=d}if(i&&i.track&&null!==r.tag&&i.track(t.path(),f,t.length,"tagged"),i&&i.track&&null!==r.tag&&i.track(t.path(),t.offset,t.length,"content"),o=r.any?o:null===r.choice?this._decodeGeneric(r.tag,t,i):this._decodeChoice(t,i),t.isError(o))return o;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(e){e._decode(t,i)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var m=new n(o);o=this._getUse(r.contains,t._reporterState.obj)._decode(m,i)}}return r.obj&&a&&(o=t.leaveObject(s)),null===r.key||null===o&&!0!==a?null!==h&&t.exitKey(h):t.leaveKey(h,r.key,o),o},h.prototype._decodeGeneric=function(t,e,i){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],i):/str$/.test(t)?this._decodeStr(e,t,i):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],i):"objid"===t?this._decodeObjid(e,null,null,i):"gentime"===t||"utctime"===t?this._decodeTime(e,t,i):"null_"===t?this._decodeNull(e,i):"bool"===t?this._decodeBool(e,i):"objDesc"===t?this._decodeStr(e,t,i):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],i):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},h.prototype._getUse=function(t,e){var i=this._baseState;return i.useDecoder=this._use(t,e),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},h.prototype._decodeChoice=function(t,i){var r=this._baseState,s=null,n=!1;return Object.keys(r.choice).some((function(o){var a=t.save(),h=r.choice[o];try{var u=h._decode(t,i);if(t.isError(u))return!1;s={type:o,value:u},n=!0}catch(e){return t.restore(a),!1}return!0}),this),n?s:t.error("Choice not matched")},h.prototype._createEncoderBuffer=function(t){return new s(t,this.reporter)},h.prototype._encode=function(t,e,i){var r=this._baseState;if(null===r.default||r.default!==t){var s=this._encodeValue(t,e,i);if(void 0!==s&&!this._skipDefault(s,e,i))return s}},h.prototype._encodeValue=function(t,e,i){var s=this._baseState;if(null===s.parent)return s.children[0]._encode(t,e||new r);var n=null;if(this.reporter=e,s.optional&&void 0===t){if(null===s.default)return;t=s.default}var o=null,a=!1;if(s.any)n=this._createEncoderBuffer(t);else if(s.choice)n=this._encodeChoice(t,e);else if(s.contains)o=this._getUse(s.contains,i)._encode(t,e),a=!0;else if(s.children)o=s.children.map((function(i){if("null_"===i._baseState.tag)return i._encode(null,e,t);if(null===i._baseState.key)return e.error("Child should have a key");var r=e.enterKey(i._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var s=i._encode(t[i._baseState.key],e,t);return e.leaveKey(r),s}),this).filter((function(t){return t})),o=this._createEncoderBuffer(o);else if("seqof"===s.tag||"setof"===s.tag){if(!s.args||1!==s.args.length)return e.error("Too many args for : "+s.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var h=this.clone();h._baseState.implicit=null,o=this._createEncoderBuffer(t.map((function(i){var r=this._baseState;return this._getUse(r.args[0],t)._encode(i,e)}),h))}else null!==s.use?n=this._getUse(s.use,i)._encode(t,e):(o=this._encodePrimitive(s.tag,t),a=!0);if(!s.any&&null===s.choice){var u=null!==s.implicit?s.implicit:s.tag,l=null===s.implicit?"universal":"context";null===u?null===s.use&&e.error("Tag could be omitted only for .use()"):null===s.use&&(n=this._encodeComposite(u,a,l,o))}return null!==s.explicit&&(n=this._encodeComposite(s.explicit,!1,"context",n)),n},h.prototype._encodeChoice=function(t,e){return this._baseState.choice[t.type]._encode(t.value,e)},h.prototype._encodePrimitive=function(t,e){var i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},h.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},h.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}})),_$buffer_29=createModuleFactory((function(t,e){var i=_$base_30({}).Reporter,r=_$buffer_73({}).Buffer;function s(t,e){i.call(this,e),r.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function n(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return t instanceof n||(t=new n(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=r.byteLength(t);else{if(!r.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}_$inherits_browser_130(s,i),e.DecoderBuffer=s,s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(t){var e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var i=new s(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=n,n.prototype.join=function(t,e){return t||(t=new r(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(i){i.join(t,e),e+=i.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):r.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}})),_$api_28=createModuleFactory((function(t,i){var r=_$asn1_27({});function s(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}i.define=function(t,e){return new s(t,e)},s.prototype._createNamed=function(t){var i;try{i=_$vmBrowserify_206({}).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){i=function(t){this._initNamed(t)}}return _$inherits_browser_130(i,t),i.prototype._initNamed=function(e){t.call(this,e)},new i(this)},s.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(r.decoders[t])),this.decoders[t]},s.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},s.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(r.encoders[t])),this.encoders[t]},s.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)}})),_$vmBrowserify_206=createModuleFactory((function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i++)e(t[i],i,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,i){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:i})}}catch(e){return function(t,e,i){t[e]=i}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var i=e.contentWindow,r=i.eval,s=i.execScript;!r&&s&&(s.call(i,"null"),r=i.eval),forEach(Object_keys(t),(function(e){i[e]=t[e]})),forEach(globals,(function(e){t[e]&&(i[e]=t[e])}));var n=Object_keys(i),o=r.call(i,this.code);return forEach(Object_keys(i),(function(e){(e in t||-1===indexOf(n,e))&&(t[e]=i[e])})),forEach(globals,(function(e){e in t||defineProp(t,e,i[e])})),document.body.removeChild(e),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),i=this.runInContext(e);return t&&forEach(Object_keys(e),(function(i){t[i]=e[i]})),i},forEach(Object_keys(Script.prototype),(function(t){exports[t]=Script[t]=function(e){var i=Script(e);return i[t].apply(i,[].slice.call(arguments,1))}})),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),(function(i){e[i]=t[i]})),e}})),_$Readable_167=createModuleFactory((function(t,e){(function(e,i){(function(){"use strict";var r;t.exports=d,d.ReadableState=f,_$events_113.EventEmitter;var s=function(t,e){return t.listeners(e).length},n=_$safeBuffer_173.Buffer,o=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},a=Object.create(_$util_77);a.inherits=_$inherits_browser_130;var h,u=_$empty_45({}),l=void 0;l=u&&u.debuglog?u.debuglog("stream"):function(){},a.inherits(d,_$streamBrowser_172);var c=["error","close","destroy","pause","resume"];function f(t,e){t=t||{};var i=e instanceof(r=r||_$Duplex_165({}));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var s=t.highWaterMark,n=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:i&&(n||0===n)?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new _$BufferList_170,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=_$string_decoder_174({}).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function d(t){if(r=r||_$Duplex_165({}),!(this instanceof d))return new d(t);this._readableState=new f(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),_$streamBrowser_172.call(this)}function m(t,e,i,r,s){var a,h=t._readableState;return null===e?(h.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,g(t)}}(t,h)):(s||(a=function(t,e){var i,r;return r=e,n.isBuffer(r)||r instanceof o||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}(h,e)),a?t.emit("error",a):h.objectMode||e&&e.length>0?("string"==typeof e||h.objectMode||Object.getPrototypeOf(e)===n.prototype||(e=function(t){return n.from(t)}(e)),r?h.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):p(t,h,e,!0):h.ended?t.emit("error",new Error("stream.push() after EOF")):(h.reading=!1,h.decoder&&!i?(e=h.decoder.write(e),h.objectMode||0!==e.length?p(t,h,e,!1):y(t,h)):p(t,h,e,!1))):r||(h.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(h)}function p(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&g(t)),y(t,e)}Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),d.prototype.destroy=_$destroy_171.destroy,d.prototype._undestroy=_$destroy_171.undestroy,d.prototype._destroy=function(t,e){this.push(null),e(t)},d.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=n.from(t,e),e=""),i=!0),m(this,t,e,!1,i)},d.prototype.unshift=function(t){return m(this,t,null,!0,!1)},d.prototype.isPaused=function(){return!1===this._readableState.flowing},d.prototype.setEncoding=function(t){return h||(h=_$string_decoder_174({}).StringDecoder),this._readableState.decoder=new h(t),this._readableState.encoding=t,this};function _(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function g(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?_$processNextickArgs_153.nextTick(b,t):b(t))}function b(t){l("emit readable"),t.emit("readable"),S(t)}function y(t,e){e.readingMore||(e.readingMore=!0,_$processNextickArgs_153.nextTick(w,t,e))}function w(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(l("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function v(t){l("readable nexttick read 0"),t.read(0)}function M(t,e){e.reading||(l("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),S(t),e.flowing&&!e.reading&&t.read(0)}function S(t){var e=t._readableState;for(l("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,r=1,s=i.data;for(t-=s.length;i=i.next;){var n=i.data,o=t>n.length?n.length:t;if(o===n.length?s+=n:s+=n.slice(0,t),0==(t-=o)){o===n.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=n.slice(o));break}++r}return e.length-=r,s}(t,e):function(t,e){var i=n.allocUnsafe(t),r=e.head,s=1;for(r.data.copy(i),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,a),0==(t-=a)){a===o.length?(++s,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++s}return e.length-=s,i}(t,e),r}(t,e.buffer,e.decoder),i);var i}function I(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,_$processNextickArgs_153.nextTick(T,e,t))}function T(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function A(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}d.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?I(this):g(this),null;if(0===(t=_(t,e))&&e.ended)return 0===e.length&&I(this),null;var r,s=e.needReadable;return l("need readable",s),(0===e.length||e.length-t<e.highWaterMark)&&l("length less than watermark",s=!0),e.ended||e.reading?l("reading or ended",s=!1):s&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_(i,e))),null===(r=t>0?C(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&I(this)),null!==r&&this.emit("data",r),r},d.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},d.prototype.pipe=function(t,i){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,l("pipe count=%d opts=%j",n.pipesCount,i);var o=i&&!1===i.end||t===e.stdout||t===e.stderr?_:a;function a(){l("onend"),t.end()}n.endEmitted?_$processNextickArgs_153.nextTick(o):r.once("end",o),t.on("unpipe",(function e(i,s){l("onunpipe"),i===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,l("cleanup"),t.removeListener("close",m),t.removeListener("finish",p),t.removeListener("drain",h),t.removeListener("error",d),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",_),r.removeListener("data",f),u=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}));var h=function(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,S(t))}}(r);t.on("drain",h);var u=!1,c=!1;function f(e){l("ondata"),c=!1,!1!==t.write(e)||c||((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==A(n.pipes,t))&&!u&&(l("false write response, pause",n.awaitDrain),n.awaitDrain++,c=!0),r.pause())}function d(e){l("onerror",e),_(),t.removeListener("error",d),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",p),_()}function p(){l("onfinish"),t.removeListener("close",m),_()}function _(){l("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener("error",i);t._events&&t._events.error?_$isarray_133(t._events.error)?t._events.error.unshift(i):t._events.error=[i,t._events.error]:t.on("error",i)}(t,0,d),t.once("close",m),t.once("finish",p),t.emit("pipe",r),n.flowing||(l("pipe resume"),r.resume()),t},d.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var n=0;n<s;n++)r[n].emit("unpipe",this,{hasUnpiped:!1});return this}var o=A(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},d.prototype.on=function(t,e){var i=_$streamBrowser_172.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):_$processNextickArgs_153.nextTick(v,this))}return i},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,_$processNextickArgs_153.nextTick(M,t,e))}(this,t)),this},d.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},d.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var s in t.on("end",(function(){if(l("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(s){l("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s||(i.objectMode||s&&s.length)&&(e.push(s)||(r=!0,t.pause()))})),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(e){return function(){return t[e].apply(t,arguments)}}(s));for(var n=0;n<c.length;n++)t.on(c[n],this.emit.bind(this,c[n]));return this._read=function(e){l("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),d._fromList=C}).call(this)}).call(this,_$browser_154,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),_$string_decoder_174=createModuleFactory((function(t,e){"use strict";var i=_$safeBuffer_173.Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=a,this.end=h,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=l,e=3;break;default:return this.write=c,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function n(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function a(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function c(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},s.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var s=n(e[r]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--r<i||-2===s?0:(s=n(e[r]))>=0?(s>0&&(t.lastNeed=s-2),s):--r<i||-2===s?0:(s=n(e[r]))>=0?(s>0&&(2===s?s=0:t.lastNeed=s-3),s):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}})),_$Duplex_165=createModuleFactory((function(t,e){"use strict";var i=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var r=Object.create(_$util_77);r.inherits=_$inherits_browser_130;var s=_$Readable_167({}),n=_$Writable_169({});r.inherits(u,s);for(var o=i(n.prototype),a=0;a<o.length;a++){var h=o[a];u.prototype[h]||(u.prototype[h]=n.prototype[h])}function u(t){if(!(this instanceof u))return new u(t);s.call(this,t),n.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||_$processNextickArgs_153.nextTick(c,this)}function c(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),_$processNextickArgs_153.nextTick(e,t)}})),_$Writable_169=createModuleFactory((function(t,e){(function(e,i,r){(function(){"use strict";function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;for(t.entry=null;r;){var s=r.callback;e.pendingcb--,s(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=m;var n,o=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:_$processNextickArgs_153.nextTick;m.WritableState=d;var a=Object.create(_$util_77);a.inherits=_$inherits_browser_130;var h,u={deprecate:_$browser_205},l=_$safeBuffer_173.Buffer,c=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function f(){}function d(t,e){n=n||_$Duplex_165({}),t=t||{};var i=e instanceof n;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,a=t.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(a||0===a)?a:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,s=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,r,s){--e.pendingcb,i?(_$processNextickArgs_153.nextTick(s,r),_$processNextickArgs_153.nextTick(w,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(s(r),t._writableState.errorEmitted=!0,t.emit("error",r),w(t,e))}(t,i,r,e,s);else{var n=b(i);n||i.corked||i.bufferProcessing||!i.bufferedRequest||g(t,i),r?o(_,t,i,n,s):_(t,i,n,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function m(t){if(n=n||_$Duplex_165({}),!(h.call(m,this)||this instanceof n))return new m(t);this._writableState=new d(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),_$streamBrowser_172.call(this)}function p(t,e,i,r,s,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,i?t._writev(s,e.onwrite):t._write(s,n,e.onwrite),e.sync=!1}function _(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),w(t,e)}function g(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),o=e.corkedRequestsFree;o.entry=i;for(var a=0,h=!0;i;)n[a]=i,i.isBuf||(h=!1),i=i.next,a+=1;n.allBuffers=h,p(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,l=i.encoding,c=i.callback;if(p(t,e,!1,e.objectMode?1:u.length,u,l,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function y(t,e){t._final((function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),w(t,e)}))}function w(t,e){var i=b(e);return i&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,_$processNextickArgs_153.nextTick(y,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}a.inherits(m,_$streamBrowser_172),d.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(d.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===m&&t&&t._writableState instanceof d}})):h=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,i){var r,s=this._writableState,n=!1,o=!s.objectMode&&(r=t,l.isBuffer(r)||r instanceof c);return o&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof i&&(i=f),s.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),_$processNextickArgs_153.nextTick(e,i)}(this,i):(o||function(t,e,i,r){var s=!0,n=!1;return null===i?n=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n&&(t.emit("error",n),_$processNextickArgs_153.nextTick(r,n),s=!1),s}(this,s,t,i))&&(s.pendingcb++,n=function(t,e,i,r,s,n){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,i)),e}(e,r,s);r!==o&&(i=!0,s="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var h=e.length<e.highWaterMark;if(h||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:n,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else p(t,e,!1,a,r,s,n);return h}(this,s,o,t,e,i)),n},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||g(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,i){e.ending=!0,w(t,e),i&&(e.finished?_$processNextickArgs_153.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}(this,r,i)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=_$destroy_171.destroy,m.prototype._undestroy=_$destroy_171.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this)}).call(this,_$browser_154,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_$main_204({}).setImmediate)})),_$main_204=createModuleFactory((function(t,e){(function(t,i){(function(){var r=_$browser_154.nextTick,s=(Function.prototype.apply,Array.prototype.slice),n={},o=0;function a(t,e){this._id=t,this._clearFn=e}a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},e.setImmediate="function"==typeof t?t:function(t){var i=o++,a=!(arguments.length<2)&&s.call(arguments,1);return n[i]=!0,r((function(){n[i]&&(a?t.apply(null,a):t.call(null),e.clearImmediate(i))})),i},e.clearImmediate="function"==typeof i?i:function(t){delete n[t]}}).call(this)}).call(this,_$main_204({}).setImmediate,_$main_204({}).clearImmediate)})),_$_stream_readable_191=createModuleFactory((function(t,e){(function(e,i){(function(){"use strict";var r;t.exports=v,v.ReadableState=w,_$events_113.EventEmitter;var s,n=function(t,e){return t.listeners(e).length},o=_$buffer_73({}).Buffer,a=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},h=_$empty_45({});s=h&&h.debuglog?h.debuglog("stream"):function(){};var u,l,c,f=_$state_200.getHighWaterMark,d=_$errorsBrowser_188.codes,m=d.ERR_INVALID_ARG_TYPE,p=d.ERR_STREAM_PUSH_AFTER_EOF,_=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;_$inherits_browser_130(v,_$streamBrowser_201);var b=_$destroy_196.errorOrDestroy,y=["error","close","destroy","pause","resume"];function w(t,e,i){r=r||_$Duplex_189({}),t=t||{},"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=f(this,t,"readableHighWaterMark",i),this.buffer=new _$buffer_list_195,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=_$string_decoder_202({}).StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function v(t){if(r=r||_$Duplex_189({}),!(this instanceof v))return new v(t);var e=this instanceof r;this._readableState=new w(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),_$streamBrowser_201.call(this)}function M(t,e,i,r,n){s("readableAddChunk",e);var h,u=t._readableState;if(null===e)u.reading=!1,function(t,e){if(s("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?I(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,T(t)))}}(t,u);else if(n||(h=function(t,e){var i,r;return r=e,o.isBuffer(r)||r instanceof a||"string"==typeof e||void 0===e||t.objectMode||(i=new m("chunk",["string","Buffer","Uint8Array"],e)),i}(u,e)),h)b(t,h);else if(u.objectMode||e&&e.length>0)if("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===o.prototype||(e=function(t){return o.from(t)}(e)),r)u.endEmitted?b(t,new g):S(t,u,e,!0);else if(u.ended)b(t,new p);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!i?(e=u.decoder.write(e),u.objectMode||0!==e.length?S(t,u,e,!1):A(t,u)):S(t,u,e,!1)}else r||(u.reading=!1,A(t,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function S(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&I(t)),A(t,e)}Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=_$destroy_196.destroy,v.prototype._undestroy=_$destroy_196.undestroy,v.prototype._destroy=function(t,e){e(t)},v.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=o.from(t,e),e=""),i=!0),M(this,t,e,!1,i)},v.prototype.unshift=function(t){return M(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){u||(u=_$string_decoder_202({}).StringDecoder);var e=new u(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function C(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var i=t._readableState;s("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(s("emitReadable",i.flowing),i.emittedReadable=!0,e.nextTick(T,t))}function T(t){var e=t._readableState;s("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,$(t)}function A(t,i){i.readingMore||(i.readingMore=!0,e.nextTick(k,t,i))}function k(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(s("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function B(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function x(t){s("readable nexttick read 0"),t.read(0)}function E(t,e){s("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),$(t),e.flowing&&!e.reading&&t.read(0)}function $(t){var e=t._readableState;for(s("flow",e.flowing);e.flowing&&null!==t.read(););}function D(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function L(t){var i=t._readableState;s("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,e.nextTick(P,i,t))}function P(t,e){if(s("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function R(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}v.prototype.read=function(t){s("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return s("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?L(this):I(this),null;if(0===(t=C(t,e))&&e.ended)return 0===e.length&&L(this),null;var r,n=e.needReadable;return s("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&s("length less than watermark",n=!0),e.ended||e.reading?s("reading or ended",n=!1):n&&(s("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C(i,e))),null===(r=t>0?D(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&L(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(t){b(this,new _("_read()"))},v.prototype.pipe=function(t,i){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,s("pipe count=%d opts=%j",o.pipesCount,i);var a=i&&!1===i.end||t===e.stdout||t===e.stderr?p:h;function h(){s("onend"),t.end()}o.endEmitted?e.nextTick(a):r.once("end",a),t.on("unpipe",(function e(i,n){s("onunpipe"),i===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,s("cleanup"),t.removeListener("close",d),t.removeListener("finish",m),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",e),r.removeListener("end",h),r.removeListener("end",p),r.removeListener("data",c),l=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}));var u=function(t){return function(){var e=t._readableState;s("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&n(t,"data")&&(e.flowing=!0,$(t))}}(r);t.on("drain",u);var l=!1;function c(e){s("ondata");var i=t.write(e);s("dest.write",i),!1===i&&((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==R(o.pipes,t))&&!l&&(s("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function f(e){s("onerror",e),p(),t.removeListener("error",f),0===n(t,"error")&&b(t,e)}function d(){t.removeListener("finish",m),p()}function m(){s("onfinish"),t.removeListener("close",d),p()}function p(){s("unpipe"),r.unpipe(t)}return r.on("data",c),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener("error",i);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(i):t._events.error=[i,t._events.error]:t.on("error",i)}(t,0,f),t.once("close",d),t.once("finish",m),t.emit("pipe",r),o.flowing||(s("pipe resume"),r.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var n=0;n<s;n++)r[n].emit("unpipe",this,{hasUnpiped:!1});return this}var o=R(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},v.prototype.on=function(t,i){var r=_$streamBrowser_201.prototype.on.call(this,t,i),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,s("on readable",n.length,n.reading),n.length?I(this):n.reading||e.nextTick(x,this))),r},v.prototype.addListener=v.prototype.on,v.prototype.removeListener=function(t,i){var r=_$streamBrowser_201.prototype.removeListener.call(this,t,i);return"readable"===t&&e.nextTick(B,this),r},v.prototype.removeAllListeners=function(t){var i=_$streamBrowser_201.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(B,this),i},v.prototype.resume=function(){var t=this._readableState;return t.flowing||(s("resume"),t.flowing=!t.readableListening,function(t,i){i.resumeScheduled||(i.resumeScheduled=!0,e.nextTick(E,t,i))}(this,t)),t.paused=!1,this},v.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},v.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",(function(){if(s("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){s("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n||(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))})),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){s("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(v.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=_$async_iterator_194({})),l(this)}),Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(v.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(v.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),v._fromList=D,Object.defineProperty(v.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(v.from=function(t,e){return void 0===c&&(c=_$fromBrowser_198({})),c(v,t,e)})}).call(this)}).call(this,_$browser_154,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),_$fromBrowser_198=createModuleFactory((function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}})),_$async_iterator_194=createModuleFactory((function(t,e){(function(e){(function(){"use strict";var i;function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=_$eos_197({}),n=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),h=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function f(t,e){return{value:t,done:e}}function d(t){var e=t[n];if(null!==e){var i=t[c].read();null!==i&&(t[u]=null,t[n]=null,t[o]=null,e(f(i,!1)))}}var m=Object.getPrototypeOf((function(){})),p=Object.setPrototypeOf((r(i={get stream(){return this[c]},next:function(){var t=this,i=this[a];if(null!==i)return Promise.reject(i);if(this[h])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise((function(i,r){e.nextTick((function(){t[a]?r(t[a]):i(f(void 0,!0))}))}));var r,s=this[u];if(s)r=new Promise(function(t,e){return function(i,r){t.then((function(){e[h]?i(f(void 0,!0)):e[l](i,r)}),r)}}(s,this));else{var n=this[c].read();if(null!==n)return Promise.resolve(f(n,!1));r=new Promise(this[l])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var t=this;return new Promise((function(e,i){t[c].destroy(null,(function(t){t?i(t):e(f(void 0,!0))}))}))})),i),m);t.exports=function(t){var i,m=Object.create(p,(r(i={},c,{value:t,writable:!0}),r(i,n,{value:null,writable:!0}),r(i,o,{value:null,writable:!0}),r(i,a,{value:null,writable:!0}),r(i,h,{value:t._readableState.endEmitted,writable:!0}),r(i,l,{value:function(t,e){var i=m[c].read();i?(m[u]=null,m[n]=null,m[o]=null,t(f(i,!1))):(m[n]=t,m[o]=e)},writable:!0}),i));return m[u]=null,s(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=m[o];return null!==e&&(m[u]=null,m[n]=null,m[o]=null,e(t)),void(m[a]=t)}var i=m[n];null!==i&&(m[u]=null,m[n]=null,m[o]=null,i(f(void 0,!0))),m[h]=!0})),t.on("readable",function(t){e.nextTick(d,t)}.bind(null,m)),m}}).call(this)}).call(this,_$browser_154)})),_$eos_197=createModuleFactory((function(t,e){"use strict";var i=_$errorsBrowser_188.codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}t.exports=function t(e,s,n){if("function"==typeof s)return t(e,null,s);s||(s={}),n=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];t.apply(this,r)}}}(n||r);var o=s.readable||!1!==s.readable&&e.readable,a=s.writable||!1!==s.writable&&e.writable,h=function(){e.writable||l()},u=e._writableState&&e._writableState.finished,l=function(){a=!1,u=!0,o||n.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){o=!1,c=!0,a||n.call(e)},d=function(t){n.call(e,t)},m=function(){var t;return o&&!c?(e._readableState&&e._readableState.ended||(t=new i),n.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new i),n.call(e,t)):void 0},p=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",m),e.req?p():e.on("request",p)):a&&!e._writableState&&(e.on("end",h),e.on("close",h)),e.on("end",f),e.on("finish",l),!1!==s.error&&e.on("error",d),e.on("close",m),function(){e.removeListener("complete",l),e.removeListener("abort",m),e.removeListener("request",p),e.req&&e.req.removeListener("finish",l),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",m)}}})),_$string_decoder_202=createModuleFactory((function(t,e){"use strict";var i=_$safeBuffer_177.Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=a,this.end=h,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=l,e=3;break;default:return this.write=c,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function n(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function a(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function c(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},s.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var s=n(e[r]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--r<i||-2===s?0:(s=n(e[r]))>=0?(s>0&&(t.lastNeed=s-2),s):--r<i||-2===s?0:(s=n(e[r]))>=0?(s>0&&(2===s?s=0:t.lastNeed=s-3),s):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}})),_$Duplex_189=createModuleFactory((function(t,e){(function(e){(function(){"use strict";var i=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=h;var r=_$_stream_readable_191({}),s=_$_stream_writable_193({});_$inherits_browser_130(h,r);for(var n=i(s.prototype),o=0;o<n.length;o++){var a=n[o];h.prototype[a]||(h.prototype[a]=s.prototype[a])}function h(t){if(!(this instanceof h))return new h(t);r.call(this,t),s.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,_$browser_154)})),_$_stream_writable_193=createModuleFactory((function(t,e){(function(e,i){(function(){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;for(t.entry=null;r;){var s=r.callback;e.pendingcb--,s(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var s;t.exports=M,M.WritableState=v;var n,o={deprecate:_$browser_205},a=_$buffer_73({}).Buffer,h=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=_$state_200.getHighWaterMark,l=_$errorsBrowser_188.codes,c=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,m=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,_=l.ERR_STREAM_NULL_VALUES,g=l.ERR_STREAM_WRITE_AFTER_END,b=l.ERR_UNKNOWN_ENCODING,y=_$destroy_196.errorOrDestroy;function w(){}function v(t,i,n){s=s||_$Duplex_189({}),t=t||{},"boolean"!=typeof n&&(n=i instanceof s),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=u(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,i){var r=t._writableState,s=r.sync,n=r.writecb;if("function"!=typeof n)throw new d;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),i)!function(t,i,r,s,n){--i.pendingcb,r?(e.nextTick(n,s),e.nextTick(k,t,i),t._writableState.errorEmitted=!0,y(t,s)):(n(s),t._writableState.errorEmitted=!0,y(t,s),k(t,i))}(t,r,s,i,n);else{var o=T(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||I(t,r),s?e.nextTick(C,t,r,o,n):C(t,r,o,n)}}(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function M(t){var e=this instanceof(s=s||_$Duplex_189({}));if(!e&&!n.call(M,this))return new M(t);this._writableState=new v(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),_$streamBrowser_201.call(this)}function S(t,e,i,r,s,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new p("write")):i?t._writev(s,e.onwrite):t._write(s,n,e.onwrite),e.sync=!1}function C(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),k(t,e)}function I(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var s=e.bufferedRequestCount,n=new Array(s),o=e.corkedRequestsFree;o.entry=i;for(var a=0,h=!0;i;)n[a]=i,i.isBuf||(h=!1),i=i.next,a+=1;n.allBuffers=h,S(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,l=i.encoding,c=i.callback;if(S(t,e,!1,e.objectMode?1:u.length,u,l,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function A(t,e){t._final((function(i){e.pendingcb--,i&&y(t,i),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function k(t,i){var r=T(i);if(r&&(function(t,i){i.prefinished||i.finalCalled||("function"!=typeof t._final||i.destroyed?(i.prefinished=!0,t.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,e.nextTick(A,t,i)))}(t,i),0===i.pendingcb&&(i.finished=!0,t.emit("finish"),i.autoDestroy))){var s=t._readableState;(!s||s.autoDestroy&&s.endEmitted)&&t.destroy()}return r}_$inherits_browser_130(M,_$streamBrowser_201),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(t){return!!n.call(this,t)||this===M&&t&&t._writableState instanceof v}})):n=function(t){return t instanceof this},M.prototype.pipe=function(){y(this,new m)},M.prototype.write=function(t,i,r){var s,n=this._writableState,o=!1,u=!n.objectMode&&(s=t,a.isBuffer(s)||s instanceof h);return u&&!a.isBuffer(t)&&(t=function(t){return a.from(t)}(t)),"function"==typeof i&&(r=i,i=null),u?i="buffer":i||(i=n.defaultEncoding),"function"!=typeof r&&(r=w),n.ending?function(t,i){var r=new g;y(t,r),e.nextTick(i,r)}(this,r):(u||function(t,i,r,s){var n;return null===r?n=new _:"string"==typeof r||i.objectMode||(n=new c("chunk",["string","Buffer"],r)),!n||(y(t,n),e.nextTick(s,n),!1)}(this,n,t,r))&&(n.pendingcb++,o=function(t,e,i,r,s,n){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=a.from(e,i)),e}(e,r,s);r!==o&&(i=!0,s="buffer",r=o)}var h=e.objectMode?1:r.length;e.length+=h;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:n,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else S(t,e,!1,h,r,s,n);return u}(this,n,u,t,i,r)),o},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||I(this,t))},M.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(t,e,i){i(new f("_write()"))},M.prototype._writev=null,M.prototype.end=function(t,i,r){var s=this._writableState;return"function"==typeof t?(r=t,t=null,i=null):"function"==typeof i&&(r=i,i=null),null!=t&&this.write(t,i),s.corked&&(s.corked=1,this.uncork()),s.ending||function(t,i,r){i.ending=!0,k(t,i),r&&(i.finished?e.nextTick(r):t.once("finish",r)),i.ended=!0,t.writable=!1}(this,s,r),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),M.prototype.destroy=_$destroy_196.destroy,M.prototype._undestroy=_$destroy_196.undestroy,M.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,_$browser_154,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),_$empty_45=createModuleFactory((function(t,e){})),_$buffer_73=createModuleFactory((function(t,i){(function(t){(function(){"use strict";i.Buffer=r,i.SlowBuffer=function(t){return+t!=t&&(t=0),r.alloc(+t)},i.INSPECT_MAX_BYTES=50;function t(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=r.prototype,e}function r(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return o(t)}return s(t,e,i)}function s(e,i,s){if("string"==typeof e)return function(e,i){if("string"==typeof i&&""!==i||(i="utf8"),!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s=0|u(e,i),n=t(s),o=n.write(e,i);return o!==s&&(n=n.slice(0,o)),n}(e,i);if(ArrayBuffer.isView(e))return a(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return function(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');var s;return(s=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i)).__proto__=r.prototype,s}(e,i,s);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return r.from(n,i,s);var o=function(e){if(r.isBuffer(e)){var i=0|h(e.length),s=t(i);return 0===s.length||e.copy(s,0,0,i),s}return void 0!==e.length?"number"!=typeof e.length||R(e.length)?t(0):a(e):"Buffer"===e.type&&Array.isArray(e.data)?a(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return r.from(e[Symbol.toPrimitive]("string"),i,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function n(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function o(e){return n(e),t(e<0?0:0|h(e))}function a(e){for(var i=e.length<0?0:0|h(e.length),r=t(i),s=0;s<i;s+=1)r[s]=255&e[s];return r}function h(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function u(t,e){if(r.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||P(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return D(t).length;default:if(n)return s?-1:$(t).length;e=(""+e).toLowerCase(),n=!0}}function l(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function c(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),R(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=r.from(e,s)),r.isBuffer(e))return 0===e.length?-1:f(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):f(t,[e],i,s,n);throw new TypeError("val must be string, number or Buffer")}function f(t,e,i,r,s){var n,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(s){var l=-1;for(n=i;n<a;n++)if(u(t,n)===u(e,-1===l?0:n-l)){if(-1===l&&(l=n),n-l+1===h)return l*o}else-1!==l&&(n-=n-l),l=-1}else for(i+h>a&&(i=a-h),n=i;n>=0;n--){for(var c=!0,f=0;f<h;f++)if(u(t,n+f)!==u(e,f)){c=!1;break}if(c)return n}return-1}function d(t,e,i,r){i=Number(i)||0;var s=t.length-i;r?(r=Number(r))>s&&(r=s):r=s;var n=e.length;r>n/2&&(r=n/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(R(a))return o;t[i+o]=a}return o}function m(t,e,i,r){return L($(e,t.length-i),t,i,r)}function p(t,e,i,r){return L(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function _(t,e,i,r){return p(t,e,i,r)}function g(t,e,i,r){return L(D(e),t,i,r)}function b(t,e,i,r){return L(function(t,e){for(var i,r,s,n=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(i=t.charCodeAt(o))>>8,s=i%256,n.push(s),n.push(r);return n}(e,t.length-i),t,i,r)}function y(t,e,i){return 0===e&&i===t.length?_$base64Js_42.fromByteArray(t):_$base64Js_42.fromByteArray(t.slice(e,i))}function w(t,e,i){i=Math.min(t.length,i);for(var r=[],s=e;s<i;){var n,o,a,h,u=t[s],l=null,c=u>239?4:u>223?3:u>191?2:1;if(s+c<=i)switch(c){case 1:u<128&&(l=u);break;case 2:128==(192&(n=t[s+1]))&&(h=(31&u)<<6|63&n)>127&&(l=h);break;case 3:n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&(h=(15&u)<<12|(63&n)<<6|63&o)>2047&&(h<55296||h>57343)&&(l=h);break;case 4:n=t[s+1],o=t[s+2],a=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&a)&&(h=(15&u)<<18|(63&n)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(l=h)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),s+=c}return function(t){var e=t.length;if(e<=v)return String.fromCharCode.apply(String,t);for(var i="",r=0;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=v));return i}(r)}i.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(t,e,i){return s(t,e,i)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,i,r){return function(e,i,r){return n(e),e<=0?t(e):void 0!==i?"string"==typeof r?t(e).fill(i,r):t(e).fill(i):t(e)}(e,i,r)},r.allocUnsafe=function(t){return o(t)},r.allocUnsafeSlow=function(t){return o(t)},r.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==r.prototype},r.compare=function(t,e){if(P(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),P(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,s=e.length,n=0,o=Math.min(i,s);n<o;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var s=r.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(P(o,Uint8Array)&&(o=r.from(o)),!r.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(s,n),n+=o.length}return s},r.byteLength=u,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)l(this,e,e+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)l(this,e,e+3),l(this,e+1,e+2);return this},r.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)l(this,e,e+7),l(this,e+1,e+6),l(this,e+2,e+5),l(this,e+3,e+4);return this},r.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?w(this,0,t):function(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,i);case"utf8":case"utf-8":return w(this,e,i);case"ascii":return M(this,e,i);case"latin1":case"binary":return S(this,e,i);case"base64":return y(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},r.prototype.compare=function(t,e,i,s,n){if(P(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(s>>>=0),a=(i>>>=0)-(e>>>=0),h=Math.min(o,a),u=this.slice(s,n),l=t.slice(e,i),c=0;c<h;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},r.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},r.prototype.indexOf=function(t,e,i){return c(this,t,e,i,!0)},r.prototype.lastIndexOf=function(t,e,i){return c(this,t,e,i,!1)},r.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var n=!1;;)switch(r){case"hex":return d(this,t,e,i);case"utf8":case"utf-8":return m(this,t,e,i);case"ascii":return p(this,t,e,i);case"latin1":case"binary":return _(this,t,e,i);case"base64":return g(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,i);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function M(t,e,i){var r="";i=Math.min(t.length,i);for(var s=e;s<i;++s)r+=String.fromCharCode(127&t[s]);return r}function S(t,e,i){var r="";i=Math.min(t.length,i);for(var s=e;s<i;++s)r+=String.fromCharCode(t[s]);return r}function C(t,e,i){var r,s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);for(var n="",o=e;o<i;++o)n+=(r=t[o])<16?"0"+r.toString(16):r.toString(16);return n}function I(t,e,i){for(var r=t.slice(e,i),s="",n=0;n<r.length;n+=2)s+=String.fromCharCode(r[n]+256*r[n+1]);return s}function T(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function A(t,e,i,s,n,o){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function k(t,e,i,r,s,n){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function B(t,e,i,r,s){return e=+e,i>>>=0,s||k(t,0,i,4),_$ieee754_129.write(t,e,i,r,23,4),i+4}function x(t,e,i,r,s){return e=+e,i>>>=0,s||k(t,0,i,8),_$ieee754_129.write(t,e,i,r,52,8),i+8}r.prototype.slice=function(t,e){var i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var s=this.subarray(t,e);return s.__proto__=r.prototype,s},r.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);for(var r=this[t],s=1,n=0;++n<e&&(s*=256);)r+=this[t+n]*s;return r},r.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);for(var r=this[t+--e],s=1;e>0&&(s*=256);)r+=this[t+--e]*s;return r},r.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);for(var r=this[t],s=1,n=0;++n<e&&(s*=256);)r+=this[t+n]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*e)),r},r.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);for(var r=e,s=1,n=this[t+--r];r>0&&(s*=256);)n+=this[t+--r]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},r.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),_$ieee754_129.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),_$ieee754_129.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),_$ieee754_129.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),_$ieee754_129.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||A(this,t,e,i,Math.pow(2,8*i)-1,0);var s=1,n=0;for(this[e]=255&t;++n<i&&(s*=256);)this[e+n]=t/s&255;return e+i},r.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||A(this,t,e,i,Math.pow(2,8*i)-1,0);var s=i-1,n=1;for(this[e+s]=255&t;--s>=0&&(n*=256);)this[e+s]=t/n&255;return e+i},r.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,1,255,0),this[e]=255&t,e+1},r.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},r.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},r.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},r.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},r.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var s=Math.pow(2,8*i-1);A(this,t,e,i,s-1,-s)}var n=0,o=1,a=0;for(this[e]=255&t;++n<i&&(o*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},r.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var s=Math.pow(2,8*i-1);A(this,t,e,i,s-1,-s)}var n=i-1,o=1,a=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},r.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},r.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},r.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},r.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},r.prototype.writeFloatLE=function(t,e,i){return B(this,t,e,!0,i)},r.prototype.writeFloatBE=function(t,e,i){return B(this,t,e,!1,i)},r.prototype.writeDoubleLE=function(t,e,i){return x(this,t,e,!0,i)},r.prototype.writeDoubleBE=function(t,e,i){return x(this,t,e,!1,i)},r.prototype.copy=function(t,e,i,s){if(!r.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);var n=s-i;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,i,s);else if(this===t&&i<e&&e<s)for(var o=n-1;o>=0;--o)t[o+e]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,s),e);return n},r.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!r.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===t.length){var n=t.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(t=n)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=r.isBuffer(t)?t:r.from(t,s),h=a.length;if(0===h)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<i-e;++o)this[o+e]=a[o%h]}return this};var E=/[^+/0-9A-Za-z-_]/g;function $(t,e){var i;e=e||1/0;for(var r=t.length,s=null,n=[],o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&n.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&n.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function D(t){return _$base64Js_42.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function L(t,e,i,r){for(var s=0;s<r&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}function P(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function R(t){return t!=t}}).call(this)}).call(this,_$buffer_73({}).Buffer)})),_$color_215={};class Color{constructor(t,e,i,r=255){this.r=t,this.g=e,this.b=i,this.a=r}toCanvasStyle(){return`rgba(${this.r},${this.g}, ${this.b}, ${this.a})`}}Color.white=new Color(255,255,255),Color.WHITE=Color.white,Color.lightGray=new Color(192,192,192),Color.LIGHT_GRAY=Color.lightGray,Color.gray=new Color(128,128,128),Color.GRAY=Color.gray,Color.darkGray=new Color(64,64,64),Color.DARK_GRAY=Color.darkGray,Color.black=new Color(0,0,0),Color.BLACK=Color.black,Color.red=new Color(255,0,0),Color.RED=Color.red,Color.pink=new Color(255,175,175),Color.PINK=Color.pink,Color.orange=new Color(255,200,0),Color.ORANGE=Color.orange,Color.yellow=new Color(255,255,0),Color.YELLOW=Color.yellow,Color.green=new Color(0,255,0),Color.GREEN=Color.green,Color.magenta=new Color(255,0,255),Color.MAGENTA=Color.magenta,Color.cyan=new Color(0,255,255),Color.CYAN=Color.cyan,Color.blue=new Color(0,0,255),Color.BLUE=Color.blue,_$color_215=Color;var _$font_216={};class Font{constructor(t,e,i){this.name=t,this.type=e,this.size=i}toCanvasFont(){return`${this.getType()} ${this.size}px ${this.name}`}getType(){return 1===this.type?"bold":2===this.type?"italic":"normal"}}Font.BOLD=1,_$font_216=Font;var _$gameBuffer_209=class{constructor(t){this.buffer=t,this.offset=0}putByte(t){this.buffer[this.offset++]=t}putInt(t){this.buffer[this.offset++]=t>>24,this.buffer[this.offset++]=t>>16,this.buffer[this.offset++]=t>>8,this.buffer[this.offset++]=t}putString(t){for(let e=0;e<t.length;e++)this.buffer[this.offset++]=t.charCodeAt(e);this.buffer[this.offset++]=10}putBytes(t,e,i){for(let r=e;r<i;r++)this.buffer[this.offset++]=t[r]}getUnsignedByte(){return 255&this.buffer[this.offset++]}getUnsignedShort(){return this.offset+=2,((255&this.buffer[this.offset-2])<<8)+(255&this.buffer[this.offset-1])}getUnsignedInt(){return this.offset+=4,((255&this.buffer[this.offset-4])<<24)+((255&this.buffer[this.offset-3])<<16)+((255&this.buffer[this.offset-2])<<8)+(255&this.buffer[this.offset-1])}getBytes(t,e,i){for(let r=e;r<i;r++)t[e+r]=this.buffer[this.offset++]}},_$Long_134=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function isLong(t){return!0===(t&&t.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(t,e){var i,r,s;return e?(s=0<=(t>>>=0)&&t<256)&&(r=UINT_CACHE[t])?r:(i=fromBits(t,(0|t)<0?-1:0,!0),s&&(UINT_CACHE[t]=i),i):(s=-128<=(t|=0)&&t<128)&&(r=INT_CACHE[t])?r:(i=fromBits(t,t<0?-1:0,!1),s&&(INT_CACHE[t]=i),i)}function fromNumber(t,e){if(isNaN(t))return e?UZERO:ZERO;if(e){if(t<0)return UZERO;if(t>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(t<=-TWO_PWR_63_DBL)return MIN_VALUE;if(t+1>=TWO_PWR_63_DBL)return MAX_VALUE}return t<0?fromNumber(-t,e).neg():fromBits(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,e)}function fromBits(t,e,i){return new Long(t,e,i)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return ZERO;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return fromString(t.substring(1),e,i).neg();for(var s=fromNumber(pow_dbl(i,8)),n=ZERO,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),h=parseInt(t.substring(o,o+a),i);if(a<8){var u=fromNumber(pow_dbl(i,a));n=n.mul(u).add(fromNumber(h))}else n=(n=n.mul(s)).add(fromNumber(h))}return n.unsigned=e,n}function fromValue(t,e){return"number"==typeof t?fromNumber(t,e):"string"==typeof t?fromString(t,e):fromBits(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_32_DBL=4294967296,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(1<<24),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var e=fromNumber(t),i=this.div(e),r=i.mul(e).sub(this);return i.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var s=fromNumber(pow_dbl(t,6),this.unsigned),n=this,o="";;){var a=n.div(s),h=(n.sub(a.mul(s)).toInt()>>>0).toString(t);if((n=a).isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(t){return isLong(t)||(t=fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(t){return!this.eq(t)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(t){return this.comp(t)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(t){return this.comp(t)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(t){return this.comp(t)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(t){if(isLong(t)||(t=fromValue(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(t){isLong(t)||(t=fromValue(t));var e=this.high>>>16,i=65535&this.high,r=this.low>>>16,s=65535&this.low,n=t.high>>>16,o=65535&t.high,a=t.low>>>16,h=0,u=0,l=0,c=0;return l+=(c+=s+(65535&t.low))>>>16,u+=(l+=r+a)>>>16,h+=(u+=i+o)>>>16,h+=e+n,fromBits((l&=65535)<<16|(c&=65535),(h&=65535)<<16|(u&=65535),this.unsigned)},LongPrototype.subtract=function(t){return isLong(t)||(t=fromValue(t)),this.add(t.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(t){if(this.isZero())return ZERO;if(isLong(t)||(t=fromValue(t)),wasm)return fromBits(wasm.mul(this.low,this.high,t.low,t.high),wasm.get_high(),this.unsigned);if(t.isZero())return ZERO;if(this.eq(MIN_VALUE))return t.isOdd()?MIN_VALUE:ZERO;if(t.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(TWO_PWR_24)&&t.lt(TWO_PWR_24))return fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,r=this.low>>>16,s=65535&this.low,n=t.high>>>16,o=65535&t.high,a=t.low>>>16,h=65535&t.low,u=0,l=0,c=0,f=0;return c+=(f+=s*h)>>>16,l+=(c+=r*h)>>>16,c&=65535,l+=(c+=s*a)>>>16,u+=(l+=i*h)>>>16,l&=65535,u+=(l+=r*a)>>>16,l&=65535,u+=(l+=s*o)>>>16,u+=e*h+i*a+r*o+s*n,fromBits((c&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(t){if(isLong(t)||(t=fromValue(t)),t.isZero())throw Error("division by zero");var e,i,r;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,t.low,t.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return UZERO;if(t.gt(this.shru(1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return t.eq(ONE)||t.eq(NEG_ONE)?MIN_VALUE:t.eq(MIN_VALUE)?ONE:(e=this.shr(1).div(t).shl(1)).eq(ZERO)?t.isNegative()?ONE:NEG_ONE:(i=this.sub(t.mul(e)),r=e.add(i.div(t)));if(t.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=ZERO}for(i=this;i.gte(t);){e=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(e)/Math.LN2),n=s<=48?1:pow_dbl(2,s-48),o=fromNumber(e),a=o.mul(t);a.isNegative()||a.gt(i);)a=(o=fromNumber(e-=n,this.unsigned)).mul(t);o.isZero()&&(o=ONE),r=r.add(o),i=i.sub(a)}return r},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(t){return isLong(t)||(t=fromValue(t)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,t.low,t.high),wasm.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low&t.low,this.high&t.high,this.unsigned)},LongPrototype.or=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low|t.low,this.high|t.high,this.unsigned)},LongPrototype.xor=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low^t.low,this.high^t.high,this.unsigned)},LongPrototype.shiftLeft=function(t){return isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):fromBits(0,this.low<<t-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(t){return isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(t){if(isLong(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?fromBits(this.low>>>t|e<<32-t,e>>>t,this.unsigned):fromBits(32===t?e:e>>>t-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},LongPrototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},Long.fromBytes=function(t,e,i){return i?Long.fromBytesLE(t,e):Long.fromBytesBE(t,e)},Long.fromBytesLE=function(t,e){return new Long(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Long.fromBytesBE=function(t,e){return new Long(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};for(var _$gameCharacter_210=class{constructor(){this.hash=new _$Long_134,this.name=null,this.serverIndex=0,this.serverId=0,this.currentX=0,this.currentY=0,this.npcId=0,this.stepCount=0,this.animationCurrent=0,this.animationNext=0,this.movingStep=0,this.waypointCurrent=0,this.message=null,this.messageTimeout=0,this.bubbleItem=0,this.bubbleTimeout=0,this.damageTaken=0,this.healthCurrent=0,this.healthMax=0,this.combatTimer=0,this.colourHair=0,this.colourTop=0,this.colourBottom=0,this.colourSkin=0,this.incomingProjectileSprite=0,this.attackingPlayerServerIndex=0,this.attackingNpcServerIndex=0,this.projectileRange=0,this.skullVisible=0,this.waypointsX=new Int32Array(10),this.waypointsY=new Int32Array(10),this.equippedItem=new Int32Array(12),this.level=-1}},_$base64Js_42={toByteArray:function(t){var e,i,r=getLens(t),s=r[0],n=r[1],o=new Arr(function(t,e,i){return 3*(e+i)/4-i}(0,s,n)),a=0,h=n>0?s-4:s;for(i=0;i<h;i+=4)e=revLookup[t.charCodeAt(i)]<<18|revLookup[t.charCodeAt(i+1)]<<12|revLookup[t.charCodeAt(i+2)]<<6|revLookup[t.charCodeAt(i+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===n&&(e=revLookup[t.charCodeAt(i)]<<2|revLookup[t.charCodeAt(i+1)]>>4,o[a++]=255&e),1===n&&(e=revLookup[t.charCodeAt(i)]<<10|revLookup[t.charCodeAt(i+1)]<<4|revLookup[t.charCodeAt(i+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o},fromByteArray:function(t){for(var e,i=t.length,r=i%3,s=[],n=0,o=i-r;n<o;n+=16383)s.push(encodeChunk(t,n,n+16383>o?o:n+16383));return 1===r?(e=t[i-1],s.push(lookup[e>>2]+lookup[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),s.join("")}},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function encodeChunk(t,e,i){for(var r,s,n=[],o=e;o<i;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),n.push(lookup[(s=r)>>18&63]+lookup[s>>12&63]+lookup[s>>6&63]+lookup[63&s]);return n.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var _$ieee754_129={read:function(t,e,i,r,s){var n,o,a=8*s-r-1,h=(1<<a)-1,u=h>>1,l=-7,c=i?s-1:0,f=i?-1:1,d=t[e+c];for(c+=f,n=d&(1<<-l)-1,d>>=-l,l+=a;l>0;n=256*n+t[e+c],c+=f,l-=8);for(o=n&(1<<-l)-1,n>>=-l,l+=r;l>0;o=256*o+t[e+c],c+=f,l-=8);if(0===n)n=1-u;else{if(n===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),n-=u}return(d?-1:1)*o*Math.pow(2,n-r)},write:function(t,e,i,r,s,n){var o,a,h,u=8*n-s-1,l=(1<<u)-1,c=l>>1,f=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:n-1,m=r?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+c>=1?f/h:f*Math.pow(2,1-c))*h>=2&&(o++,h/=2),o+c>=l?(a=0,o=l):o+c>=1?(a=(e*h-1)*Math.pow(2,s),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,s),o=0));s>=8;t[i+d]=255&a,d+=m,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[i+d]=255&o,d+=m,o/=256,u-=8);t[i+d-m]|=128*p}},_$buffer_75={};(function(t){(function(){"use strict";const t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;_$buffer_75.Buffer=r,_$buffer_75.INSPECT_MAX_BYTES=50;function i(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,r.prototype),e}function r(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return o(t)}return s(t,e,i)}function s(t,e,s){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!r.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const s=0|l(t,e);let n=i(s);const o=n.write(t,e);return o!==s&&(n=n.slice(0,o)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(F(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return a(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(F(t,ArrayBuffer)||t&&F(t.buffer,ArrayBuffer))return h(t,e,s);if("undefined"!=typeof SharedArrayBuffer&&(F(t,SharedArrayBuffer)||t&&F(t.buffer,SharedArrayBuffer)))return h(t,e,s);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return r.from(n,e,s);const o=function(t){if(r.isBuffer(t)){const e=0|u(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||H(t.length)?i(0):a(t):"Buffer"===t.type&&Array.isArray(t.data)?a(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),e,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function n(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function o(t){return n(t),i(t<0?0:0|u(t))}function a(t){const e=t.length<0?0:0|u(t.length),r=i(e);for(let i=0;i<e;i+=1)r[i]=255&t[i];return r}function h(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(s,r.prototype),s}function u(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function l(t,e){if(r.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||F(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return s?-1:j(t).length;e=(""+e).toLowerCase(),n=!0}}function c(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function f(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),H(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=r.from(e,s)),r.isBuffer(e))return 0===e.length?-1:d(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):d(t,[e],i,s,n);throw new TypeError("val must be string, number or Buffer")}function d(t,e,i,r,s){let n,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(s){let r=-1;for(n=i;n<a;n++)if(u(t,n)===u(e,-1===r?0:n-r)){if(-1===r&&(r=n),n-r+1===h)return r*o}else-1!==r&&(n-=n-r),r=-1}else for(i+h>a&&(i=a-h),n=i;n>=0;n--){let i=!0;for(let r=0;r<h;r++)if(u(t,n+r)!==u(e,r)){i=!1;break}if(i)return n}return-1}function m(t,e,i,r){i=Number(i)||0;const s=t.length-i;r?(r=Number(r))>s&&(r=s):r=s;const n=e.length;let o;for(r>n/2&&(r=n/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(H(r))return o;t[i+o]=r}return o}function p(t,e,i,r){return X(j(e,t.length-i),t,i,r)}function _(t,e,i,r){return X(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function g(t,e,i,r){return X(Y(e),t,i,r)}function b(t,e,i,r){return X(function(t,e){let i,r,s;const n=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,s=i%256,n.push(s),n.push(r);return n}(e,t.length-i),t,i,r)}function y(t,e,i){return 0===e&&i===t.length?_$base64Js_42.fromByteArray(t):_$base64Js_42.fromByteArray(t.slice(e,i))}function w(t,e,i){i=Math.min(t.length,i);const r=[];let s=e;for(;s<i;){const e=t[s];let n=null,o=e>239?4:e>223?3:e>191?2:1;if(s+o<=i){let i,r,a,h;switch(o){case 1:e<128&&(n=e);break;case 2:128==(192&(i=t[s+1]))&&(h=(31&e)<<6|63&i)>127&&(n=h);break;case 3:i=t[s+1],r=t[s+2],128==(192&i)&&128==(192&r)&&(h=(15&e)<<12|(63&i)<<6|63&r)>2047&&(h<55296||h>57343)&&(n=h);break;case 4:i=t[s+1],r=t[s+2],a=t[s+3],128==(192&i)&&128==(192&r)&&128==(192&a)&&(h=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&a)>65535&&h<1114112&&(n=h)}}null===n?(n=65533,o=1):n>65535&&(n-=65536,r.push(n>>>10&1023|55296),n=56320|1023&n),r.push(n),s+=o}return function(t){const e=t.length;if(e<=v)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=v));return i}(r)}r.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(e){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(t,e,i){return s(t,e,i)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(t,e,r){return function(t,e,r){return n(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}(t,e,r)},r.allocUnsafe=function(t){return o(t)},r.allocUnsafeSlow=function(t){return o(t)},r.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==r.prototype},r.compare=function(t,e){if(F(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),F(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,s=e.length;for(let r=0,n=Math.min(i,s);r<n;++r)if(t[r]!==e[r]){i=t[r],s=e[r];break}return i<s?-1:s<i?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const s=r.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(F(e,Uint8Array))n+e.length>s.length?(r.isBuffer(e)||(e=r.from(e)),e.copy(s,n)):Uint8Array.prototype.set.call(s,e,n);else{if(!r.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(s,n)}n+=e.length}return s},r.byteLength=l,r.prototype._isBuffer=!0,r.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)c(this,e,e+1);return this},r.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)c(this,e,e+3),c(this,e+1,e+2);return this},r.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)c(this,e,e+7),c(this,e+1,e+6),c(this,e+2,e+5),c(this,e+3,e+4);return this},r.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?w(this,0,t):function(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,i);case"utf8":case"utf-8":return w(this,e,i);case"ascii":return M(this,e,i);case"latin1":case"binary":return S(this,e,i);case"base64":return y(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){let t="";const e=_$buffer_75.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(t,e,i,s,n){if(F(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let o=(n>>>=0)-(s>>>=0),a=(i>>>=0)-(e>>>=0);const h=Math.min(o,a),u=this.slice(s,n),l=t.slice(e,i);for(let r=0;r<h;++r)if(u[r]!==l[r]){o=u[r],a=l[r];break}return o<a?-1:a<o?1:0},r.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},r.prototype.indexOf=function(t,e,i){return f(this,t,e,i,!0)},r.prototype.lastIndexOf=function(t,e,i){return f(this,t,e,i,!1)},r.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let n=!1;for(;;)switch(r){case"hex":return m(this,t,e,i);case"utf8":case"utf-8":return p(this,t,e,i);case"ascii":case"latin1":case"binary":return _(this,t,e,i);case"base64":return g(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,i);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const v=4096;function M(t,e,i){let r="";i=Math.min(t.length,i);for(let s=e;s<i;++s)r+=String.fromCharCode(127&t[s]);return r}function S(t,e,i){let r="";i=Math.min(t.length,i);for(let s=e;s<i;++s)r+=String.fromCharCode(t[s]);return r}function C(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let s="";for(let n=e;n<i;++n)s+=W[t[n]];return s}function I(t,e,i){const r=t.slice(e,i);let s="";for(let n=0;n<r.length-1;n+=2)s+=String.fromCharCode(r[n]+256*r[n+1]);return s}function T(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function A(t,e,i,s,n,o){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function k(t,e,i,r,s){R(e,r,s,t,i,7);let n=Number(e&BigInt(4294967295));t[i++]=n,n>>=8,t[i++]=n,n>>=8,t[i++]=n,n>>=8,t[i++]=n;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function B(t,e,i,r,s){R(e,r,s,t,i,7);let n=Number(e&BigInt(4294967295));t[i+7]=n,n>>=8,t[i+6]=n,n>>=8,t[i+5]=n,n>>=8,t[i+4]=n;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function x(t,e,i,r,s,n){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function E(t,e,i,r,s){return e=+e,i>>>=0,s||x(t,0,i,4),_$ieee754_129.write(t,e,i,r,23,4),i+4}function $(t,e,i,r,s){return e=+e,i>>>=0,s||x(t,0,i,8),_$ieee754_129.write(t,e,i,r,52,8),i+8}r.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const s=this.subarray(t,e);return Object.setPrototypeOf(s,r.prototype),s},r.prototype.readUintLE=r.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);let r=this[t],s=1,n=0;for(;++n<e&&(s*=256);)r+=this[t+n]*s;return r},r.prototype.readUintBE=r.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);let r=this[t+--e],s=1;for(;e>0&&(s*=256);)r+=this[t+--e]*s;return r},r.prototype.readUint8=r.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readBigUInt64LE=G((function(t){O(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||U(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,s=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(s)<<BigInt(32))})),r.prototype.readBigUInt64BE=G((function(t){O(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||U(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],s=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(s)})),r.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);let r=this[t],s=1,n=0;for(;++n<e&&(s*=256);)r+=this[t+n]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*e)),r},r.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||T(t,e,this.length);let r=e,s=1,n=this[t+--r];for(;r>0&&(s*=256);)n+=this[t+--r]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},r.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readBigInt64LE=G((function(t){O(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||U(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),r.prototype.readBigInt64BE=G((function(t){O(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||U(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),r.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),_$ieee754_129.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),_$ieee754_129.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),_$ieee754_129.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),_$ieee754_129.read(this,t,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||A(this,t,e,i,Math.pow(2,8*i)-1,0);let s=1,n=0;for(this[e]=255&t;++n<i&&(s*=256);)this[e+n]=t/s&255;return e+i},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||A(this,t,e,i,Math.pow(2,8*i)-1,0);let s=i-1,n=1;for(this[e+s]=255&t;--s>=0&&(n*=256);)this[e+s]=t/n&255;return e+i},r.prototype.writeUint8=r.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,1,255,0),this[e]=255&t,e+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},r.prototype.writeBigUInt64LE=G((function(t,e=0){return k(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),r.prototype.writeBigUInt64BE=G((function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),r.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);A(this,t,e,i,r-1,-r)}let s=0,n=1,o=0;for(this[e]=255&t;++s<i&&(n*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/n>>0)-o&255;return e+i},r.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);A(this,t,e,i,r-1,-r)}let s=i-1,n=1,o=0;for(this[e+s]=255&t;--s>=0&&(n*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/n>>0)-o&255;return e+i},r.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},r.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},r.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},r.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},r.prototype.writeBigInt64LE=G((function(t,e=0){return k(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),r.prototype.writeBigInt64BE=G((function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),r.prototype.writeFloatLE=function(t,e,i){return E(this,t,e,!0,i)},r.prototype.writeFloatBE=function(t,e,i){return E(this,t,e,!1,i)},r.prototype.writeDoubleLE=function(t,e,i){return $(this,t,e,!0,i)},r.prototype.writeDoubleBE=function(t,e,i){return $(this,t,e,!1,i)},r.prototype.copy=function(t,e,i,s){if(!r.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);const n=s-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,s):Uint8Array.prototype.set.call(t,this.subarray(i,s),e),n},r.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!r.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===t.length){const e=t.charCodeAt(0);("utf8"===s&&e<128||"latin1"===s)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const o=r.isBuffer(t)?t:r.from(t,s),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=o[n%a]}return this};const D={};function L(t,e,i){D[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function P(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function R(t,e,i,r,s,n){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let s;throw s=n>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(n+1)}${r}`:`>= -(2${r} ** ${8*(n+1)-1}${r}) and < 2 ** ${8*(n+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new D.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){O(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||U(e,t.length-(i+1))}(r,s,n)}function O(t,e){if("number"!=typeof t)throw new D.ERR_INVALID_ARG_TYPE(e,"number",t)}function U(t,e,i){if(Math.floor(t)!==t)throw O(t,i),new D.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}L("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?t+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),L("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),L("ERR_OUT_OF_RANGE",(function(t,e,i){let r=`The value of "${t}" is out of range.`,s=i;return Number.isInteger(i)&&Math.abs(i)>2**32?s=P(String(i)):"bigint"==typeof i&&(s=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(s=P(s)),s+="n"),r+` It must be ${e}. Received ${s}`}),RangeError);const N=/[^+/0-9A-Za-z-_]/g;function j(t,e){let i;e=e||1/0;const r=t.length;let s=null;const n=[];for(let o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&n.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&n.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function Y(t){return _$base64Js_42.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,i,r){let s;for(s=0;s<r&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}function F(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function H(t){return t!=t}const W=function(){const t=new Array(256);for(let e=0;e<16;++e){const i=16*e;for(let r=0;r<16;++r)t[i+r]="0123456789abcdef"[e]+"0123456789abcdef"[r]}return t}();function G(t){return"undefined"==typeof BigInt?z:t}function z(){throw new Error("BigInt not supported")}}).call(this)}).call(this,_$buffer_73({}).Buffer);var _$freeze_24={};_$freeze_24=Object.freeze?Object.freeze:function(t){return t};var _$Stream_22={},Stream=function(){};Stream.prototype.readByte=function(){var t=[0];return 0===this.read(t,0,1)?(this._eof=!0,-1):t[0]},Stream.prototype.read=function(t,e,i){for(var r,s=0;s<i;){if(-1===(r=this.readByte())){this._eof=!0;break}t[e+s++]=r}return s},Stream.prototype.eof=function(){return!!this._eof},Stream.prototype.seek=function(t){throw new Error("Stream is not seekable.")},Stream.prototype.tell=function(){throw new Error("Stream is not seekable.")},Stream.prototype.writeByte=function(t){var e=[t];this.write(e,0,1)},Stream.prototype.write=function(t,e,i){var r;for(r=0;r<i;r++)this.writeByte(t[e+r]);return i},Stream.prototype.flush=function(){},Stream.EOF=-1,_$Stream_22=_$freeze_24(Stream);var _$BitStream_4={},BitStream=function(t){(function(){var e=256;this.readBit=function(){if(0==(255&e)){var i=t.readByte();if(i===_$Stream_22.EOF)return this._eof=!0,i;e=i<<1|1}var r=256&e?1:0;return e<<=1,r},this.seekBit=function(t){var e=t>>>3,i=t-8*e;this.seek(e),this._eof=!1,this.readBits(i)},this.tellBit=function(){for(var i=8*t.tell(),r=e;0!=(255&r);)i--,r<<=1;return i},this.readByte=function(){return 0==(255&e)?t.readByte():this.readBits(8)},this.seek=function(i){t.seek(i),e=256}}).call(this),function(){var e=1;this.writeBit=function(i){e<<=1,i&&(e|=1),256&e&&(t.writeByte(255&e),e=1)},this.writeByte=function(i){1===e?t.writeByte(i):t.writeBits(8,i)},this.flush=function(){for(;1!==e;)this.writeBit(0);t.flush&&t.flush()}}.call(this)};BitStream.EOF=_$Stream_22.EOF,(BitStream.prototype=Object.create(_$Stream_22.prototype)).readBits=function(t){var e,i=0;if(t>31)return(i=65536*this.readBits(t-16))+this.readBits(16);for(e=0;e<t;e++)i<<=1,this.readBit()>0&&i++;return i},BitStream.prototype.writeBits=function(t,e){if(t>32){var i=65535&e,r=(e-i)/65536;return this.writeBits(t-16,r),void this.writeBits(16,i)}var s;for(s=t-1;s>=0;s--)this.writeBit(e>>>s&1)},_$BitStream_4=BitStream;var _$browser_154={},cachedSetTimeout,cachedClearTimeout,process=_$browser_154={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch(e){try{return cachedSetTimeout.call(null,t,0)}catch(e){return cachedSetTimeout.call(this,t,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var i=queue.length;i;){for(currentQueue=queue,queue=[];++queueIndex<i;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,i=queue.length}currentQueue=null,draining=!1,function(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{cachedClearTimeout(t)}catch(e){try{return cachedClearTimeout.call(null,t)}catch(e){return cachedClearTimeout.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}process.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];queue.push(new Item(t,e)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(t){return[]},process.binding=function(t){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(t){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var _$Util_23={};(function(t,e){(function(){var i=Object.create(null),r=_$Stream_22.EOF;i.coerceInputStream=function(t,e){if("readByte"in t){if(e&&!("read"in t)){var i=t;(t=new _$Stream_22).readByte=function(){var t=i.readByte();return t===r&&(this._eof=!0),t},"size"in i&&(t.size=i.size),"seek"in i&&(t.seek=function(t){i.seek(t),this._eof=!1}),"tell"in i&&(t.tell=i.tell.bind(i))}}else{var s=t;(t=new _$Stream_22).size=s.length,t.pos=0,t.readByte=function(){return this.pos>=this.size?r:s[this.pos++]},t.read=function(t,e,i){for(var r=0;r<i&&this.pos<s.length;)t[e++]=s[this.pos++],r++;return r},t.seek=function(t){this.pos=t},t.tell=function(){return this.pos},t.eof=function(){return this.pos>=s.length}}return t};var s=function(t,e){this.buffer=t,this.resizeOk=e,this.pos=0};(s.prototype=Object.create(_$Stream_22.prototype)).writeByte=function(t){if(this.resizeOk&&this.pos>=this.buffer.length){var e=i.makeU8Buffer(2*this.buffer.length);e.set(this.buffer),this.buffer=e}this.buffer[this.pos++]=t},s.prototype.getBuffer=function(){if(this.pos!==this.buffer.length){if(!this.resizeOk)throw new TypeError("outputsize does not match decoded input");var t=i.makeU8Buffer(this.pos);t.set(this.buffer.subarray(0,this.pos)),this.buffer=t}return this.buffer},i.coerceOutputStream=function(t,e){var r={stream:t,retval:t};if(t){if("object"==typeof t&&"writeByte"in t)return r;r.stream=new s("number"==typeof e?i.makeU8Buffer(e):t,!1)}else r.stream=new s(i.makeU8Buffer(16384),!0);return Object.defineProperty(r,"retval",{get:r.stream.getBuffer.bind(r.stream)}),r},i.compressFileHelper=function(t,e,r){return function(s,n,o){s=i.coerceInputStream(s);var a,h,u=i.coerceOutputStream(n,n);for(n=u.stream,a=0;a<t.length;a++)n.writeByte(t.charCodeAt(a));if(h="size"in s&&s.size>=0?s.size:-1,r){var l=i.coerceOutputStream([]);for(i.writeUnsignedNumber(l.stream,h+1),l=l.retval,a=0;a<l.length-1;a++)n.writeByte(l[a]);r=l[l.length-1]}else i.writeUnsignedNumber(n,h+1);return e(s,n,h,o,r),u.retval}},i.decompressFileHelper=function(t,e){return function(r,s){var n;for(r=i.coerceInputStream(r),n=0;n<t.length;n++)if(t.charCodeAt(n)!==r.readByte())throw new Error("Bad magic");var o=i.readUnsignedNumber(r)-1,a=i.coerceOutputStream(s,o);return s=a.stream,e(r,s,o),a.retval}},i.compressWithModel=function(t,e,i){for(var s=0;s!==e;){var n=t.readByte();if(n===r){i.encode(256);break}i.encode(n),s++}},i.decompressWithModel=function(t,e,i){for(var r=0;r!==e;){var s=i.decode();if(256===s)break;t.writeByte(s),r++}},i.writeUnsignedNumber=function(t,e){var i,r=[];do{r.push(127&e),e=Math.floor(e/128)}while(0!==e);for(r[0]|=128,i=r.length-1;i>=0;i--)t.writeByte(r[i]);return t},i.readUnsignedNumber=function(t){for(var e,i=0;;){if(128&(e=t.readByte())){i+=127&e;break}i=128*(i+e)}return i};var n=function(t){for(var e=0,i=t.length;e<i;e++)t[e]=0;return t},o=function(t){return n(new Array(t))},a=function(t){return t};void 0!==t&&Array.prototype.some.call(new Uint32Array(128),(function(t){return 0!==t}))&&(a=n),i.makeU8Buffer="undefined"!=typeof Uint8Array?function(t){return a(new Uint8Array(t))}:void 0!==e?function(t){var i=new e(t);return i.fill(0),i}:o,i.makeU16Buffer="undefined"!=typeof Uint16Array?function(t){return a(new Uint16Array(t))}:o,i.makeU32Buffer="undefined"!=typeof Uint32Array?function(t){return a(new Uint32Array(t))}:o,i.makeS32Buffer="undefined"!=typeof Int32Array?function(t){return a(new Int32Array(t))}:o,i.arraycopy=function(t,e){for(var i=0,r=e.length;i<r;i++)t[i]=e[i];return t};var h=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],u=i.fls=function(t){return t>4294967295?32+u(Math.floor(t/4294967296)):0!=(4294901760&t)?0!=(4278190080&t)?24+h[t>>>24&255]:16+h[t>>>16]:0!=(65280&t)?8+h[t>>>8]:h[t]};i.log2c=function(t){return 0===t?-1:u(t-1)},_$Util_23=_$freeze_24(i)}).call(this)}).call(this,_$browser_154,_$buffer_73({}).Buffer);var _$BWT_2={},ASSERT=console.assert.bind(console),getCounts=function(t,e,i,r){var s;for(s=0;s<r;s++)e[s]=0;for(s=0;s<i;s++)e[t[s]]++},getBuckets=function(t,e,i,r){var s,n=0;if(r)for(s=0;s<i;s++)n+=t[s],e[s]=n;else for(s=0;s<i;s++)n+=t[s],e[s]=n-t[s]},SA_IS=function(t,e,i,r,s,n){var o,a,h,u,l,c,f,d,m,p,_,g,b,y=0,w=0;for(s<=256?(o=_$Util_23.makeS32Buffer(s),s<=i?(a=e.subarray(r+i-s),w=1):(a=_$Util_23.makeS32Buffer(s),w=3)):s<=i?(o=e.subarray(r+i-s),s<=i-s?(a=e.subarray(r+i-2*s),w=0):s<=1024?(a=_$Util_23.makeS32Buffer(s),w=2):(a=o,w=8)):(o=a=_$Util_23.makeS32Buffer(s),w=12),getCounts(t,o,r,s),getBuckets(o,a,s,!0),u=0;u<r;u++)e[u]=0;c=-1,u=r-1,l=r,f=0,g=t[r-1];do{b=g}while(--u>=0&&(g=t[u])>=b);for(;u>=0;){do{b=g}while(--u>=0&&(g=t[u])<=b);if(u>=0){c>=0&&(e[c]=l),c=--a[b],l=u,++f;do{b=g}while(--u>=0&&(g=t[u])>=b)}}if(f>1?(function(t,e,i,r,s,n){var o,a,h,u,l;for(i===r&&getCounts(t,i,s,n),getBuckets(i,r,n,!1),o=r[l=t[h=s-1]],h--,e[o++]=t[h]<l?~h:h,a=0;a<s;a++)(h=e[a])>0?(ASSERT(t[h]>=t[h+1]),(u=t[h])!==l&&(r[l]=o,o=r[l=u]),ASSERT(a<o),h--,e[o++]=t[h]<l?~h:h,e[a]=0):h<0&&(e[a]=~h);for(i===r&&getCounts(t,i,s,n),getBuckets(i,r,n,1),a=s-1,o=r[l=0];a>=0;a--)(h=e[a])>0&&(ASSERT(t[h]<=t[h+1]),(u=t[h])!==l&&(r[l]=o,o=r[l=u]),ASSERT(o<=a),h--,e[--o]=t[h]>l?~(h+1):h,e[a]=0)}(t,e,o,a,r,s),p=function(t,e,i,r){var s,n,o,a,h,u,l,c,f,d;for(ASSERT(i>0),s=0;(o=e[s])<0;s++)e[s]=~o,ASSERT(s+1<i);if(s<r)for(n=s,s++;ASSERT(s<i),!((o=e[s])<0&&(e[n++]=~o,e[s]=0,n===r));s++);c=t[s=n=i-1];do{f=c}while(--s>=0&&(c=t[s])>=f);for(;s>=0;){do{f=c}while(--s>=0&&(c=t[s])<=f);if(s>=0){e[r+(s+1>>>1)]=n-s,n=s+1;do{f=c}while(--s>=0&&(c=t[s])>=f)}}for(s=0,l=0,a=i,u=0;s<r;s++){if(d=!0,(h=e[r+((o=e[s])>>>1)])===u&&a+h<i){for(n=0;n<h&&t[o+n]===t[a+n];)n++;n===h&&(d=!1)}d&&(l++,a=o,u=h),e[r+(o>>>1)]=l}return l}(t,e,r,f)):1===f?(e[c]=l+1,p=1):p=0,p<f){for(0!=(4&w)&&(o=null,a=null),0!=(2&w)&&(a=null),_=r+i-2*f,0==(13&w)&&(s+p<=_?_-=s:w|=8),ASSERT(r>>>1<=_+f),u=f+(r>>>1)-1,l=2*f+_-1;f<=u;u--)0!==e[u]&&(e[l--]=e[u]-1);h=e.subarray(f+_),SA_IS(h,e,_,f,p,!1),h=null,u=r-1,l=2*f-1,g=t[r-1];do{b=g}while(--u>=0&&(g=t[u])>=b);for(;u>=0;){do{b=g}while(--u>=0&&(g=t[u])<=b);if(u>=0){e[l--]=u+1;do{b=g}while(--u>=0&&(g=t[u])>=b)}}for(u=0;u<f;u++)e[u]=e[f+e[u]];0!=(4&w)&&(o=a=_$Util_23.makeS32Buffer(s)),0!=(2&w)&&(a=_$Util_23.makeS32Buffer(s))}if(0!=(8&w)&&getCounts(t,o,r,s),f>1){getBuckets(o,a,s,!0),u=f-1,l=r,b=t[d=e[f-1]];do{for(m=a[g=b];m<l;)e[--l]=0;do{if(e[--l]=d,--u<0)break;d=e[u]}while((b=t[d])===g)}while(u>=0);for(;l>0;)e[--l]=0}return n?y=function(t,e,i,r,s,n){var o,a,h,u,l,c=-1;for(i===r&&getCounts(t,i,s,n),getBuckets(i,r,n,!1),o=r[l=t[h=s-1]],e[o++]=h>0&&t[h-1]<l?~h:h,a=0;a<s;a++)(h=e[a])>0?(ASSERT(t[--h]>=t[h+1]),e[a]=~(u=t[h]),u!==l&&(r[l]=o,o=r[l=u]),ASSERT(a<o),e[o++]=h>0&&t[h-1]<l?~h:h):0!==h&&(e[a]=~h);for(i===r&&getCounts(t,i,s,n),getBuckets(i,r,n,!0),a=s-1,o=r[l=0];a>=0;a--)(h=e[a])>0?(ASSERT(t[--h]<=t[h+1]),e[a]=u=t[h],u!==l&&(r[l]=o,o=r[l=u]),ASSERT(o<=a),e[--o]=h>0&&t[h-1]>l?~t[h-1]:h):0!==h?e[a]=~h:c=a;return c}(t,e,o,a,r,s):function(t,e,i,r,s,n){var o,a,h,u,l;for(i===r&&getCounts(t,i,s,n),getBuckets(i,r,n,!1),o=r[l=t[h=s-1]],e[o++]=h>0&&t[h-1]<l?~h:h,a=0;a<s;a++)h=e[a],e[a]=~h,h>0&&(ASSERT(t[--h]>=t[h+1]),(u=t[h])!==l&&(r[l]=o,o=r[l=u]),ASSERT(a<o),e[o++]=h>0&&t[h-1]<l?~h:h);for(i===r&&getCounts(t,i,s,n),getBuckets(i,r,n,!0),a=s-1,o=r[l=0];a>=0;a--)(h=e[a])>0?(ASSERT(t[--h]<=t[h+1]),(u=t[h])!==l&&(r[l]=o,o=r[l=u]),ASSERT(o<=a),e[--o]=0===h||t[h-1]>l?~h:h):e[a]=~h}(t,e,o,a,r,s),o=null,a=null,y},BWT=Object.create(null);BWT.suffixsort=function(t,e,i,r){if(ASSERT(t&&e&&t.length>=i&&e.length>=i),i<=1)return 1===i&&(e[0]=0),0;if(!r)if(1===t.BYTES_PER_ELEMENT)r=256;else{if(2!==t.BYTES_PER_ELEMENT)throw new Error("Need to specify alphabetSize");r=65536}return ASSERT(r>0),t.BYTES_PER_ELEMENT&&ASSERT(r<=1<<8*t.BYTES_PER_ELEMENT),SA_IS(t,e,0,i,r,!1)},BWT.bwtransform=function(t,e,i,r,s){var n,o;if(ASSERT(t&&e&&i),ASSERT(t.length>=r&&e.length>=r&&i.length>=r),r<=1)return 1===r&&(e[0]=t[0]),r;if(!s)if(1===t.BYTES_PER_ELEMENT)s=256;else{if(2!==t.BYTES_PER_ELEMENT)throw new Error("Need to specify alphabetSize");s=65536}for(ASSERT(s>0),t.BYTES_PER_ELEMENT&&ASSERT(s<=1<<8*t.BYTES_PER_ELEMENT),o=SA_IS(t,i,0,r,s,!0),e[0]=t[r-1],n=0;n<o;n++)e[n+1]=i[n];for(n+=1;n<r;n++)e[n]=i[n];return o+1},BWT.unbwtransform=function(t,e,i,r,s){var n,o,a=_$Util_23.makeU32Buffer(256);for(n=0;n<256;n++)a[n]=0;for(n=0;n<r;n++)i[n]=a[t[n]]++;for(n=0,o=0;n<256;n++)o+=a[n],a[n]=o-a[n];for(n=r-1,o=0;n>=0;n--)o=i[o]+a[e[n]=t[o]],o+=o<s?1:0;a=null},BWT.bwtransform2=function(t,e,i,r){var s,n,o,a=0;if(ASSERT(t&&e),ASSERT(t.length>=i&&e.length>=i),i<=1)return 1===i&&(e[0]=t[0]),0;if(!r)if(1===t.BYTES_PER_ELEMENT)r=256;else{if(2!==t.BYTES_PER_ELEMENT)throw new Error("Need to specify alphabetSize");r=65536}if(ASSERT(r>0),t.BYTES_PER_ELEMENT&&ASSERT(r<=1<<8*t.BYTES_PER_ELEMENT),(o=t.length>=2*i?t:r<=256?_$Util_23.makeU8Buffer(2*i):r<=65536?_$Util_23.makeU16Buffer(2*i):_$Util_23.makeU32Buffer(2*i))!==t)for(s=0;s<i;s++)o[s]=t[s];for(s=0;s<i;s++)o[i+s]=o[s];var h=_$Util_23.makeS32Buffer(2*i);for(SA_IS(o,h,0,2*i,r,!1),s=0,n=0;s<2*i;s++){var u=h[s];u<i&&(0===u&&(a=n),--u<0&&(u=i-1),e[n++]=t[u])}return ASSERT(n===i),a},_$BWT_2=_$freeze_24(BWT);var _$Huffman_11={},HTable=function(t,e,i,r){this.up=t,this.down=e,this.symbol=i,this.weight=r};HTable.prototype.clone=function(){return new HTable(this.up,this.down,this.symbol,this.weight)},HTable.prototype.set=function(t){this.up=t.up,this.down=t.down,this.symbol=t.symbol,this.weight=t.weight};var Huffman=function(t,e,i,r){var s;for((!e||e>t)&&(e=t),(e<<=1)&&e--,this.table=[],s=0;s<=e;s++)this.table[s]=new HTable(0,0,0,0);if(this.map=[],this.size=t)for(s=0;s<t;s++)this.map[s]=0;this.esc=this.root=e,i&&(this.readBit=i.readBit.bind(i),this.writeBit=i.writeBit.bind(i)),this.max_weight=r};Huffman.factory=function(t,e){return function(i){return new Huffman(i,i,t,e)}},Huffman.prototype.split=function(t){var e,i;return(e=this.esc)?(this.esc--,(i=this.esc)?(this.table[e].down=i,this.table[e].weight=1,this.table[i].up=e,this.esc--):(e=0,i=1),this.table[i].symbol=t,this.table[i].weight=0,this.table[i].down=0,this.map[t]=i,this.table[this.esc].weight=0,this.table[this.esc].down=0,this.table[this.esc].up=e,i):0},Huffman.prototype.leader=function(t){for(var e,i,r=this.table[t].weight,s=t;r===this.table[s+1].weight;)s++;return s===t?t:(i=this.table[t].symbol,e=this.table[s].symbol,this.table[s].symbol=i,this.table[t].symbol=e,this.map[i]=s,this.map[e]=t,s)},Huffman.prototype.slide=function(t){var e,i=t;if(1&(e=this.table[i++].clone()).weight)for(;e.weight>this.table[i+1].weight;)i++;return this.table[t].set(this.table[i]),this.table[i].set(e),this.table[i].up=this.table[t].up,this.table[t].up=e.up,1&e.weight?(this.table[e.down].up=i,this.table[e.down-1].up=i,this.map[this.table[t].symbol]=t):(this.table[this.table[t].down-1].up=t,this.table[this.table[t].down].up=t,this.map[e.symbol]=i),i},Huffman.prototype.increment=function(t){var e;for(this.table[t].up===t+1?(this.table[t].weight+=2,t++):t=this.leader(t);this.table[t].weight+=2,e=this.table[t].up;){for(;this.table[t].weight>this.table[t+1].weight;)t=this.slide(t);t=1&this.table[t].weight?e:this.table[t].up}this.max_weight&&this.table[this.root].weight>=this.max_weight&&this.scale(1)},Huffman.prototype.scale=function(t){for(var e,i,r=this.esc;++r<=this.root;)for(1&this.table[r].weight?(e=-2&this.table[this.table[r].down].weight)&&(e+=1|this.table[this.table[r].down-1].weight):(e=this.table[r].weight>>t&-2)||(this.map[this.table[r].symbol]=0,this.esc++&&this.esc++),this.table[r].weight=e,i=r;e<this.table[--i].weight;)this.slide(i);this.table[this.esc].down=0},Huffman.prototype.sendid=function(t){for(var e,i=0;t--;)this.map[t]||i++;if(e=this.size-Math.floor((this.root-this.esc)/2)-1)do{this.writeBit(1&i),i>>=1}while(e>>=1)},Huffman.prototype.encode=function(t){var e,i,r,s,n=1;if(t<this.size&&((r=s=this.map[t])||(r=this.esc))){for(;i=this.table[r].up;)n<<=1,n|=1&r,r=i;for(;e=1&n,n>>=1;)this.writeBit(e);s||(this.sendid(t),s=this.split(t)),this.increment(s)}},Huffman.prototype.readid=function(){var t,e,i=0,r=1;if(t=this.size-Math.floor((this.root-this.esc)/2)-1)do{i|=this.readBit()?r:0,r<<=1}while(t>>=1);for(e=0;e<this.size;e++)if(!this.map[e]&&!i--)return e;return 0},Huffman.prototype.decode=function(){for(var t,e,i=this.root;e=this.table[i].down;)i=this.readBit()?e-1:e;if(i===this.esc){if(!this.esc)return 0;t=this.readid(),i=this.split(t)}else t=this.table[i].symbol;return this.increment(i),t},Huffman.MAGIC="huff",Huffman.compressFile=_$Util_23.compressFileHelper(Huffman.MAGIC,(function(t,e,i,r){var s=new _$BitStream_4(e),n=256;i<0&&n++;var o=new Huffman(257,n,s,8191);_$Util_23.compressWithModel(t,i,o),s.flush()})),Huffman.decompressFile=_$Util_23.decompressFileHelper(Huffman.MAGIC,(function(t,e,i){var r=new _$BitStream_4(t),s=256;i<0&&s++;var n=new Huffman(257,s,r,8191);_$Util_23.decompressWithModel(e,i,n)})),_$Huffman_11=Huffman;var _$Context1Model_7={},Context1Model=function(t,e,i){var r;for(this.literalModel=[],r=0;r<e;r++)this.literalModel[r]=t(i)};Context1Model.prototype.encode=function(t,e){this.literalModel[e].encode(t)},Context1Model.prototype.decode=function(t){return this.literalModel[t].decode()},Context1Model.MAGIC="ctx1",Context1Model.compressFile=_$Util_23.compressFileHelper(Context1Model.MAGIC,(function(t,e,i,r){var s=new _$BitStream_4(e),n=256;i<0&&n++;var o=_$Huffman_11.factory(s,8191),a=new Context1Model(o,256,n),h=32,u={encode:function(t){a.encode(t,h),h=t}};_$Util_23.compressWithModel(t,i,u),s.flush()})),Context1Model.decompressFile=_$Util_23.decompressFileHelper(Context1Model.MAGIC,(function(t,e,i){var r=new _$BitStream_4(t),s=256;i<0&&s++;var n=_$Huffman_11.factory(r,8191),o=new Context1Model(n,256,s),a=32,h={decode:function(){var t=o.decode(a);return a=t,t}};_$Util_23.decompressWithModel(e,i,h)})),_$Context1Model_7=Context1Model;var _$RangeCoder_20={},Top_value=Math.pow(2,31),Bottom_value=Top_value>>>8,MAX_INT=Math.pow(2,32)-1,RangeCoder=function(t){this.low=0,this.range=Top_value,this.buffer=0,this.help=0,this.bytecount=0,this.stream=t},enc_normalize=function(t,e){for(;t.range<=Bottom_value;){if(t.low<255<<23){for(e.writeByte(t.buffer);t.help;t.help--)e.writeByte(255);t.buffer=t.low>>>23&255}else if(t.low&Top_value){for(e.writeByte(t.buffer+1);t.help;t.help--)e.writeByte(0);t.buffer=t.low>>>23&255}else if(t.help++,t.help>MAX_INT)throw new Error("Too many bytes outstanding, file too large!");t.range=t.range<<8>>>0,t.low=(t.low<<8&Top_value-1)>>>0,t.bytecount++}};RangeCoder.prototype.encodeStart=function(t,e){this.low=0,this.range=Top_value,this.buffer=t,this.help=0,this.bytecount=e},RangeCoder.prototype.encodeFreq=function(t,e,i){enc_normalize(this,this.stream);var r=this.range/i>>>0,s=r*e;this.low+=s,e+t<i?this.range=r*t:this.range-=s},RangeCoder.prototype.encodeShift=function(t,e,i){enc_normalize(this,this.stream);var r=this.range>>>i,s=r*e;this.low+=s,e+t>>>i?this.range-=s:this.range=r*t},RangeCoder.prototype.encodeBit=function(t){this.encodeShift(1,t?1:0,1)},RangeCoder.prototype.encodeByte=function(t){this.encodeShift(1,t,8)},RangeCoder.prototype.encodeShort=function(t){this.encodeShift(1,t,16)},RangeCoder.prototype.encodeFinish=function(){var t=this.stream;enc_normalize(this,t),this.bytecount+=5;var e=this.low>>>23;if((this.low&Bottom_value-1)>=(16777215&this.bytecount)>>>1&&e++,e>255)for(t.writeByte(this.buffer+1);this.help;this.help--)t.writeByte(0);else for(t.writeByte(this.buffer);this.help;this.help--)t.writeByte(255);return t.writeByte(255&e),t.writeByte(this.bytecount>>>16&255),t.writeByte(this.bytecount>>>8&255),t.writeByte(255&this.bytecount),this.bytecount},RangeCoder.prototype.decodeStart=function(t){var e=t?0:this.stream.readByte();return"number"!=typeof e||e<0||(this.buffer=this.stream.readByte(),this.low=this.buffer>>>1,this.range=128),e};var dec_normalize=function(t,e){for(;t.range<=Bottom_value;)t.low=t.low<<8|t.buffer<<7&255,t.buffer=e.readByte(),t.low|=t.buffer>>>1,t.low=t.low>>>0,t.range=t.range<<8>>>0};RangeCoder.prototype.decodeCulFreq=function(t){dec_normalize(this,this.stream),this.help=this.range/t>>>0;var e=this.low/this.help>>>0;return e>=t?t-1:e},RangeCoder.prototype.decodeCulShift=function(t){dec_normalize(this,this.stream),this.help=this.range>>>t;var e=this.low/this.help>>>0;return e>>>t?(1<<t)-1:e},RangeCoder.prototype.decodeUpdate=function(t,e,i){var r=this.help*e;this.low-=r,e+t<i?this.range=this.help*t:this.range-=r},RangeCoder.prototype.decodeBit=function(){var t=this.decodeCulShift(1);return this.decodeUpdate(1,t,2),t},RangeCoder.prototype.decodeByte=function(){var t=this.decodeCulShift(8);return this.decodeUpdate(1,t,256),t},RangeCoder.prototype.decodeShort=function(){var t=this.decodeCulShift(16);return this.decodeUpdate(1,t,65536),t},RangeCoder.prototype.decodeFinish=function(){dec_normalize(this,this.stream)},RangeCoder.prototype.writeBit=RangeCoder.prototype.encodeBit,RangeCoder.prototype.readBit=RangeCoder.prototype.decodeBit,RangeCoder.prototype.writeByte=RangeCoder.prototype.encodeByte,RangeCoder.prototype.readByte=RangeCoder.prototype.decodeByte,_$RangeCoder_20=RangeCoder;var _$DefSumModel_8={};const __Util_8=_$Util_23;var DefSumModel=function(t,e,i){var r,s=this.numSyms=e;for(this.coder=t,this.prob=__Util_8.makeU16Buffer(e+2),this.escape=__Util_8.makeU16Buffer(e+1),this.update=__Util_8.makeU16Buffer(e+1),this.prob[s+1]=256,r=0;r<=this.numSyms;r++)this.escape[r]=r;if(this.updateCount=0,this.updateThresh=256-Math.floor(128),i){for(this.probToSym=__Util_8.makeU16Buffer(256),this.escProbToSym=__Util_8.makeU16Buffer(this.numSyms),r=0;r<256;r++)this.probToSym[r]=s;for(r=0;r<this.numSyms;r++)this.escProbToSym[r]=r}};DefSumModel.factory=function(t,e){return function(i){return new DefSumModel(t,i,e)}},DefSumModel.prototype._update=function(t,e){if(t===this.numSyms){if(this.update[t]>=40)return;if(this.updateCount>=this.updateThresh-1)return}if(this.update[t]++,this.updateCount++,!(this.updateCount<this.updateThresh)){var i,r,s,n,o,a;for(this.escape[0]=this.prob[0]=i=r=s=0,n=0;n<this.numSyms+1;n++){var h=(this.prob[n+1]-this.prob[n]>>>1)+this.update[n];h?(this.prob[n]=i,i+=h,1&h&&s++,this.escape[n]=r):(this.prob[n]=i,this.escape[n]=r,r++)}for(this.prob[n]=i,this.updateThresh=256-Math.floor((i-s)/2),n=0;n<this.numSyms+1;n++)this.update[n]=0;if(this.update[this.numSyms]=1,this.updateCount=1,e)for(n=0,o=0,a=0;n<this.numSyms+1;n++){for(var u=this.prob[n+1];o<u;o++)this.probToSym[o]=n;for(var l=this.escape[n+1];a<l;a++)this.escProbToSym[a]=n}}},DefSumModel.prototype.encode=function(t){var e=this.prob[t],i=this.prob[t+1]-e;if(i)return this.coder.encodeShift(i,e,8),this._update(t);this.encode(this.numSyms),e=this.escape[t],i=this.escape[t+1]-e;var r=this.escape[this.numSyms];return this.coder.encodeFreq(i,e,r),this._update(t)},DefSumModel.prototype.decode=function(){var t=this.coder.decodeCulShift(8),e=this.probToSym[t],i=this.prob[e],r=this.prob[e+1]-i;if(this.coder.decodeUpdate(r,i,256),this._update(e,!0),e!==this.numSyms)return e;var s=this.escape[this.numSyms];return t=this.coder.decodeCulFreq(s),e=this.escProbToSym[t],i=this.escape[e],r=this.escape[e+1]-i,this.coder.decodeUpdate(r,i,s),this._update(e,!0),e},DefSumModel.MAGIC="dfsm",DefSumModel.compressFile=__Util_8.compressFileHelper(DefSumModel.MAGIC,(function(t,e,i,r,s){var n=new _$RangeCoder_20(e);n.encodeStart(s,1);var o=new DefSumModel(n,i<0?257:256);__Util_8.compressWithModel(t,i,o),n.encodeFinish()}),!0),DefSumModel.decompressFile=__Util_8.decompressFileHelper(DefSumModel.MAGIC,(function(t,e,i){var r=new _$RangeCoder_20(t);r.decodeStart(!0);var s=new DefSumModel(r,i<0?257:256,!0);__Util_8.decompressWithModel(e,i,s),r.decodeFinish()})),_$DefSumModel_8=DefSumModel;var _$FenwickModel_10={};const __Util_10=_$Util_23;var FenwickModel=function(t,e,i,r){var s;for(this.coder=t,this.numSyms=e+1,this.tree=__Util_10.makeU32Buffer(2*this.numSyms),this.increment=+r||256,this.max_prob=+i||65280,s=0;s<e;s++)this.tree[this.numSyms+s]=1;this.tree[this.numSyms+s]=0|this.increment<<16,this._sumTree()};FenwickModel.factory=function(t,e,i){return function(r){return new FenwickModel(t,r,e,i)}},FenwickModel.prototype.clone=function(){var t,e=new FenwickModel(this.coder,this.size,this.max_prob,this.increment);for(t=1;t<this.tree.length;t++)e.tree[t]=this.tree[t];return e},FenwickModel.prototype.encode=function(t){var e=this.numSyms+t,i=this.tree[e],r=4294901760,s=16,n=this.increment<<16;0==(4294901760&i)?(this.encode(this.numSyms-1),r=65535,n-=1,s=0):t===this.numSyms-1&&(65535&this.tree[1])>>>0==1&&(n=-this.tree[e]);for(var o=0;e>1;){var a=e>>>1;1&e&&(o+=this.tree[2*a]),this.tree[e]+=n,e=a}var h=this.tree[1];this.tree[1]+=n,i=(i&r)>>>s,o=(o&r)>>>s,h=(h&r)>>>s,this.coder.encodeFreq(i,o,h),(4294901760&this.tree[1])>>>16>=this.max_prob&&this._rescale()},FenwickModel.prototype._decode=function(t){var e=4294901760,i=16,r=this.increment<<16;t&&(e=65535,r-=1,i=0);for(var s=(this.tree[1]&e)>>>i,n=this.coder.decodeCulFreq(s),o=1,a=0;o<this.numSyms;){this.tree[o]+=r;var h=(this.tree[2*o]&e)>>>i;o*=2,n-a>=h&&(a+=h,o++)}var u=o-this.numSyms,l=(this.tree[o]&e)>>>i;if(this.tree[o]+=r,this.coder.decodeUpdate(l,a,s),u===this.numSyms-1&&(65535&this.tree[1])>>>0==1)for(r=-this.tree[o];o>=1;)this.tree[o]+=r,o>>>=1;return(4294901760&this.tree[1])>>>16>=this.max_prob&&this._rescale(),u},FenwickModel.prototype.decode=function(){var t=this._decode(!1);return t===this.numSyms-1&&(t=this._decode(!0)),t},FenwickModel.prototype._rescale=function(){var t,e,i=!0;for(t=0;t<this.numSyms-1;t++)0==(65535&(e=this.tree[this.numSyms+t]))?(0==(e=(4294901758&e)>>>1)&&(e=1,i=!1),this.tree[this.numSyms+t]=e):i=!1;e=(4294901758&(e=this.tree[this.numSyms+t]))>>>1,i?e=0:0===e&&(e=65536),this.tree[this.numSyms+t]=e,this._sumTree()},FenwickModel.prototype._sumTree=function(){var t;for(t=this.numSyms-1;t>0;t--)this.tree[t]=this.tree[2*t]+this.tree[2*t+1]},FenwickModel.MAGIC="fenw",FenwickModel.compressFile=__Util_10.compressFileHelper(FenwickModel.MAGIC,(function(t,e,i,r,s){var n=new _$RangeCoder_20(e);n.encodeStart(s,1);var o=new FenwickModel(n,i<0?257:256);__Util_10.compressWithModel(t,i,o),n.encodeFinish()}),!0),FenwickModel.decompressFile=__Util_10.decompressFileHelper(FenwickModel.MAGIC,(function(t,e,i){var r=new _$RangeCoder_20(t);r.decodeStart(!0);var s=new FenwickModel(r,i<0?257:256);__Util_10.decompressWithModel(e,i,s),r.decodeFinish()})),_$FenwickModel_10=FenwickModel;var _$MTFModel_17={};const __Util_17=_$Util_23;var NUMERIC_SORT=function(t,e){return t-e},MTFModel=function(t,e,i,r,s){this.coder=t,this.increment=+r||256,this.max_prob=+i||65280,this.sym=__Util_17.makeU16Buffer(e+1),this.prob=__Util_17.makeU16Buffer(e+2),this.sym[0]=e,this.prob[0]=0,this.seenSyms=1,this.prob[this.seenSyms]=this.increment,this.numSyms=e,s&&(this.sortedSeen=[e])};MTFModel.factory=function(t,e,i,r){return function(s){return new MTFModel(t,s,e,i,r)}},MTFModel.prototype.clone=function(){var t,e=new MTFModel(this.coder,this.numSyms,this.max_prob,this.increment,!!this.sortedSeen);for(t=0;t<this.seenSyms;t++)e.sym[t]=this.sym[t],e.prob[t]=this.prob[t];return e.prob[t]=this.prob[t],e.seenSyms=this.seenSyms,this.sortedSeen&&(e.sortedSeen=this.sortedSeen.slice(0)),e},MTFModel.prototype._update=function(t,e,i){var r,s;for(r=e;r<this.seenSyms-1;r++)this.sym[r]=this.sym[r+1],this.prob[r]=this.prob[r+1]-i;e<this.seenSyms?(this.sym[r]=t,this.prob[r]=this.prob[r+1]-i,this.prob[this.seenSyms]=s=this.prob[this.seenSyms]+this.increment,t===this.numSyms&&this.seenSyms>=this.numSyms&&(s=this.prob[--this.seenSyms],this.sortedSeen&&this.sortedSeen.length--)):(s=this.prob[this.seenSyms],this.sym[e]=t,this.prob[e]=s,s+=this.increment,this.prob[++this.seenSyms]=s,this.sortedSeen&&(this.sortedSeen.push(t),this.sortedSeen.sort(NUMERIC_SORT))),s>=this.max_prob&&this._rescale()},MTFModel.prototype._rescale=function(){var t,e,i=0,r=!0;for(this.sortedSeen&&(this.sortedSeen.length=0),t=0,e=0;t<this.seenSyms;t++){var s=this.sym[t],n=this.prob[t+1]-this.prob[t];(n>>>=1)>0&&(s===this.numSyms&&(r=!1),this.sym[e]=s,this.prob[e++]=i,i+=n,this.sortedSeen&&this.sortedSeen.push(s))}this.prob[e]=i,this.seenSyms=e,this.sortedSeen&&this.sortedSeen.sort(NUMERIC_SORT),r&&this.seenSyms<this.numSyms&&this._update(this.numSyms,this.seenSyms)},MTFModel.prototype.decode=function(){var t,e=this.prob[this.seenSyms],i=this.coder.decodeCulFreq(e);for(t=this.seenSyms-1;t>=0&&!(this.prob[t]<=i);t--);var r=this.sym[t],s=this.prob[t],n=this.prob[t+1]-s;if(this.coder.decodeUpdate(n,s,e),this._update(r,t,n),r===this.numSyms){if(n=1,e=this.numSyms,this.sortedSeen){var o=this.sortedSeen;for(e=this.numSyms-this.seenSyms,o[o.length-1]===this.numSyms&&e++,r=s=this.coder.decodeCulFreq(e),t=0;t<o.length&&o[t]<=r;t++)r++}else r=s=this.coder.decodeCulFreq(e);this.coder.decodeUpdate(n,s,e),this._update(r,this.seenSyms)}return r},MTFModel.prototype.encode=function(t){var e,i,r,s;for(e=this.seenSyms-1;e>=0;e--)if(t===this.sym[e])return r=this.prob[e],i=this.prob[e+1]-r,s=this.prob[this.seenSyms],this.coder.encodeFreq(i,r,s),this._update(t,e,i);if(this.encode(this.numSyms),i=1,r=t,s=this.numSyms,this.sortedSeen){var n=this.sortedSeen;for(s-=this.seenSyms,n[n.length-1]===this.numSyms&&s++,e=0;e<n.length&&n[e]<t;e++)r--}return this.coder.encodeFreq(i,r,s),this._update(t,this.seenSyms)},MTFModel.MAGIC="mtfm",MTFModel.compressFile=__Util_17.compressFileHelper(MTFModel.MAGIC,(function(t,e,i,r,s){var n=new _$RangeCoder_20(e);n.encodeStart(s,1);var o=new MTFModel(n,i<0?257:256);__Util_17.compressWithModel(t,i,o),n.encodeFinish()}),!0),MTFModel.decompressFile=__Util_17.decompressFileHelper(MTFModel.MAGIC,(function(t,e,i){var r=new _$RangeCoder_20(t);r.decodeStart(!0);var s=new MTFModel(r,i<0?257:256);__Util_17.decompressWithModel(e,i,s),r.decodeFinish()})),_$MTFModel_17=MTFModel;var _$NoModel_18={},NoModel=function(t,e){this.bitstream=t,this.bits=_$Util_23.fls(e-1)};NoModel.factory=function(t){return function(e){return new NoModel(t,e)}},NoModel.prototype.encode=function(t){var e;for(e=this.bits-1;e>=0;e--){var i=t>>>e&1;this.bitstream.writeBit(i)}},NoModel.prototype.decode=function(){var t,e=0;for(t=this.bits-1;t>=0;t--)e<<=1,this.bitstream.readBit()&&e++;return e},NoModel.MAGIC="nomo",NoModel.compressFile=_$Util_23.compressFileHelper(NoModel.MAGIC,(function(t,e,i,r){var s=new _$BitStream_4(e),n=new NoModel(s,i<0?257:256);_$Util_23.compressWithModel(t,i,n),s.flush()})),NoModel.decompressFile=_$Util_23.decompressFileHelper(NoModel.MAGIC,(function(t,e,i){var r=new _$BitStream_4(t),s=new NoModel(r,i<0?257:256);_$Util_23.decompressWithModel(e,i,s)})),_$NoModel_18=NoModel;var _$LogDistanceModel_13={},LogDistanceModel=function(t,e,i,r){var s,n=_$Util_23.fls(t-1);for(this.extraStates=+e||0,this.lgDistanceModel=i(1+n+e),this.distanceModel=[],s=2;s<=n;s++){var o=s-1;this.distanceModel[s]=r(1<<o)}};LogDistanceModel.prototype.encode=function(t){if(t<2)this.lgDistanceModel.encode(t+this.extraStates);else{var e=_$Util_23.fls(t);this.lgDistanceModel.encode(e+this.extraStates);var i=t&(1<<e-1)-1;this.distanceModel[e].encode(i)}},LogDistanceModel.prototype.decode=function(){var t=this.lgDistanceModel.decode()-this.extraStates;return t<2?t:(1<<t-1)+this.distanceModel[t].decode()},_$LogDistanceModel_13=LogDistanceModel;var _$BWTC_3={};_$Stream_22.EOF,BWTC=Object.create(null),BWTC.MAGIC="bwtc",BWTC.compressFile=_$Util_23.compressFileHelper(BWTC.MAGIC,(function(t,e,i,r,s){var n=new _$RangeCoder_20(e);n.encodeStart(s,1);var o=9;"number"==typeof r&&r>=1&&r<=9&&(o=r),n.encodeByte(o);var a=o<=5;o*=1e5;var h,u,l,c,f,d,m=_$Util_23.makeU8Buffer(o),p=function(){var e;for(e=0;e<o;){var i=t.readByte();if(i<0)break;m[e++]=i}return e},_=_$Util_23.makeU8Buffer(o),g=_$Util_23.makeS32Buffer(o),b=_$Util_23.makeU8Buffer(256),y=_$NoModel_18.factory(n),w=new _$LogDistanceModel_13(o,0,y,y);do{if(0===(h=p()))break;h===m.length?(n.encodeFreq(1,0,3),u=m):(n.encodeFreq(1,1,3),w.encode(h),u=m.subarray(0,h)),c=_$BWT_2.bwtransform(u,_,g,h,256),w.encode(c);var v=_$Util_23.makeU16Buffer(512);for(f=0;f<h;f++)v[256+(l=_[f])]=1;for(f=255;f>0;f--)v[f]=v[2*f]+v[2*f+1];for(v[0]=1,f=1;f<512;f++){var M=f>>>1,S=1<<9-_$Util_23.fls(f);if(0===v[M]||v[M]===2*S);else if(f>=256)n.encodeBit(v[f]);else{var C=v[f];C=0===C?0:C===S?2:1,n.encodeFreq(1,C,3)}}var I=0;for(f=0;f<256;f++)v[256+f]&&(b[I++]=f);for(v=null,f=0;f<h;f++){for(l=_[f],d=0;d<I&&b[d]!==l;d++);for(_[f]=d;d>0;d--)b[d]=b[d-1];b[0]=l}var T=new _$FenwickModel_10(n,I+1,65280,256);a&&(T=new _$DefSumModel_8(n,I+1));var A=0,k=function(){for(;0!==A;)1&A?(T.encode(0),A-=1):(T.encode(1),A-=2),A>>>=1};for(f=0;f<h;f++)0===(l=_[f])?A++:(k(),T.encode(l+1),A=0);k()}while(h===m.length);n.encodeFreq(1,2,3),n.encodeFinish()}),!0),BWTC.decompressFile=_$Util_23.decompressFileHelper(BWTC.MAGIC,(function(t,e,i){var r=new _$RangeCoder_20(t);r.decodeStart(!0);var s=r.decodeByte(),n=s<=5;s*=1e5;for(var o,a,h,u,l,c=_$Util_23.makeU8Buffer(s),f=_$Util_23.makeU8Buffer(s),d=_$Util_23.makeS32Buffer(s),m=_$Util_23.makeU8Buffer(256),p=_$NoModel_18.factory(r),_=new _$LogDistanceModel_13(s,0,p,p);;){var g=r.decodeCulFreq(3);if(r.decodeUpdate(1,g,3),0===g)a=s,o=c;else if(1===g)a=_.decode(),o=c.subarray(0,a);else if(2===g)break;var b=_.decode(),y=_$Util_23.makeU16Buffer(512);for(y[0]=1,h=1;h<512;h++){var w=h>>>1,v=1<<9-_$Util_23.fls(h);if(0===y[w]||y[w]===2*v)y[h]=y[w]>>>1;else if(h>=256)y[h]=r.decodeBit();else{var M=r.decodeCulFreq(3);r.decodeUpdate(1,M,3),y[h]=2===M?v:M}}var S=0;for(h=0;h<256;h++)y[256+h]&&(m[S++]=h);y=null;var C=new _$FenwickModel_10(r,S+1,65280,256);n&&(C=new _$DefSumModel_8(r,S+1,!0));var I=1;for(h=0;h<a;)if(0===(l=C.decode())){for(u=0;u<I;u++)o[h++]=0;I*=2}else if(1===l){for(u=0;u<I;u++)o[h++]=0,o[h++]=0;I*=2}else I=1,o[h++]=l-1;for(h=0;h<a;h++){for(u=o[h],o[h]=l=m[u];u>0;u--)m[u]=m[u-1];m[0]=l}_$BWT_2.unbwtransform(c,f,d,a,b),e.write(f,0,a)}r.decodeFinish()})),_$BWTC_3=BWTC;var crc32Lookup=_$Util_23.arraycopy(_$Util_23.makeU32Buffer(256),[0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]),_$CRC32_6=function(){var t=4294967295;this.getCRC=function(){return~t>>>0},this.updateCRC=function(e){t=t<<8^crc32Lookup[255&(t>>>24^e)]},this.updateCRCRun=function(e,i){for(;i-- >0;)t=t<<8^crc32Lookup[255&(t>>>24^e)]}},first=function(t,e,i){for(var r=t.length,s=e,n=t.length-2;e>=i&&t[e]%r>s;)n=e,e-=s-e+1;for(e=Math.max(i-1,e);n>e+1;){var o=e+n>>1;t[o]%r>s?n=o:e=o}return n},_$HuffmanAllocator_12=_$freeze_24({allocateHuffmanCodeLengths:function(t,e){switch(t.length){case 2:t[1]=1;case 1:return void(t[0]=1)}!function(t){var e,i,r,s,n=t.length;for(t[0]+=t[1],e=0,i=1,r=2;i<n-1;i++)r>=n||t[e]<t[r]?(s=t[e],t[e++]=i):s=t[r++],r>=n||e<i&&t[e]<t[r]?(s+=t[e],t[e++]=i+n):s+=t[r++],t[i]=s}(t);var i=function(t,e){var i,r=t.length-2;for(i=1;i<e-1&&r>1;i++)r=first(t,r-1,0);return r}(t,e);t[0]%t.length>=i?function(t){var e,i,r,s,n=t.length-2,o=t.length-1;for(e=1,i=2;i>0;e++){for(s=i-((r=n)-(n=first(t,r-1,0)));s>0;s--)t[o--]=e;i=r-n<<1}}(t):function(t,e,i){var r,s,n,o,a=t.length-2,h=t.length-1,u=1==i?2:1,l=1==i?e-2:e;for(r=u<<1;r>0;u++){for(s=a,a=a<=e?a:first(t,s-1,e),n=0,u>=i?n=Math.min(l,1<<u-i):u==i-1&&(n=1,t[a]==s&&a++),o=r-(s-a+n);o>0;o--)t[h--]=u;l-=n,r=s-a+n<<1}}(t,i,e-_$Util_23.fls(i-1))}}),_$Bzip2_5={},EOF=_$Stream_22.EOF,mtf=function(t,e){var i,r=t[e];for(i=e;i>0;i--)t[i]=t[i-1];return t[0]=r,r},Err={OK:0,LAST_BLOCK:-1,NOT_BZIP_DATA:-2,UNEXPECTED_INPUT_EOF:-3,UNEXPECTED_OUTPUT_EOF:-4,DATA_ERROR:-5,OUT_OF_MEMORY:-6,OBSOLETE_INPUT:-7,END_OF_BLOCK:-8},ErrorMessages={};ErrorMessages[Err.LAST_BLOCK]="Bad file checksum",ErrorMessages[Err.NOT_BZIP_DATA]="Not bzip data",ErrorMessages[Err.UNEXPECTED_INPUT_EOF]="Unexpected input EOF",ErrorMessages[Err.UNEXPECTED_OUTPUT_EOF]="Unexpected output EOF",ErrorMessages[Err.DATA_ERROR]="Data error",ErrorMessages[Err.OUT_OF_MEMORY]="Out of memory",ErrorMessages[Err.OBSOLETE_INPUT]="Obsolete (pre 0.9.5) bzip format not supported.";var _throw=function(t,e){var i=ErrorMessages[t]||"unknown error";e&&(i+=": "+e);var r=new TypeError(i);throw r.errorCode=t,r},Bunzip=function(t,e){this.writePos=this.writeCurrent=this.writeCount=0,this._start_bunzip(t,e)};Bunzip.prototype._init_block=function(){return this._get_next_block()?(this.blockCRC=new _$CRC32_6,!0):(this.writeCount=-1,!1)},Bunzip.prototype._start_bunzip=function(t,e){var i=_$Util_23.makeU8Buffer(4);4===t.read(i,0,4)&&"BZh"===String.fromCharCode(i[0],i[1],i[2])||_throw(Err.NOT_BZIP_DATA,"bad magic");var r=i[3]-48;(r<1||r>9)&&_throw(Err.NOT_BZIP_DATA,"level out of range"),this.reader=new _$BitStream_4(t),this.dbufSize=1e5*r,this.nextoutput=0,this.outputStream=e,this.streamCRC=0},Bunzip.prototype._get_next_block=function(){var t,e,i,r=this.reader,s=r.readBits(48);if(25779555029136===s)return!1;54156738319193!==s&&_throw(Err.NOT_BZIP_DATA),this.targetBlockCRC=r.readBits(32),this.streamCRC=(this.targetBlockCRC^(this.streamCRC<<1|this.streamCRC>>>31))>>>0,r.readBits(1)&&_throw(Err.OBSOLETE_INPUT);var n=r.readBits(24);n>this.dbufSize&&_throw(Err.DATA_ERROR,"initial position out of bounds");var o=r.readBits(16),a=_$Util_23.makeU8Buffer(256),h=0;for(t=0;t<16;t++)if(o&1<<15-t){var u=16*t;for(i=r.readBits(16),e=0;e<16;e++)i&1<<15-e&&(a[h++]=u+e)}var l=r.readBits(3);(l<2||l>6)&&_throw(Err.DATA_ERROR);var c=r.readBits(15);0===c&&_throw(Err.DATA_ERROR);var f=_$Util_23.makeU8Buffer(256);for(t=0;t<l;t++)f[t]=t;var d=_$Util_23.makeU8Buffer(c);for(t=0;t<c;t++){for(e=0;r.readBits(1);e++)e>=l&&_throw(Err.DATA_ERROR);d[t]=mtf(f,e)}var m,p=h+2,_=[];for(e=0;e<l;e++){var g,b,y=_$Util_23.makeU8Buffer(p),w=_$Util_23.makeU16Buffer(21);for(o=r.readBits(5),t=0;t<p;t++){for(;(o<1||o>20)&&_throw(Err.DATA_ERROR),r.readBits(1);)r.readBits(1)?o--:o++;y[t]=o}for(g=b=y[0],t=1;t<p;t++)y[t]>b?b=y[t]:y[t]<g&&(g=y[t]);m={},_.push(m),m.permute=_$Util_23.makeU16Buffer(258),m.limit=_$Util_23.makeU32Buffer(22),m.base=_$Util_23.makeU32Buffer(21),m.minLen=g,m.maxLen=b;var v=0;for(t=g;t<=b;t++)for(w[t]=m.limit[t]=0,o=0;o<p;o++)y[o]===t&&(m.permute[v++]=o);for(t=0;t<p;t++)w[y[t]]++;for(v=o=0,t=g;t<b;t++)v+=w[t],m.limit[t]=v-1,v<<=1,o+=w[t],m.base[t+1]=v-o;m.limit[b+1]=Number.MAX_VALUE,m.limit[b]=v+w[b]-1,m.base[g]=0}var M=_$Util_23.makeU32Buffer(256);for(t=0;t<256;t++)f[t]=t;var S,C=0,I=0,T=0,A=this.dbuf=_$Util_23.makeU32Buffer(this.dbufSize);for(p=0;;){for(p--||(p=49,T>=c&&_throw(Err.DATA_ERROR),m=_[d[T++]]),t=m.minLen,e=r.readBits(t);t>m.maxLen&&_throw(Err.DATA_ERROR),!(e<=m.limit[t]);t++)e=e<<1|r.readBits(1);((e-=m.base[t])<0||e>=258)&&_throw(Err.DATA_ERROR);var k=m.permute[e];if(0!==k&&1!==k){if(C)for(C=0,I+o>this.dbufSize&&_throw(Err.DATA_ERROR),M[S=a[f[0]]]+=o;o--;)A[I++]=S;if(k>h)break;I>=this.dbufSize&&_throw(Err.DATA_ERROR),M[S=a[S=mtf(f,t=k-1)]]++,A[I++]=S}else C||(C=1,o=0),o+=0===k?C:2*C,C<<=1}for((n<0||n>=I)&&_throw(Err.DATA_ERROR),e=0,t=0;t<256;t++)i=e+M[t],M[t]=e,e=i;for(t=0;t<I;t++)A[M[S=255&A[t]]]|=t<<8,M[S]++;var B=0,x=0,E=0;return I&&(x=255&(B=A[n]),B>>=8,E=-1),this.writePos=B,this.writeCurrent=x,this.writeCount=I,this.writeRun=E,!0},Bunzip.prototype._read_bunzip=function(t,e){var i,r,s;if(this.writeCount<0)return 0;for(var n=this.dbuf,o=this.writePos,a=this.writeCurrent,h=this.writeCount,u=(this.outputsize,this.writeRun);h;){for(h--,r=a,a=255&(o=n[o]),o>>=8,3==u++?(i=a,s=r,a=-1):(i=1,s=a),this.blockCRC.updateCRCRun(s,i);i--;)this.outputStream.writeByte(s),this.nextoutput++;a!=r&&(u=0)}return this.writeCount=h,this.blockCRC.getCRC()!==this.targetBlockCRC&&_throw(Err.DATA_ERROR,"Bad block CRC (got "+this.blockCRC.getCRC().toString(16)+" expected "+this.targetBlockCRC.toString(16)+")"),this.nextoutput},Bunzip.Err=Err,Bunzip.decode=function(t,e,i){for(var r=_$Util_23.coerceInputStream(t),s=_$Util_23.coerceOutputStream(e,e),n=s.stream,o=new Bunzip(r,n);!("eof"in r)||!r.eof();)if(o._init_block())o._read_bunzip();else{var a=o.reader.readBits(32);if(a!==o.streamCRC&&_throw(Err.DATA_ERROR,"Bad stream CRC (got "+o.streamCRC.toString(16)+" expected "+a.toString(16)+")"),!i||!("eof"in r)||r.eof())break;o._start_bunzip(r,n)}return s.retval},Bunzip.decodeBlock=function(t,e,i){var r=_$Util_23.coerceInputStream(t),s=_$Util_23.coerceOutputStream(i,i),n=s.stream,o=new Bunzip(r,n);return o.reader.seekBit(e),o._get_next_block()&&(o.blockCRC=new _$CRC32_6,o.writeCopies=0,o._read_bunzip()),s.retval},Bunzip.table=function(t,e,i){var r=new _$Stream_22;r.delegate=_$Util_23.coerceInputStream(t),r.pos=0,r.readByte=function(){return this.pos++,this.delegate.readByte()},r.tell=function(){return this.pos},r.delegate.eof&&(r.eof=r.delegate.eof.bind(r.delegate));var s=new _$Stream_22;s.pos=0,s.writeByte=function(){this.pos++};var n=new Bunzip(r,s);for(n.dbufSize;!("eof"in r)||!r.eof();){var o=n.reader.tellBit();if(n._init_block()){var a=s.pos;n._read_bunzip(),e(o,s.pos-a)}else{if(n.reader.readBits(32),!i||!("eof"in r)||r.eof())break;n._start_bunzip(r,s)}}};var StaticHuffman=function(t,e){var i,r=[];for(i=0;i<e;i++)r[i]=t[i]<<9|i;r.sort((function(t,e){return t-e}));var s=r.map((function(t){return t>>>9}));for(_$HuffmanAllocator_12.allocateHuffmanCodeLengths(s,20),this.codeLengths=_$Util_23.makeU8Buffer(e),i=0;i<e;i++){var n=511&r[i];this.codeLengths[n]=s[i]}};StaticHuffman.prototype.computeCanonical=function(){var t,e=this.codeLengths.length,i=[];for(t=0;t<e;t++)i[t]=this.codeLengths[t]<<9|t;i.sort((function(t,e){return t-e})),this.code=_$Util_23.makeU32Buffer(e);var r=0,s=0;for(t=0;t<e;t++){var n=i[t]>>>9,o=511&i[t];r<<=n-s,this.code[o]=r++,s=n}},StaticHuffman.prototype.cost=function(t,e,i){var r,s=0;for(r=0;r<i;r++)s+=this.codeLengths[t[e+r]];return s},StaticHuffman.prototype.emit=function(t){var e,i=this.codeLengths[0];for(t.writeBits(5,i),e=0;e<this.codeLengths.length;e++){var r,s,n=this.codeLengths[e];for(i<n?(r=2,s=n-i):(r=3,s=i-n);s-- >0;)t.writeBits(2,r);t.writeBit(0),i=n}},StaticHuffman.prototype.encode=function(t,e){t.writeBits(this.codeLengths[e],this.code[e])};var readBlock=function(t,e,i,r){for(var s=0,n=-1,o=0;s<i&&!(4===o&&(e[s++]=0,s>=i));){var a=t.readByte();if(a===EOF)break;if(r.updateCRC(a),a!==n)n=a,o=1;else if(++o>4){if(o<256){e[s-1]++;continue}o=1}e[s++]=a}return s},assignSelectors=function(t,e,i){var r,s,n;for(r=0,n=0;r<i.length;r+=50){var o=Math.min(50,i.length-r),a=0,h=e[0].cost(i,r,o);for(s=1;s<e.length;s++){var u=e[s].cost(i,r,o);u<h&&(a=s,h=u)}t[n++]=a}},compressBlock=function(t,e,i){var r,s,n,o,a=_$Util_23.makeU8Buffer(e),h=_$BWT_2.bwtransform2(t,a,e,256);i.writeBit(0),i.writeBits(24,h);var u=[],l=[];for(s=0;s<e;s++)u[r=t[s]]=!0,l[r>>>4]=!0;for(s=0;s<16;s++)i.writeBit(!!l[s]);for(s=0;s<16;s++)if(l[s])for(n=0;n<16;n++)i.writeBit(!!u[s<<4|n]);var c=0;for(s=0;s<256;s++)u[s]&&c++;var f=_$Util_23.makeU16Buffer(e+1),d=c+1,m=[];for(s=0;s<=d;s++)m[s]=0;var p=_$Util_23.makeU8Buffer(c);for(s=0,n=0;s<256;s++)u[s]&&(p[n++]=s);u=null,l=null;var _=0,g=0,b=function(t){f[_++]=t,m[t]++},y=function(){for(;0!==g;)1&g?(b(0),g-=1):(b(1),g-=2),g>>>=1};for(s=0;s<a.length;s++){for(r=a[s],n=0;n<c&&p[n]!==r;n++);mtf(p,n),0===n?g++:(y(),b(n+1),g=0)}y(),b(d),f=f.subarray(0,_);var w,v=[];for(w=_>=2400?6:_>=1200?5:_>=600?4:_>=200?3:2,v.push(new StaticHuffman(m,d+1)),s=0;s<=d;s++)m[s]=1;v.push(new StaticHuffman(m,d+1)),m=null;var M=_$Util_23.makeU8Buffer(Math.ceil(_/50));for(function(t,e,i,r,s){for(var n,o,a,h=[];t.length<e;){for(assignSelectors(r,t,i),n=0;n<t.length;n++)h[n]=0;for(n=0;n<r.length;n++)h[r[n]]++;var u=h.indexOf(Math.max.apply(Math,h)),l=[];for(n=0,o=0;n<r.length;n++)if(r[n]===u){var c=50*n,f=Math.min(c+50,i.length);l.push({index:n,cost:t[u].cost(i,c,f-c)})}for(l.sort((function(t,e){return t.cost-e.cost})),n=l.length>>>1;n<l.length;n++)r[l[n].index]=t.length;t.push(null);var d,m=[];for(n=0;n<t.length;n++)for(d=m[n]=[],o=0;o<s;o++)d[o]=0;for(n=0,o=0;n<i.length;)for(d=m[r[o++]],a=0;a<50&&n<i.length;a++)d[i[n++]]++;for(n=0;n<t.length;n++)t[n]=new StaticHuffman(m[n],s)}}(v,w,f,M,d+1),assignSelectors(M,v,f),i.writeBits(3,v.length),i.writeBits(15,M.length),s=0;s<v.length;s++)p[s]=s;for(s=0;s<M.length;s++){var S=M[s];for(n=0;n<v.length&&p[n]!==S;n++);for(mtf(p,n);n>0;n--)i.writeBit(1);i.writeBit(0)}for(s=0;s<v.length;s++)v[s].emit(i),v[s].computeCanonical();for(s=0,o=0;s<_;){var C=v[M[o++]];for(n=0;n<50&&s<_;n++)C.encode(i,f[s++])}},Bzip2=Object.create(null);Bzip2.compressFile=function(t,e,i){t=_$Util_23.coerceInputStream(t);var r=_$Util_23.coerceOutputStream(e,e);e=new _$BitStream_4(r.stream);var s=9;if("number"==typeof i&&(s=i),s<1||s>9)throw new Error("Invalid block size multiplier");var n=1e5*s;n-=19,e.writeByte("B".charCodeAt(0)),e.writeByte("Z".charCodeAt(0)),e.writeByte("h".charCodeAt(0)),e.writeByte("0".charCodeAt(0)+s);var o,a=_$Util_23.makeU8Buffer(n),h=0;do{var u=new _$CRC32_6;(o=readBlock(t,a,n,u))>0&&(h=((h<<1|h>>>31)^u.getCRC())>>>0,e.writeBits(48,54156738319193),e.writeBits(32,u.getCRC()),compressBlock(a,o,e))}while(o===n);return e.writeBits(48,25779555029136),e.writeBits(32,h),e.flush(),r.retval},Bzip2.decompressFile=Bunzip.decode,Bzip2.decompressBlock=Bunzip.decodeBlock,Bzip2.table=Bunzip.table,_$Bzip2_5=Bzip2;var _$Dmc_9={},Dmc=Object.create(null);Dmc.MAGIC="dmc!";var MarkovNode=function(t,e,i){this.out=[],this.model=i?i.clone():new _$MTFModel_17(t,e,65280,256),this.count=_$Util_23.makeU16Buffer(e),this.sum=0};MarkovNode.prototype.clone=function(t,e){var i,r=new MarkovNode(t,e,null);for(i=0;i<e;i++)r.out[i]=this.out[i];return r};var MarkovModel=function(t,e,i,r){var s,n;for(this.coder=t,this.size=e,this.MIN_CNT1=i||8,this.MIN_CNT2=r||128,this.nodes=[],s=0;s<e;s++)this.nodes[s]=new MarkovNode(t,e);for(s=0;s<e;s++)for(n=0;n<e;n++)this.nodes[s].out[n]=this.nodes[n];this.current=this.nodes[0]};MarkovModel.prototype.maybeSplit=function(t,e,i){var r,s=t.count[e],n=i.sum;if(s<=this.MIN_CNT1||n-s<=this.MIN_CNT2)return i;var o=i.clone(this.coder,this.size);for(this.nodes.push(o),t.out[e]=o,o.sum=i.sum=0,r=0;r<this.size;r++)o.count[r]=i.count[r]*s/n,o.sum+=o.count[r],i.count[r]-=o.count[r],i.sum+=i.count[r];return o},MarkovModel.prototype.encode=function(t){var e=this.current;e.model.encode(t);var i=e.out[t];65535!==e.count[t]&&(e.count[t]++,e.sum++),this.current=this.maybeSplit(e,t,i)},MarkovModel.prototype.decode=function(){var t=this.current,e=t.model.decode(),i=t.out[e];return 65535!==t.count[e]&&(t.count[e]++,t.sum++),this.current=this.maybeSplit(t,e,i),e},Dmc.compressFile=_$Util_23.compressFileHelper(Dmc.MAGIC,(function(t,e,i,r){var s=+(r=r||{}).m||8,n=+r.n||128;_$Util_23.writeUnsignedNumber(e,s),_$Util_23.writeUnsignedNumber(e,n);var o=new _$RangeCoder_20(e);o.encodeStart(202,0);for(var a=new MarkovModel(o,i<0?257:256,s,n),h=0;h!==i;){var u=t.readByte();if(u===_$Stream_22.EOF){a.encode(256);break}a.encode(u),h++}o.encodeFinish()})),Dmc.decompressFile=_$Util_23.decompressFileHelper(Dmc.MAGIC,(function(t,e,i){var r=_$Util_23.readUnsignedNumber(t),s=_$Util_23.readUnsignedNumber(t),n=new _$RangeCoder_20(t);n.decodeStart();for(var o=new MarkovModel(n,i<0?257:256,r,s),a=0;a!==i;){var h=o.decode();if(256===h)break;e.writeByte(h),a++}n.decodeFinish()})),_$Dmc_9=Dmc;var _$Lzjb_14={},Lzjb=Object.create(null);Lzjb.MAGIC="lzjb";var __EOF_14=_$Stream_22.EOF;Lzjb.compressFile=_$Util_23.compressFileHelper(Lzjb.MAGIC,(function(t,e,i,r){var s,n,o,a,h,u,l,c=1024,f=1;"number"==typeof r&&(c*=2,r=Math.max(1,Math.min(9,r))-1,f=1<<Math.floor(r/2),1&r&&(f=Math.round(1.5*f)),r>=2&&r<=4&&f++),u=_$Util_23.makeU16Buffer(c*f);for(var d=_$Util_23.makeU8Buffer(1024),m=0,p=function(t){return d[m++]=t,m>=d.length&&(m=0),t},_=_$Util_23.makeU8Buffer(17),g=0,b=function(){var t;for(t=0;t<g;t++)e.writeByte(_[t]);g=0},y=[],w=function(){return y.length?y.pop():t.readByte()},v=function(t){y.push(t)},M=128,S=[];;){var C=w();if(C===__EOF_14)break;256==(M<<=1)&&(b(),M=1,_[0]=0,g=1);var I=w();if(I===__EOF_14){_[g++]=p(C);break}var T=w();if(T!==__EOF_14){for(a=(C<<16)+(I<<8)+T,a^=a>>9,a+=a>>5,h=((a^=C)&c-1)*f,S.length=0,l=0;l<f;l++){o=m-u[h+l]&1023,s=d.length+m-o;var A=d[1023&s],k=d[s+1&1023],B=d[s+2&1023];0===o?A=1^C:1==o?(k=C,B=I):2==o&&(B=C),C===A&&I===k&&T===B&&S.push(o)}for(l=f-1;l>0;l--)u[h+l]=u[h+l-1];if(u[h]=m,0===S.length)_[g++]=p(C),v(T),v(I);else{_[0]|=M,p(C),p(I),p(T);var x=w(),E=S[0],$=d.length+m;for(n=3;n<66&&x!==__EOF_14;n++,$++){for(l=0;l<S.length;)x!==d[$-S[l]&1023]?(E=S[l],S.splice(l,1)):l++;if(0===S.length)break;p(x),x=w()}0!==S.length&&(E=S[0]),v(x),_[g++]=n-3<<2|E>>8,_[g++]=255&E}}else _[g++]=p(C),v(I)}b()})),Lzjb.decompressFile=_$Util_23.decompressFileHelper(Lzjb.MAGIC,(function(t,e,i){for(var r,s,n,o,a=_$Util_23.makeU8Buffer(1024),h=0,u=128;0!==i&&(o=t.readByte())!==__EOF_14;)if(256==(u<<=1)&&(u=1,s=o,o=t.readByte()),s&u)for(n=3+(o>>2),(r=h-(1023&(o<<8|t.readByte())))<0&&(r+=a.length),i>=0&&(i-=n);--n>=0;)o=a[h++]=a[r++],e.writeByte(o),h>=a.length&&(h=0),r>=a.length&&(r=0);else e.writeByte(o),a[h++]=o,h>=a.length&&(h=0),i>=0&&i--})),_$Lzjb_14=Lzjb;var _$LzjbR_15={},LzjbR=Object.create(null);LzjbR.MAGIC="lzjR",LzjbR.compressFile=_$Util_23.compressFileHelper(LzjbR.MAGIC,(function(t,e,i,r,s){var n,o,a,h,u,l,c,f=1024,d=1;"number"==typeof r&&(f*=2,r=Math.max(1,Math.min(9,r))-1,d=1<<Math.floor(r/2),1&r&&(d=Math.round(1.5*d)),r>=2&&r<=4&&d++);var m=new _$RangeCoder_20(e);m.encodeStart(s,1),l=_$Util_23.makeU16Buffer(f*d);for(var p=_$Util_23.makeU8Buffer(1024),_=0,g=function(t){return p[_++]=t,_>=p.length&&(_=0),t},b=[],y=function(){return b.length?b.pop():t.readByte()},w=function(t){b.push(t)},v=[],M=_$NoModel_18.factory(m),S=_$FenwickModel_10.factory(m,65280,256),C=new _$Context1Model_7(S,256,1+(i<0?257:256)),I=function(t){return t<=32?S(t):M(t)},T=new _$LogDistanceModel_13(64,0,S,I),A=new _$LogDistanceModel_13(1024,1,S,I),k=32,B=0;;){var x=_,E=y();if(E===_$Stream_22.EOF)break;var $=y();if($===_$Stream_22.EOF){C.encode(g(E),k);break}var D=y();if(D!==_$Stream_22.EOF){for(h=(E<<16)+($<<8)+D,h^=h>>9,h+=h>>5,u=((h^=E)&f-1)*d,v.length=0,c=0;c<d;c++){a=_-l[u+c]&1023,n=p.length+_-a;var L=p[1023&n],P=p[n+1&1023],R=p[n+2&1023];1==a?(P=E,R=$):2==a&&(R=E),E===L&&$===P&&D===R&&v.push(a)}for(c=d-1;c>0;c--)l[u+c]=l[u+c-1];if(l[u]=_,0===v.length)C.encode(g(E),k),w(D),w($),k=E;else{C.encode(256,k),g(E),g($),g(D),k=D;var O=y(),U=v[0],N=p.length+_;for(o=3;o<66&&O!==_$Stream_22.EOF;o++,N++){for(c=0;c<v.length;)O!==p[N-v[c]&1023]?(U=v[c],v.splice(c,1)):c++;if(0===v.length)break;g(O),k=O,O=y()}0!==v.length&&(U=v[0]),w(O),T.encode(o-3),(a=x-U&1023)===B?A.encode(-1):(A.encode(a),B=a)}}else C.encode(g(E),k),w($),k=E}i<0&&C.encode(257,k),m.encodeFinish()}),!0),LzjbR.decompressFile=_$Util_23.decompressFileHelper(LzjbR.MAGIC,(function(t,e,i){var r,s,n,o=_$Util_23.makeU8Buffer(1024),a=0,h=new _$RangeCoder_20(t);h.decodeStart(!0);for(var u=_$NoModel_18.factory(h),l=_$FenwickModel_10.factory(h,65280,256),c=new _$Context1Model_7(l,256,1+(i<0?257:256)),f=function(t){return t<=32?l(t):u(t)},d=new _$LogDistanceModel_13(64,0,l,f),m=new _$LogDistanceModel_13(1024,1,l,f),p=32,_=0;0!==i&&257!==(n=c.decode(p));)if(256===n)for(s=d.decode()+3,(r=m.decode())<0?r=_:_=r,i>=0&&(i-=s);--s>=0;)n=p=o[a++]=o[r++],e.writeByte(n),a>=o.length&&(a=0),r>=o.length&&(r=0);else e.writeByte(n),o[a++]=p=n,a>=o.length&&(a=0),i>=0&&i--;h.decodeFinish()})),_$LzjbR_15=LzjbR;var _$Lzp3_16={};const __FenwickModel_16=_$FenwickModel_10;var Lzp3=Object.create(null);Lzp3.MAGIC="lzp3";var Window=function(t){this.buffer=_$Util_23.makeU8Buffer(Math.min(t+4,1<<20)),this.pos=0,this.ctxt4=_$Util_23.makeU32Buffer(65536),this.ctxt3=_$Util_23.makeU32Buffer(4096),this.ctxt2=_$Util_23.makeU32Buffer(65536),this.put(99),this.put(83),this.put(97),this.put(32)};Window.prototype.put=function(t){return this.buffer[this.pos++]=t,this.pos>=1<<20&&(this.pos=0),t},Window.prototype.get=function(t){return this.buffer[1048575&t]},Window.prototype.context=function(t,e){var i,r=0;for(t=t-e&1048575,i=0;i<e;i++)r=r<<8|this.buffer[t++],t>=1<<20&&(t=0);return r},Window.prototype.getIndex=function(t,e){var i=this.context(t,4),r=65535&(i>>>15^i),s=4095&(i>>>11^i),n=65535&i,o=0;return 0===e&&(0!==(o=this.ctxt4[r])&&i!==this.context(o-1,4)&&(o=0),0===o&&(0!==(o=this.ctxt3[s])&&(16777215&i)!==this.context(o-1,3)&&(o=0),0===o&&0!==(o=this.ctxt2[n])&&(i&&65535)!==this.context(o-1,2)&&(o=0))),e&&e--,this.ctxt4[r]=this.ctxt3[s]=this.ctxt2[n]=1+(t|e<<20),o},Lzp3.compressFile=_$Util_23.compressFileHelper(Lzp3.MAGIC,(function(t,e,i,r){var s,n,o,a=new Window(i>=0?i:1<<20),h=new _$RangeCoder_20(e);h.encodeStart(0,0),s=__FenwickModel_16.factory(h,65280,256);var u=_$NoModel_18.factory(h);n=function(t){return t>256?u(t):s(t)},o=function(){h.encodeFinish()};var l,c=new _$Context1Model_7(s,256,i<0?257:256),f=[];for(l=0;l<16;l++)f[l]=new _$LogDistanceModel_13(1048576,1,s,n);for(var d,m=0,p=0;m!==i;){var _=t.readByte();d=a.pos;var g=a.getIndex(d,0);if(0!==g){for(var b=1+(--g>>>20),y=0;a.get(g+y)===_&&y<1048575;)y++,a.put(_),_=t.readByte();b===y?f[15&p].encode(-1):f[15&p].encode(y),a.getIndex(d,y),m+=y,p<<=1,y>0&&(p|=1)}var w=a.get(a.pos-1);if(_===_$Stream_22.EOF){i<0&&c.encode(256,w);break}c.encode(_,w),a.put(_),m++}o&&o()})),Lzp3.decompressFile=_$Util_23.decompressFileHelper(Lzp3.MAGIC,(function(t,e,i){var r,s,n,o=!!(128&t.readByte()),a=new Window(i>=0?i:1<<20);if(o){var h=new _$BitStream_4(t);r=_$Huffman_11.factory(h,65535),s=_$NoModel_18.factory(h)}else{var u=new _$RangeCoder_20(t);u.decodeStart(!0),r=__FenwickModel_16.factory(u,65280,256);var l=_$NoModel_18.factory(u);s=function(t){return t>256?l(t):r(t)},n=function(){u.decodeFinish()}}var c,f=new _$Context1Model_7(r,256,i<0?257:256),d=[];for(c=0;c<16;c++)d[c]=new _$LogDistanceModel_13(1048576,1,r,s);for(var m,p,_=0,g=0;_!==i;){m=a.pos;var b=a.getIndex(m,0);if(0!==b){var y=1+(--b>>>20),w=d[15&g].decode();for(w<0&&(w=y),c=0;c<w;c++)p=a.get(b+c),e.writeByte(a.put(p));a.getIndex(m,w),_+=w,g<<=1,w>0&&(g|=1)}if(_===i)break;var v=a.get(a.pos-1);if(256===(p=f.decode(v)))break;e.writeByte(a.put(p)),_++}n&&n()})),_$Lzp3_16=Lzp3;var _$PPM_19={},__Window_19=function(){this.buffer=_$Util_23.makeU8Buffer(1<<18),this.pos=0,this.firstPass=!0;for(var t=0;t<5;t++)this.put("cSaCsA".charCodeAt(t%6))};__Window_19.prototype.put=function(t){return this.buffer[this.pos++]=t,this.pos>=1<<18&&(this.pos=0,this.firstPass=!1),t},__Window_19.prototype.get=function(t){return this.buffer[262143&t]},__Window_19.prototype.context=function(t,e){var i,r=[];for(t=t-e&262143,i=0;i<e;i++)r.push(this.buffer[t++]),t>=1<<18&&(t=0);return String.fromCharCode.apply(String,r)};var PPM=function(t,e){this.window=new __Window_19,this.contexts=Object.create(null);var i=function(){};i.prototype.encode=function(i,r){var s,n=0;for(s=0;s<i;s++)r[s]||n++;var o=e-r.total;t.encodeFreq(1,n,o)},i.prototype.decode=function(i){var r,s,n,o=e-i.total;for(s=n=t.decodeCulFreq(o),r=0;r<=s;r++)i[r]&&s++;return t.decodeUpdate(1,n,o),s},this.cm1coder=new i;var r=function(){this.sym=[e],this.prob=[0,256],this.refcount=0};r.prototype._rescale=function(){var t,i,r=this.sym.length,s=0,n=!0;for(t=0,i=0;t<r;t++){var o=this.sym[t],a=this.prob[t+1]-this.prob[t];(a>>>=1)>0&&(o===e&&(n=!1),this.sym[i]=o,this.prob[i++]=s,s+=a)}return this.prob[i]=s,r=this.sym.length=i,this.prob.length=r+1,n&&r<e&&(s=this._update(e,r,0,1)),s},r.prototype.update=function(t,e){var i=0;for(i=0;i<this.sym.length;i++)if(this.sym[i]===t)return this._update(t,i,this.prob[i+1]-this.prob[i],e);return this._update(t,i,0,e)},r.prototype._update=function(t,i,r,s){var n,o,a,h=this.sym.length;for(o=i;o<h-1;o++)this.sym[o]=this.sym[o+1],this.prob[o]=this.prob[o+1]-r;if(i<h)this.sym[o]=t,this.prob[o]=this.prob[o+1]-r,this.prob[h]=a=this.prob[h]+s;else if(a=this.prob[h],this.sym[i]=t,this.prob[i]=a,a+=s,this.prob[++h]=a,this.sym.length>e)for(n=0;n<h;n++)e===this.sym[n]&&(this._update(e,n,this.prob[n+1]-this.prob[n],-1),this.sym.length--,this.prob.length--,a=this.prob[this.prob.length-1]);return a>=65280&&(a=this._rescale()),a},r.prototype.encode=function(i,r){var s,n,o,a,h,u,l=this.sym.length,c=0,f=0,d=0;for(s=l-1;s>=0;s--){if(a=this.prob[s],o=this.prob[s+1]-a,i===this.sym[s]){for(n=s-1;n>=0&&c<r.total;n--)r[this.sym[n]]&&(c+=1,f+=u=this.prob[n+1]-this.prob[n],d+=u);return h=this.prob[l],a-=f,h-=d,t.encodeFreq(o,a,h),i!==e||(this._update(i,s,o,128),!1)}r[this.sym[s]]&&(c+=1,d+=o)}for(this.encode(e,r),s=0;s<this.sym.length-1;s++)r[this.sym[s]]||(r[this.sym[s]]=!0,r.total++)},r.prototype.decode=function(i){var r,s,n=this.sym.length,o=this.prob[n],a=0,h=0,u=0;for(s=n-1;s>=0&&a<i.total;s--)i[this.sym[s]]&&(a+=1,u+=this.prob[s+1]-this.prob[s]);var l=t.decodeCulFreq(o-u)+u;for(h=u,s=n-1;s>=0;s--)if(i[this.sym[s]])h-=r=this.prob[s+1]-this.prob[s],l-=r;else if(this.prob[s]<=l)break;var c=this.sym[s],f=this.prob[s],d=this.prob[s+1]-f;if(t.decodeUpdate(d,f-h,o-u),c<e)return c;for(this._update(c,s,d,128),s=0;s<this.sym.length-1;s++)i[this.sym[s]]||(i[this.sym[s]]=!0,i.total++);return-1},this.newContext=function(t){return new r},this.newExclude=function(){var t=Object.create(null);return t.total=0,t},function(){var t,e;for(t=0;t<5;t++)for(e=0;e<=t;e++){var i=this.window.context(e+(4-t),e);this.contexts[i]||(this.contexts[i]=this.newContext()),this.contexts[i].refcount++}}.call(this)};PPM.prototype.update=function(t,e,i){var r,s,n;for(s=0;s<=5;s++)n=e.slice(5-s),(r=this.contexts[n])||(r=this.contexts[n]=this.newContext()),s>=i&&r.update(t,128),r.refcount++;e=this.window.context(this.window.pos+5,5);var o=this.window.firstPass;for(s=5;s>=0&&!o;s--)n=e.slice(0,s),--(r=this.contexts[n]).refcount<=0&&delete this.contexts[n];this.window.put(t)},PPM.prototype.decode=function(){var t,e,i,r,s=this.window.context(this.window.pos,5),n=this.newExclude();for(e=5;e>=0;e--)if(i=s.slice(5-e),(t=this.contexts[i])&&(r=t.decode(n))>=0)return this.update(r,s,e),r;return r=this.cm1coder.decode(n),this.update(r,s,e),r},PPM.prototype.encode=function(t){var e,i=this.window.context(this.window.pos,5),r=this.newExclude();for(e=5;e>=0;e--){var s=i.slice(5-e),n=this.contexts[s];if(n&&n.encode(t,r))return void this.update(t,i,e)}this.cm1coder.encode(t,r),this.update(t,i,e)},PPM.MAGIC="ppm2",PPM.compressFile=_$Util_23.compressFileHelper(PPM.MAGIC,(function(t,e,i,r,s){var n=new _$RangeCoder_20(e);n.encodeStart(s,1);var o=new PPM(n,i<0?257:256);_$Util_23.compressWithModel(t,i,o),n.encodeFinish()}),!0),PPM.decompressFile=_$Util_23.decompressFileHelper(PPM.MAGIC,(function(t,e,i){var r=new _$RangeCoder_20(t);r.decodeStart(!0);var s=new PPM(r,i<0?257:256);_$Util_23.decompressWithModel(e,i,s),r.decodeFinish()})),_$PPM_19=PPM;var _$Simple_21={},Simple=Object.create(null);Simple.MAGIC="smpl",Simple.compressFile=_$Util_23.compressFileHelper(Simple.MAGIC,(function(t,e,i,r,s){var n=new _$RangeCoder_20(e);n.encodeStart(s,1);for(var o=_$Util_23.makeU8Buffer(1<<17),a=[],h=0,u=!1,l=function(){var e=0;for(e=0;e<256;e++)a[e]=0;if(u)h=0;else{for(e=0;e<1<<17;){var i=t.readByte();if(i===_$Stream_22.EOF){u=!0;break}if(o[e++]=i,a[i]++,65535===a[i])break}h=e}};;){var c;if(l(),u&&0===h)break;for(n.encodeBit(!0),c=0;c<256;c++)n.encodeShort(a[c]);for(a[256]=h,c=256;c;c--)a[c-1]=a[c]-a[c-1];for(c=0;c<h;c++){var f=o[c];n.encodeFreq(a[f+1]-a[f],a[f],a[256])}}n.encodeBit(!1),n.encodeFinish()}),!0),Simple.decompressFile=_$Util_23.decompressFileHelper(Simple.MAGIC,(function(t,e,i){var r=new _$RangeCoder_20(t);for(r.decodeStart(!0);r.decodeBit();){var s,n=[];for(s=0;s<256;s++)n[s]=r.decodeShort();var o=0;for(s=0;s<256;s++){var a=n[s];n[s]=o,o+=a}for(n[256]=o,s=0;s<o;s++){var h,u=r.decodeCulFreq(o);for(h=0;h<256&&!(n[h]<=u&&u<n[h+1]);h++);r.decodeUpdate(n[h+1]-n[h],n[h],o),e.writeByte(h)}}r.decodeFinish()})),_$Simple_21=Simple;var _$main_25=_$freeze_24({version:"1.2.0",BitStream:_$BitStream_4,Stream:_$Stream_22,BWT:_$BWT_2,Context1Model:_$Context1Model_7,DefSumModel:_$DefSumModel_8,FenwickModel:_$FenwickModel_10,MTFModel:_$MTFModel_17,NoModel:_$NoModel_18,Huffman:_$Huffman_11,RangeCoder:_$RangeCoder_20,BWTC:_$BWTC_3,Bzip2:_$Bzip2_5,Dmc:_$Dmc_9,Lzjb:_$Lzjb_14,LzjbR:_$LzjbR_15,Lzp3:_$Lzp3_16,PPM:_$PPM_19,Simple:_$Simple_21}),_$bzlib_207={};const Buffer=_$buffer_75.Buffer,{Bzip2:__Bzip2_207}=_$main_25,BZIP_HEADER=Buffer.from("BZh1".split("").map(t=>t.charCodeAt(0)));_$bzlib_207.decompress=function(t,e,i,r,s){const n=Buffer.from(i.slice(s,r+s)),o=__Bzip2_207.decompressFile(Buffer.concat([BZIP_HEADER,n]));t.set(o)};var _$graphics_217=class{constructor(t){this.canvas=t,this.ctx=t.getContext("2d",{alpha:!1})}setColor(t){this.ctx.fillStyle=t.toCanvasStyle(),this.ctx.strokeStyle=t.toCanvasStyle()}fillRect(t,e,i,r){this.ctx.fillRect(t,e,i,r)}drawRect(t,e,i,r){this.ctx.strokeRect(t,e,i,r)}setFont(t){this.ctx.font=t.toCanvasFont()}drawString(t,e,i){this.ctx.fillText(t,e,i)}measureTextWidth(t){return this.ctx.measureText(t).width}drawImage(t,e,i){this.ctx.putImageData(t,e,i)}getImage(t,e){return this.ctx.getImageData(0,0,t,e)}},_$safeBuffer_177={},buffer=_$buffer_73({}),__Buffer_177=buffer.Buffer;function copyProps(t,e){for(var i in t)e[i]=t[i]}function SafeBuffer(t,e,i){return __Buffer_177(t,e,i)}__Buffer_177.from&&__Buffer_177.alloc&&__Buffer_177.allocUnsafe&&__Buffer_177.allocUnsafeSlow?_$safeBuffer_177=buffer:(copyProps(buffer,_$safeBuffer_177),_$safeBuffer_177.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(__Buffer_177.prototype),copyProps(__Buffer_177,SafeBuffer),SafeBuffer.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return __Buffer_177(t,e,i)},SafeBuffer.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=__Buffer_177(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return __Buffer_177(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(t)};var _$browser_163={};(function(t,e){(function(){"use strict";var i=_$safeBuffer_177.Buffer,r=e.crypto||e.msCrypto;_$browser_163=r&&r.getRandomValues?function(e,s){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(e>0)if(e>65536)for(var o=0;o<e;o+=65536)r.getRandomValues(n.slice(o,o+65536));else r.getRandomValues(n);return"function"==typeof s?t.nextTick((function(){s(null,n)})):n}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,_$browser_154,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$inherits_browser_130={};_$inherits_browser_130="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}};var _$events_113={},ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var NumberIsNaN=Number.isNaN||function(t){return t!=t};function EventEmitter(){EventEmitter.init.call(this)}_$events_113=EventEmitter,_$events_113.once=function(t,e){return new Promise((function(i,r){function s(i){t.removeListener(e,n),r(i)}function n(){"function"==typeof t.removeListener&&t.removeListener("error",s),i([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,n,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&eventTargetAgnosticAddListener(t,"error",e,{once:!0})}(t,s)}))},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function _getMaxListeners(t){return void 0===t._maxListeners?EventEmitter.defaultMaxListeners:t._maxListeners}function _addListener(t,e,i,r){var s,n,o,a;if(checkListener(i),void 0===(n=t._events)?(n=t._events=Object.create(null),t._eventsCount=0):(void 0!==n.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),o=n[e]),void 0===o)o=n[e]=i,++t._eventsCount;else if("function"==typeof o?o=n[e]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),(s=_getMaxListeners(t))>0&&o.length>s&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,a=h,console&&console.warn&&console.warn(a)}return t}function _onceWrap(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return s.listener=i,r.wrapFn=s,s}function _listeners(t,e,i){var r=t._events;if(void 0===r)return[];var s=r[e];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(s):arrayClone(s,s.length)}function listenerCount(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function arrayClone(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function eventTargetAgnosticAddListener(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function s(n){r.once&&t.removeEventListener(e,s),i(n)}))}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if("number"!=typeof t||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||NumberIsNaN(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var n;if(e.length>0&&(n=e[0]),n instanceof Error)throw n;var o=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw o.context=n,o}var a=s[t];if(void 0===a)return!1;if("function"==typeof a)ReflectApply(a,this,e);else{var h=a.length,u=arrayClone(a,h);for(i=0;i<h;++i)ReflectApply(u[i],this,e)}return!0},EventEmitter.prototype.addListener=function(t,e){return _addListener(this,t,e,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(t,e){return _addListener(this,t,e,!0)},EventEmitter.prototype.once=function(t,e){return checkListener(e),this.on(t,_onceWrap(this,t,e)),this},EventEmitter.prototype.prependOnceListener=function(t,e){return checkListener(e),this.prependListener(t,_onceWrap(this,t,e)),this},EventEmitter.prototype.removeListener=function(t,e){var i,r,s,n,o;if(checkListener(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){o=i[n].listener,s=n;break}if(s<0)return this;0===s?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,s),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var s,n=Object.keys(i);for(r=0;r<n.length;++r)"removeListener"!==(s=n[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},EventEmitter.prototype.listeners=function(t){return _listeners(this,t,!0)},EventEmitter.prototype.rawListeners=function(t){return _listeners(this,t,!1)},EventEmitter.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):listenerCount.call(t,e)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};var _$streamBrowser_201=_$events_113.EventEmitter;function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach((function(e){_defineProperty(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _toPropertyKey(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}var __Buffer_195=_$buffer_73({}).Buffer,inspect=_$empty_45({}).inspect,custom=inspect&&inspect.custom||"inspect",_$buffer_list_195=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return __Buffer_195.alloc(0);for(var e,i,r,s=__Buffer_195.allocUnsafe(t>>>0),n=this.head,o=0;n;)e=n.data,i=s,r=o,__Buffer_195.prototype.copy.call(e,i,r),o+=n.data.length,n=n.next;return s}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var s=e.data,n=t>s.length?s.length:t;if(n===s.length?r+=s:r+=s.slice(0,t),0==(t-=n)){n===s.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=s.slice(n));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=__Buffer_195.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var s=i.data,n=t>s.length?s.length:t;if(s.copy(e,e.length-t,0,n),0==(t-=n)){n===s.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(n));break}++r}return this.length-=r,e}},{key:custom,value:function(t,e){return inspect(this,_objectSpread(_objectSpread({},e),{},{depth:0,customInspect:!1}))}}])&&_defineProperties(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_$destroy_196={};(function(t){(function(){"use strict";function e(t,e){r(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}_$destroy_196={destroy:function(s,n){var o=this,a=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return a||h?(n?n(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(r,this,s)):t.nextTick(r,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,(function(r){!n&&r?o._writableState?o._writableState.errorEmitted?t.nextTick(i,o):(o._writableState.errorEmitted=!0,t.nextTick(e,o,r)):t.nextTick(e,o,r):n?(t.nextTick(i,o),n(r)):t.nextTick(i,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,_$browser_154);var _$errorsBrowser_188={},codes={};function createErrorType(t,e,i){i||(i=Error);var r=function(t){var i,r;function s(i,r,s){return t.call(this,function(t,i,r){return"string"==typeof e?e:e(t,i,r)}(i,r,s))||this}return r=t,(i=s).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,s}(i);r.prototype.name=i.name,r.prototype.code=t,codes[t]=r}function oneOf(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}createErrorType("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,s,n,o;if("string"==typeof e&&("not ","not "===e.substr(0,"not ".length))?(r="must not be",e=e.replace(/^not /,"")):r="must be",n=t,(void 0===o||o>n.length)&&(o=n.length)," argument"===n.substring(o-" argument".length,o))s="The ".concat(t," ").concat(r," ").concat(oneOf(e,"type"));else{var a=function(t,e,i){return"number"!=typeof i&&(i=0),!(i+".".length>t.length)&&-1!==t.indexOf(".",i)}(t)?"property":"argument";s='The "'.concat(t,'" ').concat(a," ").concat(r," ").concat(oneOf(e,"type"))}return s+". Received type ".concat(typeof i)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),_$errorsBrowser_188.codes=codes;var ERR_INVALID_OPT_VALUE=_$errorsBrowser_188.codes.ERR_INVALID_OPT_VALUE,_$state_200={getHighWaterMark:function(t,e,i,r){var s=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,r,i);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new ERR_INVALID_OPT_VALUE(r?i:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}},_$browser_205={};(function(t){(function(){function e(e){try{if(!t.localStorage)return!1}catch(r){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}_$browser_205=function(t,i){if(e("noDeprecation"))return t;var r=!1;return function(){if(!r){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),r=!0}return t.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$Transform_192=Transform,_require$codes=_$errorsBrowser_188.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=_$Duplex_189({});function afterTransform(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new ERR_MULTIPLE_CALLBACK);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function Transform(t){if(!(this instanceof Transform))return new Transform(t);Duplex.call(this,t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",prefinish)}function prefinish(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(e,i){done(t,e,i)}))}function done(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(t._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return t.push(null)}_$inherits_browser_130(Transform,Duplex),Transform.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,t,e)},Transform.prototype._transform=function(t,e,i){i(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},Transform.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},Transform.prototype._destroy=function(t,e){Duplex.prototype._destroy.call(this,t,(function(t){e(t)}))};var _$PassThrough_190=PassThrough,eos;function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);_$Transform_192.call(this,t)}_$inherits_browser_130(PassThrough,_$Transform_192),PassThrough.prototype._transform=function(t,e,i){i(null,t)};var ___require$codes_199=_$errorsBrowser_188.codes,ERR_MISSING_ARGS=___require$codes_199.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=___require$codes_199.ERR_STREAM_DESTROYED;function __noop_199(t){if(t)throw t}function call(t){t()}function pipe(t,e){return t.pipe(e)}var _$pipeline_199=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,s=function(t){return t.length?"function"!=typeof t[t.length-1]?__noop_199:t.pop():__noop_199}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ERR_MISSING_ARGS("streams");var n=e.map((function(t,i){var o=i<e.length-1;return function(t,e,i,r){r=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(r);var s=!1;t.on("close",(function(){s=!0})),void 0===eos&&(eos=_$eos_197({})),eos(t,{readable:e,writable:i},(function(t){if(t)return r(t);s=!0,r()}));var n=!1;return function(e){if(!s&&!n)return n=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void r(e||new ERR_STREAM_DESTROYED("pipe"))}}(t,o,i>0,(function(t){r||(r=t),t&&n.forEach(call),o||(n.forEach(call),s(r))}))}));return e.reduce(pipe)},_$Stream_187=__Stream_187,EE=_$events_113.EventEmitter;function __Stream_187(){EE.call(this)}_$inherits_browser_130(__Stream_187,EE),__Stream_187.Readable=_$_stream_readable_191({}),__Stream_187.Writable=_$_stream_writable_193({}),__Stream_187.Duplex=_$Duplex_189({}),__Stream_187.Transform=_$Transform_192,__Stream_187.PassThrough=_$PassThrough_190,__Stream_187.finished=_$eos_197({}),__Stream_187.pipeline=_$pipeline_199,__Stream_187.Stream=__Stream_187,__Stream_187.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",s),t._isStdio||e&&!1===e.end||(i.on("end",o),i.on("close",a));var n=!1;function o(){n||(n=!0,t.end())}function a(){n||(n=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(u(),0===EE.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",r),t.removeListener("drain",s),i.removeListener("end",o),i.removeListener("close",a),i.removeListener("error",h),t.removeListener("error",h),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return i.on("error",h),t.on("error",h),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t};var _$hashBase_115={},__Buffer_115=_$safeBuffer_177.Buffer,__Transform_115=_$Stream_187.Transform;function HashBase(t){__Transform_115.call(this),this._block=__Buffer_115.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}_$inherits_browser_130(HashBase,__Transform_115),HashBase.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(s){r=s}i(r)},HashBase.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(i){e=i}t(e)};var useUint8Array="undefined"!=typeof Uint8Array,useArrayBuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(__Buffer_115.prototype instanceof Uint8Array||__Buffer_115.TYPED_ARRAY_SUPPORT);HashBase.prototype.update=function(t,e){if(this._finalized)throw new Error("Digest already called");t=function(t,e){if(t instanceof __Buffer_115)return t;if("string"==typeof t)return __Buffer_115.from(t,e);if(useArrayBuffer&&ArrayBuffer.isView(t)){if(0===t.byteLength)return __Buffer_115.alloc(0);var i=__Buffer_115.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}if(useUint8Array&&t instanceof Uint8Array)return __Buffer_115.from(t);if(__Buffer_115.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return __Buffer_115.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,e);for(var i=this._block,r=0;this._blockOffset+t.length-r>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)i[s++]=t[r++];this._update(),this._blockOffset=0}for(;r<t.length;)i[this._blockOffset++]=t[r++];for(var n=0,o=8*t.length;o>0;++n)this._length[n]+=o,(o=this._length[n]/4294967296|0)>0&&(this._length[n]-=4294967296*o);return this},HashBase.prototype._update=function(){throw new Error("_update is not implemented")},HashBase.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")},_$hashBase_115=HashBase;var _$md5Js_135={},__Buffer_135=_$safeBuffer_177.Buffer,ARRAY16=new Array(16);function MD5(){_$hashBase_115.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function rotl(t,e){return t<<e|t>>>32-e}function fnF(t,e,i,r,s,n,o){return rotl(t+(e&i|~e&r)+s+n|0,o)+e|0}function fnG(t,e,i,r,s,n,o){return rotl(t+(e&r|i&~r)+s+n|0,o)+e|0}function fnH(t,e,i,r,s,n,o){return rotl(t+(e^i^r)+s+n|0,o)+e|0}function fnI(t,e,i,r,s,n,o){return rotl(t+(i^(e|~r))+s+n|0,o)+e|0}_$inherits_browser_130(MD5,_$hashBase_115),MD5.prototype._update=function(){for(var t=ARRAY16,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,s=this._c,n=this._d;i=fnF(i,r,s,n,t[0],3614090360,7),n=fnF(n,i,r,s,t[1],3905402710,12),s=fnF(s,n,i,r,t[2],606105819,17),r=fnF(r,s,n,i,t[3],3250441966,22),i=fnF(i,r,s,n,t[4],4118548399,7),n=fnF(n,i,r,s,t[5],1200080426,12),s=fnF(s,n,i,r,t[6],2821735955,17),r=fnF(r,s,n,i,t[7],4249261313,22),i=fnF(i,r,s,n,t[8],1770035416,7),n=fnF(n,i,r,s,t[9],2336552879,12),s=fnF(s,n,i,r,t[10],4294925233,17),r=fnF(r,s,n,i,t[11],2304563134,22),i=fnF(i,r,s,n,t[12],1804603682,7),n=fnF(n,i,r,s,t[13],4254626195,12),s=fnF(s,n,i,r,t[14],2792965006,17),i=fnG(i,r=fnF(r,s,n,i,t[15],1236535329,22),s,n,t[1],4129170786,5),n=fnG(n,i,r,s,t[6],3225465664,9),s=fnG(s,n,i,r,t[11],643717713,14),r=fnG(r,s,n,i,t[0],3921069994,20),i=fnG(i,r,s,n,t[5],3593408605,5),n=fnG(n,i,r,s,t[10],38016083,9),s=fnG(s,n,i,r,t[15],3634488961,14),r=fnG(r,s,n,i,t[4],3889429448,20),i=fnG(i,r,s,n,t[9],568446438,5),n=fnG(n,i,r,s,t[14],3275163606,9),s=fnG(s,n,i,r,t[3],4107603335,14),r=fnG(r,s,n,i,t[8],1163531501,20),i=fnG(i,r,s,n,t[13],2850285829,5),n=fnG(n,i,r,s,t[2],4243563512,9),s=fnG(s,n,i,r,t[7],1735328473,14),i=fnH(i,r=fnG(r,s,n,i,t[12],2368359562,20),s,n,t[5],4294588738,4),n=fnH(n,i,r,s,t[8],2272392833,11),s=fnH(s,n,i,r,t[11],1839030562,16),r=fnH(r,s,n,i,t[14],4259657740,23),i=fnH(i,r,s,n,t[1],2763975236,4),n=fnH(n,i,r,s,t[4],1272893353,11),s=fnH(s,n,i,r,t[7],4139469664,16),r=fnH(r,s,n,i,t[10],3200236656,23),i=fnH(i,r,s,n,t[13],681279174,4),n=fnH(n,i,r,s,t[0],3936430074,11),s=fnH(s,n,i,r,t[3],3572445317,16),r=fnH(r,s,n,i,t[6],76029189,23),i=fnH(i,r,s,n,t[9],3654602809,4),n=fnH(n,i,r,s,t[12],3873151461,11),s=fnH(s,n,i,r,t[15],530742520,16),i=fnI(i,r=fnH(r,s,n,i,t[2],3299628645,23),s,n,t[0],4096336452,6),n=fnI(n,i,r,s,t[7],1126891415,10),s=fnI(s,n,i,r,t[14],2878612391,15),r=fnI(r,s,n,i,t[5],4237533241,21),i=fnI(i,r,s,n,t[12],1700485571,6),n=fnI(n,i,r,s,t[3],2399980690,10),s=fnI(s,n,i,r,t[10],4293915773,15),r=fnI(r,s,n,i,t[1],2240044497,21),i=fnI(i,r,s,n,t[8],1873313359,6),n=fnI(n,i,r,s,t[15],4264355552,10),s=fnI(s,n,i,r,t[6],2734768916,15),r=fnI(r,s,n,i,t[13],1309151649,21),i=fnI(i,r,s,n,t[4],4149444226,6),n=fnI(n,i,r,s,t[11],3174756917,10),s=fnI(s,n,i,r,t[2],718787259,15),r=fnI(r,s,n,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+r|0,this._c=this._c+s|0,this._d=this._d+n|0},MD5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=__Buffer_135.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},_$md5Js_135=MD5;var _$ripemd160_176={},__Buffer_176=_$buffer_73({}).Buffer,__ARRAY16_176=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160(){_$hashBase_115.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function __rotl_176(t,e){return t<<e|t>>>32-e}function fn1(t,e,i,r,s,n,o,a){return __rotl_176(t+(e^i^r)+n+o|0,a)+s|0}function fn2(t,e,i,r,s,n,o,a){return __rotl_176(t+(e&i|~e&r)+n+o|0,a)+s|0}function fn3(t,e,i,r,s,n,o,a){return __rotl_176(t+((e|~i)^r)+n+o|0,a)+s|0}function fn4(t,e,i,r,s,n,o,a){return __rotl_176(t+(e&r|i&~r)+n+o|0,a)+s|0}function fn5(t,e,i,r,s,n,o,a){return __rotl_176(t+(e^(i|~r))+n+o|0,a)+s|0}_$inherits_browser_130(RIPEMD160,_$hashBase_115),RIPEMD160.prototype._update=function(){for(var t=__ARRAY16_176,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var i=0|this._a,r=0|this._b,s=0|this._c,n=0|this._d,o=0|this._e,a=0|this._a,h=0|this._b,u=0|this._c,l=0|this._d,c=0|this._e,f=0;f<80;f+=1){var d,m;f<16?(d=fn1(i,r,s,n,o,t[zl[f]],hl[0],sl[f]),m=fn5(a,h,u,l,c,t[zr[f]],hr[0],sr[f])):f<32?(d=fn2(i,r,s,n,o,t[zl[f]],hl[1],sl[f]),m=fn4(a,h,u,l,c,t[zr[f]],hr[1],sr[f])):f<48?(d=fn3(i,r,s,n,o,t[zl[f]],hl[2],sl[f]),m=fn3(a,h,u,l,c,t[zr[f]],hr[2],sr[f])):f<64?(d=fn4(i,r,s,n,o,t[zl[f]],hl[3],sl[f]),m=fn2(a,h,u,l,c,t[zr[f]],hr[3],sr[f])):(d=fn5(i,r,s,n,o,t[zl[f]],hl[4],sl[f]),m=fn1(a,h,u,l,c,t[zr[f]],hr[4],sr[f])),i=o,o=n,n=__rotl_176(s,10),s=r,r=d,a=c,c=l,l=__rotl_176(u,10),u=h,h=m}var p=this._b+s+l|0;this._b=this._c+n+c|0,this._c=this._d+o+a|0,this._d=this._e+i+h|0,this._e=this._a+r+u|0,this._a=p},RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=__Buffer_176.alloc?__Buffer_176.alloc(20):new __Buffer_176(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},_$ripemd160_176=RIPEMD160;var _$hash_178={},__Buffer_178=_$safeBuffer_177.Buffer;function Hash(t,e){this._block=__Buffer_178.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Hash.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=__Buffer_178.from(t,e));for(var i=this._block,r=this._blockSize,s=t.length,n=this._len,o=0;o<s;){for(var a=n%r,h=Math.min(s-o,r-a),u=0;u<h;u++)i[a+u]=t[o+u];o+=h,(n+=h)%r==0&&this._update(i)}return this._len+=s,this},Hash.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var r=(4294967295&i)>>>0,s=(i-r)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var n=this._hash();return t?n.toString(t):n},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},_$hash_178=Hash;var _$sha_180={},__Buffer_180=_$safeBuffer_177.Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha(){this.init(),this._w=W,_$hash_178.call(this,64,56)}function rotl30(t){return t<<30|t>>>2}function ft(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}_$inherits_browser_130(Sha,_$hash_178),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0;h<16;++h)i[h]=t.readInt32BE(4*h);for(;h<80;++h)i[h]=i[h-3]^i[h-8]^i[h-14]^i[h-16];for(var u=0;u<80;++u){var l=~~(u/20),c=0|((e=r)<<5|e>>>27)+ft(l,s,n,o)+a+i[u]+K[l];a=o,o=n,n=rotl30(s),s=r,r=c}this._a=r+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},Sha.prototype._hash=function(){var t=__Buffer_180.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},_$sha_180=Sha;var _$sha1_181={},__Buffer_181=_$safeBuffer_177.Buffer,__K_181=[1518500249,1859775393,-1894007588,-899497514],__W_181=new Array(80);function Sha1(){this.init(),this._w=__W_181,_$hash_178.call(this,64,56)}function rotl5(t){return t<<5|t>>>27}function __rotl30_181(t){return t<<30|t>>>2}function __ft_181(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}_$inherits_browser_130(Sha1,_$hash_178),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0;h<16;++h)i[h]=t.readInt32BE(4*h);for(;h<80;++h)i[h]=(e=i[h-3]^i[h-8]^i[h-14]^i[h-16])<<1|e>>>31;for(var u=0;u<80;++u){var l=~~(u/20),c=rotl5(r)+__ft_181(l,s,n,o)+a+i[u]+__K_181[l]|0;a=o,o=n,n=__rotl30_181(s),s=r,r=c}this._a=r+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},Sha1.prototype._hash=function(){var t=__Buffer_181.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},_$sha1_181=Sha1;var _$sha256_183={},__Buffer_183=_$safeBuffer_177.Buffer,__K_183=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],__W_183=new Array(64);function Sha256(){this.init(),this._w=__W_183,_$hash_178.call(this,64,56)}function ch(t,e,i){return i^t&(e^i)}function maj(t,e,i){return t&e|i&(t|e)}function sigma0(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}_$inherits_browser_130(Sha256,_$hash_178),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0|this._f,u=0|this._g,l=0|this._h,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<64;++c)i[c]=0|(((e=i[c-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+i[c-7]+gamma0(i[c-15])+i[c-16];for(var f=0;f<64;++f){var d=l+sigma1(a)+ch(a,h,u)+__K_183[f]+i[f]|0,m=sigma0(r)+maj(r,s,n)|0;l=u,u=h,h=a,a=o+d|0,o=n,n=s,s=r,r=d+m|0}this._a=r+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=h+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0},Sha256.prototype._hash=function(){var t=__Buffer_183.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},_$sha256_183=Sha256;var _$sha224_182={},__Buffer_182=_$safeBuffer_177.Buffer,__W_182=new Array(64);function Sha224(){this.init(),this._w=__W_182,_$hash_178.call(this,64,56)}_$inherits_browser_130(Sha224,_$sha256_183),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var t=__Buffer_182.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},_$sha224_182=Sha224;var _$sha512_185={},__Buffer_185=_$safeBuffer_177.Buffer,__K_185=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],__W_185=new Array(160);function Sha512(){this.init(),this._w=__W_185,_$hash_178.call(this,128,112)}function Ch(t,e,i){return i^t&(e^i)}function __maj_185(t,e,i){return t&e|i&(t|e)}function __sigma0_185(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function __sigma1_185(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Gamma0(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Gamma0l(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Gamma1(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Gamma1l(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function getCarry(t,e){return t>>>0<e>>>0?1:0}_$inherits_browser_130(Sha512,_$hash_178),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(t){for(var e=this._w,i=0|this._ah,r=0|this._bh,s=0|this._ch,n=0|this._dh,o=0|this._eh,a=0|this._fh,h=0|this._gh,u=0|this._hh,l=0|this._al,c=0|this._bl,f=0|this._cl,d=0|this._dl,m=0|this._el,p=0|this._fl,_=0|this._gl,g=0|this._hl,b=0;b<32;b+=2)e[b]=t.readInt32BE(4*b),e[b+1]=t.readInt32BE(4*b+4);for(;b<160;b+=2){var y=e[b-30],w=e[b-30+1],v=Gamma0(y,w),M=Gamma0l(w,y),S=Gamma1(y=e[b-4],w=e[b-4+1]),C=Gamma1l(w,y),I=e[b-14],T=e[b-14+1],A=e[b-32],k=e[b-32+1],B=M+T|0,x=v+I+getCarry(B,M)|0;x=(x=x+S+getCarry(B=B+C|0,C)|0)+A+getCarry(B=B+k|0,k)|0,e[b]=x,e[b+1]=B}for(var E=0;E<160;E+=2){x=e[E],B=e[E+1];var $=__maj_185(i,r,s),D=__maj_185(l,c,f),L=__sigma0_185(i,l),P=__sigma0_185(l,i),R=__sigma1_185(o,m),O=__sigma1_185(m,o),U=__K_185[E],N=__K_185[E+1],j=Ch(o,a,h),Y=Ch(m,p,_),X=g+O|0,F=u+R+getCarry(X,g)|0;F=(F=(F=F+j+getCarry(X=X+Y|0,Y)|0)+U+getCarry(X=X+N|0,N)|0)+x+getCarry(X=X+B|0,B)|0;var H=P+D|0,W=L+$+getCarry(H,P)|0;u=h,g=_,h=a,_=p,a=o,p=m,o=n+F+getCarry(m=d+X|0,d)|0,n=s,d=f,s=r,f=c,r=i,c=l,i=F+W+getCarry(l=X+H|0,X)|0}this._al=this._al+l|0,this._bl=this._bl+c|0,this._cl=this._cl+f|0,this._dl=this._dl+d|0,this._el=this._el+m|0,this._fl=this._fl+p|0,this._gl=this._gl+_|0,this._hl=this._hl+g|0,this._ah=this._ah+i+getCarry(this._al,l)|0,this._bh=this._bh+r+getCarry(this._bl,c)|0,this._ch=this._ch+s+getCarry(this._cl,f)|0,this._dh=this._dh+n+getCarry(this._dl,d)|0,this._eh=this._eh+o+getCarry(this._el,m)|0,this._fh=this._fh+a+getCarry(this._fl,p)|0,this._gh=this._gh+h+getCarry(this._gl,_)|0,this._hh=this._hh+u+getCarry(this._hl,g)|0},Sha512.prototype._hash=function(){var t=__Buffer_185.allocUnsafe(64);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},_$sha512_185=Sha512;var _$sha384_184={},__Buffer_184=_$safeBuffer_177.Buffer,__W_184=new Array(160);function Sha384(){this.init(),this._w=__W_184,_$hash_178.call(this,128,112)}_$inherits_browser_130(Sha384,_$sha512_185),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){var t=__Buffer_184.allocUnsafe(48);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},_$sha384_184=Sha384;var _$shaJs_179={},exports=_$shaJs_179=function(t){t=t.toLowerCase();var e=exports[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};exports.sha=_$sha_180,exports.sha1=_$sha1_181,exports.sha224=_$sha224_182,exports.sha256=_$sha256_183,exports.sha384=_$sha384_184,exports.sha512=_$sha512_185;var _$cipherBase_76={},__Buffer_76=_$safeBuffer_177.Buffer,__Transform_76=_$Stream_187.Transform,__StringDecoder_76=_$string_decoder_202({}).StringDecoder;function CipherBase(t){__Transform_76.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}_$inherits_browser_130(CipherBase,__Transform_76);var __useUint8Array_76="undefined"!=typeof Uint8Array,__useArrayBuffer_76="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(__Buffer_76.prototype instanceof Uint8Array||__Buffer_76.TYPED_ARRAY_SUPPORT);CipherBase.prototype.update=function(t,e,i){var r=function(t,e){if(t instanceof __Buffer_76)return t;if("string"==typeof t)return __Buffer_76.from(t,e);if(__useArrayBuffer_76&&ArrayBuffer.isView(t)){if(0===t.byteLength)return __Buffer_76.alloc(0);var i=__Buffer_76.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}if(__useUint8Array_76&&t instanceof Uint8Array)return __Buffer_76.from(t);if(__Buffer_76.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return __Buffer_76.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,e),s=this._update(r);return this.hashMode?this:(i&&(s=this._toString(s,i)),s)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase.prototype._transform=function(t,i,r){var s;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(e){s=e}finally{r(s)}},CipherBase.prototype._flush=function(t){var i;try{this.push(this.__final())}catch(e){i=e}t(i)},CipherBase.prototype._finalOrDigest=function(t){var e=this.__final()||__Buffer_76.alloc(0);return t&&(e=this._toString(e,t,!0)),e},CipherBase.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new __StringDecoder_76(e),this._encoding=e),this._encoding!==e)throw new Error("can\u2019t switch encodings");var r=this._decoder.write(t);return i&&(r+=this._decoder.end()),r},_$cipherBase_76=CipherBase;var _$browser_80={};function __Hash_80(t){_$cipherBase_76.call(this,"digest"),this._hash=t}_$inherits_browser_130(__Hash_80,_$cipherBase_76),__Hash_80.prototype._update=function(t){this._hash.update(t)},__Hash_80.prototype._final=function(){return this._hash.digest()},_$browser_80=function(t){return"md5"===(t=t.toLowerCase())?new _$md5Js_135:"rmd160"===t||"ripemd160"===t?new _$ripemd160_176:new __Hash_80(_$shaJs_179(t))};var _$legacy_83={},__Buffer_83=_$safeBuffer_177.Buffer,ZEROS=__Buffer_83.alloc(128),blocksize=64;function Hmac(t,e){_$cipherBase_76.call(this,"digest"),"string"==typeof e&&(e=__Buffer_83.from(e)),this._alg=t,this._key=e,e.length>blocksize?e=t(e):e.length<blocksize&&(e=__Buffer_83.concat([e,ZEROS],blocksize));for(var i=this._ipad=__Buffer_83.allocUnsafe(blocksize),r=this._opad=__Buffer_83.allocUnsafe(blocksize),s=0;s<blocksize;s++)i[s]=54^e[s],r[s]=92^e[s];this._hash=[i]}_$inherits_browser_130(Hmac,_$cipherBase_76),Hmac.prototype._update=function(t){this._hash.push(t)},Hmac.prototype._final=function(){var t=this._alg(__Buffer_83.concat(this._hash));return this._alg(__Buffer_83.concat([this._opad,t]))},_$legacy_83=Hmac;var _$md5_81=function(t){return(new _$md5Js_135).update(t).digest()},_$browser_82={},__Buffer_82=_$safeBuffer_177.Buffer,__ZEROS_82=__Buffer_82.alloc(128);function __Hmac_82(t,e){_$cipherBase_76.call(this,"digest"),"string"==typeof e&&(e=__Buffer_82.from(e));var i="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>i?e=("rmd160"===t?new _$ripemd160_176:_$shaJs_179(t)).update(e).digest():e.length<i&&(e=__Buffer_82.concat([e,__ZEROS_82],i));for(var r=this._ipad=__Buffer_82.allocUnsafe(i),s=this._opad=__Buffer_82.allocUnsafe(i),n=0;n<i;n++)r[n]=54^e[n],s[n]=92^e[n];this._hash="rmd160"===t?new _$ripemd160_176:_$shaJs_179(t),this._hash.update(r)}_$inherits_browser_130(__Hmac_82,_$cipherBase_76),__Hmac_82.prototype._update=function(t){this._hash.update(t)},__Hmac_82.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new _$ripemd160_176:_$shaJs_179(this._alg)).update(this._opad).update(t).digest()},_$browser_82=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new __Hmac_82("rmd160",e):"md5"===t?new _$legacy_83(_$md5_81,e):new __Hmac_82(t,e)};var _$algorithms_68={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},_$algos_67=_$algorithms_68,MAX_ALLOC=Math.pow(2,30)-1,_$precondition_149=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>MAX_ALLOC||e!=e)throw new TypeError("Bad key length")},_$defaultEncoding_148={};(function(t,e){(function(){var i;i=e.process&&e.process.browser?"utf-8":e.process&&e.process.version?parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",_$defaultEncoding_148=i}).call(this)}).call(this,_$browser_154,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var __Buffer_151=_$safeBuffer_177.Buffer,_$toBuffer_151=function(t,e,i){if(__Buffer_151.isBuffer(t))return t;if("string"==typeof t)return __Buffer_151.from(t,e);if(ArrayBuffer.isView(t))return __Buffer_151.from(t.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")},_$syncBrowser_150={},__Buffer_150=_$safeBuffer_177.Buffer,__ZEROS_150=__Buffer_150.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function __Hmac_150(t,e,i){var r=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new _$ripemd160_176).update(t).digest()}:"md5"===t?_$md5_81:function(e){return _$shaJs_179(t).update(e).digest()}}(t),s="sha512"===t||"sha384"===t?128:64;e.length>s?e=r(e):e.length<s&&(e=__Buffer_150.concat([e,__ZEROS_150],s));for(var n=__Buffer_150.allocUnsafe(s+sizes[t]),o=__Buffer_150.allocUnsafe(s+sizes[t]),a=0;a<s;a++)n[a]=54^e[a],o[a]=92^e[a];var h=__Buffer_150.allocUnsafe(s+i+4);n.copy(h,0,0,s),this.ipad1=h,this.ipad2=n,this.opad=o,this.alg=t,this.blocksize=s,this.hash=r,this.size=sizes[t]}__Hmac_150.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},_$syncBrowser_150=function(t,e,i,r,s){_$precondition_149(i,r);var n=new __Hmac_150(s=s||"sha1",t=_$toBuffer_151(t,_$defaultEncoding_148,"Password"),(e=_$toBuffer_151(e,_$defaultEncoding_148,"Salt")).length),o=__Buffer_150.allocUnsafe(r),a=__Buffer_150.allocUnsafe(e.length+4);e.copy(a,0,0,e.length);for(var h=0,u=sizes[s],l=Math.ceil(r/u),c=1;c<=l;c++){a.writeUInt32BE(c,e.length);for(var f=n.run(a,n.ipad1),d=f,m=1;m<i;m++){d=n.run(d,n.ipad2);for(var p=0;p<u;p++)f[p]^=d[p]}f.copy(o,h),h+=u}return o};var _$async_147={};(function(t){(function(){var i,r,s=_$safeBuffer_177.Buffer,n=t.crypto&&t.crypto.subtle,o={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},a=[];function h(){return r||(r=t.process&&t.process.nextTick?t.process.nextTick:t.queueMicrotask?t.queueMicrotask:t.setImmediate?t.setImmediate:t.setTimeout)}function u(t,e,i,r,o){return n.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return n.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:o}},t,r<<3)})).then((function(t){return s.from(t)}))}_$async_147=function(r,l,c,f,d,m){"function"==typeof d&&(m=d,d=void 0);var p=o[(d=d||"sha1").toLowerCase()];if(p&&"function"==typeof t.Promise){if(_$precondition_149(c,f),r=_$toBuffer_151(r,_$defaultEncoding_148,"Password"),l=_$toBuffer_151(l,_$defaultEncoding_148,"Salt"),"function"!=typeof m)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){h()((function(){e(null,t)}))}),(function(t){h()((function(){e(t)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!n||!n.importKey||!n.deriveBits)return Promise.resolve(!1);if(void 0!==a[e])return a[e];var r=u(i=i||s.alloc(8),i,10,128,e).then((function(){return!0})).catch((function(){return!1}));return a[e]=r,r}(p).then((function(t){return t?u(r,l,c,f,p):_$syncBrowser_150(r,l,c,f,d)})),m)}else h()((function(){var t;try{t=_$syncBrowser_150(r,l,c,f,d)}catch(e){return m(e)}m(null,t)}))}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$browser_146={};_$browser_146.pbkdf2Sync=_$syncBrowser_150;var _$utils_90={readUInt32BE:function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},writeUInt32BE:function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},ip:function(t,e,i,r){for(var s=0,n=0,o=6;o>=0;o-=2){for(var a=0;a<=24;a+=8)s<<=1,s|=e>>>a+o&1;for(a=0;a<=24;a+=8)s<<=1,s|=t>>>a+o&1}for(o=6;o>=0;o-=2){for(a=1;a<=25;a+=8)n<<=1,n|=e>>>a+o&1;for(a=1;a<=25;a+=8)n<<=1,n|=t>>>a+o&1}i[r+0]=s>>>0,i[r+1]=n>>>0},rip:function(t,e,i,r){for(var s=0,n=0,o=0;o<4;o++)for(var a=24;a>=0;a-=8)s<<=1,s|=e>>>a+o&1,s<<=1,s|=t>>>a+o&1;for(o=4;o<8;o++)for(a=24;a>=0;a-=8)n<<=1,n|=e>>>a+o&1,n<<=1,n|=t>>>a+o&1;i[r+0]=s>>>0,i[r+1]=n>>>0},pc1:function(t,e,i,r){for(var s=0,n=0,o=7;o>=5;o--){for(var a=0;a<=24;a+=8)s<<=1,s|=e>>a+o&1;for(a=0;a<=24;a+=8)s<<=1,s|=t>>a+o&1}for(a=0;a<=24;a+=8)s<<=1,s|=e>>a+o&1;for(o=1;o<=3;o++){for(a=0;a<=24;a+=8)n<<=1,n|=e>>a+o&1;for(a=0;a<=24;a+=8)n<<=1,n|=t>>a+o&1}for(a=0;a<=24;a+=8)n<<=1,n|=t>>a+o&1;i[r+0]=s>>>0,i[r+1]=n>>>0},r28shl:function(t,e){return t<<e&268435455|t>>>28-e}},pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];_$utils_90.pc2=function(t,e,i,r){for(var s=0,n=0,o=pc2table.length>>>1,a=0;a<o;a++)s<<=1,s|=t>>>pc2table[a]&1;for(a=o;a<pc2table.length;a++)n<<=1,n|=e>>>pc2table[a]&1;i[r+0]=s>>>0,i[r+1]=n>>>0},_$utils_90.expand=function(t,e,i){var r=0,s=0;r=(1&t)<<5|t>>>27;for(var n=23;n>=15;n-=4)r<<=6,r|=t>>>n&63;for(n=11;n>=3;n-=4)s|=t>>>n&63,s<<=6;s|=(31&t)<<1|t>>>31,e[i+0]=r>>>0,e[i+1]=s>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];_$utils_90.substitute=function(t,e){for(var i=0,r=0;r<4;r++)i<<=4,i|=sTable[64*r+(t>>>18-6*r&63)];for(r=0;r<4;r++)i<<=4,i|=sTable[256+64*r+(e>>>18-6*r&63)];return i>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];_$utils_90.permute=function(t){for(var e=0,i=0;i<permuteTable.length;i++)e<<=1,e|=t>>>permuteTable[i]&1;return e>>>0},_$utils_90.padSplit=function(t,e,i){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var s=[],n=0;n<e;n+=i)s.push(r.slice(n,n+i));return s.join(" ")};var _$minimalisticAssert_138={};function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}_$minimalisticAssert_138=assert,assert.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)};var _$cipher_87={};function Cipher(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==t.padding}_$cipher_87=Cipher,Cipher.prototype._init=function(){},Cipher.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},Cipher.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<i;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=i,i},Cipher.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},Cipher.prototype._updateEncrypt=function(t){var e=0,i=0,r=(this.bufferOff+t.length)/this.blockSize|0,s=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(s,i)));for(var n=t.length-(t.length-e)%this.blockSize;e<n;e+=this.blockSize)this._update(t,e,s,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return s},Cipher.prototype._updateDecrypt=function(t){for(var e=0,i=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,s=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),i+=this._flushBuffer(s,i);return e+=this._buffer(t,e),s},Cipher.prototype.final=function(t){var e,i;return t&&(e=this.update(t)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(i):i},Cipher.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},Cipher.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},Cipher.prototype._unpad=function(t){return t},Cipher.prototype._finalDecrypt=function(){var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)};var _$des_88={};function DESState(){this.tmp=new Array(2),this.keys=null}function DES(t){_$cipher_87.call(this,t);var e=new DESState;this._desState=e,this.deriveKeys(e,t.key)}_$inherits_browser_130(DES,_$cipher_87),_$des_88=DES,DES.create=function(t){return new DES(t)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function(t,e){t.keys=new Array(32);var i=_$utils_90.readUInt32BE(e,0),r=_$utils_90.readUInt32BE(e,4);_$utils_90.pc1(i,r,t.tmp,0),i=t.tmp[0],r=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var n=shiftTable[s>>>1];i=_$utils_90.r28shl(i,n),r=_$utils_90.r28shl(r,n),_$utils_90.pc2(i,r,t.keys,s)}},DES.prototype._update=function(t,e,i,r){var s=this._desState,n=_$utils_90.readUInt32BE(t,e),o=_$utils_90.readUInt32BE(t,e+4);_$utils_90.ip(n,o,s.tmp,0),n=s.tmp[0],o=s.tmp[1],"encrypt"===this.type?this._encrypt(s,n,o,s.tmp,0):this._decrypt(s,n,o,s.tmp,0),n=s.tmp[0],o=s.tmp[1],_$utils_90.writeUInt32BE(i,n,r),_$utils_90.writeUInt32BE(i,o,r+4)},DES.prototype._pad=function(t,e){if(!1===this.padding)return!1;for(var i=t.length-e,r=e;r<t.length;r++)t[r]=i;return!0},DES.prototype._unpad=function(t){if(!1===this.padding)return t;for(var e=t[t.length-1],i=t.length-e;i<t.length;i++);return t.slice(0,t.length-e)},DES.prototype._encrypt=function(t,e,i,r,s){for(var n=e,o=i,a=0;a<t.keys.length;a+=2){var h=t.keys[a],u=t.keys[a+1];_$utils_90.expand(o,t.tmp,0),h^=t.tmp[0],u^=t.tmp[1];var l=_$utils_90.substitute(h,u),c=o;o=(n^_$utils_90.permute(l))>>>0,n=c}_$utils_90.rip(o,n,r,s)},DES.prototype._decrypt=function(t,e,i,r,s){for(var n=i,o=e,a=t.keys.length-2;a>=0;a-=2){var h=t.keys[a],u=t.keys[a+1];_$utils_90.expand(n,t.tmp,0),h^=t.tmp[0],u^=t.tmp[1];var l=_$utils_90.substitute(h,u),c=n;n=(o^_$utils_90.permute(l))>>>0,o=c}_$utils_90.rip(n,o,r,s)};var _$cbc_86={},proto={};function CBCState(t){this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}_$cbc_86.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}_$inherits_browser_130(e,t);for(var i=Object.keys(proto),r=0;r<i.length;r++){var s=i[r];e.prototype[s]=proto[s]}return e.create=function(t){return new e(t)},e},proto._cbcInit=function(){var t=new CBCState(this.options.iv);this._cbcState=t},proto._update=function(t,e,i,r){var s=this._cbcState,n=this.constructor.super_.prototype,o=s.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)o[a]^=t[e+a];for(n._update.call(this,o,0,i,r),a=0;a<this.blockSize;a++)o[a]=i[r+a]}else{for(n._update.call(this,t,e,i,r),a=0;a<this.blockSize;a++)i[r+a]^=o[a];for(a=0;a<this.blockSize;a++)o[a]=t[e+a]}};var _$ede_89={};function EDEState(t,e){var i=e.slice(0,8),r=e.slice(8,16),s=e.slice(16,24);this.ciphers="encrypt"===t?[_$des_88.create({type:"encrypt",key:i}),_$des_88.create({type:"decrypt",key:r}),_$des_88.create({type:"encrypt",key:s})]:[_$des_88.create({type:"decrypt",key:s}),_$des_88.create({type:"encrypt",key:r}),_$des_88.create({type:"decrypt",key:i})]}function EDE(t){_$cipher_87.call(this,t);var e=new EDEState(this.type,this.options.key);this._edeState=e}_$inherits_browser_130(EDE,_$cipher_87),_$ede_89=EDE,EDE.create=function(t){return new EDE(t)},EDE.prototype._update=function(t,e,i,r){var s=this._edeState;s.ciphers[0]._update(t,e,i,r),s.ciphers[1]._update(i,r,i,r),s.ciphers[2]._update(i,r,i,r)},EDE.prototype._pad=_$des_88.prototype._pad,EDE.prototype._unpad=_$des_88.prototype._unpad;var _$des_85={};_$des_85.DES=_$des_88,_$des_85.CBC=_$cbc_86,_$des_85.EDE=_$ede_89;var _$browserifyDes_64={},__Buffer_64=_$safeBuffer_177.Buffer,modes={"des-ede3-cbc":_$des_85.CBC.instantiate(_$des_85.EDE),"des-ede3":_$des_85.EDE,"des-ede-cbc":_$des_85.CBC.instantiate(_$des_85.EDE),"des-ede":_$des_85.EDE,"des-cbc":_$des_85.CBC.instantiate(_$des_85.DES),"des-ecb":_$des_85.DES};function __DES_64(t){_$cipherBase_76.call(this);var e,i=t.mode.toLowerCase(),r=modes[i];e=t.decrypt?"decrypt":"encrypt";var s=t.key;__Buffer_64.isBuffer(s)||(s=__Buffer_64.from(s)),"des-ede"!==i&&"des-ede-cbc"!==i||(s=__Buffer_64.concat([s,s.slice(0,8)]));var n=t.iv;__Buffer_64.isBuffer(n)||(n=__Buffer_64.from(n)),this._des=r.create({key:s,iv:n,type:e})}modes.des=modes["des-cbc"],modes.des3=modes["des-ede3-cbc"],_$browserifyDes_64=__DES_64,_$inherits_browser_130(__DES_64,_$cipherBase_76),__DES_64.prototype._update=function(t){return __Buffer_64.from(this._des.update(t))},__DES_64.prototype._final=function(){return __Buffer_64.from(this._des.final())};var _$ecb_58={encrypt:function(t,e){return t._cipher.encryptBlock(e)},decrypt:function(t,e){return t._cipher.decryptBlock(e)}},_$bufferXor_74={};(function(t){(function(){_$bufferXor_74=function(e,i){for(var r=Math.min(e.length,i.length),s=new t(r),n=0;n<r;++n)s[n]=e[n]^i[n];return s}}).call(this)}).call(this,_$buffer_73({}).Buffer);var _$cbc_53={encrypt:function(t,e){var i=_$bufferXor_74(e,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},decrypt:function(t,e){var i=t._prev;t._prev=e;var r=t._cipher.decryptBlock(e);return _$bufferXor_74(r,i)}},_$cfb_54={},__Buffer_54=_$safeBuffer_177.Buffer;function encryptStart(t,e,i){var r=e.length,s=_$bufferXor_74(e,t._cache);return t._cache=t._cache.slice(r),t._prev=__Buffer_54.concat([t._prev,i?e:s]),s}_$cfb_54.encrypt=function(t,e,i){for(var r,s=__Buffer_54.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=__Buffer_54.allocUnsafe(0)),!(t._cache.length<=e.length)){s=__Buffer_54.concat([s,encryptStart(t,e,i)]);break}r=t._cache.length,s=__Buffer_54.concat([s,encryptStart(t,e.slice(0,r),i)]),e=e.slice(r)}return s};var _$cfb8_56={},__Buffer_56=_$safeBuffer_177.Buffer;function encryptByte(t,e,i){var r=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=__Buffer_56.concat([t._prev.slice(1),__Buffer_56.from([i?e:r])]),r}_$cfb8_56.encrypt=function(t,e,i){for(var r=e.length,s=__Buffer_56.allocUnsafe(r),n=-1;++n<r;)s[n]=encryptByte(t,e[n],i);return s};var _$cfb1_55={},__Buffer_55=_$safeBuffer_177.Buffer;function __encryptByte_55(t,e,i){for(var r,s,n=-1,o=0;++n<8;)r=e&1<<7-n?128:0,o+=(128&(s=t._cipher.encryptBlock(t._prev)[0]^r))>>n%8,t._prev=shiftIn(t._prev,i?r:s);return o}function shiftIn(t,e){var i=t.length,r=-1,s=__Buffer_55.allocUnsafe(t.length);for(t=__Buffer_55.concat([t,__Buffer_55.from([e])]);++r<i;)s[r]=t[r]<<1|t[r+1]>>7;return s}_$cfb1_55.encrypt=function(t,e,i){for(var r=e.length,s=__Buffer_55.allocUnsafe(r),n=-1;++n<r;)s[n]=__encryptByte_55(t,e[n],i);return s};var _$ofb_61={};(function(t){(function(){function e(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}_$ofb_61.encrypt=function(i,r){for(;i._cache.length<r.length;)i._cache=t.concat([i._cache,e(i)]);var s=i._cache.slice(0,r.length);return i._cache=i._cache.slice(r.length),_$bufferXor_74(r,s)}}).call(this)}).call(this,_$buffer_73({}).Buffer);var _$incr32_52=function(t){for(var e,i=t.length;i--;){if(255!==(e=t.readUInt8(i))){e++,t.writeUInt8(e,i);break}t.writeUInt8(0,i)}},_$ctr_57={},__Buffer_57=_$safeBuffer_177.Buffer;function getBlock(t){var e=t._cipher.encryptBlockRaw(t._prev);return _$incr32_52(t._prev),e}_$ctr_57.encrypt=function(t,e){var i=Math.ceil(e.length/16),r=t._cache.length;t._cache=__Buffer_57.concat([t._cache,__Buffer_57.allocUnsafe(16*i)]);for(var s=0;s<i;s++){var n=getBlock(t),o=r+16*s;t._cache.writeUInt32BE(n[0],o+0),t._cache.writeUInt32BE(n[1],o+4),t._cache.writeUInt32BE(n[2],o+8),t._cache.writeUInt32BE(n[3],o+12)}var a=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),_$bufferXor_74(e,a)};var _$list_60={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},modeModules={ECB:_$ecb_58,CBC:_$cbc_53,CFB:_$cfb_54,CFB8:_$cfb8_56,CFB1:_$cfb1_55,OFB:_$ofb_61,CTR:_$ctr_57,GCM:_$ctr_57};for(var key in _$list_60)_$list_60[key].module=modeModules[_$list_60[key].mode];var _$modes_59=_$list_60,_$aes_46={},__Buffer_46=_$safeBuffer_177.Buffer;function asUInt32Array(t){__Buffer_46.isBuffer(t)||(t=__Buffer_46.from(t));for(var e=t.length/4|0,i=new Array(e),r=0;r<e;r++)i[r]=t.readUInt32BE(4*r);return i}function scrubVec(t){for(;0<t.length;t++)t[0]=0}function cryptBlock(t,e,i,r,s){for(var n,o,a,h,u=i[0],l=i[1],c=i[2],f=i[3],d=t[0]^e[0],m=t[1]^e[1],p=t[2]^e[2],_=t[3]^e[3],g=4,b=1;b<s;b++)n=u[d>>>24]^l[m>>>16&255]^c[p>>>8&255]^f[255&_]^e[g++],o=u[m>>>24]^l[p>>>16&255]^c[_>>>8&255]^f[255&d]^e[g++],a=u[p>>>24]^l[_>>>16&255]^c[d>>>8&255]^f[255&m]^e[g++],h=u[_>>>24]^l[d>>>16&255]^c[m>>>8&255]^f[255&p]^e[g++],d=n,m=o,p=a,_=h;return n=(r[d>>>24]<<24|r[m>>>16&255]<<16|r[p>>>8&255]<<8|r[255&_])^e[g++],o=(r[m>>>24]<<24|r[p>>>16&255]<<16|r[_>>>8&255]<<8|r[255&d])^e[g++],a=(r[p>>>24]<<24|r[_>>>16&255]<<16|r[d>>>8&255]<<8|r[255&m])^e[g++],h=(r[_>>>24]<<24|r[d>>>16&255]<<16|r[m>>>8&255]<<8|r[255&p])^e[g++],[n>>>=0,o>>>=0,a>>>=0,h>>>=0]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var i=[],r=[],s=[[],[],[],[]],n=[[],[],[],[]],o=0,a=0,h=0;h<256;++h){var u=a^a<<1^a<<2^a<<3^a<<4;u=u>>>8^255&u^99,i[o]=u,r[u]=o;var l=t[o],c=t[l],f=t[c],d=257*t[u]^16843008*u;s[0][o]=d<<24|d>>>8,s[1][o]=d<<16|d>>>16,s[2][o]=d<<8|d>>>24,s[3][o]=d,d=16843009*f^65537*c^257*l^16843008*o,n[0][u]=d<<24|d>>>8,n[1][u]=d<<16|d>>>16,n[2][u]=d<<8|d>>>24,n[3][u]=d,0===o?o=a=1:(o=l^t[t[t[f^l]]],a^=t[t[a]])}return{SBOX:i,INV_SBOX:r,SUB_MIX:s,INV_SUB_MIX:n}}();function AES(t){this._key=asUInt32Array(t),this._reset()}AES.blockSize=16,AES.keySize=32,AES.prototype.blockSize=AES.blockSize,AES.prototype.keySize=AES.keySize,AES.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,r=4*(i+1),s=[],n=0;n<e;n++)s[n]=t[n];for(n=e;n<r;n++){var o=s[n-1];n%e==0?(o=o<<8|o>>>24,o=G.SBOX[o>>>24]<<24|G.SBOX[o>>>16&255]<<16|G.SBOX[o>>>8&255]<<8|G.SBOX[255&o],o^=RCON[n/e|0]<<24):e>6&&n%e==4&&(o=G.SBOX[o>>>24]<<24|G.SBOX[o>>>16&255]<<16|G.SBOX[o>>>8&255]<<8|G.SBOX[255&o]),s[n]=s[n-e]^o}for(var a=[],h=0;h<r;h++){var u=r-h,l=s[u-(h%4?0:4)];a[h]=h<4||u<=4?l:G.INV_SUB_MIX[0][G.SBOX[l>>>24]]^G.INV_SUB_MIX[1][G.SBOX[l>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[l>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[255&l]]}this._nRounds=i,this._keySchedule=s,this._invKeySchedule=a},AES.prototype.encryptBlockRaw=function(t){return cryptBlock(t=asUInt32Array(t),this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)},AES.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=__Buffer_46.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},AES.prototype.decryptBlock=function(t){var e=(t=asUInt32Array(t))[1];t[1]=t[3],t[3]=e;var i=cryptBlock(t,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds),r=__Buffer_46.allocUnsafe(16);return r.writeUInt32BE(i[0],0),r.writeUInt32BE(i[3],4),r.writeUInt32BE(i[2],8),r.writeUInt32BE(i[1],12),r},AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)},_$aes_46.AES=AES;var _$ghash_51={},__Buffer_51=_$safeBuffer_177.Buffer,ZEROES=__Buffer_51.alloc(16,0);function fromArray(t){var e=__Buffer_51.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function GHASH(t){this.h=t,this.state=__Buffer_51.alloc(16,0),this.cache=__Buffer_51.allocUnsafe(0)}GHASH.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},GHASH.prototype._multiply=function(){for(var t,e,i,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],s=[0,0,0,0],n=-1;++n<128;){for(0!=(this.state[~~(n/8)]&1<<7-n%8)&&(s[0]^=r[0],s[1]^=r[1],s[2]^=r[2],s[3]^=r[3]),i=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,i&&(r[0]=r[0]^225<<24)}this.state=fromArray(s)},GHASH.prototype.update=function(t){var e;for(this.cache=__Buffer_51.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},GHASH.prototype.final=function(t,e){return this.cache.length&&this.ghash(__Buffer_51.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,t,0,e])),this.state},_$ghash_51=GHASH;var _$authCipher_47={},__Buffer_47=_$safeBuffer_177.Buffer;function StreamCipher(t,e,i,r){_$cipherBase_76.call(this);var s=__Buffer_47.alloc(4,0);this._cipher=new _$aes_46.AES(e);var n=this._cipher.encryptBlock(s);this._ghash=new _$ghash_51(n),i=function(t,e,i){if(12===e.length)return t._finID=__Buffer_47.concat([e,__Buffer_47.from([0,0,0,1])]),__Buffer_47.concat([e,__Buffer_47.from([0,0,0,2])]);var r=new _$ghash_51(i),s=e.length,n=s%16;r.update(e),n&&(n=16-n,r.update(__Buffer_47.alloc(n,0))),r.update(__Buffer_47.alloc(8,0));var o=8*s,a=__Buffer_47.alloc(8);a.writeUIntBE(o,0,8),r.update(a),t._finID=r.state;var h=__Buffer_47.from(t._finID);return _$incr32_52(h),h}(this,i,n),this._prev=__Buffer_47.from(i),this._cache=__Buffer_47.allocUnsafe(0),this._secCache=__Buffer_47.allocUnsafe(0),this._decrypt=r,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}_$inherits_browser_130(StreamCipher,_$cipherBase_76),StreamCipher.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=__Buffer_47.alloc(e,0),this._ghash.update(e))}this._called=!0;var i=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(i),this._len+=t.length,i},StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=_$bufferXor_74(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var i=0;t.length!==e.length&&i++;for(var r=Math.min(t.length,e.length),s=0;s<r;++s)i+=t[s]^e[s];return i}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},StreamCipher.prototype.getAuthTag=function(){if(this._decrypt||!__Buffer_47.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},StreamCipher.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},StreamCipher.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},_$authCipher_47=StreamCipher;var _$streamCipher_62={},__Buffer_62=_$safeBuffer_177.Buffer;function __StreamCipher_62(t,e,i,r){_$cipherBase_76.call(this),this._cipher=new _$aes_46.AES(e),this._prev=__Buffer_62.from(i),this._cache=__Buffer_62.allocUnsafe(0),this._secCache=__Buffer_62.allocUnsafe(0),this._decrypt=r,this._mode=t}_$inherits_browser_130(__StreamCipher_62,_$cipherBase_76),__StreamCipher_62.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},__StreamCipher_62.prototype._final=function(){this._cipher.scrub()},_$streamCipher_62=__StreamCipher_62;var __Buffer_114=_$safeBuffer_177.Buffer,_$evp_bytestokey_114=function(t,e,i,r){if(__Buffer_114.isBuffer(t)||(t=__Buffer_114.from(t,"binary")),e&&(__Buffer_114.isBuffer(e)||(e=__Buffer_114.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=i/8,n=__Buffer_114.alloc(s),o=__Buffer_114.alloc(r||0),a=__Buffer_114.alloc(0);s>0||r>0;){var h=new _$md5Js_135;h.update(a),h.update(t),e&&h.update(e),a=h.digest();var u=0;if(s>0){var l=n.length-s;u=Math.min(s,a.length),a.copy(n,l,0,u),s-=u}if(u<a.length&&r>0){var c=o.length-r,f=Math.min(r,a.length-u);a.copy(o,c,u,u+f),r-=f}}return a.fill(0),{key:n,iv:o}},_$encrypter_50={},__Buffer_50=_$safeBuffer_177.Buffer;function __Cipher_50(t,e,i){_$cipherBase_76.call(this),this._cache=new Splitter,this._cipher=new _$aes_46.AES(e),this._prev=__Buffer_50.from(i),this._mode=t,this._autopadding=!0}_$inherits_browser_130(__Cipher_50,_$cipherBase_76),__Cipher_50.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get();)i=this._mode.encrypt(this,e),r.push(i);return __Buffer_50.concat(r)};var PADDING=__Buffer_50.alloc(16,16);function Splitter(){this.cache=__Buffer_50.allocUnsafe(0)}function createCipheriv(t,e,i){var r=_$modes_59[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=__Buffer_50.from(e)),e.length!==r.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof i&&(i=__Buffer_50.from(i)),"GCM"!==r.mode&&i.length!==r.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===r.type?new _$streamCipher_62(r.module,e,i):"auth"===r.type?new _$authCipher_47(r.module,e,i):new __Cipher_50(r.module,e,i)}__Cipher_50.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")},__Cipher_50.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},Splitter.prototype.add=function(t){this.cache=__Buffer_50.concat([this.cache,t])},Splitter.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},Splitter.prototype.flush=function(){for(var t=16-this.cache.length,e=__Buffer_50.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return __Buffer_50.concat([this.cache,e])};var _$decrypter_49={},__Buffer_49=_$safeBuffer_177.Buffer;function Decipher(t,e,i){_$cipherBase_76.call(this),this._cache=new __Splitter_49,this._last=void 0,this._cipher=new _$aes_46.AES(e),this._prev=__Buffer_49.from(i),this._mode=t,this._autopadding=!0}function __Splitter_49(){this.cache=__Buffer_49.allocUnsafe(0)}function createDecipheriv(t,e,i){var r=_$modes_59[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=__Buffer_49.from(i)),"GCM"!==r.mode&&i.length!==r.iv)throw new TypeError("invalid iv length "+i.length);if("string"==typeof e&&(e=__Buffer_49.from(e)),e.length!==r.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===r.type?new _$streamCipher_62(r.module,e,i,!0):"auth"===r.type?new _$authCipher_47(r.module,e,i,!0):new Decipher(r.module,e,i)}_$inherits_browser_130(Decipher,_$cipherBase_76),Decipher.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,e),r.push(i);return __Buffer_49.concat(r)},Decipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var i=-1;++i<e;)if(t[i+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},Decipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},__Splitter_49.prototype.add=function(t){this.cache=__Buffer_49.concat([this.cache,t])},__Splitter_49.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},__Splitter_49.prototype.flush=function(){if(this.cache.length)return this.cache};var _$browser_48={};_$encrypter_50.createCipher,_$browser_48.createCipheriv=_$encrypter_50.createCipheriv,_$decrypter_49.createDecipher,_$browser_48.createDecipheriv=_$decrypter_49.createDecipheriv;var _$modes_65={"des-ecb":{key:8,iv:0}};_$modes_65["des-cbc"]=_$modes_65.des={key:8,iv:8},_$modes_65["des-ede3-cbc"]=_$modes_65.des3={key:24,iv:8},_$modes_65["des-ede3"]={key:24,iv:0},_$modes_65["des-ede-cbc"]={key:16,iv:8},_$modes_65["des-ede"]={key:16,iv:0};var _$browser_63={};function __createCipheriv_63(t,e,i){if(t=t.toLowerCase(),_$modes_59[t])return _$browser_48.createCipheriv(t,e,i);if(_$modes_65[t])return new _$browserifyDes_64({key:e,iv:i,mode:t});throw new TypeError("invalid suite type")}function __createDecipheriv_63(t,e,i){if(t=t.toLowerCase(),_$modes_59[t])return _$browser_48.createDecipheriv(t,e,i);if(_$modes_65[t])return new _$browserifyDes_64({key:e,iv:i,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}var _$bn_95={exports:{}};!function(t,i){"use strict";function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_$empty_45({}).Buffer}catch(e){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s*=r,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n,o=0;if("be"===i)for(r=t.length-1,s=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(r=0,s=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,o=n%r,a=Math.min(n,n-o)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(t,l,t.length,e),l=0;l<o;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],o=s*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var u=1;u<r;u++){for(var l=h>>>26,c=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var m=u-d|0;l+=(o=(s=0|t.words[m])*(n=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,h=0|l}return 0!==h?i.words[u]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|s)).toString(16);s=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),i=0!==s||n!==this.length-1?u[6-a.length]+a+i:a+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=l[t],f=c[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?m+i:u[h-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),s=i||Math.max(1,r);this.strip();var n,o,a="le"===e,h=new t(s),u=this.clone();if(a){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-r;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)n=(e=(0|i.words[o])-(0|r.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,s,n,o=t.words,a=e.words,h=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],m=8191&d,p=d>>>13,_=0|o[2],g=8191&_,b=_>>>13,y=0|o[3],w=8191&y,v=y>>>13,M=0|o[4],S=8191&M,C=M>>>13,I=0|o[5],T=8191&I,A=I>>>13,k=0|o[6],B=8191&k,x=k>>>13,E=0|o[7],$=8191&E,D=E>>>13,L=0|o[8],P=8191&L,R=L>>>13,O=0|o[9],U=8191&O,N=O>>>13,j=0|a[0],Y=8191&j,X=j>>>13,F=0|a[1],H=8191&F,W=F>>>13,G=0|a[2],z=8191&G,q=G>>>13,V=0|a[3],Z=8191&V,K=V>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,st=0|a[6],nt=8191&st,ot=st>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,dt=0|a[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var _t=(u+(r=Math.imul(c,Y))|0)+((8191&(s=(s=Math.imul(c,X))+Math.imul(f,Y)|0))<<13)|0;u=((n=Math.imul(f,X))+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(m,Y),s=(s=Math.imul(m,X))+Math.imul(p,Y)|0,n=Math.imul(p,X);var gt=(u+(r=r+Math.imul(c,H)|0)|0)+((8191&(s=(s=s+Math.imul(c,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((n=n+Math.imul(f,W)|0)+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,Y),s=(s=Math.imul(g,X))+Math.imul(b,Y)|0,n=Math.imul(b,X),r=r+Math.imul(m,H)|0,s=(s=s+Math.imul(m,W)|0)+Math.imul(p,H)|0,n=n+Math.imul(p,W)|0;var bt=(u+(r=r+Math.imul(c,z)|0)|0)+((8191&(s=(s=s+Math.imul(c,q)|0)+Math.imul(f,z)|0))<<13)|0;u=((n=n+Math.imul(f,q)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(w,Y),s=(s=Math.imul(w,X))+Math.imul(v,Y)|0,n=Math.imul(v,X),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,W)|0)+Math.imul(b,H)|0,n=n+Math.imul(b,W)|0,r=r+Math.imul(m,z)|0,s=(s=s+Math.imul(m,q)|0)+Math.imul(p,z)|0,n=n+Math.imul(p,q)|0;var yt=(u+(r=r+Math.imul(c,Z)|0)|0)+((8191&(s=(s=s+Math.imul(c,K)|0)+Math.imul(f,Z)|0))<<13)|0;u=((n=n+Math.imul(f,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,Y),s=(s=Math.imul(S,X))+Math.imul(C,Y)|0,n=Math.imul(C,X),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,r=r+Math.imul(g,z)|0,s=(s=s+Math.imul(g,q)|0)+Math.imul(b,z)|0,n=n+Math.imul(b,q)|0,r=r+Math.imul(m,Z)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,Z)|0,n=n+Math.imul(p,K)|0;var wt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(s=(s=s+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((n=n+Math.imul(f,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,Y),s=(s=Math.imul(T,X))+Math.imul(A,Y)|0,n=Math.imul(A,X),r=r+Math.imul(S,H)|0,s=(s=s+Math.imul(S,W)|0)+Math.imul(C,H)|0,n=n+Math.imul(C,W)|0,r=r+Math.imul(w,z)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(v,z)|0,n=n+Math.imul(v,q)|0,r=r+Math.imul(g,Z)|0,s=(s=s+Math.imul(g,K)|0)+Math.imul(b,Z)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(m,Q)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Q)|0,n=n+Math.imul(p,tt)|0;var vt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(s=(s=s+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((n=n+Math.imul(f,rt)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,Y),s=(s=Math.imul(B,X))+Math.imul(x,Y)|0,n=Math.imul(x,X),r=r+Math.imul(T,H)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,W)|0,r=r+Math.imul(S,z)|0,s=(s=s+Math.imul(S,q)|0)+Math.imul(C,z)|0,n=n+Math.imul(C,q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,K)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,tt)|0)+Math.imul(b,Q)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var Mt=(u+(r=r+Math.imul(c,nt)|0)|0)+((8191&(s=(s=s+Math.imul(c,ot)|0)+Math.imul(f,nt)|0))<<13)|0;u=((n=n+Math.imul(f,ot)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul($,Y),s=(s=Math.imul($,X))+Math.imul(D,Y)|0,n=Math.imul(D,X),r=r+Math.imul(B,H)|0,s=(s=s+Math.imul(B,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,r=r+Math.imul(T,z)|0,s=(s=s+Math.imul(T,q)|0)+Math.imul(A,z)|0,n=n+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(C,Z)|0,n=n+Math.imul(C,K)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(v,Q)|0,n=n+Math.imul(v,tt)|0,r=r+Math.imul(g,it)|0,s=(s=s+Math.imul(g,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var St=(u+(r=r+Math.imul(c,ht)|0)|0)+((8191&(s=(s=s+Math.imul(c,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((n=n+Math.imul(f,ut)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,Y),s=(s=Math.imul(P,X))+Math.imul(R,Y)|0,n=Math.imul(R,X),r=r+Math.imul($,H)|0,s=(s=s+Math.imul($,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,r=r+Math.imul(B,z)|0,s=(s=s+Math.imul(B,q)|0)+Math.imul(x,z)|0,n=n+Math.imul(x,q)|0,r=r+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(A,Z)|0,n=n+Math.imul(A,K)|0,r=r+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,tt)|0)+Math.imul(C,Q)|0,n=n+Math.imul(C,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,rt)|0,r=r+Math.imul(g,nt)|0,s=(s=s+Math.imul(g,ot)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ot)|0,r=r+Math.imul(m,ht)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,ut)|0;var Ct=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(s=(s=s+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((n=n+Math.imul(f,ft)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Y),s=(s=Math.imul(U,X))+Math.imul(N,Y)|0,n=Math.imul(N,X),r=r+Math.imul(P,H)|0,s=(s=s+Math.imul(P,W)|0)+Math.imul(R,H)|0,n=n+Math.imul(R,W)|0,r=r+Math.imul($,z)|0,s=(s=s+Math.imul($,q)|0)+Math.imul(D,z)|0,n=n+Math.imul(D,q)|0,r=r+Math.imul(B,Z)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,K)|0,r=r+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,tt)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,s=(s=s+Math.imul(S,rt)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,r=r+Math.imul(g,ht)|0,s=(s=s+Math.imul(g,ut)|0)+Math.imul(b,ht)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(m,ct)|0,s=(s=s+Math.imul(m,ft)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,ft)|0;var It=(u+(r=r+Math.imul(c,mt)|0)|0)+((8191&(s=(s=s+Math.imul(c,pt)|0)+Math.imul(f,mt)|0))<<13)|0;u=((n=n+Math.imul(f,pt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,H),s=(s=Math.imul(U,W))+Math.imul(N,H)|0,n=Math.imul(N,W),r=r+Math.imul(P,z)|0,s=(s=s+Math.imul(P,q)|0)+Math.imul(R,z)|0,n=n+Math.imul(R,q)|0,r=r+Math.imul($,Z)|0,s=(s=s+Math.imul($,K)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,K)|0,r=r+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,tt)|0)+Math.imul(x,Q)|0,n=n+Math.imul(x,tt)|0,r=r+Math.imul(T,it)|0,s=(s=s+Math.imul(T,rt)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,rt)|0,r=r+Math.imul(S,nt)|0,s=(s=s+Math.imul(S,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,r=r+Math.imul(w,ht)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,ut)|0,r=r+Math.imul(g,ct)|0,s=(s=s+Math.imul(g,ft)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,ft)|0;var Tt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,z),s=(s=Math.imul(U,q))+Math.imul(N,z)|0,n=Math.imul(N,q),r=r+Math.imul(P,Z)|0,s=(s=s+Math.imul(P,K)|0)+Math.imul(R,Z)|0,n=n+Math.imul(R,K)|0,r=r+Math.imul($,Q)|0,s=(s=s+Math.imul($,tt)|0)+Math.imul(D,Q)|0,n=n+Math.imul(D,tt)|0,r=r+Math.imul(B,it)|0,s=(s=s+Math.imul(B,rt)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,rt)|0,r=r+Math.imul(T,nt)|0,s=(s=s+Math.imul(T,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,s=(s=s+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,ut)|0,r=r+Math.imul(w,ct)|0,s=(s=s+Math.imul(w,ft)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,ft)|0;var At=(u+(r=r+Math.imul(g,mt)|0)|0)+((8191&(s=(s=s+Math.imul(g,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,Z),s=(s=Math.imul(U,K))+Math.imul(N,Z)|0,n=Math.imul(N,K),r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,tt)|0,r=r+Math.imul($,it)|0,s=(s=s+Math.imul($,rt)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,rt)|0,r=r+Math.imul(B,nt)|0,s=(s=s+Math.imul(B,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,r=r+Math.imul(T,ht)|0,s=(s=s+Math.imul(T,ut)|0)+Math.imul(A,ht)|0,n=n+Math.imul(A,ut)|0,r=r+Math.imul(S,ct)|0,s=(s=s+Math.imul(S,ft)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,ft)|0;var kt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((n=n+Math.imul(v,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),s=(s=Math.imul(U,tt))+Math.imul(N,Q)|0,n=Math.imul(N,tt),r=r+Math.imul(P,it)|0,s=(s=s+Math.imul(P,rt)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,rt)|0,r=r+Math.imul($,nt)|0,s=(s=s+Math.imul($,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,r=r+Math.imul(B,ht)|0,s=(s=s+Math.imul(B,ut)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,ut)|0,r=r+Math.imul(T,ct)|0,s=(s=s+Math.imul(T,ft)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,ft)|0;var Bt=(u+(r=r+Math.imul(S,mt)|0)|0)+((8191&(s=(s=s+Math.imul(S,pt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((n=n+Math.imul(C,pt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(U,it),s=(s=Math.imul(U,rt))+Math.imul(N,it)|0,n=Math.imul(N,rt),r=r+Math.imul(P,nt)|0,s=(s=s+Math.imul(P,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,r=r+Math.imul($,ht)|0,s=(s=s+Math.imul($,ut)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,ut)|0,r=r+Math.imul(B,ct)|0,s=(s=s+Math.imul(B,ft)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,ft)|0;var xt=(u+(r=r+Math.imul(T,mt)|0)|0)+((8191&(s=(s=s+Math.imul(T,pt)|0)+Math.imul(A,mt)|0))<<13)|0;u=((n=n+Math.imul(A,pt)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,nt),s=(s=Math.imul(U,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),r=r+Math.imul(P,ht)|0,s=(s=s+Math.imul(P,ut)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,ut)|0,r=r+Math.imul($,ct)|0,s=(s=s+Math.imul($,ft)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,ft)|0;var Et=(u+(r=r+Math.imul(B,mt)|0)|0)+((8191&(s=(s=s+Math.imul(B,pt)|0)+Math.imul(x,mt)|0))<<13)|0;u=((n=n+Math.imul(x,pt)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,ht),s=(s=Math.imul(U,ut))+Math.imul(N,ht)|0,n=Math.imul(N,ut),r=r+Math.imul(P,ct)|0,s=(s=s+Math.imul(P,ft)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,ft)|0;var $t=(u+(r=r+Math.imul($,mt)|0)|0)+((8191&(s=(s=s+Math.imul($,pt)|0)+Math.imul(D,mt)|0))<<13)|0;u=((n=n+Math.imul(D,pt)|0)+(s>>>13)|0)+($t>>>26)|0,$t&=67108863,r=Math.imul(U,ct),s=(s=Math.imul(U,ft))+Math.imul(N,ct)|0,n=Math.imul(N,ft);var Dt=(u+(r=r+Math.imul(P,mt)|0)|0)+((8191&(s=(s=s+Math.imul(P,pt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((n=n+Math.imul(R,pt)|0)+(s>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(u+(r=Math.imul(U,mt))|0)+((8191&(s=(s=Math.imul(U,pt))+Math.imul(N,mt)|0))<<13)|0;return u=((n=Math.imul(N,pt))+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h[0]=_t,h[1]=gt,h[2]=bt,h[3]=yt,h[4]=wt,h[5]=vt,h[6]=Mt,h[7]=St,h[8]=Ct,h[9]=It,h[10]=Tt,h[11]=At,h[12]=kt,h[13]=Bt,h[14]=xt,h[15]=Et,h[16]=$t,h[17]=Dt,h[18]=Lt,0!==u&&(h[19]=u,i.length++),i};function m(t,e,i){return(new p).mulp(t,e,i)}function p(t,e){this.x=t,this.y=e}Math.imul||(d=f),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):i<63?f(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,h=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=h;u++){var l=n-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;a=67108863&(f=f+a|0),s+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}(this,t,e):m(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},p.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},p.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},p.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<s;l+=a)for(var c=h,f=u,d=0;d<o;d++){var m=i[l+d],p=r[l+d],_=i[l+d+o],g=r[l+d+o],b=c*_-f*g;g=c*g+f*_,_=b,i[l+d]=m+_,r[l+d]=p+g,i[l+d+o]=m-_,r[l+d+o]=p-g,d!==a&&(b=h*c-u*f,f=h*f+u*c,c=b)}},p.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},p.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},p.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},p.prototype.convert13b=function(t,e,i,r){for(var s=0,n=0;n<e;n++)s+=0|t[n],i[2*n]=8191&s,s>>>=13,i[2*n+1]=8191&s,s>>>=13;for(n=2*e;n<r;++n)i[n]=0},p.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},p.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,n,a,h,r,s),this.transform(u,n,l,c,r,s);for(var d=0;d<r;d++){var m=a[d]*l[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*l[d],a[d]=m}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,s=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=(t.words[r]&1<<s)>>>s}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(e=0;e<this.length;e++){var o=this.words[e]&s,a=(0|this.words[e])-o<<i;this.words[e]=a|n,n=o>>>26-i}n&&(this.words[e]=n,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(t){return this.iushln(t)},s.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var s=t%26,n=Math.min((t-s)/26,this.length),o=67108863^67108863>>>s<<s,a=i;if(r-=n,r=Math.max(0,r),a){for(var h=0;h<n;h++)a.words[h]=this.words[h];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,h=0;h<this.length;h++)this.words[h]=this.words[h+n];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=r);h--){var l=0|this.words[h];this.words[h]=u<<26-s|l>>>s,u=l&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},s.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var r,s,n=t.length+i;this._expand(n);var o=0;for(r=0;r<t.length;r++){s=(0|this.words[r+i])+o;var a=(0|t.words[r])*e;o=((s-=67108863&a)>>26)-(a/67108864|0),this.words[r+i]=67108863&s}for(;r<this.length-i;r++)o=(s=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&s;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(s=-(0|this.words[r])+o)>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,n,o},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},s.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new s(1),n=new s(0),o=new s(0),a=new s(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.iushrn(1),n.iushrn(1);for(var d=0,m=1;0==(i.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),n.isub(a)):(i.isub(e),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:i.iushln(h)}},s.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,n=new s(1),o=new s(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,u=1;0==(e.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(e.iushrn(h);h-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o)):(i.isub(e),o.isub(n))}return(r=0===e.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,n=i;0!==s&&n<this.length;n++){var o=0|this.words[n];s=(o+=s)>>>26,o&=67108863,this.words[n]=o}return 0!==s&&(this.words[n]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new M(t)},s.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return this._forceRed(t)},s.prototype.redAdd=function(t){return this.red.add(this,t)},s.prototype.redIAdd=function(t){return this.red.iadd(this,t)},s.prototype.redSub=function(t){return this.red.sub(this,t)},s.prototype.redISub=function(t){return this.red.isub(this,t)},s.prototype.redShl=function(t){return this.red.shl(this,t)},s.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},r(b,g),b.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,t.words[r-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(y,g),r(w,g),r(v,g),v.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new y;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new v}return _[t]=e,e},M.prototype._verify1=function(t){},M.prototype._verify2=function(t,e){},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new s(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),r=0;!i.isZero()&&0===i.andln(1);)r++,i.iushrn(1);var n=new s(1).toRed(this),o=n.redNeg(),a=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,a).cmp(o);)h.redIAdd(o);for(var u=this.pow(h,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=r;0!==c.cmp(n);){for(var d=c,m=0;0!==d.cmp(n);m++)d=d.redSqr();var p=this.pow(u,new s(1).iushln(f-m-1));l=l.redMul(p),u=p.redSqr(),c=c.redMul(u),f=m}return l},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=h-1;l>=0;l--){var c=u>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},r(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_$bn_95,this),_$bn_95=_$bn_95.exports;var _$bn_137={exports:{}};!function(t,i){"use strict";function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_$empty_45({}).Buffer}catch(e){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s*=r,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n,o=0;if("be"===i)for(r=t.length-1,s=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(r=0,s=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,o=n%r,a=Math.min(n,n-o)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(t,l,t.length,e),l=0;l<o;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],o=s*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var u=1;u<r;u++){for(var l=h>>>26,c=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var m=u-d|0;l+=(o=(s=0|t.words[m])*(n=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,h=0|l}return 0!==h?i.words[u]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|s)).toString(16);s=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),i=0!==s||n!==this.length-1?u[6-a.length]+a+i:a+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=l[t],f=c[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?m+i:u[h-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),s=i||Math.max(1,r);this.strip();var n,o,a="le"===e,h=new t(s),u=this.clone();if(a){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-r;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)n=(e=(0|i.words[o])-(0|r.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,s,n,o=t.words,a=e.words,h=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],m=8191&d,p=d>>>13,_=0|o[2],g=8191&_,b=_>>>13,y=0|o[3],w=8191&y,v=y>>>13,M=0|o[4],S=8191&M,C=M>>>13,I=0|o[5],T=8191&I,A=I>>>13,k=0|o[6],B=8191&k,x=k>>>13,E=0|o[7],$=8191&E,D=E>>>13,L=0|o[8],P=8191&L,R=L>>>13,O=0|o[9],U=8191&O,N=O>>>13,j=0|a[0],Y=8191&j,X=j>>>13,F=0|a[1],H=8191&F,W=F>>>13,G=0|a[2],z=8191&G,q=G>>>13,V=0|a[3],Z=8191&V,K=V>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,st=0|a[6],nt=8191&st,ot=st>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,dt=0|a[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var _t=(u+(r=Math.imul(c,Y))|0)+((8191&(s=(s=Math.imul(c,X))+Math.imul(f,Y)|0))<<13)|0;u=((n=Math.imul(f,X))+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(m,Y),s=(s=Math.imul(m,X))+Math.imul(p,Y)|0,n=Math.imul(p,X);var gt=(u+(r=r+Math.imul(c,H)|0)|0)+((8191&(s=(s=s+Math.imul(c,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((n=n+Math.imul(f,W)|0)+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,Y),s=(s=Math.imul(g,X))+Math.imul(b,Y)|0,n=Math.imul(b,X),r=r+Math.imul(m,H)|0,s=(s=s+Math.imul(m,W)|0)+Math.imul(p,H)|0,n=n+Math.imul(p,W)|0;var bt=(u+(r=r+Math.imul(c,z)|0)|0)+((8191&(s=(s=s+Math.imul(c,q)|0)+Math.imul(f,z)|0))<<13)|0;u=((n=n+Math.imul(f,q)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(w,Y),s=(s=Math.imul(w,X))+Math.imul(v,Y)|0,n=Math.imul(v,X),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,W)|0)+Math.imul(b,H)|0,n=n+Math.imul(b,W)|0,r=r+Math.imul(m,z)|0,s=(s=s+Math.imul(m,q)|0)+Math.imul(p,z)|0,n=n+Math.imul(p,q)|0;var yt=(u+(r=r+Math.imul(c,Z)|0)|0)+((8191&(s=(s=s+Math.imul(c,K)|0)+Math.imul(f,Z)|0))<<13)|0;u=((n=n+Math.imul(f,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,Y),s=(s=Math.imul(S,X))+Math.imul(C,Y)|0,n=Math.imul(C,X),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,r=r+Math.imul(g,z)|0,s=(s=s+Math.imul(g,q)|0)+Math.imul(b,z)|0,n=n+Math.imul(b,q)|0,r=r+Math.imul(m,Z)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,Z)|0,n=n+Math.imul(p,K)|0;var wt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(s=(s=s+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((n=n+Math.imul(f,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,Y),s=(s=Math.imul(T,X))+Math.imul(A,Y)|0,n=Math.imul(A,X),r=r+Math.imul(S,H)|0,s=(s=s+Math.imul(S,W)|0)+Math.imul(C,H)|0,n=n+Math.imul(C,W)|0,r=r+Math.imul(w,z)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(v,z)|0,n=n+Math.imul(v,q)|0,r=r+Math.imul(g,Z)|0,s=(s=s+Math.imul(g,K)|0)+Math.imul(b,Z)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(m,Q)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Q)|0,n=n+Math.imul(p,tt)|0;var vt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(s=(s=s+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((n=n+Math.imul(f,rt)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,Y),s=(s=Math.imul(B,X))+Math.imul(x,Y)|0,n=Math.imul(x,X),r=r+Math.imul(T,H)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,W)|0,r=r+Math.imul(S,z)|0,s=(s=s+Math.imul(S,q)|0)+Math.imul(C,z)|0,n=n+Math.imul(C,q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,K)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,tt)|0)+Math.imul(b,Q)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var Mt=(u+(r=r+Math.imul(c,nt)|0)|0)+((8191&(s=(s=s+Math.imul(c,ot)|0)+Math.imul(f,nt)|0))<<13)|0;u=((n=n+Math.imul(f,ot)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul($,Y),s=(s=Math.imul($,X))+Math.imul(D,Y)|0,n=Math.imul(D,X),r=r+Math.imul(B,H)|0,s=(s=s+Math.imul(B,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,r=r+Math.imul(T,z)|0,s=(s=s+Math.imul(T,q)|0)+Math.imul(A,z)|0,n=n+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(C,Z)|0,n=n+Math.imul(C,K)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(v,Q)|0,n=n+Math.imul(v,tt)|0,r=r+Math.imul(g,it)|0,s=(s=s+Math.imul(g,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var St=(u+(r=r+Math.imul(c,ht)|0)|0)+((8191&(s=(s=s+Math.imul(c,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((n=n+Math.imul(f,ut)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,Y),s=(s=Math.imul(P,X))+Math.imul(R,Y)|0,n=Math.imul(R,X),r=r+Math.imul($,H)|0,s=(s=s+Math.imul($,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,r=r+Math.imul(B,z)|0,s=(s=s+Math.imul(B,q)|0)+Math.imul(x,z)|0,n=n+Math.imul(x,q)|0,r=r+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(A,Z)|0,n=n+Math.imul(A,K)|0,r=r+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,tt)|0)+Math.imul(C,Q)|0,n=n+Math.imul(C,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,rt)|0,r=r+Math.imul(g,nt)|0,s=(s=s+Math.imul(g,ot)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ot)|0,r=r+Math.imul(m,ht)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,ut)|0;var Ct=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(s=(s=s+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((n=n+Math.imul(f,ft)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Y),s=(s=Math.imul(U,X))+Math.imul(N,Y)|0,n=Math.imul(N,X),r=r+Math.imul(P,H)|0,s=(s=s+Math.imul(P,W)|0)+Math.imul(R,H)|0,n=n+Math.imul(R,W)|0,r=r+Math.imul($,z)|0,s=(s=s+Math.imul($,q)|0)+Math.imul(D,z)|0,n=n+Math.imul(D,q)|0,r=r+Math.imul(B,Z)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,K)|0,r=r+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,tt)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,s=(s=s+Math.imul(S,rt)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,r=r+Math.imul(g,ht)|0,s=(s=s+Math.imul(g,ut)|0)+Math.imul(b,ht)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(m,ct)|0,s=(s=s+Math.imul(m,ft)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,ft)|0;var It=(u+(r=r+Math.imul(c,mt)|0)|0)+((8191&(s=(s=s+Math.imul(c,pt)|0)+Math.imul(f,mt)|0))<<13)|0;u=((n=n+Math.imul(f,pt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,H),s=(s=Math.imul(U,W))+Math.imul(N,H)|0,n=Math.imul(N,W),r=r+Math.imul(P,z)|0,s=(s=s+Math.imul(P,q)|0)+Math.imul(R,z)|0,n=n+Math.imul(R,q)|0,r=r+Math.imul($,Z)|0,s=(s=s+Math.imul($,K)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,K)|0,r=r+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,tt)|0)+Math.imul(x,Q)|0,n=n+Math.imul(x,tt)|0,r=r+Math.imul(T,it)|0,s=(s=s+Math.imul(T,rt)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,rt)|0,r=r+Math.imul(S,nt)|0,s=(s=s+Math.imul(S,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,r=r+Math.imul(w,ht)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,ut)|0,r=r+Math.imul(g,ct)|0,s=(s=s+Math.imul(g,ft)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,ft)|0;var Tt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,z),s=(s=Math.imul(U,q))+Math.imul(N,z)|0,n=Math.imul(N,q),r=r+Math.imul(P,Z)|0,s=(s=s+Math.imul(P,K)|0)+Math.imul(R,Z)|0,n=n+Math.imul(R,K)|0,r=r+Math.imul($,Q)|0,s=(s=s+Math.imul($,tt)|0)+Math.imul(D,Q)|0,n=n+Math.imul(D,tt)|0,r=r+Math.imul(B,it)|0,s=(s=s+Math.imul(B,rt)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,rt)|0,r=r+Math.imul(T,nt)|0,s=(s=s+Math.imul(T,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,s=(s=s+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,ut)|0,r=r+Math.imul(w,ct)|0,s=(s=s+Math.imul(w,ft)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,ft)|0;var At=(u+(r=r+Math.imul(g,mt)|0)|0)+((8191&(s=(s=s+Math.imul(g,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,Z),s=(s=Math.imul(U,K))+Math.imul(N,Z)|0,n=Math.imul(N,K),r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,tt)|0,r=r+Math.imul($,it)|0,s=(s=s+Math.imul($,rt)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,rt)|0,r=r+Math.imul(B,nt)|0,s=(s=s+Math.imul(B,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,r=r+Math.imul(T,ht)|0,s=(s=s+Math.imul(T,ut)|0)+Math.imul(A,ht)|0,n=n+Math.imul(A,ut)|0,r=r+Math.imul(S,ct)|0,s=(s=s+Math.imul(S,ft)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,ft)|0;var kt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((n=n+Math.imul(v,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),s=(s=Math.imul(U,tt))+Math.imul(N,Q)|0,n=Math.imul(N,tt),r=r+Math.imul(P,it)|0,s=(s=s+Math.imul(P,rt)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,rt)|0,r=r+Math.imul($,nt)|0,s=(s=s+Math.imul($,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,r=r+Math.imul(B,ht)|0,s=(s=s+Math.imul(B,ut)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,ut)|0,r=r+Math.imul(T,ct)|0,s=(s=s+Math.imul(T,ft)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,ft)|0;var Bt=(u+(r=r+Math.imul(S,mt)|0)|0)+((8191&(s=(s=s+Math.imul(S,pt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((n=n+Math.imul(C,pt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(U,it),s=(s=Math.imul(U,rt))+Math.imul(N,it)|0,n=Math.imul(N,rt),r=r+Math.imul(P,nt)|0,s=(s=s+Math.imul(P,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,r=r+Math.imul($,ht)|0,s=(s=s+Math.imul($,ut)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,ut)|0,r=r+Math.imul(B,ct)|0,s=(s=s+Math.imul(B,ft)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,ft)|0;var xt=(u+(r=r+Math.imul(T,mt)|0)|0)+((8191&(s=(s=s+Math.imul(T,pt)|0)+Math.imul(A,mt)|0))<<13)|0;u=((n=n+Math.imul(A,pt)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,nt),s=(s=Math.imul(U,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),r=r+Math.imul(P,ht)|0,s=(s=s+Math.imul(P,ut)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,ut)|0,r=r+Math.imul($,ct)|0,s=(s=s+Math.imul($,ft)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,ft)|0;var Et=(u+(r=r+Math.imul(B,mt)|0)|0)+((8191&(s=(s=s+Math.imul(B,pt)|0)+Math.imul(x,mt)|0))<<13)|0;u=((n=n+Math.imul(x,pt)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,ht),s=(s=Math.imul(U,ut))+Math.imul(N,ht)|0,n=Math.imul(N,ut),r=r+Math.imul(P,ct)|0,s=(s=s+Math.imul(P,ft)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,ft)|0;var $t=(u+(r=r+Math.imul($,mt)|0)|0)+((8191&(s=(s=s+Math.imul($,pt)|0)+Math.imul(D,mt)|0))<<13)|0;u=((n=n+Math.imul(D,pt)|0)+(s>>>13)|0)+($t>>>26)|0,$t&=67108863,r=Math.imul(U,ct),s=(s=Math.imul(U,ft))+Math.imul(N,ct)|0,n=Math.imul(N,ft);var Dt=(u+(r=r+Math.imul(P,mt)|0)|0)+((8191&(s=(s=s+Math.imul(P,pt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((n=n+Math.imul(R,pt)|0)+(s>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(u+(r=Math.imul(U,mt))|0)+((8191&(s=(s=Math.imul(U,pt))+Math.imul(N,mt)|0))<<13)|0;return u=((n=Math.imul(N,pt))+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h[0]=_t,h[1]=gt,h[2]=bt,h[3]=yt,h[4]=wt,h[5]=vt,h[6]=Mt,h[7]=St,h[8]=Ct,h[9]=It,h[10]=Tt,h[11]=At,h[12]=kt,h[13]=Bt,h[14]=xt,h[15]=Et,h[16]=$t,h[17]=Dt,h[18]=Lt,0!==u&&(h[19]=u,i.length++),i};function m(t,e,i){return(new p).mulp(t,e,i)}function p(t,e){this.x=t,this.y=e}Math.imul||(d=f),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):i<63?f(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,h=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=h;u++){var l=n-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;a=67108863&(f=f+a|0),s+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}(this,t,e):m(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},p.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},p.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},p.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<s;l+=a)for(var c=h,f=u,d=0;d<o;d++){var m=i[l+d],p=r[l+d],_=i[l+d+o],g=r[l+d+o],b=c*_-f*g;g=c*g+f*_,_=b,i[l+d]=m+_,r[l+d]=p+g,i[l+d+o]=m-_,r[l+d+o]=p-g,d!==a&&(b=h*c-u*f,f=h*f+u*c,c=b)}},p.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},p.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},p.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},p.prototype.convert13b=function(t,e,i,r){for(var s=0,n=0;n<e;n++)s+=0|t[n],i[2*n]=8191&s,s>>>=13,i[2*n+1]=8191&s,s>>>=13;for(n=2*e;n<r;++n)i[n]=0},p.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},p.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,n,a,h,r,s),this.transform(u,n,l,c,r,s);for(var d=0;d<r;d++){var m=a[d]*l[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*l[d],a[d]=m}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,s=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=(t.words[r]&1<<s)>>>s}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(e=0;e<this.length;e++){var o=this.words[e]&s,a=(0|this.words[e])-o<<i;this.words[e]=a|n,n=o>>>26-i}n&&(this.words[e]=n,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(t){return this.iushln(t)},s.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var s=t%26,n=Math.min((t-s)/26,this.length),o=67108863^67108863>>>s<<s,a=i;if(r-=n,r=Math.max(0,r),a){for(var h=0;h<n;h++)a.words[h]=this.words[h];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,h=0;h<this.length;h++)this.words[h]=this.words[h+n];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=r);h--){var l=0|this.words[h];this.words[h]=u<<26-s|l>>>s,u=l&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},s.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var r,s,n=t.length+i;this._expand(n);var o=0;for(r=0;r<t.length;r++){s=(0|this.words[r+i])+o;var a=(0|t.words[r])*e;o=((s-=67108863&a)>>26)-(a/67108864|0),this.words[r+i]=67108863&s}for(;r<this.length-i;r++)o=(s=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&s;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(s=-(0|this.words[r])+o)>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,n,o},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},s.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new s(1),n=new s(0),o=new s(0),a=new s(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.iushrn(1),n.iushrn(1);for(var d=0,m=1;0==(i.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),n.isub(a)):(i.isub(e),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:i.iushln(h)}},s.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,n=new s(1),o=new s(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,u=1;0==(e.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(e.iushrn(h);h-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o)):(i.isub(e),o.isub(n))}return(r=0===e.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,n=i;0!==s&&n<this.length;n++){var o=0|this.words[n];s=(o+=s)>>>26,o&=67108863,this.words[n]=o}return 0!==s&&(this.words[n]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new M(t)},s.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return this._forceRed(t)},s.prototype.redAdd=function(t){return this.red.add(this,t)},s.prototype.redIAdd=function(t){return this.red.iadd(this,t)},s.prototype.redSub=function(t){return this.red.sub(this,t)},s.prototype.redISub=function(t){return this.red.isub(this,t)},s.prototype.redShl=function(t){return this.red.shl(this,t)},s.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},r(b,g),b.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,t.words[r-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(y,g),r(w,g),r(v,g),v.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new y;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new v}return _[t]=e,e},M.prototype._verify1=function(t){},M.prototype._verify2=function(t,e){},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new s(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),r=0;!i.isZero()&&0===i.andln(1);)r++,i.iushrn(1);var n=new s(1).toRed(this),o=n.redNeg(),a=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,a).cmp(o);)h.redIAdd(o);for(var u=this.pow(h,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=r;0!==c.cmp(n);){for(var d=c,m=0;0!==d.cmp(n);m++)d=d.redSqr();var p=this.pow(u,new s(1).iushln(f-m-1));l=l.redMul(p),u=p.redSqr(),c=c.redMul(u),f=m}return l},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=h-1;l>=0;l--){var c=u>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},r(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_$bn_137,this),_$bn_137=_$bn_137.exports;var _$brorand_44={},r;function Rand(t){this.rand=t}if(_$brorand_44=function(t){return r||(r=new Rand(null)),r.generate(t)},_$brorand_44.Rand=Rand,Rand.prototype.generate=function(t){return this._rand(t)},Rand.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto=_$empty_45({});if("function"!=typeof crypto.randomBytes)throw new Error("Not supported");Rand.prototype._rand=function(t){return crypto.randomBytes(t)}}catch(e){}var _$mr_136={};function MillerRabin(t){this.rand=t||new _$brorand_44.Rand}_$mr_136=MillerRabin,MillerRabin.create=function(t){return new MillerRabin(t)},MillerRabin.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var r=new _$bn_137(this.rand.generate(i))}while(r.cmp(t)>=0);return r},MillerRabin.prototype._randrange=function(t,e){var i=e.sub(t);return t.add(this._randbelow(i))},MillerRabin.prototype.test=function(t,e,i){var r=t.bitLength(),s=_$bn_137.mont(t),n=new _$bn_137(1).toRed(s);e||(e=Math.max(1,r/48|0));for(var o=t.subn(1),a=0;!o.testn(a);a++);for(var h=t.shrn(a),u=o.toRed(s);e>0;e--){var l=this._randrange(new _$bn_137(2),o);i&&i(l);var c=l.toRed(s).redPow(h);if(0!==c.cmp(n)&&0!==c.cmp(u)){for(var f=1;f<a;f++){if(0===(c=c.redSqr()).cmp(n))return!1;if(0===c.cmp(u))break}if(f===a)return!1}}return!0},MillerRabin.prototype.getDivisor=function(t,e){var i=t.bitLength(),r=_$bn_137.mont(t),s=new _$bn_137(1).toRed(r);e||(e=Math.max(1,i/48|0));for(var n=t.subn(1),o=0;!n.testn(o);o++);for(var a=t.shrn(o),h=n.toRed(r);e>0;e--){var u=this._randrange(new _$bn_137(2),n),l=t.gcd(u);if(0!==l.cmpn(1))return l;var c=u.toRed(r).redPow(a);if(0!==c.cmp(s)&&0!==c.cmp(h)){for(var f=1;f<o;f++){if(0===(c=c.redSqr()).cmp(s))return c.fromRed().subn(1).gcd(t);if(0===c.cmp(h))break}if(f===o)return(c=c.redSqr()).fromRed().subn(1).gcd(t)}}return!1};var _$generatePrime_93={};_$generatePrime_93=findPrime,findPrime.simpleSieve=simpleSieve,findPrime.fermatTest=fermatTest;var TWENTYFOUR=new _$bn_95(24),millerRabin=new _$mr_136,__ONE_93=new _$bn_95(1),TWO=new _$bn_95(2),FIVE=new _$bn_95(5),TEN=(new _$bn_95(16),new _$bn_95(8),new _$bn_95(10)),THREE=new _$bn_95(3),ELEVEN=(new _$bn_95(7),new _$bn_95(11)),FOUR=new _$bn_95(4),primes=(new _$bn_95(12),null);function _getPrimes(){if(null!==primes)return primes;var t=[];t[0]=2;for(var e=1,i=3;i<1048576;i+=2){for(var r=Math.ceil(Math.sqrt(i)),s=0;s<e&&t[s]<=r&&i%t[s]!=0;s++);e!==s&&t[s]<=r||(t[e++]=i)}return primes=t,t}function simpleSieve(t){for(var e=_getPrimes(),i=0;i<e.length;i++)if(0===t.modn(e[i]))return 0===t.cmpn(e[i]);return!0}function fermatTest(t){var e=_$bn_95.mont(t);return 0===TWO.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function findPrime(t,e){if(t<16)return new _$bn_95(2===e||5===e?[140,123]:[140,39]);var i,r;for(e=new _$bn_95(e);;){for(i=new _$bn_95(_$browser_163(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd(__ONE_93),i.testn(1)||i.iadd(TWO),e.cmp(TWO)){if(!e.cmp(FIVE))for(;i.mod(TEN).cmp(THREE);)i.iadd(FOUR)}else for(;i.mod(TWENTYFOUR).cmp(ELEVEN);)i.iadd(FOUR);if(simpleSieve(r=i.shrn(1))&&simpleSieve(i)&&fermatTest(r)&&fermatTest(i)&&millerRabin.test(r)&&millerRabin.test(i))return i}}var _$primes_94={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},_$DH_92={};(function(t){(function(){var e=new _$mr_136,i=new _$bn_95(24),r=new _$bn_95(11),s=new _$bn_95(10),n=new _$bn_95(3),o=new _$bn_95(7);function a(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this._pub=new _$bn_95(e),this}function h(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this._priv=new _$bn_95(e),this}_$DH_92=l;var u={};function l(t,e,i){this.setGenerator(e),this.__prime=new _$bn_95(t),this._prime=_$bn_95.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=a,this.setPrivateKey=h):this._primeCode=8}function c(e,i){var r=new t(e.toArray());return i?r.toString(i):r}Object.defineProperty(l.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,a){var h=a.toString("hex"),l=[h,t.toString(16)].join("_");if(l in u)return u[l];var c,f=0;if(t.isEven()||!_$generatePrime_93.simpleSieve||!_$generatePrime_93.fermatTest(t)||!e.test(t))return f+=1,f+="02"===h||"05"===h?8:4,u[l]=f,f;switch(e.test(t.shrn(1))||(f+=2),h){case"02":t.mod(i).cmp(r)&&(f+=8);break;case"05":(c=t.mod(s)).cmp(n)&&c.cmp(o)&&(f+=8);break;default:f+=4}return u[l]=f,f}(this.__prime,this.__gen)),this._primeCode}}),l.prototype.generateKeys=function(){return this._priv||(this._priv=new _$bn_95(_$browser_163(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},l.prototype.computeSecret=function(e){var i=(e=(e=new _$bn_95(e)).toRed(this._prime)).redPow(this._priv).fromRed(),r=new t(i.toArray()),s=this.getPrime();if(r.length<s.length){var n=new t(s.length-r.length);n.fill(0),r=t.concat([n,r])}return r},l.prototype.getPublicKey=function(t){return c(this._pub,t)},l.prototype.getPrivateKey=function(t){return c(this._priv,t)},l.prototype.getPrime=function(t){return c(this.__prime,t)},l.prototype.getGenerator=function(t){return c(this._gen,t)},l.prototype.setGenerator=function(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this.__gen=e,this._gen=new _$bn_95(e),this}}).call(this)}).call(this,_$buffer_73({}).Buffer);var _$browser_91={};(function(t){(function(){}).call(this)}).call(this,_$buffer_73({}).Buffer);var _$processNextickArgs_153={};(function(t){(function(){"use strict";_$processNextickArgs_153=void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?{nextTick:function(e,i,r,s){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var n,o,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,i)}));case 3:return t.nextTick((function(){e.call(null,i,r)}));case 4:return t.nextTick((function(){e.call(null,i,r,s)}));default:for(n=new Array(a-1),o=0;o<n.length;)n[o++]=arguments[o];return t.nextTick((function(){e.apply(null,n)}))}}}:t}).call(this)}).call(this,_$browser_154);var toString={}.toString,_$isarray_133=Array.isArray||function(t){return"[object Array]"==toString.call(t)},_$streamBrowser_172=_$events_113.EventEmitter,_$safeBuffer_173={},__buffer_173=_$buffer_73({}),__Buffer_173=__buffer_173.Buffer;function __copyProps_173(t,e){for(var i in t)e[i]=t[i]}function __SafeBuffer_173(t,e,i){return __Buffer_173(t,e,i)}__Buffer_173.from&&__Buffer_173.alloc&&__Buffer_173.allocUnsafe&&__Buffer_173.allocUnsafeSlow?_$safeBuffer_173=__buffer_173:(__copyProps_173(__buffer_173,_$safeBuffer_173),_$safeBuffer_173.Buffer=__SafeBuffer_173),__copyProps_173(__Buffer_173,__SafeBuffer_173),__SafeBuffer_173.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return __Buffer_173(t,e,i)},__SafeBuffer_173.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=__Buffer_173(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},__SafeBuffer_173.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return __Buffer_173(t)},__SafeBuffer_173.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return __buffer_173.SlowBuffer(t)};var _$util_77={};function objectToString(t){return Object.prototype.toString.call(t)}_$util_77.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===objectToString(t)},_$util_77.isBoolean=function(t){return"boolean"==typeof t},_$util_77.isNull=function(t){return null===t},_$util_77.isNullOrUndefined=function(t){return null==t},_$util_77.isNumber=function(t){return"number"==typeof t},_$util_77.isString=function(t){return"string"==typeof t},_$util_77.isSymbol=function(t){return"symbol"==typeof t},_$util_77.isUndefined=function(t){return void 0===t},_$util_77.isRegExp=function(t){return"[object RegExp]"===objectToString(t)},_$util_77.isObject=function(t){return"object"==typeof t&&null!==t},_$util_77.isDate=function(t){return"[object Date]"===objectToString(t)},_$util_77.isError=function(t){return"[object Error]"===objectToString(t)||t instanceof Error},_$util_77.isFunction=function(t){return"function"==typeof t},_$util_77.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},_$util_77.isBuffer=_$buffer_73({}).Buffer.isBuffer;var _$BufferList_170={},__Buffer_170=_$safeBuffer_173.Buffer,util=_$empty_45({});function emitErrorNT(t,e){t.emit("error",e)}_$BufferList_170=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return __Buffer_170.alloc(0);for(var e,i,r=__Buffer_170.allocUnsafe(t>>>0),s=this.head,n=0;s;)e=r,i=n,s.data.copy(e,i),n+=s.data.length,s=s.next;return r},t}(),util&&util.inspect&&util.inspect.custom&&(_$BufferList_170.prototype[util.inspect.custom]=function(){var t=util.inspect({length:this.length});return this.constructor.name+" "+t});var _$destroy_171={destroy:function(t,e){var i=this,r=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return r||s?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_$processNextickArgs_153.nextTick(emitErrorNT,this,t)):_$processNextickArgs_153.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?i._writableState?i._writableState.errorEmitted||(i._writableState.errorEmitted=!0,_$processNextickArgs_153.nextTick(emitErrorNT,i,t)):_$processNextickArgs_153.nextTick(emitErrorNT,i,t):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},_$Transform_168=__Transform_168,__Duplex_168=_$Duplex_165({}),__util_168=Object.create(_$util_77);function __afterTransform_168(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function __Transform_168(t){if(!(this instanceof __Transform_168))return new __Transform_168(t);__Duplex_168.call(this,t),this._transformState={afterTransform:__afterTransform_168.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",__prefinish_168)}function __prefinish_168(){var t=this;"function"==typeof this._flush?this._flush((function(e,i){__done_168(t,e,i)})):__done_168(this,null,null)}function __done_168(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}__util_168.inherits=_$inherits_browser_130,__util_168.inherits(__Transform_168,__Duplex_168),__Transform_168.prototype.push=function(t,e){return this._transformState.needTransform=!1,__Duplex_168.prototype.push.call(this,t,e)},__Transform_168.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},__Transform_168.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},__Transform_168.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},__Transform_168.prototype._destroy=function(t,e){var i=this;__Duplex_168.prototype._destroy.call(this,t,(function(t){e(t),i.emit("close")}))};var _$PassThrough_166=__PassThrough_166,__util_166=Object.create(_$util_77);function __PassThrough_166(t){if(!(this instanceof __PassThrough_166))return new __PassThrough_166(t);_$Transform_168.call(this,t)}__util_166.inherits=_$inherits_browser_130,__util_166.inherits(__PassThrough_166,_$Transform_168),__PassThrough_166.prototype._transform=function(t,e,i){i(null,t)};var _$readableBrowser_175={};_$readableBrowser_175=_$readableBrowser_175=_$Readable_167({}),_$readableBrowser_175.Stream=_$readableBrowser_175,_$readableBrowser_175.Readable=_$readableBrowser_175,_$readableBrowser_175.Writable=_$Writable_169({}),_$readableBrowser_175.Duplex=_$Duplex_165({}),_$readableBrowser_175.Transform=_$Transform_168,_$readableBrowser_175.PassThrough=_$PassThrough_166;var _$package_112={version:"6.6.1"},_$bn_111={exports:{}};!function(t,i){"use strict";function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_$empty_45({}).Buffer}catch(e){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s*=r,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n,o=0;if("be"===i)for(r=t.length-1,s=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(r=0,s=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,o=n%r,a=Math.min(n,n-o)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(t,l,t.length,e),l=0;l<o;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],o=s*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var u=1;u<r;u++){for(var l=h>>>26,c=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var m=u-d|0;l+=(o=(s=0|t.words[m])*(n=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,h=0|l}return 0!==h?i.words[u]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|s)).toString(16);s=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),i=0!==s||n!==this.length-1?u[6-a.length]+a+i:a+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=l[t],f=c[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?m+i:u[h-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),s=i||Math.max(1,r);this.strip();var n,o,a="le"===e,h=new t(s),u=this.clone();if(a){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-r;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)n=(e=(0|i.words[o])-(0|r.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,s,n,o=t.words,a=e.words,h=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],m=8191&d,p=d>>>13,_=0|o[2],g=8191&_,b=_>>>13,y=0|o[3],w=8191&y,v=y>>>13,M=0|o[4],S=8191&M,C=M>>>13,I=0|o[5],T=8191&I,A=I>>>13,k=0|o[6],B=8191&k,x=k>>>13,E=0|o[7],$=8191&E,D=E>>>13,L=0|o[8],P=8191&L,R=L>>>13,O=0|o[9],U=8191&O,N=O>>>13,j=0|a[0],Y=8191&j,X=j>>>13,F=0|a[1],H=8191&F,W=F>>>13,G=0|a[2],z=8191&G,q=G>>>13,V=0|a[3],Z=8191&V,K=V>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,st=0|a[6],nt=8191&st,ot=st>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,dt=0|a[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var _t=(u+(r=Math.imul(c,Y))|0)+((8191&(s=(s=Math.imul(c,X))+Math.imul(f,Y)|0))<<13)|0;u=((n=Math.imul(f,X))+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(m,Y),s=(s=Math.imul(m,X))+Math.imul(p,Y)|0,n=Math.imul(p,X);var gt=(u+(r=r+Math.imul(c,H)|0)|0)+((8191&(s=(s=s+Math.imul(c,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((n=n+Math.imul(f,W)|0)+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,Y),s=(s=Math.imul(g,X))+Math.imul(b,Y)|0,n=Math.imul(b,X),r=r+Math.imul(m,H)|0,s=(s=s+Math.imul(m,W)|0)+Math.imul(p,H)|0,n=n+Math.imul(p,W)|0;var bt=(u+(r=r+Math.imul(c,z)|0)|0)+((8191&(s=(s=s+Math.imul(c,q)|0)+Math.imul(f,z)|0))<<13)|0;u=((n=n+Math.imul(f,q)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(w,Y),s=(s=Math.imul(w,X))+Math.imul(v,Y)|0,n=Math.imul(v,X),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,W)|0)+Math.imul(b,H)|0,n=n+Math.imul(b,W)|0,r=r+Math.imul(m,z)|0,s=(s=s+Math.imul(m,q)|0)+Math.imul(p,z)|0,n=n+Math.imul(p,q)|0;var yt=(u+(r=r+Math.imul(c,Z)|0)|0)+((8191&(s=(s=s+Math.imul(c,K)|0)+Math.imul(f,Z)|0))<<13)|0;u=((n=n+Math.imul(f,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,Y),s=(s=Math.imul(S,X))+Math.imul(C,Y)|0,n=Math.imul(C,X),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,r=r+Math.imul(g,z)|0,s=(s=s+Math.imul(g,q)|0)+Math.imul(b,z)|0,n=n+Math.imul(b,q)|0,r=r+Math.imul(m,Z)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,Z)|0,n=n+Math.imul(p,K)|0;var wt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(s=(s=s+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((n=n+Math.imul(f,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,Y),s=(s=Math.imul(T,X))+Math.imul(A,Y)|0,n=Math.imul(A,X),r=r+Math.imul(S,H)|0,s=(s=s+Math.imul(S,W)|0)+Math.imul(C,H)|0,n=n+Math.imul(C,W)|0,r=r+Math.imul(w,z)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(v,z)|0,n=n+Math.imul(v,q)|0,r=r+Math.imul(g,Z)|0,s=(s=s+Math.imul(g,K)|0)+Math.imul(b,Z)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(m,Q)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Q)|0,n=n+Math.imul(p,tt)|0;var vt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(s=(s=s+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((n=n+Math.imul(f,rt)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,Y),s=(s=Math.imul(B,X))+Math.imul(x,Y)|0,n=Math.imul(x,X),r=r+Math.imul(T,H)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,W)|0,r=r+Math.imul(S,z)|0,s=(s=s+Math.imul(S,q)|0)+Math.imul(C,z)|0,n=n+Math.imul(C,q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,K)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,tt)|0)+Math.imul(b,Q)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var Mt=(u+(r=r+Math.imul(c,nt)|0)|0)+((8191&(s=(s=s+Math.imul(c,ot)|0)+Math.imul(f,nt)|0))<<13)|0;u=((n=n+Math.imul(f,ot)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul($,Y),s=(s=Math.imul($,X))+Math.imul(D,Y)|0,n=Math.imul(D,X),r=r+Math.imul(B,H)|0,s=(s=s+Math.imul(B,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,r=r+Math.imul(T,z)|0,s=(s=s+Math.imul(T,q)|0)+Math.imul(A,z)|0,n=n+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(C,Z)|0,n=n+Math.imul(C,K)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(v,Q)|0,n=n+Math.imul(v,tt)|0,r=r+Math.imul(g,it)|0,s=(s=s+Math.imul(g,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var St=(u+(r=r+Math.imul(c,ht)|0)|0)+((8191&(s=(s=s+Math.imul(c,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((n=n+Math.imul(f,ut)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,Y),s=(s=Math.imul(P,X))+Math.imul(R,Y)|0,n=Math.imul(R,X),r=r+Math.imul($,H)|0,s=(s=s+Math.imul($,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,r=r+Math.imul(B,z)|0,s=(s=s+Math.imul(B,q)|0)+Math.imul(x,z)|0,n=n+Math.imul(x,q)|0,r=r+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(A,Z)|0,n=n+Math.imul(A,K)|0,r=r+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,tt)|0)+Math.imul(C,Q)|0,n=n+Math.imul(C,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,rt)|0,r=r+Math.imul(g,nt)|0,s=(s=s+Math.imul(g,ot)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ot)|0,r=r+Math.imul(m,ht)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,ut)|0;var Ct=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(s=(s=s+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((n=n+Math.imul(f,ft)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Y),s=(s=Math.imul(U,X))+Math.imul(N,Y)|0,n=Math.imul(N,X),r=r+Math.imul(P,H)|0,s=(s=s+Math.imul(P,W)|0)+Math.imul(R,H)|0,n=n+Math.imul(R,W)|0,r=r+Math.imul($,z)|0,s=(s=s+Math.imul($,q)|0)+Math.imul(D,z)|0,n=n+Math.imul(D,q)|0,r=r+Math.imul(B,Z)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,K)|0,r=r+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,tt)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,s=(s=s+Math.imul(S,rt)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,r=r+Math.imul(g,ht)|0,s=(s=s+Math.imul(g,ut)|0)+Math.imul(b,ht)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(m,ct)|0,s=(s=s+Math.imul(m,ft)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,ft)|0;var It=(u+(r=r+Math.imul(c,mt)|0)|0)+((8191&(s=(s=s+Math.imul(c,pt)|0)+Math.imul(f,mt)|0))<<13)|0;u=((n=n+Math.imul(f,pt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,H),s=(s=Math.imul(U,W))+Math.imul(N,H)|0,n=Math.imul(N,W),r=r+Math.imul(P,z)|0,s=(s=s+Math.imul(P,q)|0)+Math.imul(R,z)|0,n=n+Math.imul(R,q)|0,r=r+Math.imul($,Z)|0,s=(s=s+Math.imul($,K)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,K)|0,r=r+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,tt)|0)+Math.imul(x,Q)|0,n=n+Math.imul(x,tt)|0,r=r+Math.imul(T,it)|0,s=(s=s+Math.imul(T,rt)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,rt)|0,r=r+Math.imul(S,nt)|0,s=(s=s+Math.imul(S,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,r=r+Math.imul(w,ht)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,ut)|0,r=r+Math.imul(g,ct)|0,s=(s=s+Math.imul(g,ft)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,ft)|0;var Tt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,z),s=(s=Math.imul(U,q))+Math.imul(N,z)|0,n=Math.imul(N,q),r=r+Math.imul(P,Z)|0,s=(s=s+Math.imul(P,K)|0)+Math.imul(R,Z)|0,n=n+Math.imul(R,K)|0,r=r+Math.imul($,Q)|0,s=(s=s+Math.imul($,tt)|0)+Math.imul(D,Q)|0,n=n+Math.imul(D,tt)|0,r=r+Math.imul(B,it)|0,s=(s=s+Math.imul(B,rt)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,rt)|0,r=r+Math.imul(T,nt)|0,s=(s=s+Math.imul(T,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,s=(s=s+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,ut)|0,r=r+Math.imul(w,ct)|0,s=(s=s+Math.imul(w,ft)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,ft)|0;var At=(u+(r=r+Math.imul(g,mt)|0)|0)+((8191&(s=(s=s+Math.imul(g,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,Z),s=(s=Math.imul(U,K))+Math.imul(N,Z)|0,n=Math.imul(N,K),r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,tt)|0,r=r+Math.imul($,it)|0,s=(s=s+Math.imul($,rt)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,rt)|0,r=r+Math.imul(B,nt)|0,s=(s=s+Math.imul(B,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,r=r+Math.imul(T,ht)|0,s=(s=s+Math.imul(T,ut)|0)+Math.imul(A,ht)|0,n=n+Math.imul(A,ut)|0,r=r+Math.imul(S,ct)|0,s=(s=s+Math.imul(S,ft)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,ft)|0;var kt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((n=n+Math.imul(v,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),s=(s=Math.imul(U,tt))+Math.imul(N,Q)|0,n=Math.imul(N,tt),r=r+Math.imul(P,it)|0,s=(s=s+Math.imul(P,rt)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,rt)|0,r=r+Math.imul($,nt)|0,s=(s=s+Math.imul($,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,r=r+Math.imul(B,ht)|0,s=(s=s+Math.imul(B,ut)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,ut)|0,r=r+Math.imul(T,ct)|0,s=(s=s+Math.imul(T,ft)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,ft)|0;var Bt=(u+(r=r+Math.imul(S,mt)|0)|0)+((8191&(s=(s=s+Math.imul(S,pt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((n=n+Math.imul(C,pt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(U,it),s=(s=Math.imul(U,rt))+Math.imul(N,it)|0,n=Math.imul(N,rt),r=r+Math.imul(P,nt)|0,s=(s=s+Math.imul(P,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,r=r+Math.imul($,ht)|0,s=(s=s+Math.imul($,ut)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,ut)|0,r=r+Math.imul(B,ct)|0,s=(s=s+Math.imul(B,ft)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,ft)|0;var xt=(u+(r=r+Math.imul(T,mt)|0)|0)+((8191&(s=(s=s+Math.imul(T,pt)|0)+Math.imul(A,mt)|0))<<13)|0;u=((n=n+Math.imul(A,pt)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,nt),s=(s=Math.imul(U,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),r=r+Math.imul(P,ht)|0,s=(s=s+Math.imul(P,ut)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,ut)|0,r=r+Math.imul($,ct)|0,s=(s=s+Math.imul($,ft)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,ft)|0;var Et=(u+(r=r+Math.imul(B,mt)|0)|0)+((8191&(s=(s=s+Math.imul(B,pt)|0)+Math.imul(x,mt)|0))<<13)|0;u=((n=n+Math.imul(x,pt)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,ht),s=(s=Math.imul(U,ut))+Math.imul(N,ht)|0,n=Math.imul(N,ut),r=r+Math.imul(P,ct)|0,s=(s=s+Math.imul(P,ft)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,ft)|0;var $t=(u+(r=r+Math.imul($,mt)|0)|0)+((8191&(s=(s=s+Math.imul($,pt)|0)+Math.imul(D,mt)|0))<<13)|0;u=((n=n+Math.imul(D,pt)|0)+(s>>>13)|0)+($t>>>26)|0,$t&=67108863,r=Math.imul(U,ct),s=(s=Math.imul(U,ft))+Math.imul(N,ct)|0,n=Math.imul(N,ft);var Dt=(u+(r=r+Math.imul(P,mt)|0)|0)+((8191&(s=(s=s+Math.imul(P,pt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((n=n+Math.imul(R,pt)|0)+(s>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(u+(r=Math.imul(U,mt))|0)+((8191&(s=(s=Math.imul(U,pt))+Math.imul(N,mt)|0))<<13)|0;return u=((n=Math.imul(N,pt))+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h[0]=_t,h[1]=gt,h[2]=bt,h[3]=yt,h[4]=wt,h[5]=vt,h[6]=Mt,h[7]=St,h[8]=Ct,h[9]=It,h[10]=Tt,h[11]=At,h[12]=kt,h[13]=Bt,h[14]=xt,h[15]=Et,h[16]=$t,h[17]=Dt,h[18]=Lt,0!==u&&(h[19]=u,i.length++),i};function m(t,e,i){return(new p).mulp(t,e,i)}function p(t,e){this.x=t,this.y=e}Math.imul||(d=f),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):i<63?f(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,h=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=h;u++){var l=n-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;a=67108863&(f=f+a|0),s+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}(this,t,e):m(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},p.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},p.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},p.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<s;l+=a)for(var c=h,f=u,d=0;d<o;d++){var m=i[l+d],p=r[l+d],_=i[l+d+o],g=r[l+d+o],b=c*_-f*g;g=c*g+f*_,_=b,i[l+d]=m+_,r[l+d]=p+g,i[l+d+o]=m-_,r[l+d+o]=p-g,d!==a&&(b=h*c-u*f,f=h*f+u*c,c=b)}},p.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},p.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},p.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},p.prototype.convert13b=function(t,e,i,r){for(var s=0,n=0;n<e;n++)s+=0|t[n],i[2*n]=8191&s,s>>>=13,i[2*n+1]=8191&s,s>>>=13;for(n=2*e;n<r;++n)i[n]=0},p.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},p.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,n,a,h,r,s),this.transform(u,n,l,c,r,s);for(var d=0;d<r;d++){var m=a[d]*l[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*l[d],a[d]=m}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,s=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=(t.words[r]&1<<s)>>>s}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(e=0;e<this.length;e++){var o=this.words[e]&s,a=(0|this.words[e])-o<<i;this.words[e]=a|n,n=o>>>26-i}n&&(this.words[e]=n,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(t){return this.iushln(t)},s.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var s=t%26,n=Math.min((t-s)/26,this.length),o=67108863^67108863>>>s<<s,a=i;if(r-=n,r=Math.max(0,r),a){for(var h=0;h<n;h++)a.words[h]=this.words[h];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,h=0;h<this.length;h++)this.words[h]=this.words[h+n];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=r);h--){var l=0|this.words[h];this.words[h]=u<<26-s|l>>>s,u=l&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},s.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var r,s,n=t.length+i;this._expand(n);var o=0;for(r=0;r<t.length;r++){s=(0|this.words[r+i])+o;var a=(0|t.words[r])*e;o=((s-=67108863&a)>>26)-(a/67108864|0),this.words[r+i]=67108863&s}for(;r<this.length-i;r++)o=(s=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&s;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(s=-(0|this.words[r])+o)>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,n,o},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},s.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new s(1),n=new s(0),o=new s(0),a=new s(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.iushrn(1),n.iushrn(1);for(var d=0,m=1;0==(i.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),n.isub(a)):(i.isub(e),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:i.iushln(h)}},s.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,n=new s(1),o=new s(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,u=1;0==(e.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(e.iushrn(h);h-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o)):(i.isub(e),o.isub(n))}return(r=0===e.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,n=i;0!==s&&n<this.length;n++){var o=0|this.words[n];s=(o+=s)>>>26,o&=67108863,this.words[n]=o}return 0!==s&&(this.words[n]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new M(t)},s.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return this._forceRed(t)},s.prototype.redAdd=function(t){return this.red.add(this,t)},s.prototype.redIAdd=function(t){return this.red.iadd(this,t)},s.prototype.redSub=function(t){return this.red.sub(this,t)},s.prototype.redISub=function(t){return this.red.isub(this,t)},s.prototype.redShl=function(t){return this.red.shl(this,t)},s.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},r(b,g),b.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,t.words[r-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(y,g),r(w,g),r(v,g),v.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new y;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new v}return _[t]=e,e},M.prototype._verify1=function(t){},M.prototype._verify2=function(t,e){},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new s(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),r=0;!i.isZero()&&0===i.andln(1);)r++,i.iushrn(1);var n=new s(1).toRed(this),o=n.redNeg(),a=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,a).cmp(o);)h.redIAdd(o);for(var u=this.pow(h,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=r;0!==c.cmp(n);){for(var d=c,m=0;0!==d.cmp(n);m++)d=d.redSqr();var p=this.pow(u,new s(1).iushln(f-m-1));l=l.redMul(p),u=p.redSqr(),c=c.redMul(u),f=m}return l},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=h-1;l>=0;l--){var c=u>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},r(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_$bn_111,this),_$bn_111=_$bn_111.exports;var _$utils_139={},__utils_139=_$utils_139;function zero2(t){return 1===t.length?"0"+t:t}function toHex(t){for(var e="",i=0;i<t.length;i++)e+=zero2(t[i].toString(16));return e}__utils_139.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)i[r]=0|t[r];return i}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var s=t.charCodeAt(r),n=s>>8,o=255&s;n?i.push(n,o):i.push(o)}return i},__utils_139.zero2=zero2,__utils_139.toHex=toHex,__utils_139.encode=function(t,e){return"hex"===e?toHex(t):t};var _$utils_110={},__utils_110=_$utils_110;__utils_110.assert=_$minimalisticAssert_138,__utils_110.toArray=_$utils_139.toArray,__utils_110.zero2=_$utils_139.zero2,__utils_110.toHex=_$utils_139.toHex,__utils_110.encode=_$utils_139.encode,__utils_110.getNAF=function(t,e,i){var r,s=new Array(Math.max(t.bitLength(),i)+1);for(r=0;r<s.length;r+=1)s[r]=0;var n=1<<e+1,o=t.clone();for(r=0;r<s.length;r++){var a,h=o.andln(n-1);o.isOdd()?(a=h>(n>>1)-1?(n>>1)-h:h,o.isubn(a)):a=0,s[r]=a,o.iushrn(1)}return s},__utils_110.getJSF=function(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var r,s=0,n=0;t.cmpn(-s)>0||e.cmpn(-n)>0;){var o,a,h=t.andln(3)+s&3,u=e.andln(3)+n&3;3===h&&(h=-1),3===u&&(u=-1),o=0==(1&h)?0:3!=(r=t.andln(7)+s&7)&&5!==r||2!==u?h:-h,i[0].push(o),a=0==(1&u)?0:3!=(r=e.andln(7)+n&7)&&5!==r||2!==h?u:-u,i[1].push(a),2*s===o+1&&(s=1-s),2*n===a+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return i},__utils_110.cachedProperty=function(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},__utils_110.parseBytes=function(t){return"string"==typeof t?__utils_110.toArray(t,"hex"):t},__utils_110.intFromLE=function(t){return new _$bn_111(t,"hex","le")};var _$base_97={},getNAF=_$utils_110.getNAF,getJSF=_$utils_110.getJSF;function BaseCurve(t,e){this.type=t,this.p=new _$bn_111(e.p,16),this.red=e.prime?_$bn_111.red(e.prime):_$bn_111.mont(this.p),this.zero=new _$bn_111(0).toRed(this.red),this.one=new _$bn_111(1).toRed(this.red),this.two=new _$bn_111(2).toRed(this.red),this.n=e.n&&new _$bn_111(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}_$utils_110.assert,_$base_97=BaseCurve,BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(t,e){var i=t._getDoubles(),r=getNAF(e,1,this._bitLength),s=(1<<i.step+1)-(i.step%2==0?2:1);s/=3;var n,o,a=[];for(n=0;n<r.length;n+=i.step){o=0;for(var h=n+i.step-1;h>=n;h--)o=(o<<1)+r[h];a.push(o)}for(var u=this.jpoint(null,null,null),l=this.jpoint(null,null,null),c=s;c>0;c--){for(n=0;n<a.length;n++)(o=a[n])===c?l=l.mixedAdd(i.points[n]):o===-c&&(l=l.mixedAdd(i.points[n].neg()));u=u.add(l)}return u.toP()},BaseCurve.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var s=r.points,n=getNAF(e,i,this._bitLength),o=this.jpoint(null,null,null),a=n.length-1;a>=0;a--){for(var h=0;a>=0&&0===n[a];a--)h++;if(a>=0&&h++,o=o.dblp(h),a<0)break;var u=n[a];o="affine"===t.type?u>0?o.mixedAdd(s[u-1>>1]):o.mixedAdd(s[-u-1>>1].neg()):u>0?o.add(s[u-1>>1]):o.add(s[-u-1>>1].neg())}return"affine"===t.type?o.toP():o},BaseCurve.prototype._wnafMulAdd=function(t,e,i,r,s){var n,o,a,h=this._wnafT1,u=this._wnafT2,l=this._wnafT3,c=0;for(n=0;n<r;n++){var f=(a=e[n])._getNAFPoints(t);h[n]=f.wnd,u[n]=f.points}for(n=r-1;n>=1;n-=2){var d=n-1,m=n;if(1===h[d]&&1===h[m]){var p=[e[d],null,null,e[m]];0===e[d].y.cmp(e[m].y)?(p[1]=e[d].add(e[m]),p[2]=e[d].toJ().mixedAdd(e[m].neg())):0===e[d].y.cmp(e[m].y.redNeg())?(p[1]=e[d].toJ().mixedAdd(e[m]),p[2]=e[d].add(e[m].neg())):(p[1]=e[d].toJ().mixedAdd(e[m]),p[2]=e[d].toJ().mixedAdd(e[m].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],g=getJSF(i[d],i[m]);for(c=Math.max(g[0].length,c),l[d]=new Array(c),l[m]=new Array(c),o=0;o<c;o++){var b=0|g[0][o],y=0|g[1][o];l[d][o]=_[3*(b+1)+(y+1)],l[m][o]=0,u[d]=p}}else l[d]=getNAF(i[d],h[d],this._bitLength),l[m]=getNAF(i[m],h[m],this._bitLength),c=Math.max(l[d].length,c),c=Math.max(l[m].length,c)}var w=this.jpoint(null,null,null),v=this._wnafT4;for(n=c;n>=0;n--){for(var M=0;n>=0;){var S=!0;for(o=0;o<r;o++)v[o]=0|l[o][n],0!==v[o]&&(S=!1);if(!S)break;M++,n--}if(n>=0&&M++,w=w.dblp(M),n<0)break;for(o=0;o<r;o++){var C=v[o];0!==C&&(C>0?a=u[o][C-1>>1]:C<0&&(a=u[o][-C-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(n=0;n<r;n++)u[n]=null;return s?w:w.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(t,e){t=_$utils_110.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]||t[0],this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(t){return this.encode(t,!0)},BasePoint.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},BasePoint.prototype.encode=function(t,e){return _$utils_110.encode(this._encode(e),t)},BasePoint.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},BasePoint.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},BasePoint.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,s=0;s<e;s+=t){for(var n=0;n<t;n++)r=r.dbl();i.push(r)}return{step:t,points:i}},BasePoint.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),s=1;s<i;s++)e[s]=e[s-1].add(r);return{wnd:t,points:e}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e};var _$short_101={};function ShortCurve(t){_$base_97.call(this,"short",t),this.a=new _$bn_111(t.a,16).toRed(this.red),this.b=new _$bn_111(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function Point(t,e,i,r){_$base_97.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new _$bn_111(e,16),this.y=new _$bn_111(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(t,e,i,r){_$base_97.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new _$bn_111(0)):(this.x=new _$bn_111(e,16),this.y=new _$bn_111(i,16),this.z=new _$bn_111(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}_$utils_110.assert,_$inherits_browser_130(ShortCurve,_$base_97),_$short_101=ShortCurve,ShortCurve.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new _$bn_111(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)i=new _$bn_111(t.lambda,16);else{var s=this._getEndoRoots(this.n);i=0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))?s[0]:s[1]}return{beta:e,lambda:i,basis:t.basis?t.basis.map((function(t){return{a:new _$bn_111(t.a,16),b:new _$bn_111(t.b,16)}})):this._getEndoBasis(i)}}},ShortCurve.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:_$bn_111.mont(t),i=new _$bn_111(2).toRed(e).redInvm(),r=i.redNeg(),s=new _$bn_111(3).toRed(e).redNeg().redSqrt().redMul(i);return[r.redAdd(s).fromRed(),r.redSub(s).fromRed()]},ShortCurve.prototype._getEndoBasis=function(t){for(var e,i,r,s,n,o,a,h,u,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),c=t,f=this.n.clone(),d=new _$bn_111(1),m=new _$bn_111(0),p=new _$bn_111(0),_=new _$bn_111(1),g=0;0!==c.cmpn(0);){var b=f.div(c);h=f.sub(b.mul(c)),u=p.sub(b.mul(d));var y=_.sub(b.mul(m));if(!r&&h.cmp(l)<0)e=a.neg(),i=d,r=h.neg(),s=u;else if(r&&2==++g)break;a=h,f=c,c=h,p=d,d=u,_=m,m=y}n=h.neg(),o=u;var w=r.sqr().add(s.sqr());return n.sqr().add(o.sqr()).cmp(w)>=0&&(n=e,o=i),r.negative&&(r=r.neg(),s=s.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:r,b:s},{a:n,b:o}]},ShortCurve.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],s=r.b.mul(t).divRound(this.n),n=i.b.neg().mul(t).divRound(this.n),o=s.mul(i.a),a=n.mul(r.a),h=s.mul(i.b),u=n.mul(r.b);return{k1:t.sub(o).sub(a),k2:h.add(u).neg()}},ShortCurve.prototype.pointFromX=function(t,e){(t=new _$bn_111(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var s=r.fromRed().isOdd();return(e&&!s||!e&&s)&&(r=r.redNeg()),this.point(t,r)},ShortCurve.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),s=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(s).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,s=this._endoWnafT2,n=0;n<t.length;n++){var o=this._endoSplit(e[n]),a=t[n],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),r[2*n]=a,r[2*n+1]=h,s[2*n]=o.k1,s[2*n+1]=o.k2}for(var u=this._wnafMulAdd(1,r,s,2*n,i),l=0;l<2*n;l++)r[l]=null,s[l]=null;return u},_$inherits_browser_130(Point,_$base_97.BasePoint),ShortCurve.prototype.point=function(t,e,i){return new Point(this,t,e,i)},ShortCurve.prototype.pointFromJSON=function(t,e){return Point.fromJSON(this,t,e)},Point.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function s(e){return t.point(e[0],e[1],i)}var n=e[2];return r.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[r].concat(n.doubles.points.map(s))},naf:n.naf&&{wnd:n.naf.wnd,points:[r].concat(n.naf.points.map(s))}},r},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.inf},Point.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},Point.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),n=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)},Point.prototype.getX=function(){return this.x.fromRed()},Point.prototype.getY=function(){return this.y.fromRed()},Point.prototype.mul=function(t){return t=new _$bn_111(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Point.prototype.mulAdd=function(t,e,i){var r=[this,e],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,s):this.curve._wnafMulAdd(1,r,s,2)},Point.prototype.jmulAdd=function(t,e,i){var r=[this,e],s=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,s,!0):this.curve._wnafMulAdd(1,r,s,2,!0)},Point.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},Point.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},Point.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},_$inherits_browser_130(JPoint,_$base_97.BasePoint),ShortCurve.prototype.jpoint=function(t,e,i){return new JPoint(this,t,e,i)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),s=t.x.redMul(i),n=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),a=r.redSub(s),h=n.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),c=r.redMul(u),f=h.redSqr().redIAdd(l).redISub(c).redISub(c),d=h.redMul(c.redISub(f)).redISub(n.redMul(l)),m=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,m)},JPoint.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),s=this.y,n=t.y.redMul(e).redMul(this.z),o=i.redSub(r),a=s.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),u=h.redMul(o),l=i.redMul(h),c=a.redSqr().redIAdd(u).redISub(l).redISub(l),f=a.redMul(l.redISub(c)).redISub(s.redMul(u)),d=this.z.redMul(o);return this.curve.jpoint(c,f,d)},JPoint.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,s=this.curve.tinv,n=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),u=o.redAdd(o);for(e=0;e<t;e++){var l=n.redSqr(),c=u.redSqr(),f=c.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(h)),m=n.redMul(c),p=d.redSqr().redISub(m.redAdd(m)),_=m.redISub(p),g=d.redMul(_);g=g.redIAdd(g).redISub(f);var b=u.redMul(a);e+1<t&&(h=h.redMul(f)),n=p,a=b,u=g}return this.curve.jpoint(n,u.redMul(s),a)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(r).redISub(n);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r),h=a.redSqr().redISub(o).redISub(o),u=n.redIAdd(n);u=(u=u.redIAdd(u)).redIAdd(u),t=h,e=a.redMul(o.redISub(h)).redISub(u),i=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),c=this.y.redSqr(),f=c.redSqr(),d=this.x.redAdd(c).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var m=l.redAdd(l).redIAdd(l),p=m.redSqr(),_=f.redIAdd(f);_=(_=_.redIAdd(_)).redIAdd(_),t=p.redISub(d).redISub(d),e=m.redMul(d.redISub(t)).redISub(_),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},JPoint.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(r).redISub(n);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;var u=n.redIAdd(n);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(o.redISub(h)).redISub(u),i=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),c=this.y.redSqr(),f=this.x.redMul(c),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var m=f.redIAdd(f),p=(m=m.redIAdd(m)).redAdd(m);t=d.redSqr().redISub(p),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(l);var _=c.redSqr();_=(_=(_=_.redIAdd(_)).redIAdd(_)).redIAdd(_),e=d.redMul(m.redISub(t)).redISub(_)}return this.curve.jpoint(t,e,i)},JPoint.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,s=r.redSqr().redSqr(),n=e.redSqr(),o=i.redSqr(),a=n.redAdd(n).redIAdd(n).redIAdd(t.redMul(s)),h=e.redAdd(e),u=(h=h.redIAdd(h)).redMul(o),l=a.redSqr().redISub(u.redAdd(u)),c=u.redISub(l),f=o.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(c).redISub(f),m=i.redAdd(i).redMul(r);return this.curve.jpoint(l,d,m)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),s=t.redAdd(t).redIAdd(t),n=s.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(r),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(n)).redSqr(),h=r.redIAdd(r);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var u=s.redIAdd(o).redSqr().redISub(n).redISub(a).redISub(h),l=e.redMul(u);l=(l=l.redIAdd(l)).redIAdd(l);var c=this.x.redMul(a).redISub(l);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.y.redMul(u.redMul(h.redISub(u)).redISub(o.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(c,f,d)},JPoint.prototype.mul=function(t,e){return t=new _$bn_111(t,e),this.curve._wnafMul(this,t)},JPoint.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),s=i.redMul(t.z);return 0===this.y.redMul(s).redISub(t.y.redMul(r)).cmpn(0)},JPoint.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),s=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),0===this.x.cmp(i))return!0}},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var _$mont_100={};function MontCurve(t){_$base_97.call(this,"mont",t),this.a=new _$bn_111(t.a,16).toRed(this.red),this.b=new _$bn_111(t.b,16).toRed(this.red),this.i4=new _$bn_111(4).toRed(this.red).redInvm(),this.two=new _$bn_111(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function __Point_100(t,e,i){_$base_97.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new _$bn_111(e,16),this.z=new _$bn_111(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}_$inherits_browser_130(MontCurve,_$base_97),_$mont_100=MontCurve,MontCurve.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),r=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},_$inherits_browser_130(__Point_100,_$base_97.BasePoint),MontCurve.prototype.decodePoint=function(t,e){return this.point(_$utils_110.toArray(t,e),1)},MontCurve.prototype.point=function(t,e){return new __Point_100(this,t,e)},MontCurve.prototype.pointFromJSON=function(t){return __Point_100.fromJSON(this,t)},__Point_100.prototype.precompute=function(){},__Point_100.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},__Point_100.fromJSON=function(t,e){return new __Point_100(t,e[0],e[1]||t.one)},__Point_100.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},__Point_100.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},__Point_100.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e),r=t.redMul(e),s=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,s)},__Point_100.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},__Point_100.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),s=t.x.redAdd(t.z),n=t.x.redSub(t.z).redMul(i),o=s.redMul(r),a=e.z.redMul(n.redAdd(o).redSqr()),h=e.x.redMul(n.redISub(o).redSqr());return this.curve.point(a,h)},__Point_100.prototype.mul=function(t){for(var e=t.clone(),i=this,r=this.curve.point(null,null),s=[];0!==e.cmpn(0);e.iushrn(1))s.push(e.andln(1));for(var n=s.length-1;n>=0;n--)0===s[n]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},__Point_100.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},__Point_100.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},__Point_100.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},__Point_100.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},__Point_100.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var _$edwards_98={};function EdwardsCurve(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,_$base_97.call(this,"edwards",t),this.a=new _$bn_111(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new _$bn_111(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new _$bn_111(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),this.oneC=1==(0|t.c)}function __Point_98(t,e,i,r,s){_$base_97.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new _$bn_111(e,16),this.y=new _$bn_111(i,16),this.z=r?new _$bn_111(r,16):this.curve.one,this.t=s&&new _$bn_111(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}_$utils_110.assert,_$inherits_browser_130(EdwardsCurve,_$base_97),_$edwards_98=EdwardsCurve,EdwardsCurve.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},EdwardsCurve.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},EdwardsCurve.prototype.jpoint=function(t,e,i,r){return this.point(t,e,i,r)},EdwardsCurve.prototype.pointFromX=function(t,e){(t=new _$bn_111(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),n=r.redMul(s.redInvm()),o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var a=o.fromRed().isOdd();return(e&&!a||!e&&a)&&(o=o.redNeg()),this.point(t,o)},EdwardsCurve.prototype.pointFromY=function(t,e){(t=new _$bn_111(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),n=r.redMul(s.redInvm());if(0===n.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==e&&(o=o.redNeg()),this.point(o,t)},EdwardsCurve.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),r=e.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return 0===r.cmp(s)},_$inherits_browser_130(__Point_98,_$base_97.BasePoint),EdwardsCurve.prototype.pointFromJSON=function(t){return __Point_98.fromJSON(this,t)},EdwardsCurve.prototype.point=function(t,e,i,r){return new __Point_98(this,t,e,i,r)},__Point_98.fromJSON=function(t,e){return new __Point_98(t,e[0],e[1],e[2])},__Point_98.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},__Point_98.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},__Point_98.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(t),s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),n=r.redAdd(e),o=n.redSub(i),a=r.redSub(e),h=s.redMul(o),u=n.redMul(a),l=s.redMul(a),c=o.redMul(n);return this.curve.point(h,u,c,l)},__Point_98.prototype._projDbl=function(){var t,e,i,r,s,n,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var u=(r=this.curve._mulA(a)).redAdd(h);this.zOne?(t=o.redSub(a).redSub(h).redMul(u.redSub(this.curve.two)),e=u.redMul(r.redSub(h)),i=u.redSqr().redSub(u).redSub(u)):(s=this.z.redSqr(),n=u.redSub(s).redISub(s),t=o.redSub(a).redISub(h).redMul(n),e=u.redMul(r.redSub(h)),i=u.redMul(n))}else r=a.redAdd(h),s=this.curve._mulC(this.z).redSqr(),n=r.redSub(s).redSub(s),t=this.curve._mulC(o.redISub(r)).redMul(n),e=this.curve._mulC(r).redMul(a.redISub(h)),i=r.redMul(n);return this.curve.point(t,e,i)},__Point_98.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},__Point_98.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),s=this.z.redMul(t.z.redAdd(t.z)),n=i.redSub(e),o=s.redSub(r),a=s.redAdd(r),h=i.redAdd(e),u=n.redMul(o),l=a.redMul(h),c=n.redMul(h),f=o.redMul(a);return this.curve.point(u,l,f,c)},__Point_98.prototype._projAdd=function(t){var e,i,r=this.z.redMul(t.z),s=r.redSqr(),n=this.x.redMul(t.x),o=this.y.redMul(t.y),a=this.curve.d.redMul(n).redMul(o),h=s.redSub(a),u=s.redAdd(a),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(n).redISub(o),c=r.redMul(h).redMul(l);return this.curve.twisted?(e=r.redMul(u).redMul(o.redSub(this.curve._mulA(n))),i=h.redMul(u)):(e=r.redMul(u).redMul(o.redSub(n)),i=this.curve._mulC(h).redMul(u)),this.curve.point(c,e,i)},__Point_98.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},__Point_98.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},__Point_98.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},__Point_98.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},__Point_98.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},__Point_98.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},__Point_98.prototype.getX=function(){return this.normalize(),this.x.fromRed()},__Point_98.prototype.getY=function(){return this.normalize(),this.y.fromRed()},__Point_98.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},__Point_98.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},__Point_98.prototype.toP=__Point_98.prototype.normalize,__Point_98.prototype.mixedAdd=__Point_98.prototype.add;var _$curve_99={},curve=_$curve_99;curve.base=_$base_97,curve.short=_$short_101,curve.mont=_$mont_100,curve.edwards=_$edwards_98;var _$utils_127={};function isSurrogatePair(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function htonl(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function __zero2_127(t){return 1===t.length?"0"+t:t}function zero8(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}_$utils_127.inherits=_$inherits_browser_130,_$utils_127.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),s=0;s<t.length;s+=2)i.push(parseInt(t[s]+t[s+1],16))}else for(var r=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);n<128?i[r++]=n:n<2048?(i[r++]=n>>6|192,i[r++]=63&n|128):isSurrogatePair(t,s)?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++s)),i[r++]=n>>18|240,i[r++]=n>>12&63|128,i[r++]=n>>6&63|128,i[r++]=63&n|128):(i[r++]=n>>12|224,i[r++]=n>>6&63|128,i[r++]=63&n|128)}else for(s=0;s<t.length;s++)i[s]=0|t[s];return i},_$utils_127.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=__zero2_127(t[i].toString(16));return e},_$utils_127.htonl=htonl,_$utils_127.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var s=t[r];"little"===e&&(s=htonl(s)),i+=zero8(s.toString(16))}return i},_$utils_127.zero2=__zero2_127,_$utils_127.zero8=zero8,_$utils_127.join32=function(t,e,i,r){for(var s=new Array((i-e)/4),n=0,o=e;n<s.length;n++,o+=4){var a;a="big"===r?t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],s[n]=a>>>0}return s},_$utils_127.split32=function(t,e){for(var i=new Array(4*t.length),r=0,s=0;r<t.length;r++,s+=4){var n=t[r];"big"===e?(i[s]=n>>>24,i[s+1]=n>>>16&255,i[s+2]=n>>>8&255,i[s+3]=255&n):(i[s+3]=n>>>24,i[s+2]=n>>>16&255,i[s+1]=n>>>8&255,i[s]=255&n)}return i},_$utils_127.rotr32=function(t,e){return t>>>e|t<<32-e},_$utils_127.rotl32=function(t,e){return t<<e|t>>>32-e},_$utils_127.sum32=function(t,e){return t+e>>>0},_$utils_127.sum32_3=function(t,e,i){return t+e+i>>>0},_$utils_127.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},_$utils_127.sum32_5=function(t,e,i,r,s){return t+e+i+r+s>>>0},_$utils_127.sum64=function(t,e,i,r){var s=t[e],n=r+t[e+1]>>>0,o=(n<r?1:0)+i+s;t[e]=o>>>0,t[e+1]=n},_$utils_127.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},_$utils_127.sum64_lo=function(t,e,i,r){return e+r>>>0},_$utils_127.sum64_4_hi=function(t,e,i,r,s,n,o,a){var h=0,u=e;return h+=(u=u+r>>>0)<e?1:0,h+=(u=u+n>>>0)<n?1:0,t+i+s+o+(h+=(u=u+a>>>0)<a?1:0)>>>0},_$utils_127.sum64_4_lo=function(t,e,i,r,s,n,o,a){return e+r+n+a>>>0},_$utils_127.sum64_5_hi=function(t,e,i,r,s,n,o,a,h,u){var l=0,c=e;return l+=(c=c+r>>>0)<e?1:0,l+=(c=c+n>>>0)<n?1:0,l+=(c=c+a>>>0)<a?1:0,t+i+s+o+h+(l+=(c=c+u>>>0)<u?1:0)>>>0},_$utils_127.sum64_5_lo=function(t,e,i,r,s,n,o,a,h,u){return e+r+n+a+u>>>0},_$utils_127.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},_$utils_127.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},_$utils_127.shr64_hi=function(t,e,i){return t>>>i},_$utils_127.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0};var _$common_117={};function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}_$common_117.BlockHash=BlockHash,BlockHash.prototype.update=function(t,e){if(t=_$utils_127.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=_$utils_127.join32(t,0,t.length-i,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this},BlockHash.prototype.digest=function(t){return this.update(this._pad()),this._digest(t)},BlockHash.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var s=1;s<i;s++)r[s]=0;if(t<<=3,"big"===this.endian){for(var n=8;n<this.padLength;n++)r[s++]=0;r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=t>>>24&255,r[s++]=t>>>16&255,r[s++]=t>>>8&255,r[s++]=255&t}else for(r[s++]=255&t,r[s++]=t>>>8&255,r[s++]=t>>>16&255,r[s++]=t>>>24&255,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,n=8;n<this.padLength;n++)r[s++]=0;return r};var _$common_126={},rotr32=_$utils_127.rotr32;function ch32(t,e,i){return t&e^~t&i}function maj32(t,e,i){return t&e^t&i^e&i}function p32(t,e,i){return t^e^i}_$common_126.ft_1=function(t,e,i,r){return 0===t?ch32(e,i,r):1===t||3===t?p32(e,i,r):2===t?maj32(e,i,r):void 0},_$common_126.ch32=ch32,_$common_126.maj32=maj32,_$common_126.s0_256=function(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)},_$common_126.s1_256=function(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)},_$common_126.g0_256=function(t){return rotr32(t,7)^rotr32(t,18)^t>>>3},_$common_126.g1_256=function(t){return rotr32(t,17)^rotr32(t,19)^t>>>10};var _$1_121={},rotl32=_$utils_127.rotl32,sum32=_$utils_127.sum32,sum32_5=_$utils_127.sum32_5,ft_1=_$common_126.ft_1,__BlockHash_121=_$common_117.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;__BlockHash_121.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}_$utils_127.inherits(SHA1,__BlockHash_121),_$1_121=SHA1,SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=rotl32(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4];for(r=0;r<i.length;r++){var u=~~(r/20),l=sum32_5(rotl32(s,5),ft_1(u,n,o,a),h,i[r],sha1_K[u]);h=a,a=o,o=rotl32(n,30),n=s,s=l}this.h[0]=sum32(this.h[0],s),this.h[1]=sum32(this.h[1],n),this.h[2]=sum32(this.h[2],o),this.h[3]=sum32(this.h[3],a),this.h[4]=sum32(this.h[4],h)},SHA1.prototype._digest=function(t){return"hex"===t?_$utils_127.toHex32(this.h,"big"):_$utils_127.split32(this.h,"big")};var _$256_123={},__sum32_123=_$utils_127.sum32,sum32_4=_$utils_127.sum32_4,__sum32_5_123=_$utils_127.sum32_5,__ch32_123=_$common_126.ch32,__maj32_123=_$common_126.maj32,s0_256=_$common_126.s0_256,s1_256=_$common_126.s1_256,g0_256=_$common_126.g0_256,g1_256=_$common_126.g1_256,__BlockHash_123=_$common_117.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;__BlockHash_123.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}_$utils_127.inherits(SHA256,__BlockHash_123),_$256_123=SHA256,SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=sum32_4(g1_256(i[r-2]),i[r-7],g0_256(i[r-15]),i[r-16]);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],u=this.h[5],l=this.h[6],c=this.h[7];for(r=0;r<i.length;r++){var f=__sum32_5_123(c,s1_256(h),__ch32_123(h,u,l),this.k[r],i[r]),d=__sum32_123(s0_256(s),__maj32_123(s,n,o));c=l,l=u,u=h,h=__sum32_123(a,f),a=o,o=n,n=s,s=__sum32_123(f,d)}this.h[0]=__sum32_123(this.h[0],s),this.h[1]=__sum32_123(this.h[1],n),this.h[2]=__sum32_123(this.h[2],o),this.h[3]=__sum32_123(this.h[3],a),this.h[4]=__sum32_123(this.h[4],h),this.h[5]=__sum32_123(this.h[5],u),this.h[6]=__sum32_123(this.h[6],l),this.h[7]=__sum32_123(this.h[7],c)},SHA256.prototype._digest=function(t){return"hex"===t?_$utils_127.toHex32(this.h,"big"):_$utils_127.split32(this.h,"big")};var _$224_122={};function SHA224(){if(!(this instanceof SHA224))return new SHA224;_$256_123.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}_$utils_127.inherits(SHA224,_$256_123),_$224_122=SHA224,SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(t){return"hex"===t?_$utils_127.toHex32(this.h.slice(0,7),"big"):_$utils_127.split32(this.h.slice(0,7),"big")};var _$512_125={},rotr64_hi=_$utils_127.rotr64_hi,rotr64_lo=_$utils_127.rotr64_lo,shr64_hi=_$utils_127.shr64_hi,shr64_lo=_$utils_127.shr64_lo,sum64=_$utils_127.sum64,sum64_hi=_$utils_127.sum64_hi,sum64_lo=_$utils_127.sum64_lo,sum64_4_hi=_$utils_127.sum64_4_hi,sum64_4_lo=_$utils_127.sum64_4_lo,sum64_5_hi=_$utils_127.sum64_5_hi,sum64_5_lo=_$utils_127.sum64_5_lo,__BlockHash_125=_$common_117.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function __SHA512_125(){if(!(this instanceof __SHA512_125))return new __SHA512_125;__BlockHash_125.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}function ch64_hi(t,e,i,r,s){var n=t&i^~t&s;return n<0&&(n+=4294967296),n}function ch64_lo(t,e,i,r,s,n){var o=e&r^~e&n;return o<0&&(o+=4294967296),o}function maj64_hi(t,e,i,r,s){var n=t&i^t&s^i&s;return n<0&&(n+=4294967296),n}function maj64_lo(t,e,i,r,s,n){var o=e&r^e&n^r&n;return o<0&&(o+=4294967296),o}function s0_512_hi(t,e){var i=rotr64_hi(t,e,28)^rotr64_hi(e,t,2)^rotr64_hi(e,t,7);return i<0&&(i+=4294967296),i}function s0_512_lo(t,e){var i=rotr64_lo(t,e,28)^rotr64_lo(e,t,2)^rotr64_lo(e,t,7);return i<0&&(i+=4294967296),i}function s1_512_hi(t,e){var i=rotr64_hi(t,e,14)^rotr64_hi(t,e,18)^rotr64_hi(e,t,9);return i<0&&(i+=4294967296),i}function s1_512_lo(t,e){var i=rotr64_lo(t,e,14)^rotr64_lo(t,e,18)^rotr64_lo(e,t,9);return i<0&&(i+=4294967296),i}function g0_512_hi(t,e){var i=rotr64_hi(t,e,1)^rotr64_hi(t,e,8)^shr64_hi(t,e,7);return i<0&&(i+=4294967296),i}function g0_512_lo(t,e){var i=rotr64_lo(t,e,1)^rotr64_lo(t,e,8)^shr64_lo(t,e,7);return i<0&&(i+=4294967296),i}function g1_512_hi(t,e){var i=rotr64_hi(t,e,19)^rotr64_hi(e,t,29)^shr64_hi(t,e,6);return i<0&&(i+=4294967296),i}function g1_512_lo(t,e){var i=rotr64_lo(t,e,19)^rotr64_lo(e,t,29)^shr64_lo(t,e,6);return i<0&&(i+=4294967296),i}_$utils_127.inherits(__SHA512_125,__BlockHash_125),_$512_125=__SHA512_125,__SHA512_125.blockSize=1024,__SHA512_125.outSize=512,__SHA512_125.hmacStrength=192,__SHA512_125.padLength=128,__SHA512_125.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var s=g1_512_hi(i[r-4],i[r-3]),n=g1_512_lo(i[r-4],i[r-3]),o=i[r-14],a=i[r-13],h=g0_512_hi(i[r-30],i[r-29]),u=g0_512_lo(i[r-30],i[r-29]),l=i[r-32],c=i[r-31];i[r]=sum64_4_hi(s,n,o,a,h,u,l,c),i[r+1]=sum64_4_lo(s,n,o,a,h,u,l,c)}},__SHA512_125.prototype._update=function(t,e){this._prepareBlock(t,e);for(var i=this.W,r=this.h[0],s=this.h[1],n=this.h[2],o=this.h[3],a=this.h[4],h=this.h[5],u=this.h[6],l=this.h[7],c=this.h[8],f=this.h[9],d=this.h[10],m=this.h[11],p=this.h[12],_=this.h[13],g=this.h[14],b=this.h[15],y=0;y<i.length;y+=2){var w=g,v=b,M=s1_512_hi(c,f),S=s1_512_lo(c,f),C=ch64_hi(c,f,d,m,p),I=ch64_lo(c,f,d,m,p,_),T=this.k[y],A=this.k[y+1],k=i[y],B=i[y+1],x=sum64_5_hi(w,v,M,S,C,I,T,A,k,B),E=sum64_5_lo(w,v,M,S,C,I,T,A,k,B);w=s0_512_hi(r,s),v=s0_512_lo(r,s),M=maj64_hi(r,s,n,o,a),S=maj64_lo(r,s,n,o,a,h);var $=sum64_hi(w,v,M,S),D=sum64_lo(w,v,M,S);g=p,b=_,p=d,_=m,d=c,m=f,c=sum64_hi(u,l,x,E),f=sum64_lo(l,l,x,E),u=a,l=h,a=n,h=o,n=r,o=s,r=sum64_hi(x,E,$,D),s=sum64_lo(x,E,$,D)}sum64(this.h,0,r,s),sum64(this.h,2,n,o),sum64(this.h,4,a,h),sum64(this.h,6,u,l),sum64(this.h,8,c,f),sum64(this.h,10,d,m),sum64(this.h,12,p,_),sum64(this.h,14,g,b)},__SHA512_125.prototype._digest=function(t){return"hex"===t?_$utils_127.toHex32(this.h,"big"):_$utils_127.split32(this.h,"big")};var _$384_124={};function SHA384(){if(!(this instanceof SHA384))return new SHA384;_$512_125.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}_$utils_127.inherits(SHA384,_$512_125),_$384_124=SHA384,SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(t){return"hex"===t?_$utils_127.toHex32(this.h.slice(0,12),"big"):_$utils_127.split32(this.h.slice(0,12),"big")};var _$sha_120={};_$sha_120.sha1=_$1_121,_$sha_120.sha224=_$224_122,_$sha_120.sha256=_$256_123,_$sha_120.sha384=_$384_124,_$sha_120.sha512=_$512_125;var _$ripemd_119={},__rotl32_119=_$utils_127.rotl32,__sum32_119=_$utils_127.sum32,sum32_3=_$utils_127.sum32_3,__sum32_4_119=_$utils_127.sum32_4,__BlockHash_119=_$common_117.BlockHash;function __RIPEMD160_119(){if(!(this instanceof __RIPEMD160_119))return new __RIPEMD160_119;__BlockHash_119.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function __K_119(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}_$utils_127.inherits(__RIPEMD160_119,__BlockHash_119),_$ripemd_119.ripemd160=__RIPEMD160_119,__RIPEMD160_119.blockSize=512,__RIPEMD160_119.outSize=160,__RIPEMD160_119.hmacStrength=192,__RIPEMD160_119.padLength=64,__RIPEMD160_119.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],o=this.h[3],a=this.h[4],h=i,u=r,l=n,c=o,d=a,m=0;m<80;m++){var p=__sum32_119(__rotl32_119(__sum32_4_119(i,f(m,r,n,o),t[__r_119[m]+e],__K_119(m)),s[m]),a);i=a,a=o,o=__rotl32_119(n,10),n=r,r=p,p=__sum32_119(__rotl32_119(__sum32_4_119(h,f(79-m,u,l,c),t[rh[m]+e],Kh(m)),sh[m]),d),h=d,d=c,c=__rotl32_119(l,10),l=u,u=p}p=sum32_3(this.h[1],n,c),this.h[1]=sum32_3(this.h[2],o,d),this.h[2]=sum32_3(this.h[3],a,h),this.h[3]=sum32_3(this.h[4],i,u),this.h[4]=sum32_3(this.h[0],r,l),this.h[0]=p},__RIPEMD160_119.prototype._digest=function(t){return"hex"===t?_$utils_127.toHex32(this.h,"little"):_$utils_127.split32(this.h,"little")};var __r_119=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],_$hmac_118={};function __Hmac_118(t,e,i){if(!(this instanceof __Hmac_118))return new __Hmac_118(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(_$utils_127.toArray(e,i))}_$hmac_118=__Hmac_118,__Hmac_118.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest());for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},__Hmac_118.prototype.update=function(t,e){return this.inner.update(t,e),this},__Hmac_118.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};var _$hash_116={},hash=_$hash_116;hash.utils=_$utils_127,hash.common=_$common_117,hash.sha=_$sha_120,hash.ripemd=_$ripemd_119,hash.hmac=_$hmac_118,hash.sha1=hash.sha.sha1,hash.sha256=hash.sha.sha256,hash.sha224=hash.sha.sha224,hash.sha384=hash.sha.sha384,hash.sha512=hash.sha.sha512,hash.ripemd160=hash.ripemd.ripemd160;var _$secp256k1_109={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},_$curves_102={},pre,curves=_$curves_102;function PresetCurve(t){"short"===t.type?this.curve=new _$curve_99.short(t):"edwards"===t.type?this.curve=new _$curve_99.edwards(t):this.curve=new _$curve_99.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash}function defineCurve(t,e){Object.defineProperty(curves,t,{configurable:!0,enumerable:!0,get:function(){var i=new PresetCurve(e);return Object.defineProperty(curves,t,{configurable:!0,enumerable:!0,value:i}),i}})}_$utils_110.assert,curves.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:_$hash_116.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:_$hash_116.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:_$hash_116.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:_$hash_116.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:_$hash_116.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_$hash_116.sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_$hash_116.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{pre=_$secp256k1_109}catch(e){pre=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:_$hash_116.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]});var _$hmacDrbg_128={};function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=_$utils_139.toArray(t.entropy,t.entropyEnc||"hex"),i=_$utils_139.toArray(t.nonce,t.nonceEnc||"hex"),r=_$utils_139.toArray(t.pers,t.persEnc||"hex");this._init(e,i,r)}_$hmacDrbg_128=HmacDRBG,HmacDRBG.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function(){return new _$hash_116.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=_$utils_139.toArray(t,e),i=_$utils_139.toArray(i,r),this._update(t.concat(i||[])),this._reseed=1},HmacDRBG.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=_$utils_139.toArray(i,r||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var n=s.slice(0,t);return this._update(i),this._reseed++,_$utils_139.encode(n,e)};var _$key_104={};function KeyPair(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}_$utils_110.assert,_$key_104=KeyPair,KeyPair.fromPublic=function(t,e,i){return e instanceof KeyPair?e:new KeyPair(t,{pub:e,pubEnc:i})},KeyPair.fromPrivate=function(t,e,i){return e instanceof KeyPair?e:new KeyPair(t,{priv:e,privEnc:i})},KeyPair.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},KeyPair.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function(t,e){this.priv=new _$bn_111(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},KeyPair.prototype.derive=function(t){return t.validate(),t.mul(this.priv).getX()},KeyPair.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},KeyPair.prototype.verify=function(t,e,i){return this.ec.verify(t,e,this,void 0,i)},KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var _$signature_105={};function Signature(t,e){if(t instanceof Signature)return t;this._importDER(t,e)||(this.r=new _$bn_111(t.r,16),this.s=new _$bn_111(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function Position(){this.place=0}function getLength(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4)return!1;if(0===t[e.place])return!1;for(var s=0,n=0,o=e.place;n<r;n++,o++)s<<=8,s|=t[o],s>>>=0;return!(s<=127)&&(e.place=o,s)}function rmPadding(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function constructLength(t,e){if(e<128)t.push(e);else{var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}}_$utils_110.assert,_$signature_105=Signature,Signature.prototype._importDER=function(t,e){t=_$utils_110.toArray(t,e);var i=new Position;if(48!==t[i.place++])return!1;var r=getLength(t,i);if(!1===r)return!1;if(r+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var s=getLength(t,i);if(!1===s)return!1;if(0!=(128&t[i.place]))return!1;var n=t.slice(i.place,s+i.place);if(i.place+=s,2!==t[i.place++])return!1;var o=getLength(t,i);if(!1===o)return!1;if(t.length!==o+i.place)return!1;if(0!=(128&t[i.place]))return!1;var a=t.slice(i.place,o+i.place);if(0===n[0]){if(!(128&n[1]))return!1;n=n.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new _$bn_111(n),this.s=new _$bn_111(a),this.recoveryParam=null,!0},Signature.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=rmPadding(e),i=rmPadding(i);!(i[0]||128&i[1]);)i=i.slice(1);var r=[2];constructLength(r,e.length),(r=r.concat(e)).push(2),constructLength(r,i.length);var s=r.concat(i),n=[48];return constructLength(n,s.length),n=n.concat(s),_$utils_110.encode(n,t)};var _$ec_103={},__KeyPair_103=(_$utils_110.assert,_$key_104);function EC(t){if(!(this instanceof EC))return new EC(t);"string"==typeof t&&(t=_$curves_102[t]),t instanceof _$curves_102.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}_$ec_103=EC,EC.prototype.keyPair=function(t){return new __KeyPair_103(this,t)},EC.prototype.keyFromPrivate=function(t,e){return __KeyPair_103.fromPrivate(this,t,e)},EC.prototype.keyFromPublic=function(t,e){return __KeyPair_103.fromPublic(this,t,e)},EC.prototype.genKeyPair=function(t){t||(t={});for(var e=new _$hmacDrbg_128({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||_$brorand_44(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),r=this.n.sub(new _$bn_111(2));;){var s=new _$bn_111(e.generate(i));if(!(s.cmp(r)>0))return s.iaddn(1),this.keyFromPrivate(s)}},EC.prototype._truncateToN=function(t,e,i){var r;if(_$bn_111.isBN(t)||"number"==typeof t)r=(t=new _$bn_111(t,16)).byteLength();else if("object"==typeof t)r=t.length,t=new _$bn_111(t,16);else{var s=t.toString();r=s.length+1>>>1,t=new _$bn_111(s,16)}"number"!=typeof i&&(i=8*r);var n=i-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},EC.prototype.sign=function(t,e,i,r){if("object"==typeof i&&(r=i,i=null),r||(r={}),"string"!=typeof t&&"number"!=typeof t&&!_$bn_111.isBN(t))for(var s=0;s<t.length;s++);e=this.keyFromPrivate(e,i),t=this._truncateToN(t,!1,r.msgBitLength);for(var n=this.n.byteLength(),o=e.getPrivate().toArray("be",n),a=t.toArray("be",n),h=new _$hmacDrbg_128({hash:this.hash,entropy:o,nonce:a,pers:r.pers,persEnc:r.persEnc||"utf8"}),u=this.n.sub(new _$bn_111(1)),l=0;;l++){var c=r.k?r.k(l):new _$bn_111(h.generate(this.n.byteLength()));if(!((c=this._truncateToN(c,!0)).cmpn(1)<=0||c.cmp(u)>=0)){var f=this.g.mul(c);if(!f.isInfinity()){var d=f.getX(),m=d.umod(this.n);if(0!==m.cmpn(0)){var p=c.invm(this.n).mul(m.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var _=(f.getY().isOdd()?1:0)|(0!==d.cmp(m)?2:0);return r.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),_^=1),new _$signature_105({r:m,s:p,recoveryParam:_})}}}}}},EC.prototype.verify=function(t,e,i,r,s){s||(s={}),t=this._truncateToN(t,!1,s.msgBitLength),i=this.keyFromPublic(i,r);var n=(e=new _$signature_105(e,"hex")).r,o=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,h=o.invm(this.n),u=h.mul(t).umod(this.n),l=h.mul(n).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,i.getPublic(),l)).isInfinity()&&a.eqXToP(n):!(a=this.g.mulAdd(u,i.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(n)},EC.prototype.recoverPubKey=function(t,e,i,r){e=new _$signature_105(e,r);var s=this.n,n=new _$bn_111(t),o=e.r,a=e.s,h=1&i,u=i>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),h):this.curve.pointFromX(o,h);var l=e.r.invm(s),c=s.sub(n).mul(l).umod(s),f=a.mul(l).umod(s);return this.g.mulAdd(c,o,f)},EC.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new _$signature_105(e,r)).recoveryParam)return e.recoveryParam;for(var s=0;s<4;s++){var n;try{n=this.recoverPubKey(t,e,s)}catch(t){continue}if(n.eq(i))return s}throw new Error("Unable to find valid recovery factor")};var _$key_107={},parseBytes=(_$utils_110.assert,_$utils_110.parseBytes),cachedProperty=_$utils_110.cachedProperty;function __KeyPair_107(t,e){this.eddsa=t,this._secret=parseBytes(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes(e.pub)}__KeyPair_107.fromPublic=function(t,e){return e instanceof __KeyPair_107?e:new __KeyPair_107(t,{pub:e})},__KeyPair_107.fromSecret=function(t,e){return e instanceof __KeyPair_107?e:new __KeyPair_107(t,{secret:e})},__KeyPair_107.prototype.secret=function(){return this._secret},cachedProperty(__KeyPair_107,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),cachedProperty(__KeyPair_107,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),cachedProperty(__KeyPair_107,"privBytes",(function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r})),cachedProperty(__KeyPair_107,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),cachedProperty(__KeyPair_107,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),cachedProperty(__KeyPair_107,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),__KeyPair_107.prototype.sign=function(t){return this.eddsa.sign(t,this)},__KeyPair_107.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},__KeyPair_107.prototype.getSecret=function(t){return _$utils_110.encode(this.secret(),t)},__KeyPair_107.prototype.getPublic=function(t){return _$utils_110.encode(this.pubBytes(),t)},_$key_107=__KeyPair_107;var _$signature_108={},__cachedProperty_108=(_$utils_110.assert,_$utils_110.cachedProperty),__parseBytes_108=_$utils_110.parseBytes;function __Signature_108(t,e){this.eddsa=t,"object"!=typeof e&&(e=__parseBytes_108(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof _$bn_111&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}__cachedProperty_108(__Signature_108,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),__cachedProperty_108(__Signature_108,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),__cachedProperty_108(__Signature_108,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),__cachedProperty_108(__Signature_108,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),__Signature_108.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},__Signature_108.prototype.toHex=function(){return _$utils_110.encode(this.toBytes(),"hex").toUpperCase()},_$signature_108=__Signature_108;var _$eddsa_106={},__parseBytes_106=(_$utils_110.assert,_$utils_110.parseBytes);function EDDSA(t){if(!(this instanceof EDDSA))return new EDDSA(t);t=_$curves_102[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=_$hash_116.sha512}_$eddsa_106=EDDSA,EDDSA.prototype.sign=function(t,e){t=__parseBytes_106(t);var i=this.keyFromSecret(e),r=this.hashInt(i.messagePrefix(),t),s=this.g.mul(r),n=this.encodePoint(s),o=this.hashInt(n,i.pubBytes(),t).mul(i.priv()),a=r.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:a,Rencoded:n})},EDDSA.prototype.verify=function(t,e,i){if(t=__parseBytes_106(t),(e=this.makeSignature(e)).S().gte(e.eddsa.curve.n)||e.S().isNeg())return!1;var r=this.keyFromPublic(i),s=this.hashInt(e.Rencoded(),r.pubBytes(),t),n=this.g.mul(e.S());return e.R().add(r.pub().mul(s)).eq(n)},EDDSA.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return _$utils_110.intFromLE(t.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function(t){return _$key_107.fromPublic(this,t)},EDDSA.prototype.keyFromSecret=function(t){return _$key_107.fromSecret(this,t)},EDDSA.prototype.makeSignature=function(t){return t instanceof _$signature_108?t:new _$signature_108(this,t)},EDDSA.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},EDDSA.prototype.decodePoint=function(t){var e=(t=_$utils_110.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),r=0!=(128&t[e]),s=_$utils_110.intFromLE(i);return this.curve.pointFromY(s,r)},EDDSA.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function(t){return _$utils_110.intFromLE(t)},EDDSA.prototype.isPoint=function(t){return t instanceof this.pointClass};var _$elliptic_96={},elliptic=_$elliptic_96;elliptic.version=_$package_112.version,elliptic.utils=_$utils_110,elliptic.rand=_$brorand_44,elliptic.curve=_$curve_99,elliptic.curves=_$curves_102,elliptic.ec=_$ec_103,elliptic.eddsa=_$eddsa_106;var _$bn_43={exports:{}};!function(t,i){"use strict";function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_$empty_45({}).Buffer}catch(e){}function o(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void 0}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s*=r,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}function u(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n,o=0;if("be"===i)for(r=t.length-1,s=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(r=0,s=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;this._strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,o=n%r,a=Math.min(n,n-o)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(t,l,t.length,e),l=0;l<o;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){u(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(e){s.prototype.inspect=l}else s.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],o=s*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var u=1;u<r;u++){for(var l=h>>>26,c=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var m=u-d|0;l+=(o=(s=0|t.words[m])*(n=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,h=0|l}return 0!==h?i.words[u]=0|h:i.length--,i._strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|s)).toString(16);s=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),i=0!==s||n!==this.length-1?c[6-a.length]+a+i:a+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=f[t],u=d[t];i="";var l=this.clone();for(l.negative=0;!l.isZero();){var m=l.modrn(u).toString(t);i=(l=l.idivn(u)).isZero()?m+i:c[h-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},n&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){this._strip();var r=this.byteLength(),s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,i||Math.max(1,r));return this["_toArrayLike"+("le"===e?"LE":"BE")](s,r),s},s.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,s=0,n=0;s<this.length;s++){var o=this.words[s]<<n|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===n?(i<t.length&&(t[i++]=o>>24&255),r=0,n=0):(r=o>>>24,n+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},s.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,s=0,n=0;s<this.length;s++){var o=this.words[s]<<n|r;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===n?(i>=0&&(t[i--]=o>>24&255),r=0,n=0):(r=o>>>24,n+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)n=(e=(0|i.words[o])-(0|r.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,s,n,o=t.words,a=e.words,h=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],m=8191&d,p=d>>>13,_=0|o[2],g=8191&_,b=_>>>13,y=0|o[3],w=8191&y,v=y>>>13,M=0|o[4],S=8191&M,C=M>>>13,I=0|o[5],T=8191&I,A=I>>>13,k=0|o[6],B=8191&k,x=k>>>13,E=0|o[7],$=8191&E,D=E>>>13,L=0|o[8],P=8191&L,R=L>>>13,O=0|o[9],U=8191&O,N=O>>>13,j=0|a[0],Y=8191&j,X=j>>>13,F=0|a[1],H=8191&F,W=F>>>13,G=0|a[2],z=8191&G,q=G>>>13,V=0|a[3],Z=8191&V,K=V>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,st=0|a[6],nt=8191&st,ot=st>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,dt=0|a[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var _t=(u+(r=Math.imul(c,Y))|0)+((8191&(s=(s=Math.imul(c,X))+Math.imul(f,Y)|0))<<13)|0;u=((n=Math.imul(f,X))+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(m,Y),s=(s=Math.imul(m,X))+Math.imul(p,Y)|0,n=Math.imul(p,X);var gt=(u+(r=r+Math.imul(c,H)|0)|0)+((8191&(s=(s=s+Math.imul(c,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((n=n+Math.imul(f,W)|0)+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,Y),s=(s=Math.imul(g,X))+Math.imul(b,Y)|0,n=Math.imul(b,X),r=r+Math.imul(m,H)|0,s=(s=s+Math.imul(m,W)|0)+Math.imul(p,H)|0,n=n+Math.imul(p,W)|0;var bt=(u+(r=r+Math.imul(c,z)|0)|0)+((8191&(s=(s=s+Math.imul(c,q)|0)+Math.imul(f,z)|0))<<13)|0;u=((n=n+Math.imul(f,q)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(w,Y),s=(s=Math.imul(w,X))+Math.imul(v,Y)|0,n=Math.imul(v,X),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,W)|0)+Math.imul(b,H)|0,n=n+Math.imul(b,W)|0,r=r+Math.imul(m,z)|0,s=(s=s+Math.imul(m,q)|0)+Math.imul(p,z)|0,n=n+Math.imul(p,q)|0;var yt=(u+(r=r+Math.imul(c,Z)|0)|0)+((8191&(s=(s=s+Math.imul(c,K)|0)+Math.imul(f,Z)|0))<<13)|0;u=((n=n+Math.imul(f,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,Y),s=(s=Math.imul(S,X))+Math.imul(C,Y)|0,n=Math.imul(C,X),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,r=r+Math.imul(g,z)|0,s=(s=s+Math.imul(g,q)|0)+Math.imul(b,z)|0,n=n+Math.imul(b,q)|0,r=r+Math.imul(m,Z)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,Z)|0,n=n+Math.imul(p,K)|0;var wt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(s=(s=s+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((n=n+Math.imul(f,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,Y),s=(s=Math.imul(T,X))+Math.imul(A,Y)|0,n=Math.imul(A,X),r=r+Math.imul(S,H)|0,s=(s=s+Math.imul(S,W)|0)+Math.imul(C,H)|0,n=n+Math.imul(C,W)|0,r=r+Math.imul(w,z)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(v,z)|0,n=n+Math.imul(v,q)|0,r=r+Math.imul(g,Z)|0,s=(s=s+Math.imul(g,K)|0)+Math.imul(b,Z)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(m,Q)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Q)|0,n=n+Math.imul(p,tt)|0;var vt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(s=(s=s+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((n=n+Math.imul(f,rt)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,Y),s=(s=Math.imul(B,X))+Math.imul(x,Y)|0,n=Math.imul(x,X),r=r+Math.imul(T,H)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,W)|0,r=r+Math.imul(S,z)|0,s=(s=s+Math.imul(S,q)|0)+Math.imul(C,z)|0,n=n+Math.imul(C,q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,K)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,tt)|0)+Math.imul(b,Q)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var Mt=(u+(r=r+Math.imul(c,nt)|0)|0)+((8191&(s=(s=s+Math.imul(c,ot)|0)+Math.imul(f,nt)|0))<<13)|0;u=((n=n+Math.imul(f,ot)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul($,Y),s=(s=Math.imul($,X))+Math.imul(D,Y)|0,n=Math.imul(D,X),r=r+Math.imul(B,H)|0,s=(s=s+Math.imul(B,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,r=r+Math.imul(T,z)|0,s=(s=s+Math.imul(T,q)|0)+Math.imul(A,z)|0,n=n+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(C,Z)|0,n=n+Math.imul(C,K)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(v,Q)|0,n=n+Math.imul(v,tt)|0,r=r+Math.imul(g,it)|0,s=(s=s+Math.imul(g,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var St=(u+(r=r+Math.imul(c,ht)|0)|0)+((8191&(s=(s=s+Math.imul(c,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((n=n+Math.imul(f,ut)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,Y),s=(s=Math.imul(P,X))+Math.imul(R,Y)|0,n=Math.imul(R,X),r=r+Math.imul($,H)|0,s=(s=s+Math.imul($,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,r=r+Math.imul(B,z)|0,s=(s=s+Math.imul(B,q)|0)+Math.imul(x,z)|0,n=n+Math.imul(x,q)|0,r=r+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(A,Z)|0,n=n+Math.imul(A,K)|0,r=r+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,tt)|0)+Math.imul(C,Q)|0,n=n+Math.imul(C,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,rt)|0,r=r+Math.imul(g,nt)|0,s=(s=s+Math.imul(g,ot)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ot)|0,r=r+Math.imul(m,ht)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,ut)|0;var Ct=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(s=(s=s+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((n=n+Math.imul(f,ft)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Y),s=(s=Math.imul(U,X))+Math.imul(N,Y)|0,n=Math.imul(N,X),r=r+Math.imul(P,H)|0,s=(s=s+Math.imul(P,W)|0)+Math.imul(R,H)|0,n=n+Math.imul(R,W)|0,r=r+Math.imul($,z)|0,s=(s=s+Math.imul($,q)|0)+Math.imul(D,z)|0,n=n+Math.imul(D,q)|0,r=r+Math.imul(B,Z)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,K)|0,r=r+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,tt)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,s=(s=s+Math.imul(S,rt)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,r=r+Math.imul(g,ht)|0,s=(s=s+Math.imul(g,ut)|0)+Math.imul(b,ht)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(m,ct)|0,s=(s=s+Math.imul(m,ft)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,ft)|0;var It=(u+(r=r+Math.imul(c,mt)|0)|0)+((8191&(s=(s=s+Math.imul(c,pt)|0)+Math.imul(f,mt)|0))<<13)|0;u=((n=n+Math.imul(f,pt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,H),s=(s=Math.imul(U,W))+Math.imul(N,H)|0,n=Math.imul(N,W),r=r+Math.imul(P,z)|0,s=(s=s+Math.imul(P,q)|0)+Math.imul(R,z)|0,n=n+Math.imul(R,q)|0,r=r+Math.imul($,Z)|0,s=(s=s+Math.imul($,K)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,K)|0,r=r+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,tt)|0)+Math.imul(x,Q)|0,n=n+Math.imul(x,tt)|0,r=r+Math.imul(T,it)|0,s=(s=s+Math.imul(T,rt)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,rt)|0,r=r+Math.imul(S,nt)|0,s=(s=s+Math.imul(S,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,r=r+Math.imul(w,ht)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,ut)|0,r=r+Math.imul(g,ct)|0,s=(s=s+Math.imul(g,ft)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,ft)|0;var Tt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,z),s=(s=Math.imul(U,q))+Math.imul(N,z)|0,n=Math.imul(N,q),r=r+Math.imul(P,Z)|0,s=(s=s+Math.imul(P,K)|0)+Math.imul(R,Z)|0,n=n+Math.imul(R,K)|0,r=r+Math.imul($,Q)|0,s=(s=s+Math.imul($,tt)|0)+Math.imul(D,Q)|0,n=n+Math.imul(D,tt)|0,r=r+Math.imul(B,it)|0,s=(s=s+Math.imul(B,rt)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,rt)|0,r=r+Math.imul(T,nt)|0,s=(s=s+Math.imul(T,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,s=(s=s+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,ut)|0,r=r+Math.imul(w,ct)|0,s=(s=s+Math.imul(w,ft)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,ft)|0;var At=(u+(r=r+Math.imul(g,mt)|0)|0)+((8191&(s=(s=s+Math.imul(g,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,Z),s=(s=Math.imul(U,K))+Math.imul(N,Z)|0,n=Math.imul(N,K),r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,tt)|0,r=r+Math.imul($,it)|0,s=(s=s+Math.imul($,rt)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,rt)|0,r=r+Math.imul(B,nt)|0,s=(s=s+Math.imul(B,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,r=r+Math.imul(T,ht)|0,s=(s=s+Math.imul(T,ut)|0)+Math.imul(A,ht)|0,n=n+Math.imul(A,ut)|0,r=r+Math.imul(S,ct)|0,s=(s=s+Math.imul(S,ft)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,ft)|0;var kt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((n=n+Math.imul(v,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),s=(s=Math.imul(U,tt))+Math.imul(N,Q)|0,n=Math.imul(N,tt),r=r+Math.imul(P,it)|0,s=(s=s+Math.imul(P,rt)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,rt)|0,r=r+Math.imul($,nt)|0,s=(s=s+Math.imul($,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,r=r+Math.imul(B,ht)|0,s=(s=s+Math.imul(B,ut)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,ut)|0,r=r+Math.imul(T,ct)|0,s=(s=s+Math.imul(T,ft)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,ft)|0;var Bt=(u+(r=r+Math.imul(S,mt)|0)|0)+((8191&(s=(s=s+Math.imul(S,pt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((n=n+Math.imul(C,pt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(U,it),s=(s=Math.imul(U,rt))+Math.imul(N,it)|0,n=Math.imul(N,rt),r=r+Math.imul(P,nt)|0,s=(s=s+Math.imul(P,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,r=r+Math.imul($,ht)|0,s=(s=s+Math.imul($,ut)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,ut)|0,r=r+Math.imul(B,ct)|0,s=(s=s+Math.imul(B,ft)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,ft)|0;var xt=(u+(r=r+Math.imul(T,mt)|0)|0)+((8191&(s=(s=s+Math.imul(T,pt)|0)+Math.imul(A,mt)|0))<<13)|0;u=((n=n+Math.imul(A,pt)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,nt),s=(s=Math.imul(U,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),r=r+Math.imul(P,ht)|0,s=(s=s+Math.imul(P,ut)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,ut)|0,r=r+Math.imul($,ct)|0,s=(s=s+Math.imul($,ft)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,ft)|0;var Et=(u+(r=r+Math.imul(B,mt)|0)|0)+((8191&(s=(s=s+Math.imul(B,pt)|0)+Math.imul(x,mt)|0))<<13)|0;u=((n=n+Math.imul(x,pt)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,ht),s=(s=Math.imul(U,ut))+Math.imul(N,ht)|0,n=Math.imul(N,ut),r=r+Math.imul(P,ct)|0,s=(s=s+Math.imul(P,ft)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,ft)|0;var $t=(u+(r=r+Math.imul($,mt)|0)|0)+((8191&(s=(s=s+Math.imul($,pt)|0)+Math.imul(D,mt)|0))<<13)|0;u=((n=n+Math.imul(D,pt)|0)+(s>>>13)|0)+($t>>>26)|0,$t&=67108863,r=Math.imul(U,ct),s=(s=Math.imul(U,ft))+Math.imul(N,ct)|0,n=Math.imul(N,ft);var Dt=(u+(r=r+Math.imul(P,mt)|0)|0)+((8191&(s=(s=s+Math.imul(P,pt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((n=n+Math.imul(R,pt)|0)+(s>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(u+(r=Math.imul(U,mt))|0)+((8191&(s=(s=Math.imul(U,pt))+Math.imul(N,mt)|0))<<13)|0;return u=((n=Math.imul(N,pt))+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h[0]=_t,h[1]=gt,h[2]=bt,h[3]=yt,h[4]=wt,h[5]=vt,h[6]=Mt,h[7]=St,h[8]=Ct,h[9]=It,h[10]=Tt,h[11]=At,h[12]=kt,h[13]=Bt,h[14]=xt,h[15]=Et,h[16]=$t,h[17]=Dt,h[18]=Lt,0!==u&&(h[19]=u,i.length++),i};function _(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,h=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=h;u++){var l=n-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;a=67108863&(f=f+a|0),s+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i._strip()}function g(t,e,i){return _(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(p=m),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?m(this,t,e):i<1024?_(this,t,e):g(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},b.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},b.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<s;l+=a)for(var c=h,f=u,d=0;d<o;d++){var m=i[l+d],p=r[l+d],_=i[l+d+o],g=r[l+d+o],b=c*_-f*g;g=c*g+f*_,_=b,i[l+d]=m+_,r[l+d]=p+g,i[l+d+o]=m-_,r[l+d+o]=p-g,d!==a&&(b=h*c-u*f,f=h*f+u*c,c=b)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},b.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},b.prototype.convert13b=function(t,e,i,r){for(var s=0,n=0;n<e;n++)s+=0|t[n],i[2*n]=8191&s,s>>>=13,i[2*n+1]=8191&s,s>>>=13;for(n=2*e;n<r;++n)i[n]=0},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,n,a,h,r,s),this.transform(u,n,l,c,r,s);for(var d=0;d<r;d++){var m=a[d]*l[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*l[d],a[d]=m}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),g(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t);for(var i=0,r=0;r<this.length;r++){var s=(0|this.words[r])*t,n=(67108863&s)+(67108863&i);i>>=26,i+=s/67108864|0,i+=n>>>26,this.words[r]=67108863&n}return 0!==i&&(this.words[r]=i,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=t.words[r]>>>s&1}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(e=0;e<this.length;e++){var o=this.words[e]&s,a=(0|this.words[e])-o<<i;this.words[e]=a|n,n=o>>>26-i}n&&(this.words[e]=n,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()},s.prototype.ishln=function(t){return this.iushln(t)},s.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var s=t%26,n=Math.min((t-s)/26,this.length),o=67108863^67108863>>>s<<s,a=i;if(r-=n,r=Math.max(0,r),a){for(var h=0;h<n;h++)a.words[h]=this.words[h];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,h=0;h<this.length;h++)this.words[h]=this.words[h+n];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=r);h--){var l=0|this.words[h];this.words[h]=u<<26-s|l>>>s,u=l&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},s.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var r,s,n=t.length+i;this._expand(n);var o=0;for(r=0;r<t.length;r++){s=(0|this.words[r+i])+o;var a=(0|t.words[r])*e;o=((s-=67108863&a)>>26)-(a/67108864|0),this.words[r+i]=67108863&s}for(;r<this.length-i;r++)o=(s=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&s;if(0===o)return this._strip();for(o=0,r=0;r<this.length;r++)o=(s=-(0|this.words[r])+o)>>26,this.words[r]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var r,n,o},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t);for(var i=(1<<26)%t,r=0,s=this.length-1;s>=0;s--)r=(i*r+(0|this.words[s]))%t;return e?-r:r},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t);for(var i=0,r=this.length-1;r>=0;r--){var s=(0|this.words[r])+67108864*i;this.words[r]=s/t|0,i=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new s(1),n=new s(0),o=new s(0),a=new s(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.iushrn(1),n.iushrn(1);for(var d=0,m=1;0==(i.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),n.isub(a)):(i.isub(e),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:i.iushln(h)}},s.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,n=new s(1),o=new s(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,u=1;0==(e.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(e.iushrn(h);h-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o)):(i.isub(e),o.isub(n))}return(r=0===e.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,n=i;0!==s&&n<this.length;n++){var o=0|this.words[n];s=(o+=s)>>>26,o&=67108863,this.words[n]=o}return 0!==s&&(this.words[n]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new I(t)},s.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return this._forceRed(t)},s.prototype.redAdd=function(t){return this.red.add(this,t)},s.prototype.redIAdd=function(t){return this.red.iadd(this,t)},s.prototype.redSub=function(t){return this.red.sub(this,t)},s.prototype.redISub=function(t){return this.red.isub(this,t)},s.prototype.redShl=function(t){return this.red.shl(this,t)},s.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function C(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function T(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},r(v,w),v.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,t.words[r-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(M,w),r(S,w),r(C,w),C.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new M;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new C}return y[t]=e,e},I.prototype._verify1=function(t){},I.prototype._verify2=function(t,e){},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},I.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new s(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),r=0;!i.isZero()&&0===i.andln(1);)r++,i.iushrn(1);var n=new s(1).toRed(this),o=n.redNeg(),a=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,a).cmp(o);)h.redIAdd(o);for(var u=this.pow(h,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=r;0!==c.cmp(n);){for(var d=c,m=0;0!==d.cmp(n);m++)d=d.redSqr();var p=this.pow(u,new s(1).iushln(f-m-1));l=l.redMul(p),u=p.redSqr(),c=c.redMul(u),f=m}return l},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=h-1;l>=0;l--){var c=u>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new T(t)},r(T,I),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_$bn_43,this),_$bn_43=_$bn_43.exports;var _$bn_41={exports:{}};!function(t,i){"use strict";function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_$empty_45({}).Buffer}catch(e){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s*=r,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n,o=0;if("be"===i)for(r=t.length-1,s=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(r=0,s=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,o=n%r,a=Math.min(n,n-o)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(t,l,t.length,e),l=0;l<o;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],o=s*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var u=1;u<r;u++){for(var l=h>>>26,c=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var m=u-d|0;l+=(o=(s=0|t.words[m])*(n=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,h=0|l}return 0!==h?i.words[u]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|s)).toString(16);s=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),i=0!==s||n!==this.length-1?u[6-a.length]+a+i:a+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=l[t],f=c[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?m+i:u[h-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),s=i||Math.max(1,r);this.strip();var n,o,a="le"===e,h=new t(s),u=this.clone();if(a){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-r;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)n=(e=(0|i.words[o])-(0|r.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,s,n,o=t.words,a=e.words,h=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],m=8191&d,p=d>>>13,_=0|o[2],g=8191&_,b=_>>>13,y=0|o[3],w=8191&y,v=y>>>13,M=0|o[4],S=8191&M,C=M>>>13,I=0|o[5],T=8191&I,A=I>>>13,k=0|o[6],B=8191&k,x=k>>>13,E=0|o[7],$=8191&E,D=E>>>13,L=0|o[8],P=8191&L,R=L>>>13,O=0|o[9],U=8191&O,N=O>>>13,j=0|a[0],Y=8191&j,X=j>>>13,F=0|a[1],H=8191&F,W=F>>>13,G=0|a[2],z=8191&G,q=G>>>13,V=0|a[3],Z=8191&V,K=V>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,st=0|a[6],nt=8191&st,ot=st>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,dt=0|a[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var _t=(u+(r=Math.imul(c,Y))|0)+((8191&(s=(s=Math.imul(c,X))+Math.imul(f,Y)|0))<<13)|0;u=((n=Math.imul(f,X))+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(m,Y),s=(s=Math.imul(m,X))+Math.imul(p,Y)|0,n=Math.imul(p,X);var gt=(u+(r=r+Math.imul(c,H)|0)|0)+((8191&(s=(s=s+Math.imul(c,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((n=n+Math.imul(f,W)|0)+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,Y),s=(s=Math.imul(g,X))+Math.imul(b,Y)|0,n=Math.imul(b,X),r=r+Math.imul(m,H)|0,s=(s=s+Math.imul(m,W)|0)+Math.imul(p,H)|0,n=n+Math.imul(p,W)|0;var bt=(u+(r=r+Math.imul(c,z)|0)|0)+((8191&(s=(s=s+Math.imul(c,q)|0)+Math.imul(f,z)|0))<<13)|0;u=((n=n+Math.imul(f,q)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(w,Y),s=(s=Math.imul(w,X))+Math.imul(v,Y)|0,n=Math.imul(v,X),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,W)|0)+Math.imul(b,H)|0,n=n+Math.imul(b,W)|0,r=r+Math.imul(m,z)|0,s=(s=s+Math.imul(m,q)|0)+Math.imul(p,z)|0,n=n+Math.imul(p,q)|0;var yt=(u+(r=r+Math.imul(c,Z)|0)|0)+((8191&(s=(s=s+Math.imul(c,K)|0)+Math.imul(f,Z)|0))<<13)|0;u=((n=n+Math.imul(f,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,Y),s=(s=Math.imul(S,X))+Math.imul(C,Y)|0,n=Math.imul(C,X),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,r=r+Math.imul(g,z)|0,s=(s=s+Math.imul(g,q)|0)+Math.imul(b,z)|0,n=n+Math.imul(b,q)|0,r=r+Math.imul(m,Z)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,Z)|0,n=n+Math.imul(p,K)|0;var wt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(s=(s=s+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((n=n+Math.imul(f,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,Y),s=(s=Math.imul(T,X))+Math.imul(A,Y)|0,n=Math.imul(A,X),r=r+Math.imul(S,H)|0,s=(s=s+Math.imul(S,W)|0)+Math.imul(C,H)|0,n=n+Math.imul(C,W)|0,r=r+Math.imul(w,z)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(v,z)|0,n=n+Math.imul(v,q)|0,r=r+Math.imul(g,Z)|0,s=(s=s+Math.imul(g,K)|0)+Math.imul(b,Z)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(m,Q)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Q)|0,n=n+Math.imul(p,tt)|0;var vt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(s=(s=s+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((n=n+Math.imul(f,rt)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,Y),s=(s=Math.imul(B,X))+Math.imul(x,Y)|0,n=Math.imul(x,X),r=r+Math.imul(T,H)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,W)|0,r=r+Math.imul(S,z)|0,s=(s=s+Math.imul(S,q)|0)+Math.imul(C,z)|0,n=n+Math.imul(C,q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,K)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,tt)|0)+Math.imul(b,Q)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var Mt=(u+(r=r+Math.imul(c,nt)|0)|0)+((8191&(s=(s=s+Math.imul(c,ot)|0)+Math.imul(f,nt)|0))<<13)|0;u=((n=n+Math.imul(f,ot)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul($,Y),s=(s=Math.imul($,X))+Math.imul(D,Y)|0,n=Math.imul(D,X),r=r+Math.imul(B,H)|0,s=(s=s+Math.imul(B,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,r=r+Math.imul(T,z)|0,s=(s=s+Math.imul(T,q)|0)+Math.imul(A,z)|0,n=n+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(C,Z)|0,n=n+Math.imul(C,K)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(v,Q)|0,n=n+Math.imul(v,tt)|0,r=r+Math.imul(g,it)|0,s=(s=s+Math.imul(g,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var St=(u+(r=r+Math.imul(c,ht)|0)|0)+((8191&(s=(s=s+Math.imul(c,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((n=n+Math.imul(f,ut)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,Y),s=(s=Math.imul(P,X))+Math.imul(R,Y)|0,n=Math.imul(R,X),r=r+Math.imul($,H)|0,s=(s=s+Math.imul($,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,r=r+Math.imul(B,z)|0,s=(s=s+Math.imul(B,q)|0)+Math.imul(x,z)|0,n=n+Math.imul(x,q)|0,r=r+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(A,Z)|0,n=n+Math.imul(A,K)|0,r=r+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,tt)|0)+Math.imul(C,Q)|0,n=n+Math.imul(C,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,rt)|0,r=r+Math.imul(g,nt)|0,s=(s=s+Math.imul(g,ot)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ot)|0,r=r+Math.imul(m,ht)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,ut)|0;var Ct=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(s=(s=s+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((n=n+Math.imul(f,ft)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Y),s=(s=Math.imul(U,X))+Math.imul(N,Y)|0,n=Math.imul(N,X),r=r+Math.imul(P,H)|0,s=(s=s+Math.imul(P,W)|0)+Math.imul(R,H)|0,n=n+Math.imul(R,W)|0,r=r+Math.imul($,z)|0,s=(s=s+Math.imul($,q)|0)+Math.imul(D,z)|0,n=n+Math.imul(D,q)|0,r=r+Math.imul(B,Z)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,K)|0,r=r+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,tt)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,s=(s=s+Math.imul(S,rt)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,r=r+Math.imul(g,ht)|0,s=(s=s+Math.imul(g,ut)|0)+Math.imul(b,ht)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(m,ct)|0,s=(s=s+Math.imul(m,ft)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,ft)|0;var It=(u+(r=r+Math.imul(c,mt)|0)|0)+((8191&(s=(s=s+Math.imul(c,pt)|0)+Math.imul(f,mt)|0))<<13)|0;u=((n=n+Math.imul(f,pt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,H),s=(s=Math.imul(U,W))+Math.imul(N,H)|0,n=Math.imul(N,W),r=r+Math.imul(P,z)|0,s=(s=s+Math.imul(P,q)|0)+Math.imul(R,z)|0,n=n+Math.imul(R,q)|0,r=r+Math.imul($,Z)|0,s=(s=s+Math.imul($,K)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,K)|0,r=r+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,tt)|0)+Math.imul(x,Q)|0,n=n+Math.imul(x,tt)|0,r=r+Math.imul(T,it)|0,s=(s=s+Math.imul(T,rt)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,rt)|0,r=r+Math.imul(S,nt)|0,s=(s=s+Math.imul(S,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,r=r+Math.imul(w,ht)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,ut)|0,r=r+Math.imul(g,ct)|0,s=(s=s+Math.imul(g,ft)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,ft)|0;var Tt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,z),s=(s=Math.imul(U,q))+Math.imul(N,z)|0,n=Math.imul(N,q),r=r+Math.imul(P,Z)|0,s=(s=s+Math.imul(P,K)|0)+Math.imul(R,Z)|0,n=n+Math.imul(R,K)|0,r=r+Math.imul($,Q)|0,s=(s=s+Math.imul($,tt)|0)+Math.imul(D,Q)|0,n=n+Math.imul(D,tt)|0,r=r+Math.imul(B,it)|0,s=(s=s+Math.imul(B,rt)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,rt)|0,r=r+Math.imul(T,nt)|0,s=(s=s+Math.imul(T,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,s=(s=s+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,ut)|0,r=r+Math.imul(w,ct)|0,s=(s=s+Math.imul(w,ft)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,ft)|0;var At=(u+(r=r+Math.imul(g,mt)|0)|0)+((8191&(s=(s=s+Math.imul(g,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,Z),s=(s=Math.imul(U,K))+Math.imul(N,Z)|0,n=Math.imul(N,K),r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,tt)|0,r=r+Math.imul($,it)|0,s=(s=s+Math.imul($,rt)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,rt)|0,r=r+Math.imul(B,nt)|0,s=(s=s+Math.imul(B,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,r=r+Math.imul(T,ht)|0,s=(s=s+Math.imul(T,ut)|0)+Math.imul(A,ht)|0,n=n+Math.imul(A,ut)|0,r=r+Math.imul(S,ct)|0,s=(s=s+Math.imul(S,ft)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,ft)|0;var kt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((n=n+Math.imul(v,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),s=(s=Math.imul(U,tt))+Math.imul(N,Q)|0,n=Math.imul(N,tt),r=r+Math.imul(P,it)|0,s=(s=s+Math.imul(P,rt)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,rt)|0,r=r+Math.imul($,nt)|0,s=(s=s+Math.imul($,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,r=r+Math.imul(B,ht)|0,s=(s=s+Math.imul(B,ut)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,ut)|0,r=r+Math.imul(T,ct)|0,s=(s=s+Math.imul(T,ft)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,ft)|0;var Bt=(u+(r=r+Math.imul(S,mt)|0)|0)+((8191&(s=(s=s+Math.imul(S,pt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((n=n+Math.imul(C,pt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(U,it),s=(s=Math.imul(U,rt))+Math.imul(N,it)|0,n=Math.imul(N,rt),r=r+Math.imul(P,nt)|0,s=(s=s+Math.imul(P,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,r=r+Math.imul($,ht)|0,s=(s=s+Math.imul($,ut)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,ut)|0,r=r+Math.imul(B,ct)|0,s=(s=s+Math.imul(B,ft)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,ft)|0;var xt=(u+(r=r+Math.imul(T,mt)|0)|0)+((8191&(s=(s=s+Math.imul(T,pt)|0)+Math.imul(A,mt)|0))<<13)|0;u=((n=n+Math.imul(A,pt)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,nt),s=(s=Math.imul(U,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),r=r+Math.imul(P,ht)|0,s=(s=s+Math.imul(P,ut)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,ut)|0,r=r+Math.imul($,ct)|0,s=(s=s+Math.imul($,ft)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,ft)|0;var Et=(u+(r=r+Math.imul(B,mt)|0)|0)+((8191&(s=(s=s+Math.imul(B,pt)|0)+Math.imul(x,mt)|0))<<13)|0;u=((n=n+Math.imul(x,pt)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,ht),s=(s=Math.imul(U,ut))+Math.imul(N,ht)|0,n=Math.imul(N,ut),r=r+Math.imul(P,ct)|0,s=(s=s+Math.imul(P,ft)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,ft)|0;var $t=(u+(r=r+Math.imul($,mt)|0)|0)+((8191&(s=(s=s+Math.imul($,pt)|0)+Math.imul(D,mt)|0))<<13)|0;u=((n=n+Math.imul(D,pt)|0)+(s>>>13)|0)+($t>>>26)|0,$t&=67108863,r=Math.imul(U,ct),s=(s=Math.imul(U,ft))+Math.imul(N,ct)|0,n=Math.imul(N,ft);var Dt=(u+(r=r+Math.imul(P,mt)|0)|0)+((8191&(s=(s=s+Math.imul(P,pt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((n=n+Math.imul(R,pt)|0)+(s>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(u+(r=Math.imul(U,mt))|0)+((8191&(s=(s=Math.imul(U,pt))+Math.imul(N,mt)|0))<<13)|0;return u=((n=Math.imul(N,pt))+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h[0]=_t,h[1]=gt,h[2]=bt,h[3]=yt,h[4]=wt,h[5]=vt,h[6]=Mt,h[7]=St,h[8]=Ct,h[9]=It,h[10]=Tt,h[11]=At,h[12]=kt,h[13]=Bt,h[14]=xt,h[15]=Et,h[16]=$t,h[17]=Dt,h[18]=Lt,0!==u&&(h[19]=u,i.length++),i};function m(t,e,i){return(new p).mulp(t,e,i)}function p(t,e){this.x=t,this.y=e}Math.imul||(d=f),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):i<63?f(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,h=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=h;u++){var l=n-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;a=67108863&(f=f+a|0),s+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}(this,t,e):m(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},p.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},p.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},p.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<s;l+=a)for(var c=h,f=u,d=0;d<o;d++){var m=i[l+d],p=r[l+d],_=i[l+d+o],g=r[l+d+o],b=c*_-f*g;g=c*g+f*_,_=b,i[l+d]=m+_,r[l+d]=p+g,i[l+d+o]=m-_,r[l+d+o]=p-g,d!==a&&(b=h*c-u*f,f=h*f+u*c,c=b)}},p.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},p.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},p.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},p.prototype.convert13b=function(t,e,i,r){for(var s=0,n=0;n<e;n++)s+=0|t[n],i[2*n]=8191&s,s>>>=13,i[2*n+1]=8191&s,s>>>=13;for(n=2*e;n<r;++n)i[n]=0},p.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},p.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,n,a,h,r,s),this.transform(u,n,l,c,r,s);for(var d=0;d<r;d++){var m=a[d]*l[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*l[d],a[d]=m}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,s=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=(t.words[r]&1<<s)>>>s}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(e=0;e<this.length;e++){var o=this.words[e]&s,a=(0|this.words[e])-o<<i;this.words[e]=a|n,n=o>>>26-i}n&&(this.words[e]=n,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(t){return this.iushln(t)},s.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var s=t%26,n=Math.min((t-s)/26,this.length),o=67108863^67108863>>>s<<s,a=i;if(r-=n,r=Math.max(0,r),a){for(var h=0;h<n;h++)a.words[h]=this.words[h];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,h=0;h<this.length;h++)this.words[h]=this.words[h+n];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=r);h--){var l=0|this.words[h];this.words[h]=u<<26-s|l>>>s,u=l&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},s.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var r,s,n=t.length+i;this._expand(n);var o=0;for(r=0;r<t.length;r++){s=(0|this.words[r+i])+o;var a=(0|t.words[r])*e;o=((s-=67108863&a)>>26)-(a/67108864|0),this.words[r+i]=67108863&s}for(;r<this.length-i;r++)o=(s=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&s;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(s=-(0|this.words[r])+o)>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,n,o},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},s.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new s(1),n=new s(0),o=new s(0),a=new s(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.iushrn(1),n.iushrn(1);for(var d=0,m=1;0==(i.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),n.isub(a)):(i.isub(e),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:i.iushln(h)}},s.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,n=new s(1),o=new s(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,u=1;0==(e.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(e.iushrn(h);h-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o)):(i.isub(e),o.isub(n))}return(r=0===e.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,n=i;0!==s&&n<this.length;n++){var o=0|this.words[n];s=(o+=s)>>>26,o&=67108863,this.words[n]=o}return 0!==s&&(this.words[n]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new M(t)},s.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return this._forceRed(t)},s.prototype.redAdd=function(t){return this.red.add(this,t)},s.prototype.redIAdd=function(t){return this.red.iadd(this,t)},s.prototype.redSub=function(t){return this.red.sub(this,t)},s.prototype.redISub=function(t){return this.red.isub(this,t)},s.prototype.redShl=function(t){return this.red.shl(this,t)},s.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},r(b,g),b.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,t.words[r-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(y,g),r(w,g),r(v,g),v.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new y;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new v}return _[t]=e,e},M.prototype._verify1=function(t){},M.prototype._verify2=function(t,e){},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new s(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),r=0;!i.isZero()&&0===i.andln(1);)r++,i.iushrn(1);var n=new s(1).toRed(this),o=n.redNeg(),a=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,a).cmp(o);)h.redIAdd(o);for(var u=this.pow(h,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=r;0!==c.cmp(n);){for(var d=c,m=0;0!==d.cmp(n);m++)d=d.redSqr();var p=this.pow(u,new s(1).iushln(f-m-1));l=l.redMul(p),u=p.redSqr(),c=c.redMul(u),f=m}return l},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=h-1;l>=0;l--){var c=u>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},r(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_$bn_41,this),_$bn_41=_$bn_41.exports;var _$reporter_32={};function Reporter(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function ReporterError(t,e){this.path=t,this.rethrow(e)}_$reporter_32.Reporter=Reporter,Reporter.prototype.isError=function(t){return t instanceof ReporterError},Reporter.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},Reporter.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},Reporter.prototype.enterKey=function(t){return this._reporterState.path.push(t)},Reporter.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},Reporter.prototype.leaveKey=function(t,e,i){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=i)},Reporter.prototype.path=function(){return this._reporterState.path.join("/")},Reporter.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},Reporter.prototype.leaveObject=function(t){var e=this._reporterState,i=e.obj;return e.obj=t,i},Reporter.prototype.error=function(t){var e,i=this._reporterState,r=t instanceof ReporterError;if(e=r?t:new ReporterError(i.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!i.options.partial)throw e;return r||i.errors.push(e),e},Reporter.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},_$inherits_browser_130(ReporterError,Error),ReporterError.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this};var asn=_$asn1_27({}),Time=asn.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),AttributeTypeValue=asn.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),AlgorithmIdentifier=asn.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())})),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",(function(){this.setof(AttributeTypeValue)})),RDNSequence=asn.define("RDNSequence",(function(){this.seqof(RelativeDistinguishedName)})),Name=asn.define("Name",(function(){this.choice({rdnSequence:this.use(RDNSequence)})})),Validity=asn.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))})),Extension=asn.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),TBSCertificate=asn.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())})),X509Certificate=asn.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier),this.key("signatureValue").bitstr())})),_$X509Certificate_143=X509Certificate,_$asn1_142={},__asn1_142=_$asn1_27({});_$asn1_142.certificate=_$X509Certificate_143;var RSAPrivateKey=__asn1_142.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));_$asn1_142.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=__asn1_142.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));_$asn1_142.RSAPublicKey=RSAPublicKey;var __AlgorithmIdentifier_142=__asn1_142.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),PublicKey=__asn1_142.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(__AlgorithmIdentifier_142),this.key("subjectPublicKey").bitstr())}));_$asn1_142.PublicKey=PublicKey;var PrivateKeyInfo=__asn1_142.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(__AlgorithmIdentifier_142),this.key("subjectPrivateKey").octstr())}));_$asn1_142.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=__asn1_142.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));_$asn1_142.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=__asn1_142.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));_$asn1_142.DSAPrivateKey=DSAPrivateKey,_$asn1_142.DSAparam=__asn1_142.define("DSAparam",(function(){this.int()}));var ECParameters=__asn1_142.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})})),ECPrivateKey=__asn1_142.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())}));_$asn1_142.ECPrivateKey=ECPrivateKey,_$asn1_142.signature=__asn1_142.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}));var _$aesid_141={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,__Buffer_144=_$safeBuffer_177.Buffer,_$fixProc_144=function(t,e){var i,r=t.toString(),s=r.match(findProc);if(s){var n="aes"+s[1],o=__Buffer_144.from(s[2],"hex"),a=__Buffer_144.from(s[3].replace(/[\r\n]/g,""),"base64"),h=_$evp_bytestokey_114(e,o.slice(0,8),parseInt(s[1],10)).key,u=[],l=_$browser_48.createDecipheriv(n,h,o);u.push(l.update(a)),u.push(l.final()),i=__Buffer_144.concat(u)}else{var c=r.match(fullRegex);i=__Buffer_144.from(c[2].replace(/[\r\n]/g,""),"base64")}return{tag:r.match(startRegex)[1],data:i}},_$parseAsn1_145={},__Buffer_145=_$safeBuffer_177.Buffer;function parseKeys(t){var e;"object"!=typeof t||__Buffer_145.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=__Buffer_145.from(t));var i,r,s=_$fixProc_144(t,e),n=s.tag,o=s.data;switch(n){case"CERTIFICATE":r=_$asn1_142.certificate.decode(o,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(r||(r=_$asn1_142.PublicKey.decode(o,"der")),i=r.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return _$asn1_142.RSAPublicKey.decode(r.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return r.subjectPrivateKey=r.subjectPublicKey,{type:"ec",data:r};case"1.2.840.10040.4.1":return r.algorithm.params.pub_key=_$asn1_142.DSAparam.decode(r.subjectPublicKey.data,"der"),{type:"dsa",data:r.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":o=function(t,e){var i=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),s=_$aesid_141[t.algorithm.decrypt.cipher.algo.join(".")],n=t.algorithm.decrypt.cipher.iv,o=t.subjectPrivateKey,a=parseInt(s.split("-")[1],10)/8,h=_$browser_146.pbkdf2Sync(e,i,r,a,"sha1"),u=_$browser_48.createDecipheriv(s,h,n),l=[];return l.push(u.update(o)),l.push(u.final()),__Buffer_145.concat(l)}(o=_$asn1_142.EncryptedPrivateKey.decode(o,"der"),e);case"PRIVATE KEY":switch(i=(r=_$asn1_142.PrivateKey.decode(o,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return _$asn1_142.RSAPrivateKey.decode(r.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:r.algorithm.curve,privateKey:_$asn1_142.ECPrivateKey.decode(r.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return r.algorithm.params.priv_key=_$asn1_142.DSAparam.decode(r.subjectPrivateKey,"der"),{type:"dsa",params:r.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return _$asn1_142.RSAPublicKey.decode(o,"der");case"RSA PRIVATE KEY":return _$asn1_142.RSAPrivateKey.decode(o,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:_$asn1_142.DSAPrivateKey.decode(o,"der")};case"EC PRIVATE KEY":return{curve:(o=_$asn1_142.ECPrivateKey.decode(o,"der")).parameters.value,privateKey:o.privateKey};default:throw new Error("unknown key type "+n)}}parseKeys.signature=_$asn1_142.signature,_$parseAsn1_145=parseKeys;var _$curves_69={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},_$sign_71={},__Buffer_71=_$safeBuffer_177.Buffer,crt=require(66),__EC_71=_$elliptic_96.ec,RSA_PKCS1_PADDING=1;function getKey(t,e,i,r){if((t=__Buffer_71.from(t.toArray())).length<e.byteLength()){var s=__Buffer_71.alloc(e.byteLength()-t.length);t=__Buffer_71.concat([s,t])}var n=i.length,o=function(t,e){t=(t=bits2int(t,e)).mod(e);var i=__Buffer_71.from(t.toArray());if(i.length<e.byteLength()){var r=__Buffer_71.alloc(e.byteLength()-i.length);i=__Buffer_71.concat([r,i])}return i}(i,e),a=__Buffer_71.alloc(n);a.fill(1);var h=__Buffer_71.alloc(n);return h=_$browser_82(r,h).update(a).update(__Buffer_71.from([0])).update(t).update(o).digest(),a=_$browser_82(r,h).update(a).digest(),{k:h=_$browser_82(r,h).update(a).update(__Buffer_71.from([1])).update(t).update(o).digest(),v:a=_$browser_82(r,h).update(a).digest()}}function bits2int(t,e){var i=new _$bn_43(t),r=(t.length<<3)-e.bitLength();return r>0&&i.ishrn(r),i}function makeKey(t,e,i){var r,s;do{for(r=__Buffer_71.alloc(0);8*r.length<t.bitLength();)e.v=_$browser_82(i,e.k).update(e.v).digest(),r=__Buffer_71.concat([r,e.v]);s=bits2int(r,t),e.k=_$browser_82(i,e.k).update(e.v).update(__Buffer_71.from([0])).digest(),e.v=_$browser_82(i,e.k).update(e.v).digest()}while(-1!==s.cmp(t));return s}function makeR(t,e,i,r){return t.toRed(_$bn_43.mont(i)).redPow(e).fromRed().mod(r)}_$sign_71=function(t,e,i,r,s){var n=_$parseAsn1_145(e);if(n.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");return function(t,e){var i=_$curves_69[e.curve.join(".")];if(!i)throw new Error("unknown curve "+e.curve.join("."));var r=new __EC_71(i).keyFromPrivate(e.privateKey).sign(t);return __Buffer_71.from(r.toDER())}(t,n)}if("dsa"===n.type){if("dsa"!==r)throw new Error("wrong private key type");return function(t,e,i){for(var r,s=e.params.priv_key,n=e.params.p,o=e.params.q,a=e.params.g,h=new _$bn_43(0),u=bits2int(t,o).mod(o),l=!1,c=getKey(s,o,t,i);!1===l;)h=makeR(a,r=makeKey(o,c,i),n,o),0===(l=r.invm(o).imul(u.add(s.mul(h))).mod(o)).cmpn(0)&&(l=!1,h=new _$bn_43(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),__Buffer_71.from(i)}(h,l)}(t,n,i)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");if(void 0!==e.padding&&e.padding!==RSA_PKCS1_PADDING)throw new Error("illegal or unsupported padding mode");t=__Buffer_71.concat([s,t]);for(var o=n.modulus.byteLength(),a=[0,1];t.length+a.length+1<o;)a.push(255);a.push(0);for(var h=-1;++h<t.length;)a.push(t[h]);return crt(a,n)},_$sign_71.getKey=getKey,_$sign_71.makeKey=makeKey;var __Buffer_72=_$safeBuffer_177.Buffer,__EC_72=_$elliptic_96.ec;function checkValue(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=0)throw new Error("invalid sig")}var _$verify_72=function(t,e,i,r,s){var n=_$parseAsn1_145(i);if("ec"===n.type){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong public key type");return function(t,e,i){var r=_$curves_69[i.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var s=new __EC_72(r),n=i.data.subjectPrivateKey.data;return s.verify(e,t,n)}(t,e,n)}if("dsa"===n.type){if("dsa"!==r)throw new Error("wrong public key type");return function(t,e,i){var r=i.data.p,s=i.data.q,n=i.data.g,o=i.data.pub_key,a=_$parseAsn1_145.signature.decode(t,"der"),h=a.s,u=a.r;checkValue(h,s),checkValue(u,s);var l=_$bn_43.mont(r),c=h.invm(s);return 0===n.toRed(l).redPow(new _$bn_43(e).mul(c).mod(s)).fromRed().mul(o.toRed(l).redPow(u.mul(c).mod(s)).fromRed()).mod(r).mod(s).cmp(u)}(t,e,n)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong public key type");e=__Buffer_72.concat([s,e]);for(var o=n.modulus.byteLength(),a=[1],h=0;e.length+a.length+2<o;)a.push(255),h+=1;a.push(0);for(var u=-1;++u<e.length;)a.push(e[u]);a=__Buffer_72.from(a);var l=_$bn_43.mont(n.modulus);t=(t=new _$bn_43(t).toRed(l)).redPow(new _$bn_43(n.publicExponent)),t=__Buffer_72.from(t.fromRed().toArray());var c=h<8?1:0;for(o=Math.min(t.length,a.length),t.length!==a.length&&(c=1),u=-1;++u<o;)c|=t[u]^a[u];return 0===c},_$browser_70={},__Buffer_70=_$safeBuffer_177.Buffer;function Sign(t){_$readableBrowser_175.Writable.call(this);var e=_$algorithms_68[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=_$browser_80(e.hash),this._tag=e.id,this._signType=e.sign}function Verify(t){_$readableBrowser_175.Writable.call(this);var e=_$algorithms_68[t];if(!e)throw new Error("Unknown message digest");this._hash=_$browser_80(e.hash),this._tag=e.id,this._signType=e.sign}function createSign(t){return new Sign(t)}function createVerify(t){return new Verify(t)}Object.keys(_$algorithms_68).forEach((function(t){_$algorithms_68[t].id=__Buffer_70.from(_$algorithms_68[t].id,"hex"),_$algorithms_68[t.toLowerCase()]=_$algorithms_68[t]})),_$inherits_browser_130(Sign,_$readableBrowser_175.Writable),Sign.prototype._write=function(t,e,i){this._hash.update(t),i()},Sign.prototype.update=function(t,e){return this._hash.update("string"==typeof t?__Buffer_70.from(t,e):t),this},Sign.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=_$sign_71(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},_$inherits_browser_130(Verify,_$readableBrowser_175.Writable),Verify.prototype._write=function(t,e,i){this._hash.update(t),i()},Verify.prototype.update=function(t,e){return this._hash.update("string"==typeof t?__Buffer_70.from(t,e):t),this},Verify.prototype.verify=function(t,e,i){var r="string"==typeof e?__Buffer_70.from(e,i):e;this.end();var s=this._hash.digest();return _$verify_72(r,s,t,this._signType,this._tag)},_$browser_70={};var _$bn_79={exports:{}};!function(t,i){"use strict";function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_$empty_45({}).Buffer}catch(e){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s*=r,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n,o=0;if("be"===i)for(r=t.length-1,s=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(r=0,s=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,o=n%r,a=Math.min(n,n-o)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(t,l,t.length,e),l=0;l<o;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],o=s*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var u=1;u<r;u++){for(var l=h>>>26,c=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var m=u-d|0;l+=(o=(s=0|t.words[m])*(n=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,h=0|l}return 0!==h?i.words[u]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|s)).toString(16);s=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),i=0!==s||n!==this.length-1?u[6-a.length]+a+i:a+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=l[t],f=c[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?m+i:u[h-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),s=i||Math.max(1,r);this.strip();var n,o,a="le"===e,h=new t(s),u=this.clone();if(a){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-r;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)n=(e=(0|i.words[o])-(0|r.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,s,n,o=t.words,a=e.words,h=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],m=8191&d,p=d>>>13,_=0|o[2],g=8191&_,b=_>>>13,y=0|o[3],w=8191&y,v=y>>>13,M=0|o[4],S=8191&M,C=M>>>13,I=0|o[5],T=8191&I,A=I>>>13,k=0|o[6],B=8191&k,x=k>>>13,E=0|o[7],$=8191&E,D=E>>>13,L=0|o[8],P=8191&L,R=L>>>13,O=0|o[9],U=8191&O,N=O>>>13,j=0|a[0],Y=8191&j,X=j>>>13,F=0|a[1],H=8191&F,W=F>>>13,G=0|a[2],z=8191&G,q=G>>>13,V=0|a[3],Z=8191&V,K=V>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,st=0|a[6],nt=8191&st,ot=st>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,dt=0|a[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var _t=(u+(r=Math.imul(c,Y))|0)+((8191&(s=(s=Math.imul(c,X))+Math.imul(f,Y)|0))<<13)|0;u=((n=Math.imul(f,X))+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(m,Y),s=(s=Math.imul(m,X))+Math.imul(p,Y)|0,n=Math.imul(p,X);var gt=(u+(r=r+Math.imul(c,H)|0)|0)+((8191&(s=(s=s+Math.imul(c,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((n=n+Math.imul(f,W)|0)+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,Y),s=(s=Math.imul(g,X))+Math.imul(b,Y)|0,n=Math.imul(b,X),r=r+Math.imul(m,H)|0,s=(s=s+Math.imul(m,W)|0)+Math.imul(p,H)|0,n=n+Math.imul(p,W)|0;var bt=(u+(r=r+Math.imul(c,z)|0)|0)+((8191&(s=(s=s+Math.imul(c,q)|0)+Math.imul(f,z)|0))<<13)|0;u=((n=n+Math.imul(f,q)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(w,Y),s=(s=Math.imul(w,X))+Math.imul(v,Y)|0,n=Math.imul(v,X),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,W)|0)+Math.imul(b,H)|0,n=n+Math.imul(b,W)|0,r=r+Math.imul(m,z)|0,s=(s=s+Math.imul(m,q)|0)+Math.imul(p,z)|0,n=n+Math.imul(p,q)|0;var yt=(u+(r=r+Math.imul(c,Z)|0)|0)+((8191&(s=(s=s+Math.imul(c,K)|0)+Math.imul(f,Z)|0))<<13)|0;u=((n=n+Math.imul(f,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,Y),s=(s=Math.imul(S,X))+Math.imul(C,Y)|0,n=Math.imul(C,X),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,r=r+Math.imul(g,z)|0,s=(s=s+Math.imul(g,q)|0)+Math.imul(b,z)|0,n=n+Math.imul(b,q)|0,r=r+Math.imul(m,Z)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,Z)|0,n=n+Math.imul(p,K)|0;var wt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(s=(s=s+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((n=n+Math.imul(f,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,Y),s=(s=Math.imul(T,X))+Math.imul(A,Y)|0,n=Math.imul(A,X),r=r+Math.imul(S,H)|0,s=(s=s+Math.imul(S,W)|0)+Math.imul(C,H)|0,n=n+Math.imul(C,W)|0,r=r+Math.imul(w,z)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(v,z)|0,n=n+Math.imul(v,q)|0,r=r+Math.imul(g,Z)|0,s=(s=s+Math.imul(g,K)|0)+Math.imul(b,Z)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(m,Q)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Q)|0,n=n+Math.imul(p,tt)|0;var vt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(s=(s=s+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((n=n+Math.imul(f,rt)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,Y),s=(s=Math.imul(B,X))+Math.imul(x,Y)|0,n=Math.imul(x,X),r=r+Math.imul(T,H)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,W)|0,r=r+Math.imul(S,z)|0,s=(s=s+Math.imul(S,q)|0)+Math.imul(C,z)|0,n=n+Math.imul(C,q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,K)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,tt)|0)+Math.imul(b,Q)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var Mt=(u+(r=r+Math.imul(c,nt)|0)|0)+((8191&(s=(s=s+Math.imul(c,ot)|0)+Math.imul(f,nt)|0))<<13)|0;u=((n=n+Math.imul(f,ot)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul($,Y),s=(s=Math.imul($,X))+Math.imul(D,Y)|0,n=Math.imul(D,X),r=r+Math.imul(B,H)|0,s=(s=s+Math.imul(B,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,r=r+Math.imul(T,z)|0,s=(s=s+Math.imul(T,q)|0)+Math.imul(A,z)|0,n=n+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(C,Z)|0,n=n+Math.imul(C,K)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(v,Q)|0,n=n+Math.imul(v,tt)|0,r=r+Math.imul(g,it)|0,s=(s=s+Math.imul(g,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var St=(u+(r=r+Math.imul(c,ht)|0)|0)+((8191&(s=(s=s+Math.imul(c,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((n=n+Math.imul(f,ut)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,Y),s=(s=Math.imul(P,X))+Math.imul(R,Y)|0,n=Math.imul(R,X),r=r+Math.imul($,H)|0,s=(s=s+Math.imul($,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,r=r+Math.imul(B,z)|0,s=(s=s+Math.imul(B,q)|0)+Math.imul(x,z)|0,n=n+Math.imul(x,q)|0,r=r+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(A,Z)|0,n=n+Math.imul(A,K)|0,r=r+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,tt)|0)+Math.imul(C,Q)|0,n=n+Math.imul(C,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,rt)|0,r=r+Math.imul(g,nt)|0,s=(s=s+Math.imul(g,ot)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ot)|0,r=r+Math.imul(m,ht)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,ut)|0;var Ct=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(s=(s=s+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((n=n+Math.imul(f,ft)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Y),s=(s=Math.imul(U,X))+Math.imul(N,Y)|0,n=Math.imul(N,X),r=r+Math.imul(P,H)|0,s=(s=s+Math.imul(P,W)|0)+Math.imul(R,H)|0,n=n+Math.imul(R,W)|0,r=r+Math.imul($,z)|0,s=(s=s+Math.imul($,q)|0)+Math.imul(D,z)|0,n=n+Math.imul(D,q)|0,r=r+Math.imul(B,Z)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,K)|0,r=r+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,tt)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,s=(s=s+Math.imul(S,rt)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,r=r+Math.imul(g,ht)|0,s=(s=s+Math.imul(g,ut)|0)+Math.imul(b,ht)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(m,ct)|0,s=(s=s+Math.imul(m,ft)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,ft)|0;var It=(u+(r=r+Math.imul(c,mt)|0)|0)+((8191&(s=(s=s+Math.imul(c,pt)|0)+Math.imul(f,mt)|0))<<13)|0;u=((n=n+Math.imul(f,pt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,H),s=(s=Math.imul(U,W))+Math.imul(N,H)|0,n=Math.imul(N,W),r=r+Math.imul(P,z)|0,s=(s=s+Math.imul(P,q)|0)+Math.imul(R,z)|0,n=n+Math.imul(R,q)|0,r=r+Math.imul($,Z)|0,s=(s=s+Math.imul($,K)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,K)|0,r=r+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,tt)|0)+Math.imul(x,Q)|0,n=n+Math.imul(x,tt)|0,r=r+Math.imul(T,it)|0,s=(s=s+Math.imul(T,rt)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,rt)|0,r=r+Math.imul(S,nt)|0,s=(s=s+Math.imul(S,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,r=r+Math.imul(w,ht)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,ut)|0,r=r+Math.imul(g,ct)|0,s=(s=s+Math.imul(g,ft)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,ft)|0;var Tt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,z),s=(s=Math.imul(U,q))+Math.imul(N,z)|0,n=Math.imul(N,q),r=r+Math.imul(P,Z)|0,s=(s=s+Math.imul(P,K)|0)+Math.imul(R,Z)|0,n=n+Math.imul(R,K)|0,r=r+Math.imul($,Q)|0,s=(s=s+Math.imul($,tt)|0)+Math.imul(D,Q)|0,n=n+Math.imul(D,tt)|0,r=r+Math.imul(B,it)|0,s=(s=s+Math.imul(B,rt)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,rt)|0,r=r+Math.imul(T,nt)|0,s=(s=s+Math.imul(T,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,s=(s=s+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,ut)|0,r=r+Math.imul(w,ct)|0,s=(s=s+Math.imul(w,ft)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,ft)|0;var At=(u+(r=r+Math.imul(g,mt)|0)|0)+((8191&(s=(s=s+Math.imul(g,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,Z),s=(s=Math.imul(U,K))+Math.imul(N,Z)|0,n=Math.imul(N,K),r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,tt)|0,r=r+Math.imul($,it)|0,s=(s=s+Math.imul($,rt)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,rt)|0,r=r+Math.imul(B,nt)|0,s=(s=s+Math.imul(B,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,r=r+Math.imul(T,ht)|0,s=(s=s+Math.imul(T,ut)|0)+Math.imul(A,ht)|0,n=n+Math.imul(A,ut)|0,r=r+Math.imul(S,ct)|0,s=(s=s+Math.imul(S,ft)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,ft)|0;var kt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((n=n+Math.imul(v,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),s=(s=Math.imul(U,tt))+Math.imul(N,Q)|0,n=Math.imul(N,tt),r=r+Math.imul(P,it)|0,s=(s=s+Math.imul(P,rt)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,rt)|0,r=r+Math.imul($,nt)|0,s=(s=s+Math.imul($,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,r=r+Math.imul(B,ht)|0,s=(s=s+Math.imul(B,ut)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,ut)|0,r=r+Math.imul(T,ct)|0,s=(s=s+Math.imul(T,ft)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,ft)|0;var Bt=(u+(r=r+Math.imul(S,mt)|0)|0)+((8191&(s=(s=s+Math.imul(S,pt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((n=n+Math.imul(C,pt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(U,it),s=(s=Math.imul(U,rt))+Math.imul(N,it)|0,n=Math.imul(N,rt),r=r+Math.imul(P,nt)|0,s=(s=s+Math.imul(P,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,r=r+Math.imul($,ht)|0,s=(s=s+Math.imul($,ut)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,ut)|0,r=r+Math.imul(B,ct)|0,s=(s=s+Math.imul(B,ft)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,ft)|0;var xt=(u+(r=r+Math.imul(T,mt)|0)|0)+((8191&(s=(s=s+Math.imul(T,pt)|0)+Math.imul(A,mt)|0))<<13)|0;u=((n=n+Math.imul(A,pt)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,nt),s=(s=Math.imul(U,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),r=r+Math.imul(P,ht)|0,s=(s=s+Math.imul(P,ut)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,ut)|0,r=r+Math.imul($,ct)|0,s=(s=s+Math.imul($,ft)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,ft)|0;var Et=(u+(r=r+Math.imul(B,mt)|0)|0)+((8191&(s=(s=s+Math.imul(B,pt)|0)+Math.imul(x,mt)|0))<<13)|0;u=((n=n+Math.imul(x,pt)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,ht),s=(s=Math.imul(U,ut))+Math.imul(N,ht)|0,n=Math.imul(N,ut),r=r+Math.imul(P,ct)|0,s=(s=s+Math.imul(P,ft)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,ft)|0;var $t=(u+(r=r+Math.imul($,mt)|0)|0)+((8191&(s=(s=s+Math.imul($,pt)|0)+Math.imul(D,mt)|0))<<13)|0;u=((n=n+Math.imul(D,pt)|0)+(s>>>13)|0)+($t>>>26)|0,$t&=67108863,r=Math.imul(U,ct),s=(s=Math.imul(U,ft))+Math.imul(N,ct)|0,n=Math.imul(N,ft);var Dt=(u+(r=r+Math.imul(P,mt)|0)|0)+((8191&(s=(s=s+Math.imul(P,pt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((n=n+Math.imul(R,pt)|0)+(s>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(u+(r=Math.imul(U,mt))|0)+((8191&(s=(s=Math.imul(U,pt))+Math.imul(N,mt)|0))<<13)|0;return u=((n=Math.imul(N,pt))+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h[0]=_t,h[1]=gt,h[2]=bt,h[3]=yt,h[4]=wt,h[5]=vt,h[6]=Mt,h[7]=St,h[8]=Ct,h[9]=It,h[10]=Tt,h[11]=At,h[12]=kt,h[13]=Bt,h[14]=xt,h[15]=Et,h[16]=$t,h[17]=Dt,h[18]=Lt,0!==u&&(h[19]=u,i.length++),i};function m(t,e,i){return(new p).mulp(t,e,i)}function p(t,e){this.x=t,this.y=e}Math.imul||(d=f),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):i<63?f(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,h=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=h;u++){var l=n-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;a=67108863&(f=f+a|0),s+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}(this,t,e):m(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},p.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},p.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},p.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<s;l+=a)for(var c=h,f=u,d=0;d<o;d++){var m=i[l+d],p=r[l+d],_=i[l+d+o],g=r[l+d+o],b=c*_-f*g;g=c*g+f*_,_=b,i[l+d]=m+_,r[l+d]=p+g,i[l+d+o]=m-_,r[l+d+o]=p-g,d!==a&&(b=h*c-u*f,f=h*f+u*c,c=b)}},p.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},p.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},p.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},p.prototype.convert13b=function(t,e,i,r){for(var s=0,n=0;n<e;n++)s+=0|t[n],i[2*n]=8191&s,s>>>=13,i[2*n+1]=8191&s,s>>>=13;for(n=2*e;n<r;++n)i[n]=0},p.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},p.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,n,a,h,r,s),this.transform(u,n,l,c,r,s);for(var d=0;d<r;d++){var m=a[d]*l[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*l[d],a[d]=m}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,s=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=(t.words[r]&1<<s)>>>s}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(e=0;e<this.length;e++){var o=this.words[e]&s,a=(0|this.words[e])-o<<i;this.words[e]=a|n,n=o>>>26-i}n&&(this.words[e]=n,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(t){return this.iushln(t)},s.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var s=t%26,n=Math.min((t-s)/26,this.length),o=67108863^67108863>>>s<<s,a=i;if(r-=n,r=Math.max(0,r),a){for(var h=0;h<n;h++)a.words[h]=this.words[h];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,h=0;h<this.length;h++)this.words[h]=this.words[h+n];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=r);h--){var l=0|this.words[h];this.words[h]=u<<26-s|l>>>s,u=l&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},s.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var r,s,n=t.length+i;this._expand(n);var o=0;for(r=0;r<t.length;r++){s=(0|this.words[r+i])+o;var a=(0|t.words[r])*e;o=((s-=67108863&a)>>26)-(a/67108864|0),this.words[r+i]=67108863&s}for(;r<this.length-i;r++)o=(s=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&s;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(s=-(0|this.words[r])+o)>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,n,o},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},s.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new s(1),n=new s(0),o=new s(0),a=new s(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.iushrn(1),n.iushrn(1);for(var d=0,m=1;0==(i.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),n.isub(a)):(i.isub(e),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:i.iushln(h)}},s.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,n=new s(1),o=new s(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,u=1;0==(e.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(e.iushrn(h);h-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o)):(i.isub(e),o.isub(n))}return(r=0===e.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,n=i;0!==s&&n<this.length;n++){var o=0|this.words[n];s=(o+=s)>>>26,o&=67108863,this.words[n]=o}return 0!==s&&(this.words[n]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new M(t)},s.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return this._forceRed(t)},s.prototype.redAdd=function(t){return this.red.add(this,t)},s.prototype.redIAdd=function(t){return this.red.iadd(this,t)},s.prototype.redSub=function(t){return this.red.sub(this,t)},s.prototype.redISub=function(t){return this.red.isub(this,t)},s.prototype.redShl=function(t){return this.red.shl(this,t)},s.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},r(b,g),b.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,t.words[r-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(y,g),r(w,g),r(v,g),v.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new y;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new v}return _[t]=e,e},M.prototype._verify1=function(t){},M.prototype._verify2=function(t,e){},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new s(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),r=0;!i.isZero()&&0===i.andln(1);)r++,i.iushrn(1);var n=new s(1).toRed(this),o=n.redNeg(),a=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,a).cmp(o);)h.redIAdd(o);for(var u=this.pow(h,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=r;0!==c.cmp(n);){for(var d=c,m=0;0!==d.cmp(n);m++)d=d.redSqr();var p=this.pow(u,new s(1).iushln(f-m-1));l=l.redMul(p),u=p.redSqr(),c=c.redMul(u),f=m}return l},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=h-1;l>=0;l--){var c=u>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},r(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_$bn_79,this),_$bn_79=_$bn_79.exports;var _$browser_78={};(function(t){(function(){_$browser_78=function(t){return new i(t)};var e={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function i(t){this.curveType=e[t],this.curveType||(this.curveType={name:t}),this.curve=new _$elliptic_96.ec(this.curveType.name),this.keys=void 0}function r(e,i,r){Array.isArray(e)||(e=e.toArray());var s=new t(e);if(r&&s.length<r){var n=new t(r-s.length);n.fill(0),s=t.concat([n,s])}return i?s.toString(i):s}e.p224=e.secp224r1,e.p256=e.secp256r1=e.prime256v1,e.p192=e.secp192r1=e.prime192v1,e.p384=e.secp384r1,e.p521=e.secp521r1,i.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},i.prototype.computeSecret=function(e,i,s){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),r(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),s,this.curveType.byteLength)},i.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),r(i,t)},i.prototype.getPrivateKey=function(t){return r(this.keys.getPrivate(),t)},i.prototype.setPublicKey=function(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this.keys._importPublic(e),this},i.prototype.setPrivateKey=function(e,i){i=i||"utf8",t.isBuffer(e)||(e=new t(e,i));var r=new _$bn_79(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this)}).call(this,_$buffer_73({}).Buffer);var __Buffer_156=_$safeBuffer_177.Buffer;function i2ops(t){var e=__Buffer_156.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var _$mgf_156=function(t,e){for(var i,r=__Buffer_156.alloc(0),s=0;r.length<e;)i=i2ops(s++),r=__Buffer_156.concat([r,_$browser_80("sha1").update(t).update(i).digest()]);return r.slice(0,e)},_$xor_161=function(t,e){for(var i=t.length,r=-1;++r<i;)t[r]^=e[r];return t},_$bn_157={exports:{}};!function(t,i){"use strict";function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_$empty_45({}).Buffer}catch(e){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function h(t,e,i,r){for(var s=0,n=Math.min(t.length,i),o=e;o<n;o++){var a=t.charCodeAt(o)-48;s*=r,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n,o=0;if("be"===i)for(r=t.length-1,s=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===i)for(r=0,s=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[s]|=n<<o&67108863,this.words[s+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,n=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)s=a(t,e,r)<<n,this.words[o]|=67108863&s,n>=18?(n-=18,o+=1,this.words[o]|=s>>>26):n+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=e)r++;r--,s=s/e|0;for(var n=t.length-i,o=n%r,a=Math.min(n,n-o)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=h(t,l,t.length,e),l=0;l<o;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var s=0|t.words[0],n=0|e.words[0],o=s*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var u=1;u<r;u++){for(var l=h>>>26,c=67108863&h,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var m=u-d|0;l+=(o=(s=0|t.words[m])*(n=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,h=0|l}return 0!==h?i.words[u]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,s=0,n=0;n<this.length;n++){var o=this.words[n],a=(16777215&(o<<r|s)).toString(16);s=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),i=0!==s||n!==this.length-1?u[6-a.length]+a+i:a+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=l[t],f=c[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?m+i:u[h-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),s=i||Math.max(1,r);this.strip();var n,o,a="le"===e,h=new t(s),u=this.clone();if(a){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-r;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var s=0,n=0;n<r.length;n++)e=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&e,s=e>>>26;for(;0!==s&&n<i.length;n++)e=(0|i.words[n])+s,this.words[n]=67108863&e,s=e>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)n=(e=(0|i.words[o])-(0|r.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,s,n,o=t.words,a=e.words,h=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],m=8191&d,p=d>>>13,_=0|o[2],g=8191&_,b=_>>>13,y=0|o[3],w=8191&y,v=y>>>13,M=0|o[4],S=8191&M,C=M>>>13,I=0|o[5],T=8191&I,A=I>>>13,k=0|o[6],B=8191&k,x=k>>>13,E=0|o[7],$=8191&E,D=E>>>13,L=0|o[8],P=8191&L,R=L>>>13,O=0|o[9],U=8191&O,N=O>>>13,j=0|a[0],Y=8191&j,X=j>>>13,F=0|a[1],H=8191&F,W=F>>>13,G=0|a[2],z=8191&G,q=G>>>13,V=0|a[3],Z=8191&V,K=V>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,st=0|a[6],nt=8191&st,ot=st>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,dt=0|a[9],mt=8191&dt,pt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var _t=(u+(r=Math.imul(c,Y))|0)+((8191&(s=(s=Math.imul(c,X))+Math.imul(f,Y)|0))<<13)|0;u=((n=Math.imul(f,X))+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(m,Y),s=(s=Math.imul(m,X))+Math.imul(p,Y)|0,n=Math.imul(p,X);var gt=(u+(r=r+Math.imul(c,H)|0)|0)+((8191&(s=(s=s+Math.imul(c,W)|0)+Math.imul(f,H)|0))<<13)|0;u=((n=n+Math.imul(f,W)|0)+(s>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,Y),s=(s=Math.imul(g,X))+Math.imul(b,Y)|0,n=Math.imul(b,X),r=r+Math.imul(m,H)|0,s=(s=s+Math.imul(m,W)|0)+Math.imul(p,H)|0,n=n+Math.imul(p,W)|0;var bt=(u+(r=r+Math.imul(c,z)|0)|0)+((8191&(s=(s=s+Math.imul(c,q)|0)+Math.imul(f,z)|0))<<13)|0;u=((n=n+Math.imul(f,q)|0)+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(w,Y),s=(s=Math.imul(w,X))+Math.imul(v,Y)|0,n=Math.imul(v,X),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,W)|0)+Math.imul(b,H)|0,n=n+Math.imul(b,W)|0,r=r+Math.imul(m,z)|0,s=(s=s+Math.imul(m,q)|0)+Math.imul(p,z)|0,n=n+Math.imul(p,q)|0;var yt=(u+(r=r+Math.imul(c,Z)|0)|0)+((8191&(s=(s=s+Math.imul(c,K)|0)+Math.imul(f,Z)|0))<<13)|0;u=((n=n+Math.imul(f,K)|0)+(s>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,Y),s=(s=Math.imul(S,X))+Math.imul(C,Y)|0,n=Math.imul(C,X),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,r=r+Math.imul(g,z)|0,s=(s=s+Math.imul(g,q)|0)+Math.imul(b,z)|0,n=n+Math.imul(b,q)|0,r=r+Math.imul(m,Z)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(p,Z)|0,n=n+Math.imul(p,K)|0;var wt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(s=(s=s+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((n=n+Math.imul(f,tt)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,Y),s=(s=Math.imul(T,X))+Math.imul(A,Y)|0,n=Math.imul(A,X),r=r+Math.imul(S,H)|0,s=(s=s+Math.imul(S,W)|0)+Math.imul(C,H)|0,n=n+Math.imul(C,W)|0,r=r+Math.imul(w,z)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(v,z)|0,n=n+Math.imul(v,q)|0,r=r+Math.imul(g,Z)|0,s=(s=s+Math.imul(g,K)|0)+Math.imul(b,Z)|0,n=n+Math.imul(b,K)|0,r=r+Math.imul(m,Q)|0,s=(s=s+Math.imul(m,tt)|0)+Math.imul(p,Q)|0,n=n+Math.imul(p,tt)|0;var vt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(s=(s=s+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((n=n+Math.imul(f,rt)|0)+(s>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,Y),s=(s=Math.imul(B,X))+Math.imul(x,Y)|0,n=Math.imul(x,X),r=r+Math.imul(T,H)|0,s=(s=s+Math.imul(T,W)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,W)|0,r=r+Math.imul(S,z)|0,s=(s=s+Math.imul(S,q)|0)+Math.imul(C,z)|0,n=n+Math.imul(C,q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,K)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,K)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,tt)|0)+Math.imul(b,Q)|0,n=n+Math.imul(b,tt)|0,r=r+Math.imul(m,it)|0,s=(s=s+Math.imul(m,rt)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,rt)|0;var Mt=(u+(r=r+Math.imul(c,nt)|0)|0)+((8191&(s=(s=s+Math.imul(c,ot)|0)+Math.imul(f,nt)|0))<<13)|0;u=((n=n+Math.imul(f,ot)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul($,Y),s=(s=Math.imul($,X))+Math.imul(D,Y)|0,n=Math.imul(D,X),r=r+Math.imul(B,H)|0,s=(s=s+Math.imul(B,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,r=r+Math.imul(T,z)|0,s=(s=s+Math.imul(T,q)|0)+Math.imul(A,z)|0,n=n+Math.imul(A,q)|0,r=r+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(C,Z)|0,n=n+Math.imul(C,K)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,tt)|0)+Math.imul(v,Q)|0,n=n+Math.imul(v,tt)|0,r=r+Math.imul(g,it)|0,s=(s=s+Math.imul(g,rt)|0)+Math.imul(b,it)|0,n=n+Math.imul(b,rt)|0,r=r+Math.imul(m,nt)|0,s=(s=s+Math.imul(m,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var St=(u+(r=r+Math.imul(c,ht)|0)|0)+((8191&(s=(s=s+Math.imul(c,ut)|0)+Math.imul(f,ht)|0))<<13)|0;u=((n=n+Math.imul(f,ut)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,Y),s=(s=Math.imul(P,X))+Math.imul(R,Y)|0,n=Math.imul(R,X),r=r+Math.imul($,H)|0,s=(s=s+Math.imul($,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,r=r+Math.imul(B,z)|0,s=(s=s+Math.imul(B,q)|0)+Math.imul(x,z)|0,n=n+Math.imul(x,q)|0,r=r+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(A,Z)|0,n=n+Math.imul(A,K)|0,r=r+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,tt)|0)+Math.imul(C,Q)|0,n=n+Math.imul(C,tt)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,rt)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,rt)|0,r=r+Math.imul(g,nt)|0,s=(s=s+Math.imul(g,ot)|0)+Math.imul(b,nt)|0,n=n+Math.imul(b,ot)|0,r=r+Math.imul(m,ht)|0,s=(s=s+Math.imul(m,ut)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,ut)|0;var Ct=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(s=(s=s+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((n=n+Math.imul(f,ft)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,Y),s=(s=Math.imul(U,X))+Math.imul(N,Y)|0,n=Math.imul(N,X),r=r+Math.imul(P,H)|0,s=(s=s+Math.imul(P,W)|0)+Math.imul(R,H)|0,n=n+Math.imul(R,W)|0,r=r+Math.imul($,z)|0,s=(s=s+Math.imul($,q)|0)+Math.imul(D,z)|0,n=n+Math.imul(D,q)|0,r=r+Math.imul(B,Z)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,K)|0,r=r+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,tt)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,tt)|0,r=r+Math.imul(S,it)|0,s=(s=s+Math.imul(S,rt)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,rt)|0,r=r+Math.imul(w,nt)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,r=r+Math.imul(g,ht)|0,s=(s=s+Math.imul(g,ut)|0)+Math.imul(b,ht)|0,n=n+Math.imul(b,ut)|0,r=r+Math.imul(m,ct)|0,s=(s=s+Math.imul(m,ft)|0)+Math.imul(p,ct)|0,n=n+Math.imul(p,ft)|0;var It=(u+(r=r+Math.imul(c,mt)|0)|0)+((8191&(s=(s=s+Math.imul(c,pt)|0)+Math.imul(f,mt)|0))<<13)|0;u=((n=n+Math.imul(f,pt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,H),s=(s=Math.imul(U,W))+Math.imul(N,H)|0,n=Math.imul(N,W),r=r+Math.imul(P,z)|0,s=(s=s+Math.imul(P,q)|0)+Math.imul(R,z)|0,n=n+Math.imul(R,q)|0,r=r+Math.imul($,Z)|0,s=(s=s+Math.imul($,K)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,K)|0,r=r+Math.imul(B,Q)|0,s=(s=s+Math.imul(B,tt)|0)+Math.imul(x,Q)|0,n=n+Math.imul(x,tt)|0,r=r+Math.imul(T,it)|0,s=(s=s+Math.imul(T,rt)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,rt)|0,r=r+Math.imul(S,nt)|0,s=(s=s+Math.imul(S,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,r=r+Math.imul(w,ht)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,ut)|0,r=r+Math.imul(g,ct)|0,s=(s=s+Math.imul(g,ft)|0)+Math.imul(b,ct)|0,n=n+Math.imul(b,ft)|0;var Tt=(u+(r=r+Math.imul(m,mt)|0)|0)+((8191&(s=(s=s+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;u=((n=n+Math.imul(p,pt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,z),s=(s=Math.imul(U,q))+Math.imul(N,z)|0,n=Math.imul(N,q),r=r+Math.imul(P,Z)|0,s=(s=s+Math.imul(P,K)|0)+Math.imul(R,Z)|0,n=n+Math.imul(R,K)|0,r=r+Math.imul($,Q)|0,s=(s=s+Math.imul($,tt)|0)+Math.imul(D,Q)|0,n=n+Math.imul(D,tt)|0,r=r+Math.imul(B,it)|0,s=(s=s+Math.imul(B,rt)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,rt)|0,r=r+Math.imul(T,nt)|0,s=(s=s+Math.imul(T,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,r=r+Math.imul(S,ht)|0,s=(s=s+Math.imul(S,ut)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,ut)|0,r=r+Math.imul(w,ct)|0,s=(s=s+Math.imul(w,ft)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,ft)|0;var At=(u+(r=r+Math.imul(g,mt)|0)|0)+((8191&(s=(s=s+Math.imul(g,pt)|0)+Math.imul(b,mt)|0))<<13)|0;u=((n=n+Math.imul(b,pt)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,Z),s=(s=Math.imul(U,K))+Math.imul(N,Z)|0,n=Math.imul(N,K),r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,tt)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,tt)|0,r=r+Math.imul($,it)|0,s=(s=s+Math.imul($,rt)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,rt)|0,r=r+Math.imul(B,nt)|0,s=(s=s+Math.imul(B,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,r=r+Math.imul(T,ht)|0,s=(s=s+Math.imul(T,ut)|0)+Math.imul(A,ht)|0,n=n+Math.imul(A,ut)|0,r=r+Math.imul(S,ct)|0,s=(s=s+Math.imul(S,ft)|0)+Math.imul(C,ct)|0,n=n+Math.imul(C,ft)|0;var kt=(u+(r=r+Math.imul(w,mt)|0)|0)+((8191&(s=(s=s+Math.imul(w,pt)|0)+Math.imul(v,mt)|0))<<13)|0;u=((n=n+Math.imul(v,pt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,Q),s=(s=Math.imul(U,tt))+Math.imul(N,Q)|0,n=Math.imul(N,tt),r=r+Math.imul(P,it)|0,s=(s=s+Math.imul(P,rt)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,rt)|0,r=r+Math.imul($,nt)|0,s=(s=s+Math.imul($,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,r=r+Math.imul(B,ht)|0,s=(s=s+Math.imul(B,ut)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,ut)|0,r=r+Math.imul(T,ct)|0,s=(s=s+Math.imul(T,ft)|0)+Math.imul(A,ct)|0,n=n+Math.imul(A,ft)|0;var Bt=(u+(r=r+Math.imul(S,mt)|0)|0)+((8191&(s=(s=s+Math.imul(S,pt)|0)+Math.imul(C,mt)|0))<<13)|0;u=((n=n+Math.imul(C,pt)|0)+(s>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(U,it),s=(s=Math.imul(U,rt))+Math.imul(N,it)|0,n=Math.imul(N,rt),r=r+Math.imul(P,nt)|0,s=(s=s+Math.imul(P,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,r=r+Math.imul($,ht)|0,s=(s=s+Math.imul($,ut)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,ut)|0,r=r+Math.imul(B,ct)|0,s=(s=s+Math.imul(B,ft)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,ft)|0;var xt=(u+(r=r+Math.imul(T,mt)|0)|0)+((8191&(s=(s=s+Math.imul(T,pt)|0)+Math.imul(A,mt)|0))<<13)|0;u=((n=n+Math.imul(A,pt)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(U,nt),s=(s=Math.imul(U,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),r=r+Math.imul(P,ht)|0,s=(s=s+Math.imul(P,ut)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,ut)|0,r=r+Math.imul($,ct)|0,s=(s=s+Math.imul($,ft)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,ft)|0;var Et=(u+(r=r+Math.imul(B,mt)|0)|0)+((8191&(s=(s=s+Math.imul(B,pt)|0)+Math.imul(x,mt)|0))<<13)|0;u=((n=n+Math.imul(x,pt)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,ht),s=(s=Math.imul(U,ut))+Math.imul(N,ht)|0,n=Math.imul(N,ut),r=r+Math.imul(P,ct)|0,s=(s=s+Math.imul(P,ft)|0)+Math.imul(R,ct)|0,n=n+Math.imul(R,ft)|0;var $t=(u+(r=r+Math.imul($,mt)|0)|0)+((8191&(s=(s=s+Math.imul($,pt)|0)+Math.imul(D,mt)|0))<<13)|0;u=((n=n+Math.imul(D,pt)|0)+(s>>>13)|0)+($t>>>26)|0,$t&=67108863,r=Math.imul(U,ct),s=(s=Math.imul(U,ft))+Math.imul(N,ct)|0,n=Math.imul(N,ft);var Dt=(u+(r=r+Math.imul(P,mt)|0)|0)+((8191&(s=(s=s+Math.imul(P,pt)|0)+Math.imul(R,mt)|0))<<13)|0;u=((n=n+Math.imul(R,pt)|0)+(s>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(u+(r=Math.imul(U,mt))|0)+((8191&(s=(s=Math.imul(U,pt))+Math.imul(N,mt)|0))<<13)|0;return u=((n=Math.imul(N,pt))+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,h[0]=_t,h[1]=gt,h[2]=bt,h[3]=yt,h[4]=wt,h[5]=vt,h[6]=Mt,h[7]=St,h[8]=Ct,h[9]=It,h[10]=Tt,h[11]=At,h[12]=kt,h[13]=Bt,h[14]=xt,h[15]=Et,h[16]=$t,h[17]=Dt,h[18]=Lt,0!==u&&(h[19]=u,i.length++),i};function m(t,e,i){return(new p).mulp(t,e,i)}function p(t,e){this.x=t,this.y=e}Math.imul||(d=f),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):i<63?f(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,h=Math.min(n,e.length-1),u=Math.max(0,n-t.length+1);u<=h;u++){var l=n-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;a=67108863&(f=f+a|0),s+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}(this,t,e):m(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},p.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,s=0;s<e;s++)r|=(1&t)<<e-s-1,t>>=1;return r},p.prototype.permute=function(t,e,i,r,s,n){for(var o=0;o<n;o++)r[o]=e[t[o]],s[o]=i[t[o]]},p.prototype.transform=function(t,e,i,r,s,n){this.permute(n,t,e,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<s;l+=a)for(var c=h,f=u,d=0;d<o;d++){var m=i[l+d],p=r[l+d],_=i[l+d+o],g=r[l+d+o],b=c*_-f*g;g=c*g+f*_,_=b,i[l+d]=m+_,r[l+d]=p+g,i[l+d+o]=m-_,r[l+d+o]=p-g,d!==a&&(b=h*c-u*f,f=h*f+u*c,c=b)}},p.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},p.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=t[r];t[r]=t[i-r-1],t[i-r-1]=s,s=e[r],e[r]=-e[i-r-1],e[i-r-1]=-s}},p.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var s=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&s,i=s<67108864?0:s/67108864|0}return t},p.prototype.convert13b=function(t,e,i,r){for(var s=0,n=0;n<e;n++)s+=0|t[n],i[2*n]=8191&s,s>>>=13,i[2*n+1]=8191&s,s>>>=13;for(n=2*e;n<r;++n)i[n]=0},p.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},p.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),s=this.makeRBT(r),n=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,n,a,h,r,s),this.transform(u,n,l,c,r,s);for(var d=0;d<r;d++){var m=a[d]*l[d]-h[d]*c[d];h[d]=a[d]*c[d]+h[d]*l[d],a[d]=m}return this.conjugate(a,h,r),this.transform(a,h,f,n,r,s),this.conjugate(f,n,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,s=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,s=i%26;e[i]=(t.words[r]&1<<s)>>>s}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(e=0;e<this.length;e++){var o=this.words[e]&s,a=(0|this.words[e])-o<<i;this.words[e]=a|n,n=o>>>26-i}n&&(this.words[e]=n,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},s.prototype.ishln=function(t){return this.iushln(t)},s.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var s=t%26,n=Math.min((t-s)/26,this.length),o=67108863^67108863>>>s<<s,a=i;if(r-=n,r=Math.max(0,r),a){for(var h=0;h<n;h++)a.words[h]=this.words[h];a.length=n}if(0===n);else if(this.length>n)for(this.length-=n,h=0;h<this.length;h++)this.words[h]=this.words[h+n];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=r);h--){var l=0|this.words[h];this.words[h]=u<<26-s|l>>>s,u=l&o}return a&&0!==u&&(a.words[a.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},s.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var r,s,n=t.length+i;this._expand(n);var o=0;for(r=0;r<t.length;r++){s=(0|this.words[r+i])+o;var a=(0|t.words[r])*e;o=((s-=67108863&a)>>26)-(a/67108864|0),this.words[r+i]=67108863&s}for(;r<this.length-i;r++)o=(s=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&s;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(s=-(0|this.words[r])+o)>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(n,1,h);0===l.negative&&(r=l,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(r=o.div.neg()),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(t)),{div:r,mod:n}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(t)),{div:o.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,n,o},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),s=t.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},s.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new s(1),n=new s(0),o=new s(0),a=new s(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(l)),r.iushrn(1),n.iushrn(1);for(var d=0,m=1;0==(i.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(l)),o.iushrn(1),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(o),n.isub(a)):(i.isub(e),o.isub(r),a.isub(n))}return{a:o,b:a,gcd:i.iushln(h)}},s.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,n=new s(1),o=new s(0),a=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,u=1;0==(e.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(e.iushrn(h);h-- >0;)n.isOdd()&&n.iadd(a),n.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o)):(i.isub(e),o.isub(n))}return(r=0===e.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(t),r},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=e.cmp(i);if(s<0){var n=e;e=i,i=n}else if(0===s||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var s=r,n=i;0!==s&&n<this.length;n++){var o=0|this.words[n];s=(o+=s)>>>26,o&=67108863,this.words[n]=o}return 0!==s&&(this.words[n]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|t.words[i];if(r!==s){r<s?e=-1:r>s&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new M(t)},s.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return this._forceRed(t)},s.prototype.redAdd=function(t){return this.red.add(this,t)},s.prototype.redIAdd=function(t){return this.red.iadd(this,t)},s.prototype.redSub=function(t){return this.red.sub(this,t)},s.prototype.redISub=function(t){return this.red.isub(this,t)},s.prototype.redShl=function(t){return this.red.shl(this,t)},s.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},r(b,g),b.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=4194303&s,r=10;r<t.length;r++){var n=0|t.words[r];t.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,t.words[r-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(y,g),r(w,g),r(v,g),v.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,s=67108863&r;r>>>=26,t.words[i]=s,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new y;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new v}return _[t]=e,e},M.prototype._verify1=function(t){},M.prototype._verify2=function(t,e){},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new s(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),r=0;!i.isZero()&&0===i.andln(1);)r++,i.iushrn(1);var n=new s(1).toRed(this),o=n.redNeg(),a=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,a).cmp(o);)h.redIAdd(o);for(var u=this.pow(h,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=r;0!==c.cmp(n);){for(var d=c,m=0;0!==d.cmp(n);m++)d=d.redSqr();var p=this.pow(u,new s(1).iushln(f-m-1));l=l.redMul(p),u=p.redSqr(),c=c.redMul(u),f=m}return l},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=h-1;l>=0;l--){var c=u>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===r&&0===l)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},r(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_$bn_157,this),_$bn_157=_$bn_157.exports;var __Buffer_160=_$safeBuffer_177.Buffer,_$withPublic_160=function(t,e){return __Buffer_160.from(t.toRed(_$bn_157.mont(e.modulus)).redPow(new _$bn_157(e.publicExponent)).fromRed().toArray())},__crt_159=require(66),__Buffer_159=_$safeBuffer_177.Buffer,_$publicEncrypt_159=function(t,e,i){var r;r=t.padding?t.padding:i?1:4;var s,n=_$parseAsn1_145(t);if(4===r)s=function(t,e){var i=t.modulus.byteLength(),r=e.length,s=_$browser_80("sha1").update(__Buffer_159.alloc(0)).digest(),n=s.length,o=2*n;if(r>i-o-2)throw new Error("message too long");var a=__Buffer_159.alloc(i-r-o-2),h=i-n-1,u=_$browser_163(n),l=_$xor_161(__Buffer_159.concat([s,a,__Buffer_159.alloc(1,1),e],h),_$mgf_156(u,h)),c=_$xor_161(u,_$mgf_156(l,n));return new _$bn_157(__Buffer_159.concat([__Buffer_159.alloc(1),c,l],i))}(n,e);else if(1===r)s=function(t,e,i){var r,s=e.length,n=t.modulus.byteLength();if(s>n-11)throw new Error("message too long");return r=i?__Buffer_159.alloc(n-s-3,255):function(t){for(var e,i=__Buffer_159.allocUnsafe(t),r=0,s=_$browser_163(2*t),n=0;r<t;)n===s.length&&(s=_$browser_163(2*t),n=0),(e=s[n++])&&(i[r++]=e);return i}(n-s-3),new _$bn_157(__Buffer_159.concat([__Buffer_159.from([0,i?1:2]),r,__Buffer_159.alloc(1),e],n))}(n,e,i);else{if(3!==r)throw new Error("unknown padding");if((s=new _$bn_157(e)).cmp(n.modulus)>=0)throw new Error("data too long for modulus")}return i?__crt_159(s,n):_$withPublic_160(s,n)},__crt_158=require(66),__Buffer_158=_$safeBuffer_177.Buffer,_$privateDecrypt_158=function(t,e,i){var r;r=t.padding?t.padding:i?1:4;var s,n=_$parseAsn1_145(t),o=n.modulus.byteLength();if(e.length>o||new _$bn_157(e).cmp(n.modulus)>=0)throw new Error("decryption error");s=i?_$withPublic_160(new _$bn_157(e),n):__crt_158(e,n);var a=__Buffer_158.alloc(o-s.length);if(s=__Buffer_158.concat([a,s],o),4===r)return function(t,e){var i=t.modulus.byteLength(),r=_$browser_80("sha1").update(__Buffer_158.alloc(0)).digest(),s=r.length;if(0!==e[0])throw new Error("decryption error");var n=e.slice(1,s+1),o=e.slice(s+1),a=_$xor_161(n,_$mgf_156(o,s)),h=_$xor_161(o,_$mgf_156(a,i-s-1));if(function(t,e){t=__Buffer_158.from(t),e=__Buffer_158.from(e);var i=0,r=t.length;t.length!==e.length&&(i++,r=Math.min(t.length,e.length));for(var s=-1;++s<r;)i+=t[s]^e[s];return i}(r,h.slice(0,s)))throw new Error("decryption error");for(var u=s;0===h[u];)u++;if(1!==h[u++])throw new Error("decryption error");return h.slice(u)}(n,s);if(1===r)return function(t,e,i){for(var r=e.slice(0,2),s=2,n=0;0!==e[s++];)if(s>=e.length){n++;break}var o=e.slice(2,s-1);if(("0002"!==r.toString("hex")&&!i||"0001"!==r.toString("hex")&&i)&&n++,o.length<8&&n++,n)throw new Error("decryption error");return e.slice(s)}(0,s,i);if(3===r)return s;throw new Error("unknown padding")},_$browser_155={},_$browser_164={};(function(t,e){(function(){"use strict";_$safeBuffer_177.Buffer,_$safeBuffer_177.kMaxLength;var i=e.crypto||e.msCrypto;Math.pow(2,32);i&&i.getRandomValues||t.browser}).call(this)}).call(this,_$browser_154,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$cryptoBrowserify_84={};_$cryptoBrowserify_84.randomBytes=_$cryptoBrowserify_84.pseudoRandomBytes=_$browser_163;var algoKeys=Object.keys(_$algos_67),hashes=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(algoKeys);_$browser_146.pbkdf2,_$browser_146.pbkdf2Sync,_$browser_63.Cipher,_$browser_63.createCipher,_$browser_63.Cipheriv,_$browser_63.createCipheriv,_$browser_63.Decipher,_$browser_63.createDecipher,_$browser_63.Decipheriv,_$browser_63.createDecipheriv,_$browser_63.getCiphers,_$browser_63.listCiphers,_$browser_91.DiffieHellmanGroup,_$browser_91.createDiffieHellmanGroup,_$browser_91.getDiffieHellman,_$browser_91.createDiffieHellman,_$browser_91.DiffieHellman,_$browser_70.createSign,_$browser_70.Sign,_$browser_70.createVerify,_$browser_70.Verify,_$browser_155.publicEncrypt,_$browser_155.privateEncrypt,_$browser_155.publicDecrypt,_$browser_155.privateDecrypt,_$browser_164.randomFill,_$browser_164.randomFillSync;var _$randToken_162={};(function(t){(function(){!function(){"use strict";var e=_$cryptoBrowserify_84.pseudoRandomBytes||_$cryptoBrowserify_84.randomBytes,i="abcdefghijklmnopqrstuvwxyz",r=i.toUpperCase(),s="0123456789"+r+i,n="default",o="default";var a=function(a){switch((a=a||{}).chars=a.chars||n,a.source=a.source||o,a.chars){case"default":a.chars=s;break;case"a-z":case"alpha":a.chars=i;break;case"A-Z":case"ALPHA":a.chars=r;break;case"0-9":case"numeric":a.chars="0123456789";break;case"base32":a.chars=r+"234567"}switch(a.chars,a.source){case"default":a.source=e;break;case"crypto":a.source=_$cryptoBrowserify_84.randomBytes;break;case"math":a.source=function(e){for(var i=function(e){return t.alloc?t.alloc(e):new t(e)}(e),r=0;r<e;r++)i.writeUInt8(Math.floor(256*Math.random()),r);return i}}return{generate:function(t,e){e||(e=a.chars);for(var i=Math.floor(256/e.length)*e.length,r="";r.length<t;)for(var s=a.source(t-r.length),n=0;n<s.length;n++){var o=s.readUInt8(n);o<i&&(r+=e[o%e.length])}return r}}}();_$randToken_162={uid:a.generate}}()}).call(this)}).call(this,_$buffer_73({}).Buffer);const{uid:uid}=_$randToken_162;var _$workerSocket_221=class{constructor(t){this.worker=t,this.id=uid(64),this.worker.onmessage=t=>{t.data.id===this.id&&("data"===t.data.type?this.dispatchEvent("message",t.data):"disconnect"===t.data.type&&this.dispatchEvent("close"))},this.handlers={},setTimeout(()=>{this.worker.postMessage({id:this.id,type:"connect"}),this.dispatchEvent("open")},1)}send(t){this.worker.postMessage({id:this.id,type:"data",data:t})}dispatchEvent(t,e){const i=this.handlers[t];i&&i(e)}addEventListener(t,e){this.handlers[t]=e}close(){postMessage({id:this.id,type:"disconnect"}),this.dispatchEvent("close")}},_$socket_220={};(function(t){(function(){_$buffer_73({});_$socket_220=class{constructor(t,e){this.host=t,this.port=e,this.client=null,this.connected=!1,this.bytesAvailable=0,this.buffers=[],this.currentBuffer=null,this.offset=0,this.bytesLeft=0}connect(){return new Promise((e,i)=>{if("string"==typeof this.host){const t=this.host.includes("railway.app"),e="https:"===window.location.protocol?"wss://":"ws://",i=t?`${e}${this.host}/ws`:`${e}${this.host}:${this.port}`;this.client=new WebSocket(i,"binary")}else if("Worker"===this.host.constructor.name)this.client=new _$workerSocket_221(this.host);else if("Peer"===this.host.constructor.name){const e=this.host,i={onmessage(){},postMessage(i){"data"===i.type&&(i.data=t.from(i.data).toString("base64")),e.send(JSON.stringify(i))}};this.client=new _$workerSocket_221(i),e.on("data",e=>{"data"===(e=JSON.parse(e)).type&&(e.data=t.from(e.data,"base64")),i.onmessage({data:e})}),e.on("close",()=>{i.onmessage({data:{type:"disconnect"}})})}const r=setTimeout(()=>{this.connected||(this.client.close(),i(new Error("websocket connect timeout")))},5e3);this.client.binaryType="arraybuffer",this.client.addEventListener("error",t=>{this.onError&&(this.onError(t),this.onError=void 0),i(t)}),this.client.addEventListener("close",()=>{this.onClose&&(this.onClose(-1),this.onClose=void 0),this.connected=!1,this.clear()}),this.client.addEventListener("message",t=>{this.buffers.push(new Int8Array(t.data)),this.bytesAvailable+=t.data.byteLength,this.refreshCurrentBuffer(),this.onNextMessage&&(this.onNextMessage(t.data.byteLength),this.onNextMessage=void 0)}),this.client.addEventListener("open",()=>{this.connected=!0,clearTimeout(r),e()})})}write(t,e=0,i=-1){if(!this.connected)throw new Error("attempting to write to closed socket");i=-1===i?t.length:i,this.client.send(t.slice(e,e+i))}refreshCurrentBuffer(){0===this.bytesLeft&&this.bytesAvailable>0&&(this.currentBuffer=this.buffers.shift(),this.offset=0,this.currentBuffer&&this.currentBuffer.length?this.bytesLeft=this.currentBuffer.length:this.bytesLeft=0)}async read(){return this.connected?this.bytesLeft>0?(this.bytesLeft--,this.bytesAvailable--,255&this.currentBuffer[this.offset++]):-1===await new Promise((t,e)=>{this.onClose=t,this.onError=e,this.onNextMessage=t})?-1:await this.read():-1}async readBytes(t,e=0,i=-1){if(!this.connected)return-1;if(i=-1===i?t.length:i,!(this.bytesAvailable>=i))return-1===await new Promise((t,e)=>{this.onClose=t,this.onError=e,this.onNextMessage=t})?-1:await this.readBytes(t,e,i);for(;i>0;)t[e++]=255&this.currentBuffer[this.offset++],this.bytesLeft-=1,this.bytesAvailable-=1,i-=1,0===this.bytesLeft&&this.refreshCurrentBuffer()}close(){this.connected&&this.client.close()}available(){return this.bytesAvailable}clear(){this.connected&&this.client.close(),this.currentBuffer=null,this.buffers.length=0,this.bytesLeft=0}}}).call(this)}).call(this,_$buffer_73({}).Buffer);var _$fileDownloadStream_219=class{constructor(t){this.url=t,this.xhr=new XMLHttpRequest,this.xhr.responseType="arraybuffer",this.xhr.open("GET",t,!0),this.buffer=null,this.pos=0}_loadResBytes(){return new Promise((t,e)=>{this.xhr.onerror=t=>e(t),this.xhr.onload=()=>{/^2/.test(this.xhr.status)?t(new Int8Array(this.xhr.response)):e(new Error(`unable to download ${this.url}.\n                        status code = ${this.xhr.status}`))},this.xhr.send()})}async readFully(t,e=0,i){void 0===i&&(i=t.length),this.buffer||(this.buffer=await this._loadResBytes()),t.set(this.buffer.slice(this.pos,this.pos+i),e),this.pos+=i}},_$utility_288={};const C_0="0".charCodeAt(0),C_9="9".charCodeAt(0),C_A="a".charCodeAt(0),C_BIG_A="A".charCodeAt(0),C_BIG_Z="Z".charCodeAt(0),C_Z="z".charCodeAt(0);class Utility{static openFile(t){return new _$fileDownloadStream_219(t)}static getUnsignedByte(t){return 255&t}static getUnsignedShort(t,e){return((255&t[e])<<8)+(255&t[e+1])}static getUnsignedInt(t,e){return((255&t[e])<<24)+((255&t[e+1])<<16)+((255&t[e+2])<<8)+(255&t[e+3])}static getUnsignedLong(t,e){return _$Long_134.fromInt(4294967295&Utility.getUnsignedInt(t,e)).shiftLeft(32).add(new _$Long_134(4294967295&Utility.getUnsignedInt(t,e+4)))}static getSignedShort(t,e){let i=256*Utility.getUnsignedByte(t[e])+Utility.getUnsignedByte(t[e+1])|0;return i>32767&&(i-=65536),i}static getStackInt(t,e){return(255&t[e])<128?t[e]:((255&t[e])-128<<24)+((255&t[e+1])<<16)+((255&t[e+2])<<8)+(255&t[e+3])}static getBitMask(t,e,i){let r=e>>3,s=8-(7&e),n=0;for(;i>s;s=8)n+=(t[r++]&Utility.bitmask[s])<<i-s,i-=s;return n+(i===s?t[r]&Utility.bitmask[s]:t[r]>>s-i&Utility.bitmask[i])}static formatAuthString(t,e){let i="";for(let r=0;r<e;r++)if(r>=t.length)i+=" ";else{let e=t.charCodeAt(r);i+=e>=C_A&&e<=C_Z||e>=C_BIG_A&&e<=C_BIG_Z||e>=C_0&&e<=C_9?String.fromCharCode(e):"_"}return i}static ipToString(t){return(t>>24&255)+"."+(t>>16&255)+"."+(t>>8&255)+"."+(255&t)}static usernameToHash(t){let e="";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);e+=i>=C_A&&i<=C_Z?String.fromCharCode(i):i>=C_BIG_A&&i<=C_BIG_Z?String.fromCharCode(i+97-65):i>=C_0&&i<=C_9?String.fromCharCode(i):" "}(e=e.trim()).length>12&&(e=e.slice(0,12));let i=new _$Long_134(0);for(let r=0;r<e.length;r++){let t=e.charCodeAt(r);i=i.multiply(37),t>=C_A&&t<=C_Z?i=i.add(1+t-97):t>=C_0&&t<=C_9&&(i=i.add(27+t-48))}return i}static hashToUsername(t){if(t.lessThan(0))return"invalidName";let e="";for(;!t.equals(0);){let i=t.modulo(37).toInt();t=t.divide(37),e=0===i?" "+e:i<27?t.modulo(37).equals(0)?String.fromCharCode(i+65-1)+e:String.fromCharCode(i+97-1)+e:String.fromCharCode(i+48-27)+e}return e}static getDataFileOffset(t,e){let i=Utility.getUnsignedShort(e,0),r=0;t=t.toUpperCase();for(let n=0;n<t.length;n++)r=(61*r|0)+t.charCodeAt(n)-32;let s=2+10*i;for(let n=0;n<i;n++){let t=16777216*(255&e[10*n+2])+65536*(255&e[10*n+3])+256*(255&e[10*n+4])+(255&e[10*n+5])|0,i=65536*(255&e[10*n+9])+256*(255&e[10*n+10])+(255&e[10*n+11])|0;if(t===r)return s;s+=i}return 0}static getDataFileLength(t,e){const i=Utility.getUnsignedShort(e,0);let r=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)r=(61*r|0)+t.charCodeAt(s)-32;for(let s=0;s<i;s++){let t=16777216*(255&e[10*s+2])+65536*(255&e[10*s+3])+256*(255&e[10*s+4])+(255&e[10*s+5])|0,i=65536*(255&e[10*s+6])+256*(255&e[10*s+7])+(255&e[10*s+8])|0;if(t===r)return i}return 0}static loadData(t,e,i){return Utility.unpackData(t,e,i,null)}static unpackData(t,e,i,r){const s=256*(255&i[0])+(255&i[1])|0;let n=0;t=t.toUpperCase();for(let a=0;a<t.length;a++)n=(61*n|0)+t.charCodeAt(a)-32;let o=2+10*s;for(let a=0;a<s;a++){const t=16777216*(255&i[10*a+2])+65536*(255&i[10*a+3])+256*(255&i[10*a+4])+(255&i[10*a+5])|0,s=65536*(255&i[10*a+6])+256*(255&i[10*a+7])+(255&i[10*a+8])|0,h=65536*(255&i[10*a+9])+256*(255&i[10*a+10])+(255&i[10*a+11])|0;if(t===n){if(null===r&&(r=new Int8Array(s+e)),s!==h)_$bzlib_207.decompress(r,s,i,h,o);else for(let t=0;t<s;t++)r[t]=i[o+t];return r}o+=h}return null}static formatConfirmAmount(t){let e=t.toString();for(let i=e.length-3;i>0;i-=3)e=e.substring(0,i)+","+e.substring(i);return e.length>8?e="@gre@"+e.substring(0,e.length-8)+` million @whi@(${e})`:e.length>4&&(e="@cya@"+e.substring(0,e.length-4)+`K @whi@(${e})`),e}}Utility.bitmask=new Int32Array([0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215,33554431,67108863,134217727,268435455,536870911,1073741823,2147483647,-1]),_$utility_288=Utility;const SLEEP_WIDTH=255,SLEEP_HEIGHT=40,BLACK=0,DARK_GREY=10526880,LIGHT_GREY=14474460,__C_0_259="0".charCodeAt(0),__C_9_259="9".charCodeAt(0);class Surface{constructor(t,e,i,r){this.mudclient=r,this.image=null,this.anIntArray340=null,this.anIntArray341=null,this.anIntArray342=null,this.anIntArray343=null,this.anIntArray344=null,this.anIntArray345=null,this.boundsTopY=0,this.boundsTopX=0,this.interlace=!1,this.loggedIn=!1,this.boundsBottomY=e,this.boundsBottomX=t,this.width1=this.width2=t,this.height1=this.height2=e,this.area=t*e,this.pixels=new Int32Array(t*e),this.surfacePixels=[],this.surfacePixels.length=i,this.surfacePixels.fill(null),this.spriteColoursUsed=[],this.spriteColoursUsed.length=i,this.spriteColoursUsed.fill(null),this.spriteColourList=[],this.spriteColourList.length=i,this.spriteColourList.fill(null),this.spriteTranslate=new Int8Array(i),this.spriteWidth=new Int32Array(i),this.spriteHeight=new Int32Array(i),this.spriteWidthFull=new Int32Array(i),this.spriteHeightFull=new Int32Array(i),this.spriteTranslateX=new Int32Array(i),this.spriteTranslateY=new Int32Array(i),this.rgbPixels=new Uint8Array(this.pixels.buffer,this.pixels.byteOffset),this.imageData=r._graphics.ctx.createImageData(t,e),this.setComplete()}static rgbToInt(t,e,i){return(t<<16)+(e<<8)+i}static createFont(t,e){Surface.gameFonts[e]=t}setComplete(){for(let t=0;t<4*this.area;t+=4){const e=this.rgbPixels[t];this.rgbPixels[t]=this.rgbPixels[t+2],this.rgbPixels[t+2]=e,this.rgbPixels[t+3]=255}this.imageData.data.set(this.rgbPixels)}setBounds(t,e,i,r){t<0&&(t=0),e<0&&(e=0),i>this.width2&&(i=this.width2),r>this.height2&&(r=this.height2),this.boundsTopX=t,this.boundsTopY=e,this.boundsBottomX=i,this.boundsBottomY=r}resetBounds(){this.boundsTopX=0,this.boundsTopY=0,this.boundsBottomX=this.width2,this.boundsBottomY=this.height2}draw(t,e,i){this.setComplete(),t.drawImage(this.imageData,e,i)}blackScreen(){const t=this.width2*this.height2;if(!this.interlace){for(let e=0;e<t;e++)this.pixels[e]=0;return}let e=0;for(let i=-this.height2;i<0;i+=2){for(let t=-this.width2;t<0;t++)this.pixels[e++]=0;e+=this.width2}}drawCircle(t,e,i,r,s){const n=256-s,o=(r>>16&255)*s,a=(r>>8&255)*s,h=(255&r)*s;let u=e-i;u<0&&(u=0);let l=e+i;l>=this.height2&&(l=this.height2-1);let c=1;this.interlace&&(c=2,0!=(1&u)&&u++);for(let f=u;f<=l;f+=c){const r=f-e,s=0|Math.sqrt(i*i-r*r);let u=t-s;u<0&&(u=0);let l=t+s;l>=this.width2&&(l=this.width2-1);let c=u+f*this.width2;for(let t=u;t<=l;t++){const t=(o+(this.pixels[c]>>16&255)*n>>8<<16)+(a+(this.pixels[c]>>8&255)*n>>8<<8)+(h+(255&this.pixels[c])*n>>8);this.pixels[c++]=t}}}drawBoxAlpha(t,e,i,r,s,n){t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),e<this.boundsTopY&&(r-=this.boundsTopY-e,e=this.boundsTopY),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t),e+r>this.boundsBottomY&&(r=this.boundsBottomY-e);const o=256-n,a=(s>>16&255)*n,h=(s>>8&255)*n,u=(255&s)*n;let l=this.width2-i,c=1;this.interlace&&(c=2,l+=this.width2,0!=(1&e)&&(e++,r--));let f=t+e*this.width2;for(let d=0;d<r;d+=c){for(let t=-i;t<0;t++){const t=(a+(this.pixels[f]>>16&255)*o>>8<<16)+(h+(this.pixels[f]>>8&255)*o>>8<<8)+(u+(255&this.pixels[f])*o>>8);this.pixels[f++]=t}f+=l}}drawGradient(t,e,i,r,s,n){t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t);const o=n>>16&255,a=n>>8&255,h=255&n,u=s>>16&255,l=s>>8&255,c=255&s;let f=this.width2-i,d=1;this.interlace&&(d=2,f+=this.width2,0!=(1&e)&&(e++,r--));let m=t+e*this.width2;for(let p=0;p<r;p+=d)if(p+e>=this.boundsTopY&&p+e<this.boundsBottomY){const t=((o*p+u*(r-p))/r<<16)+((a*p+l*(r-p))/r<<8)+((h*p+c*(r-p))/r|0);for(let e=-i;e<0;e++)this.pixels[m++]=t;m+=f}else m+=this.width2}drawBox(t,e,i,r,s){t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),e<this.boundsTopY&&(r-=this.boundsTopY-e,e=this.boundsTopY),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t),e+r>this.boundsBottomY&&(r=this.boundsBottomY-e);let n=this.width2-i,o=1;this.interlace&&(o=2,n+=this.width2,0!=(1&e)&&(e++,r--));let a=t+e*this.width2;for(let h=-r;h<0;h+=o){for(let t=-i;t<0;t++)this.pixels[a++]=s;a+=n}}drawBoxEdge(t,e,i,r,s){this.drawLineHoriz(t,e,i,s),this.drawLineHoriz(t,e+r-1,i,s),this.drawLineVert(t,e,r,s),this.drawLineVert(t+i-1,e,r,s)}drawLineHoriz(t,e,i,r){if(e<this.boundsTopY||e>=this.boundsBottomY)return;t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t);let s=t+e*this.width2;for(let n=0;n<i;n++)this.pixels[s+n]=r}drawLineVert(t,e,i,r){if(t<this.boundsTopX||t>=this.boundsBottomX)return;e<this.boundsTopY&&(i-=this.boundsTopY-e,e=this.boundsTopY),e+i>this.boundsBottomX&&(i=this.boundsBottomY-e);let s=t+e*this.width2;for(let n=0;n<i;n++)this.pixels[s+n*this.width2]=r}setPixel(t,e,i){t<this.boundsTopX||e<this.boundsTopY||t>=this.boundsBottomX||e>=this.boundsBottomY||(this.pixels[t+e*this.width2]=i)}fadeToBlack(){const t=this.width2*this.height2;for(let e=0;e<t;e++){let t=16777215&this.pixels[e];this.pixels[e]=(t>>>1&8355711)+(t>>>2&4144959)+(t>>>3&2039583)+(t>>>4&986895)}}drawLineAlpha(t,e,i,r,s,n){for(let o=i;o<i+s;o++)for(let i=r;i<r+n;i++){let r=0,s=0,n=0,a=0;for(let h=o-t;h<=o+t;h++)if(h>=0&&h<this.width2)for(let t=i-e;t<=i+e;t++)if(t>=0&&t<this.height2){let e=this.pixels[h+this.width2*t];r+=e>>16&255,s+=e>>8&255,n+=255&e,a++}this.pixels[o+this.width2*i]=(r/a<<16)+(s/a<<8)+(n/a|0)}}clear(){for(let t=0;t<this.surfacePixels.length;t++)this.surfacePixels[t]=null,this.spriteWidth[t]=0,this.spriteHeight[t]=0,this.spriteColoursUsed[t]=null,this.spriteColourList[t]=null}parseSprite(t,e,i,r){let s=_$utility_288.getUnsignedShort(e,0);const n=_$utility_288.getUnsignedShort(i,s);s+=2;const o=_$utility_288.getUnsignedShort(i,s);s+=2;const a=255&i[s++],h=new Int32Array(a);h[0]=16711935;for(let l=0;l<a-1;l++)h[l+1]=((255&i[s])<<16)+((255&i[s+1])<<8)+(255&i[s+2]),s+=3;let u=2;for(let l=t;l<t+r;l++){this.spriteTranslateX[l]=255&i[s++],this.spriteTranslateY[l]=255&i[s++],this.spriteWidth[l]=_$utility_288.getUnsignedShort(i,s),s+=2,this.spriteHeight[l]=_$utility_288.getUnsignedShort(i,s),s+=2;const t=255&i[s++],r=this.spriteWidth[l]*this.spriteHeight[l];if(this.spriteColoursUsed[l]=new Int8Array(r),this.spriteColourList[l]=h,this.spriteWidthFull[l]=n,this.spriteHeightFull[l]=o,this.surfacePixels[l]=null,this.spriteTranslate[l]=!1,0===this.spriteTranslateX[l]&&0===this.spriteTranslateY[l]||(this.spriteTranslate[l]=!0),0===t)for(let i=0;i<r;i++)this.spriteColoursUsed[l][i]=e[u++],0===this.spriteColoursUsed[l][i]&&(this.spriteTranslate[l]=!0);else if(1===t)for(let i=0;i<this.spriteWidth[l];i++)for(let t=0;t<this.spriteHeight[l];t++)this.spriteColoursUsed[l][i+t*this.spriteWidth[l]]=e[u++],0===this.spriteColoursUsed[l][i+t*this.spriteWidth[l]]&&(this.spriteTranslate[l]=!0)}}readSleepWord(t,e){const i=this.surfacePixels[t]=new Int32Array(SLEEP_WIDTH*SLEEP_HEIGHT);this.spriteWidth[t]=SLEEP_WIDTH,this.spriteHeight[t]=SLEEP_HEIGHT,this.spriteTranslateX[t]=0,this.spriteTranslateY[t]=0,this.spriteWidthFull[t]=SLEEP_WIDTH,this.spriteHeightFull[t]=SLEEP_HEIGHT,this.spriteTranslate[t]=!1;let r=0,s=1,n=0;for(n=0;n<255;){const t=255&e[s++];for(let e=0;e<t;e++)i[n++]=r;r=16777215-r}for(let o=1;o<40;o++)for(let t=0;t<255;){const r=255&e[s++];for(let e=0;e<r;e++)i[n]=i[n-255],n++,t++;t<255&&(i[n]=16777215-i[n-255],n++,t++)}}drawWorld(t){let e=this.spriteWidth[t]*this.spriteHeight[t],i=this.surfacePixels[t],r=new Int32Array(32768);for(let a=0;a<e;a++){let t=i[a];r[((16252928&t)>>9)+((63488&t)>>6)+((248&t)>>3)]++}let s=new Int32Array(256);s[0]=16711935;let n=new Int32Array(256);for(let a=0;a<32768;a++){let t=r[a];if(t>n[255])for(let e=1;e<256;e++)if(!(t<=n[e])){for(let t=255;t>e;t--)s[t]=s[t-1],n[t]=n[t-1];s[e]=((31744&a)<<9)+((992&a)<<6)+((31&a)<<3)+263172,n[e]=t;break}r[a]=-1}let o=new Int8Array(e);for(let a=0;a<e;a++){let t=i[a],e=((16252928&t)>>9)+((63488&t)>>6)+((248&t)>>3),n=r[e];if(-1===n){let i=999999999,o=t>>16&255,a=t>>8&255,h=255&t;for(let t=0;t<256;t++){let e=s[t],r=e>>16&255,u=e>>8&255,l=255&e,c=(o-r)*(o-r)+(a-u)*(a-u)+(h-l)*(h-l);c<i&&(i=c,n=t)}r[e]=n}o[a]=255&n}this.spriteColoursUsed[t]=o,this.spriteColourList[t]=s,this.surfacePixels[t]=null}loadSprite(t){if(null===this.spriteColoursUsed[t])return;const e=this.spriteWidth[t]*this.spriteHeight[t],i=this.spriteColoursUsed[t],r=this.spriteColourList[t],s=new Int32Array(e);for(let n=0;n<e;n++){let t=r[255&i[n]];0===t?t=1:16711935===t&&(t=0),s[n]=t}this.surfacePixels[t]=s,this.spriteColoursUsed[t]=null,this.spriteColourList[t]=null}drawSpriteMinimap(t,e,i,r,s){this.spriteWidth[t]=r,this.spriteHeight[t]=s,this.spriteTranslate[t]=!1,this.spriteTranslateX[t]=0,this.spriteTranslateY[t]=0,this.spriteWidthFull[t]=r,this.spriteHeightFull[t]=s,this.surfacePixels[t]=new Int32Array(r*s);let n=0;for(let o=e;o<e+r;o++)for(let e=i;e<i+s;e++)this.surfacePixels[t][n++]=this.pixels[o+e*this.width2]}_drawSprite_from5(t,e,i,r,s){this.spriteWidth[t]=r,this.spriteHeight[t]=s,this.spriteTranslate[t]=!1,this.spriteTranslateX[t]=0,this.spriteTranslateY[t]=0,this.spriteWidthFull[t]=r,this.spriteHeightFull[t]=s,this.surfacePixels[t]=new Int32Array(r*s);let n=0;for(let o=i;o<i+s;o++)for(let i=e;i<e+r;i++)this.surfacePixels[t][n++]=this.pixels[i+o*this.width2]}_drawSprite_from3(t,e,i){this.spriteTranslate[i]&&(t+=this.spriteTranslateX[i],e+=this.spriteTranslateY[i]);let r=t+e*this.width2,s=0,n=this.spriteHeight[i],o=this.spriteWidth[i],a=this.width2-o,h=0;if(e<this.boundsTopY){let t=this.boundsTopY-e;n-=t,e=this.boundsTopY,s+=t*o,r+=t*this.width2}if(e+n>=this.boundsBottomY&&(n-=e+n-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;o-=e,t=this.boundsTopX,s+=e,r+=e,h+=e,a+=e}if(t+o>=this.boundsBottomX){let e=t+o-this.boundsBottomX+1;o-=e,h+=e,a+=e}if(o<=0||n<=0)return;let u=1;this.interlace&&(u=2,a+=this.width2,h+=this.spriteWidth[i],0!=(1&e)&&(r+=this.width2,n--)),null===this.surfacePixels[i]?this._drawSprite_from10A(this.pixels,this.spriteColoursUsed[i],this.spriteColourList[i],s,r,o,n,a,h,u):this._drawSprite_from10(this.pixels,this.surfacePixels[i],0,s,r,o,n,a,h,u)}_spriteClipping_from5(t,i,r,s,n){try{const e=this.spriteWidth[n],o=this.spriteHeight[n];let a=0,h=0,u=(e<<16)/r|0,l=(o<<16)/s|0;if(this.spriteTranslate[n]){let e=this.spriteWidthFull[n],o=this.spriteHeightFull[n];u=(e<<16)/r|0,l=(o<<16)/s|0,t+=(this.spriteTranslateX[n]*r+e-1)/e|0,i+=(this.spriteTranslateY[n]*s+o-1)/o|0,this.spriteTranslateX[n]*r%e!=0&&(a=(e-this.spriteTranslateX[n]*r%e<<16)/r|0),this.spriteTranslateY[n]*s%o!=0&&(h=(o-this.spriteTranslateY[n]*s%o<<16)/s|0),r=r*(this.spriteWidth[n]-(a>>16))/e|0,s=s*(this.spriteHeight[n]-(h>>16))/o|0}let c=t+i*this.width2,f=this.width2-r;if(i<this.boundsTopY){let t=this.boundsTopY-i;s-=t,i=0,c+=t*this.width2,h+=l*t}if(i+s>=this.boundsBottomY&&(s-=i+s-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;r-=e,t=0,c+=e,a+=u*e,f+=e}if(t+r>=this.boundsBottomX){let e=t+r-this.boundsBottomX+1;r-=e,f+=e}let d=1;this.interlace&&(d=2,f+=this.width2,l+=l,0!=(1&i)&&(c+=this.width2,s--)),this._plotScale_from13(this.pixels,this.surfacePixels[n],0,a,h,c,f,r,s,u,l,e,d)}catch(e){console.error(e)}}_spriteClipping_from7(t,e,i,r,s,n,o){s>=5e4?this.mudclientref.drawTeleportBubble(t,e,i,r,s-5e4,n,o):s>=4e4?this.mudclientref.drawItem(t,e,i,r,s-4e4,n,o):s>=2e4?this.mudclientref.drawNpc(t,e,i,r,s-2e4,n,o):s>=5e3?this.mudclientref.drawPlayer(t,e,i,r,s-5e3,n,o):this._spriteClipping_from5(t,e,i,r,s)}_drawSpriteAlpha_from4(t,e,i,r){this.spriteTranslate[i]&&(t+=this.spriteTranslateX[i],e+=this.spriteTranslateY[i]);let s=t+e*this.width2,n=0,o=this.spriteHeight[i],a=this.spriteWidth[i],h=this.width2-a,u=0;if(e<this.boundsTopY){let t=this.boundsTopY-e;o-=t,e=this.boundsTopY,n+=t*a,s+=t*this.width2}if(e+o>=this.boundsBottomY&&(o-=e+o-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;a-=e,t=this.boundsTopX,n+=e,s+=e,u+=e,h+=e}if(t+a>=this.boundsBottomX){let e=t+a-this.boundsBottomX+1;a-=e,u+=e,h+=e}if(a<=0||o<=0)return;let l=1;this.interlace&&(l=2,h+=this.width2,u+=this.spriteWidth[i],0!=(1&e)&&(s+=this.width2,o--)),null===this.surfacePixels[i]?this._drawSpriteAlpha_from11A(this.pixels,this.spriteColoursUsed[i],this.spriteColourList[i],n,s,a,o,h,u,l,r):this._drawSpriteAlpha_from11(this.pixels,this.surfacePixels[i],0,n,s,a,o,h,u,l,r)}drawActionBubble(t,i,r,s,n,o){try{const e=this.spriteWidth[n],a=this.spriteHeight[n];let h=0,u=0,l=(e<<16)/r|0,c=(a<<16)/s|0;if(this.spriteTranslate[n]){const e=this.spriteWidthFull[n],o=this.spriteHeightFull[n];l=(e<<16)/r|0,c=(o<<16)/s|0,t+=(this.spriteTranslateX[n]*r+e-1)/e|0,i+=(this.spriteTranslateY[n]*s+o-1)/o|0,this.spriteTranslateX[n]*r%e!=0&&(h=(e-this.spriteTranslateX[n]*r%e<<16)/r|0),this.spriteTranslateY[n]*s%o!=0&&(u=(o-this.spriteTranslateY[n]*s%o<<16)/s|0),r=r*(this.spriteWidth[n]-(h>>16))/e|0,s=s*(this.spriteHeight[n]-(u>>16))/o|0}let f=t+i*this.width2,d=this.width2-r;if(i<this.boundsTopY){let t=this.boundsTopY-i;s-=t,i=0,f+=t*this.width2,u+=c*t}if(i+s>=this.boundsBottomY&&(s-=i+s-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;r-=e,t=0,f+=e,h+=l*e,d+=e}if(t+r>=this.boundsBottomX){let e=t+r-this.boundsBottomX+1;r-=e,d+=e}let m=1;this.interlace&&(m=2,d+=this.width2,c+=c,0!=(1&i)&&(f+=this.width2,s--)),this.transparentScale(this.pixels,this.surfacePixels[n],0,h,u,f,d,r,s,l,c,e,m,o)}catch(e){console.error(e)}}_spriteClipping_from6(t,i,r,s,n,o){try{let e=this.spriteWidth[n],a=this.spriteHeight[n],h=0,u=0,l=(e<<16)/r|0,c=(a<<16)/s|0;if(this.spriteTranslate[n]){let e=this.spriteWidthFull[n],o=this.spriteHeightFull[n];l=(e<<16)/r|0,c=(o<<16)/s|0,t+=(this.spriteTranslateX[n]*r+e-1)/e|0,i+=(this.spriteTranslateY[n]*s+o-1)/o|0,this.spriteTranslateX[n]*r%e!=0&&(h=(e-this.spriteTranslateX[n]*r%e<<16)/r|0),this.spriteTranslateY[n]*s%o!=0&&(u=(o-this.spriteTranslateY[n]*s%o<<16)/s|0),r=r*(this.spriteWidth[n]-(h>>16))/e|0,s=s*(this.spriteHeight[n]-(u>>16))/o|0}let f=t+i*this.width2,d=this.width2-r;if(i<this.boundsTopY){let t=this.boundsTopY-i;s-=t,i=0,f+=t*this.width2,u+=c*t}if(i+s>=this.boundsBottomY&&(s-=i+s-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;r-=e,t=0,f+=e,h+=l*e,d+=e}if(t+r>=this.boundsBottomX){let e=t+r-this.boundsBottomX+1;r-=e,d+=e}let m=1;this.interlace&&(m=2,d+=this.width2,c+=c,0!=(1&i)&&(f+=this.width2,s--)),this._plotScale_from14(this.pixels,this.surfacePixels[n],0,h,u,f,d,r,s,l,c,e,m,o)}catch(e){console.error(e)}}_drawSprite_from10(t,e,i,r,s,n,o,a,h,u){let l=-(n>>2);n=-(3&n);for(let c=-o;c<0;c+=u){for(let n=l;n<0;n++)0!==(i=e[r++])?t[s++]=i:s++,0!==(i=e[r++])?t[s++]=i:s++,0!==(i=e[r++])?t[s++]=i:s++,0!==(i=e[r++])?t[s++]=i:s++;for(let o=n;o<0;o++)0!==(i=e[r++])?t[s++]=i:s++;s+=a,r+=h}}_drawSprite_from10A(t,e,i,r,s,n,o,a,h,u){let l=-(n>>2);n=-(3&n);for(let c=-o;c<0;c+=u){for(let n=l;n<0;n++){let n=e[r++];0!==n?t[s++]=i[255&n]:s++,0!==(n=e[r++])?t[s++]=i[255&n]:s++,0!==(n=e[r++])?t[s++]=i[255&n]:s++,0!==(n=e[r++])?t[s++]=i[255&n]:s++}for(let o=n;o<0;o++){let n=e[r++];0!==n?t[s++]=i[255&n]:s++}s+=a,r+=h}}_plotScale_from13(t,i,r,s,n,o,a,h,u,l,c,f,d){try{let e=s;for(let m=-u;m<0;m+=d){let u=(n>>16)*f;for(let e=-h;e<0;e++)0!==(r=i[(s>>16)+u])?t[o++]=r:o++,s+=l;n+=c,s=e,o+=a}}catch(e){console.error(e)}}_drawSpriteAlpha_from11(t,e,i,r,s,n,o,a,h,u,l){let c=256-l;for(let f=-o;f<0;f+=u){for(let o=-n;o<0;o++)if(0!==(i=e[r++])){let e=t[s];t[s++]=((16711935&i)*l+(16711935&e)*c&-16711936)+((65280&i)*l+(65280&e)*c&16711680)>>8}else s++;s+=a,r+=h}}_drawSpriteAlpha_from11A(t,e,i,r,s,n,o,a,h,u,l){let c=256-l;for(let f=-o;f<0;f+=u){for(let o=-n;o<0;o++){let n=e[r++];if(0!==n){n=i[255&n];let e=t[s];t[s++]=((16711935&n)*l+(16711935&e)*c&-16711936)+((65280&n)*l+(65280&e)*c&16711680)>>8}else s++}s+=a,r+=h}}transparentScale(t,i,r,s,n,o,a,h,u,l,c,f,d,m){let p=256-m;try{let e=s;for(let _=-u;_<0;_+=d){let u=(n>>16)*f;for(let e=-h;e<0;e++){if(0!==(r=i[(s>>16)+u])){let e=t[o];t[o++]=((16711935&r)*m+(16711935&e)*p&-16711936)+((65280&r)*m+(65280&e)*p&16711680)>>8}else o++;s+=l}n+=c,s=e,o+=a}}catch(e){console.error(e)}}_plotScale_from14(t,i,r,s,n,o,a,h,u,l,c,f,d,m){let p=m>>16&255,_=m>>8&255,g=255&m;try{let e=s;for(let m=-u;m<0;m+=d){let u=(n>>16)*f;for(let e=-h;e<0;e++){if(0!==(r=i[(s>>16)+u])){let e=r>>16&255,i=r>>8&255,s=255&r;t[o++]=e===i&&i===s?(e*p>>8<<16)+(i*_>>8<<8)+(s*g>>8):r}else o++;s+=l}n+=c,s=e,o+=a}}catch(e){console.error(e)}}drawMinimapSprite(t,e,i,r,s){let n=this.width2,o=this.height2;if(!this.sinCosCache){this.sinCosCache=new Int32Array(512);for(let t=0;t<256;t++)this.sinCosCache[t]=32768*Math.sin(.02454369*t)|0,this.sinCosCache[t+256]=32768*Math.cos(.02454369*t)|0}let a=-(this.spriteWidthFull[i]/2|0),h=-(this.spriteHeightFull[i]/2|0);this.spriteTranslate[i]&&(a+=this.spriteTranslateX[i],h+=this.spriteTranslateY[i]);let u=a+this.spriteWidth[i],l=h+this.spriteHeight[i],c=u,f=h,d=a,m=l;r&=255;let p=this.sinCosCache[r]*s,_=this.sinCosCache[r+256]*s,g=t+(h*p+a*_>>22),b=e+(h*_-a*p>>22),y=t+(f*p+c*_>>22),w=e+(f*_-c*p>>22),v=t+(l*p+u*_>>22),M=e+(l*_-u*p>>22),S=t+(m*p+d*_>>22),C=e+(m*_-d*p>>22);192===s&&(63&r)==(63&Surface.anInt348)?Surface.anInt346++:128===s?Surface.anInt348=r:Surface.anInt347++;let I=b,T=b;w<I?I=w:w>T&&(T=w),M<I?I=M:M>T&&(T=M),C<I?I=C:C>T&&(T=C),I<this.boundsTopY&&(I=this.boundsTopY),T>this.boundsBottomY&&(T=this.boundsBottomY),null!==this.anIntArray340&&this.anIntArray340.length===o+1||(this.anIntArray340=new Int32Array(o+1),this.anIntArray341=new Int32Array(o+1),this.anIntArray342=new Int32Array(o+1),this.anIntArray343=new Int32Array(o+1),this.anIntArray344=new Int32Array(o+1),this.anIntArray345=new Int32Array(o+1));for(let N=I;N<=T;N++)this.anIntArray340[N]=99999999,this.anIntArray341[N]=-99999999;let A=0,k=0,B=0,x=this.spriteWidth[i],E=this.spriteHeight[i];a=0,h=0,c=x-1,f=0,u=x-1,l=E-1,d=0,m=E-1,C!==b&&(A=(S-g<<8)/(C-b)|0,B=(m-h<<8)/(C-b)|0);let $=0,D=0,L=0,P=0;b>C?(L=S<<8,P=m<<8,$=C,D=b):(L=g<<8,P=h<<8,$=b,D=C),$<0&&(L-=A*$,P-=B*$,$=0),D>o-1&&(D=o-1);for(let N=$;N<=D;N++)this.anIntArray340[N]=this.anIntArray341[N]=L,L+=A,this.anIntArray342[N]=this.anIntArray343[N]=0,this.anIntArray344[N]=this.anIntArray345[N]=P,P+=B;w!==b&&(A=(y-g<<8)/(w-b)|0,k=(c-a<<8)/(w-b)|0);let R=0;b>w?(L=y<<8,R=c<<8,$=w,D=b):(L=g<<8,R=a<<8,$=b,D=w),$<0&&(L-=A*$,R-=k*$,$=0),D>o-1&&(D=o-1);for(let N=$;N<=D;N++)L<this.anIntArray340[N]&&(this.anIntArray340[N]=L,this.anIntArray342[N]=R,this.anIntArray344[N]=0),L>this.anIntArray341[N]&&(this.anIntArray341[N]=L,this.anIntArray343[N]=R,this.anIntArray345[N]=0),L+=A,R+=k;M!==w&&(A=(v-y<<8)/(M-w)|0,B=(l-f<<8)/(M-w)|0),w>M?(L=v<<8,R=u<<8,P=l<<8,$=M,D=w):(L=y<<8,R=c<<8,P=f<<8,$=w,D=M),$<0&&(L-=A*$,P-=B*$,$=0),D>o-1&&(D=o-1);for(let N=$;N<=D;N++)L<this.anIntArray340[N]&&(this.anIntArray340[N]=L,this.anIntArray342[N]=R,this.anIntArray344[N]=P),L>this.anIntArray341[N]&&(this.anIntArray341[N]=L,this.anIntArray343[N]=R,this.anIntArray345[N]=P),L+=A,P+=B;C!==M&&(A=(S-v<<8)/(C-M)|0,k=(d-u<<8)/(C-M)|0),M>C?(L=S<<8,R=d<<8,P=m<<8,$=C,D=M):(L=v<<8,R=u<<8,P=l<<8,$=M,D=C),$<0&&(L-=A*$,R-=k*$,$=0),D>o-1&&(D=o-1);for(let N=$;N<=D;N++)L<this.anIntArray340[N]&&(this.anIntArray340[N]=L,this.anIntArray342[N]=R,this.anIntArray344[N]=P),L>this.anIntArray341[N]&&(this.anIntArray341[N]=L,this.anIntArray343[N]=R,this.anIntArray345[N]=P),L+=A,R+=k;let O=I*n,U=this.surfacePixels[i];for(let N=I;N<T;N++){let t=this.anIntArray340[N]>>8,e=this.anIntArray341[N]>>8;if(e-t<=0)O+=n;else{let r=this.anIntArray342[N]<<9,s=((this.anIntArray343[N]<<9)-r)/(e-t)|0,o=this.anIntArray344[N]<<9,a=((this.anIntArray345[N]<<9)-o)/(e-t)|0;t<this.boundsTopX&&(r+=(this.boundsTopX-t)*s,o+=(this.boundsTopX-t)*a,t=this.boundsTopX),e>this.boundsBottomX&&(e=this.boundsBottomX),this.interlace&&0!=(1&N)||(this.spriteTranslate[i]?this.drawMinimapTranslate(this.pixels,U,0,O+t,r,o,s,a,t-e,x):this.drawMinimap(this.pixels,U,0,O+t,r,o,s,a,t-e,x)),O+=n}}}drawMinimap(t,e,i,r,s,n,o,a,h,u){for(i=h;i<0;i++)this.pixels[r++]=e[(s>>17)+(n>>17)*u],s+=o,n+=a}drawMinimapTranslate(t,e,i,r,s,n,o,a,h,u){for(let l=h;l<0;l++)0!==(i=e[(s>>17)+(n>>17)*u])?this.pixels[r++]=i:r++,s+=o,n+=a}_spriteClipping_from9(t,i,r,s,n,o,a,h,u){try{0===o&&(o=16777215),0===a&&(a=16777215);const e=this.spriteWidth[n],l=this.spriteHeight[n];let c=0,f=0,d=h<<16,m=(e<<16)/r|0,p=(l<<16)/s|0,_=-((h<<16)/s|0);if(this.spriteTranslate[n]){const e=this.spriteWidthFull[n],o=this.spriteHeightFull[n];m=(e<<16)/r|0,p=(o<<16)/s|0;let a=this.spriteTranslateX[n],h=this.spriteTranslateY[n];u&&(a=e-this.spriteWidth[n]-a),t+=(a*r+e-1)/e|0;let l=(h*s+o-1)/o|0;i+=l,d+=l*_,a*r%e!=0&&(c=(e-a*r%e<<16)/r|0),h*s%o!=0&&(f=(o-h*s%o<<16)/s|0),r=((this.spriteWidth[n]<<16)-c+m-1)/m|0,s=((this.spriteHeight[n]<<16)-f+p-1)/p|0}let g=i*this.width2;if(d+=t<<16,i<this.boundsTopY){let t=this.boundsTopY-i;s-=t,i=this.boundsTopY,g+=t*this.width2,f+=p*t,d+=_*t}i+s>=this.boundsBottomY&&(s-=i+s-this.boundsBottomY+1);let b=g/this.width2&1;if(this.interlace||(b=2),16777215===a)return null!==this.surfacePixels[n]?u?void this._transparentSpritePlot_from15(this.pixels,this.surfacePixels[n],0,(this.spriteWidth[n]<<16)-c-1,f,g,r,s,-m,p,e,o,d,_,b):void this._transparentSpritePlot_from15(this.pixels,this.surfacePixels[n],0,c,f,g,r,s,m,p,e,o,d,_,b):u?void this._transparentSpritePlot_from16A(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,(this.spriteWidth[n]<<16)-c-1,f,g,r,s,-m,p,e,o,d,_,b):void this._transparentSpritePlot_from16A(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,c,f,g,r,s,m,p,e,o,d,_,b);if(null!==this.surfacePixels[n])return u?void this._transparentSpritePlot_from16(this.pixels,this.surfacePixels[n],0,(this.spriteWidth[n]<<16)-c-1,f,g,r,s,-m,p,e,o,a,d,_,b):void this._transparentSpritePlot_from16(this.pixels,this.surfacePixels[n],0,c,f,g,r,s,m,p,e,o,a,d,_,b);u?this._transparentSpritePlot_from17(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,(this.spriteWidth[n]<<16)-c-1,f,g,r,s,-m,p,e,o,a,d,_,b):this._transparentSpritePlot_from17(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,c,f,g,r,s,m,p,e,o,a,d,_,b)}catch(e){console.error(e)}}_transparentSpritePlot_from15(t,i,r,s,n,o,a,h,u,l,c,f,d,m,p){let _=f>>16&255,g=f>>8&255,b=255&f;try{let e=s;for(let f=-h;f<0;f++){let h=(n>>16)*c,f=d>>16,y=a;if(f<this.boundsTopX){let t=this.boundsTopX-f;y-=t,f=this.boundsTopX,s+=u*t}if(f+y>=this.boundsBottomX&&(y-=f+y-this.boundsBottomX),0!=(p=1-p))for(let e=f;e<f+y;e++){if(0!==(r=i[(s>>16)+h])){let i=r>>16&255,s=r>>8&255,n=255&r;t[e+o]=i===s&&s===n?(i*_>>8<<16)+(s*g>>8<<8)+(n*b>>8):r}s+=u}n+=l,s=e,o+=this.width2,d+=m}}catch(e){console.error(e)}}_transparentSpritePlot_from16(t,i,r,s,n,o,a,h,u,l,c,f,d,m,p,_){let g=f>>16&255,b=f>>8&255,y=255&f,w=d>>16&255,v=d>>8&255,M=255&d;try{let e=s;for(let f=-h;f<0;f++){let h=(n>>16)*c,f=m>>16,d=a;if(f<this.boundsTopX){let t=this.boundsTopX-f;d-=t,f=this.boundsTopX,s+=u*t}if(f+d>=this.boundsBottomX&&(d-=f+d-this.boundsBottomX),0!=(_=1-_))for(let e=f;e<f+d;e++){if(0!==(r=i[(s>>16)+h])){let i=r>>16&255,s=r>>8&255,n=255&r;t[e+o]=i===s&&s===n?(i*g>>8<<16)+(s*b>>8<<8)+(n*y>>8):255===i&&s===n?(i*w>>8<<16)+(s*v>>8<<8)+(n*M>>8):r}s+=u}n+=l,s=e,o+=this.width2,m+=p}}catch(e){console.error(e)}}_transparentSpritePlot_from16A(t,i,r,s,n,o,a,h,u,l,c,f,d,m,p,_){let g=d>>16&255,b=d>>8&255,y=255&d;try{let e=n;for(let d=-u;d<0;d++){let u=(o>>16)*f,d=m>>16,w=h;if(d<this.boundsTopX){let t=this.boundsTopX-d;w-=t,d=this.boundsTopX,n+=l*t}if(d+w>=this.boundsBottomX&&(w-=d+w-this.boundsBottomX),0!=(_=1-_))for(let e=d;e<d+w;e++){if(0!=(s=255&i[(n>>16)+u])){let i=(s=r[s])>>16&255,n=s>>8&255,o=255&s;t[e+a]=i===n&&n===o?(i*g>>8<<16)+(n*b>>8<<8)+(o*y>>8):s}n+=l}o+=c,n=e,a+=this.width2,m+=p}}catch(e){console.error(e)}}_transparentSpritePlot_from17(t,i,r,s,n,o,a,h,u,l,c,f,d,m,p,_,g){let b=d>>16&255,y=d>>8&255,w=255&d,v=m>>16&255,M=m>>8&255,S=255&m;try{let e=n;for(let d=-u;d<0;d++){let u=(o>>16)*f,d=p>>16,m=h;if(d<this.boundsTopX){let t=this.boundsTopX-d;m-=t,d=this.boundsTopX,n+=l*t}if(d+m>=this.boundsBottomX&&(m-=d+m-this.boundsBottomX),0!=(g=1-g))for(let e=d;e<d+m;e++){if(0!=(s=255&i[(n>>16)+u])){let i=(s=r[s])>>16&255,n=s>>8&255,o=255&s;t[e+a]=i===n&&n===o?(i*b>>8<<16)+(n*y>>8<<8)+(o*w>>8):255===i&&n===o?(i*v>>8<<16)+(n*M>>8<<8)+(o*S>>8):s}n+=l}o+=c,n=e,a+=this.width2,p+=_}}catch(e){console.error(e)}}drawStringRight(t,e,i,r,s){this.drawString(t,e-this.textWidth(t,r),i,r,s)}drawStringCenter(t,e,i,r,s){this.drawString(t,e-(this.textWidth(t,r)/2|0),i,r,s)}drawParagraph(t,i,r,s,n,o){try{let e=0;const a=Surface.gameFonts[s];let h=0,u=0;for(let l=0;l<t.length;l++)"@"===t[l]&&l+4<t.length&&"@"===t[l+4]||"~"===t[l]&&l+4<t.length&&"~"===t[l+4]?l+=4:e+=a[Surface.characterWidth[t.charCodeAt(l)]+7]," "===t[l]&&(u=l),"%"===t[l]&&(u=l,e=1e3),e>o&&(u<=h&&(u=l),this.drawStringCenter(t.slice(h,u),i,r,s,n),e=0,h=l=u+1,r+=this.textHeight(s));e>0&&this.drawStringCenter(t.slice(h),i,r,s,n)}catch(e){console.error(e)}}drawString(t,i,r,s,n){try{const e=Surface.gameFonts[s];for(let s=0;s<t.length;s++)if("@"===t[s]&&s+4<t.length&&"@"===t[s+4])"red"===t.slice(s+1,s+4).toLowerCase()?n=16711680:"lre"===t.slice(s+1,s+4).toLowerCase()?n=16748608:"yel"===t.slice(s+1,s+4).toLowerCase()?n=16776960:"gre"===t.slice(s+1,s+4).toLowerCase()?n=65280:"blu"===t.slice(s+1,s+4).toLowerCase()?n=255:"cya"===t.slice(s+1,s+4).toLowerCase()?n=65535:"mag"===t.slice(s+1,s+4).toLowerCase()?n=16711935:"whi"===t.slice(s+1,s+4).toLowerCase()?n=16777215:"bla"===t.slice(s+1,s+4).toLowerCase()?n=0:"dre"===t.slice(s+1,s+4).toLowerCase()?n=12582912:"ora"===t.slice(s+1,s+4).toLowerCase()?n=16748608:"ran"===t.slice(s+1,s+4).toLowerCase()?n=16777215*Math.random()|0:"or1"===t.slice(s+1,s+4).toLowerCase()?n=16756736:"or2"===t.slice(s+1,s+4).toLowerCase()?n=16740352:"or3"===t.slice(s+1,s+4).toLowerCase()?n=16723968:"gr1"===t.slice(s+1,s+4).toLowerCase()?n=12648192:"gr2"===t.slice(s+1,s+4).toLowerCase()?n=8453888:"gr3"===t.slice(s+1,s+4).toLowerCase()&&(n=4259584),s+=4;else if("~"===t[s]&&s+4<t.length&&"~"===t[s+4]){let e=t.charCodeAt(s+1),r=t.charCodeAt(s+2),n=t.charCodeAt(s+3);e>=__C_0_259&&e<=__C_9_259&&r>=__C_0_259&&r<=__C_9_259&&n>=__C_0_259&&n<=__C_9_259&&(i=0|Number(t.substring(s+1,s+4))),s+=4}else{const o=Surface.characterWidth[t.charCodeAt(s)];this.loggedIn&&0!==n&&(this.drawCharacter(o,i+1,r,0,e),this.drawCharacter(o,i,r+1,0,e)),this.drawCharacter(o,i,r,n,e),i+=e[o+7]}}catch(e){console.error(e)}}drawCharacter(t,e,i,r,s){let n=e+s[t+5],o=i-s[t+6],a=s[t+3],h=s[t+4],u=16384*s[t]+128*s[t+1]+s[t+2],l=n+o*this.width2,c=this.width2-a,f=0;if(o<this.boundsTopY){let t=this.boundsTopY-o;h-=t,o=this.boundsTopY,u+=t*a,l+=t*this.width2}if(o+h>=this.boundsBottomY&&(h-=o+h-this.boundsBottomY+1),n<this.boundsTopX){let t=this.boundsTopX-n;a-=t,n=this.boundsTopX,u+=t,l+=t,f+=t,c+=t}if(n+a>=this.boundsBottomX){let t=n+a-this.boundsBottomX+1;a-=t,f+=t,c+=t}a>0&&h>0&&this.plotLetter(this.pixels,s,r,u,l,a,h,c,f)}plotLetter(t,i,r,s,n,o,a,h,u){try{let e=-(o>>2);o=-(3&o);for(let l=-a;l<0;l++){for(let o=e;o<0;o++)0!==i[s++]?t[n++]=r:n++,0!==i[s++]?t[n++]=r:n++,0!==i[s++]?t[n++]=r:n++,0!==i[s++]?t[n++]=r:n++;for(let e=o;e<0;e++)0!==i[s++]?t[n++]=r:n++;n+=h,s+=u}}catch(e){console.error(e)}}method259(t,e,i,r,s,n,o,a,h){for(let u=-o;u<0;u++){for(let o=-n;o<0;o++){let n=255&e[r++];if(n>30)if(n>=230)t[s++]=i;else{let e=t[s];t[s++]=((16711935&i)*n+(16711935&e)*(256-n)&4278255360)+((65280&i)*n+(65280&e)*(256-n)&16711680)>>8}else s++}s+=a,r+=h}}textHeight(t){return 0===t?12:1===t||2===t?14:3===t||4===t?15:5===t?19:6===t?24:7===t?29:this.textHeightFont(t)}textHeightFont(t){return 0===t?Surface.gameFonts[t][8]-2:Surface.gameFonts[t][8]-1}textWidth(t,e){let i=0;const r=Surface.gameFonts[e];for(let s=0;s<t.length;s++)"@"===t[s]&&s+4<t.length&&"@"===t[s+4]||"~"===t[s]&&s+4<t.length&&"~"===t[s+4]?s+=4:i+=r[Surface.characterWidth[t.charCodeAt(s)]+7];return i}drawTabs(t,e,i,r,s,n){const o=i/s.length|0;let a=0;for(let h=0;h<s.length;h+=1){const i=n===h?LIGHT_GREY:DARK_GREY;this.drawBoxAlpha(t+a,e,o,r,i,128),this.drawStringCenter(s[h],t+a+(o/2|0),e+16,4,BLACK),h>0&&this.drawLineVert(t+a,e,r,BLACK),a+=o}this.drawLineHoriz(t,e+r,i,BLACK)}}Surface.anInt346=0,Surface.anInt347=0,Surface.anInt348=0,Surface.gameFonts=[],Surface.gameFonts.length=50,Surface.gameFonts.fill(null),Surface.characterWidth=new Int32Array(256);const CHAR_SET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"\xa3$%^&*()-_=+[{]};:'@#~,<.>/?\\| ";for(let n=0;n<256;n++){let t=CHAR_SET.indexOf(String.fromCharCode(n));-1===t&&(t=74),Surface.characterWidth[n]=9*t}var _$Surface_259=Surface,_$tga_203={exports:{}},e,__a_203;e=this,__a_203=function(){"use strict";return function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"_checkHeader",value:function(){var t=this.header;if(0===t.imageType)throw Error("No data");if(t.hasColorMap){if(t.colorMapLength>256||24!==t.colorMapDepth||1!==t.colorMapType)throw Error("Invalid colormap for indexed type")}else if(t.colorMapType)throw Error("Why does the image contain a palette ?");if(!t.width||!t.height)throw Error("Invalid image size");if(8!==t.pixelDepth&&16!==t.pixelDepth&&24!==t.pixelDepth&&32!==t.pixelDepth)throw Error('Invalid pixel size "'+t.pixelDepth+'"')}},{key:"_decodeRLE",value:function(t,e,i,r){for(var s=new Uint8Array(r),n=new Uint8Array(i),o=0;o<r;){var a=t[e++],h=1+(127&a);if(128&a){for(var u=0;u<i;++u)n[u]=t[e+u];e+=i;for(var l=0;l<h;++l)s.set(n,o),o+=i}else{h*=i;for(var c=0;c<h;++c)s[o+c]=t[e+c];o+=h,e+=h}}return s}},{key:"_getImageData8bits",value:function(t,e,i,r,s,n,o,a,h,u){for(var l=0,c=s;c!==o;c+=n)for(var f=a;f!==u;f+=h,l++){var d=e[l];t[4*(f+r*c)+3]=255,t[4*(f+r*c)+2]=i[3*d+0],t[4*(f+r*c)+1]=i[3*d+1],t[4*(f+r*c)+0]=i[3*d+2]}return t}},{key:"_getImageData16bits",value:function(t,e,i,r,s,n,o,a,h,u){for(var l=0,c=s;c!==o;c+=n)for(var f=a;f!==u;f+=h,l+=2){var d=e[l+0]|e[l+1]<<8;t[4*(f+r*c)+0]=(31744&d)>>7,t[4*(f+r*c)+1]=(992&d)>>2,t[4*(f+r*c)+2]=(31&d)>>3,t[4*(f+r*c)+3]=32768&d?0:255}return t}},{key:"_getImageData24bits",value:function(t,e,i,r,s,n,o,a,h,u){for(var l=0,c=s;c!==o;c+=n)for(var f=a;f!==u;f+=h,l+=3)t[4*(f+r*c)+3]=255,t[4*(f+r*c)+2]=e[l+0],t[4*(f+r*c)+1]=e[l+1],t[4*(f+r*c)+0]=e[l+2];return t}},{key:"_getImageData32bits",value:function(t,e,i,r,s,n,o,a,h,u){for(var l=0,c=s;c!==o;c+=n)for(var f=a;f!==u;f+=h,l+=4)t[4*(f+r*c)+2]=e[l+0],t[4*(f+r*c)+1]=e[l+1],t[4*(f+r*c)+0]=e[l+2],t[4*(f+r*c)+3]=e[l+3];return t}},{key:"_getImageDataGrey8bits",value:function(t,e,i,r,s,n,o,a,h,u){for(var l=0,c=s;c!==o;c+=n)for(var f=a;f!==u;f+=h,l++){var d=e[l];t[4*(f+r*c)+0]=d,t[4*(f+r*c)+1]=d,t[4*(f+r*c)+2]=d,t[4*(f+r*c)+3]=255}return t}},{key:"_getImageDataGrey16bits",value:function(t,e,i,r,s,n,o,a,h,u){for(var l=0,c=s;c!==o;c+=n)for(var f=a;f!==u;f+=h,l+=2)t[4*(f+r*c)+0]=e[l+0],t[4*(f+r*c)+1]=e[l+0],t[4*(f+r*c)+2]=e[l+0],t[4*(f+r*c)+3]=e[l+1];return t}},{key:"open",value:function(t,e){var i=this,r=new XMLHttpRequest;r.responseType="arraybuffer",r.open("GET",t,!0),r.onload=function(){200===r.status&&(i.load(new Uint8Array(r.response)),e&&e())},r.send(null)}},{key:"load",value:function(t){var e=0;if(t.length<18)throw Error("Not enough data to contain header");var i={idLength:t[e++],colorMapType:t[e++],imageType:t[e++],colorMapIndex:t[e++]|t[e++]<<8,colorMapLength:t[e++]|t[e++]<<8,colorMapDepth:t[e++],offsetX:t[e++]|t[e++]<<8,offsetY:t[e++]|t[e++]<<8,width:t[e++]|t[e++]<<8,height:t[e++]|t[e++]<<8,pixelDepth:t[e++],flags:t[e++]};if(i.hasEncoding=9===i.imageType||10===i.imageType||11===i.imageType,i.hasColorMap=9===i.imageType||1===i.imageType,i.isGreyColor=11===i.imageType||3===i.imageType,this.header=i,this._checkHeader(),(e+=i.idLength)>=t.length)throw Error("No data");if(i.hasColorMap){var r=i.colorMapLength*(i.colorMapDepth>>3);this.palette=t.subarray(e,e+r),e+=r}var s=i.pixelDepth>>3,n=i.width*i.height,o=n*s;i.hasEncoding?this.imageData=this._decodeRLE(t,e,s,o):this.imageData=t.subarray(e,e+(i.hasColorMap?n:o))}},{key:"getImageData",value:function(t){var e,i,r,s,n,o,a,h=this.header,u=h.width,l=h.height,c=h.flags,f=h.pixelDepth,d=h.isGreyColor,m=(48&c)>>4;switch(t||(t=document?document.createElement("canvas").getContext("2d").createImageData(u,l):{width:u,height:l,data:new Uint8ClampedArray(u*l*4)}),2===m||3===m?(s=0,n=1,o=l):(s=l-1,n=-1,o=-1),2===m||0===m?(e=0,i=1,r=u):(e=u-1,i=-1,r=-1),f){case 8:a=d?this._getImageDataGrey8bits:this._getImageData8bits;break;case 16:a=d?this._getImageDataGrey16bits:this._getImageData16bits;break;case 24:a=this._getImageData24bits;break;case 32:a=this._getImageData32bits}return a.call(this,t.data,this.imageData,this.palette,u,s,n,o,e,i,r),t}},{key:"getCanvas",value:function(){var t=this.header,e=t.width,i=t.height,r=document.createElement("canvas"),s=r.getContext("2d"),n=s.createImageData(e,i);return r.width=e,r.height=i,s.putImageData(this.getImageData(n),0,0),r}},{key:"getDataURL",value:function(t){return this.getCanvas().toDataURL(t||"image/png")}}])&&function(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"object"==typeof _$tga_203.exports?_$tga_203.exports=__a_203():"function"==typeof define&&define.amd?define(__a_203):(e=e||self).TgaLoader=__a_203(),_$tga_203=_$tga_203.exports;var _$keycodes_218={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,SHIFT:16,CTRL:17,ALT:18,PAUSE_BREAK:19,CAPS_LOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRAKET:221,SINGLE_QUOTE:222},_$version_289={CLIENT:204,CONFIG:85,ENTITY:24,FILTER:2,FONTS:1,MAPS:63,MEDIA:58,MODELS:36,SOUNDS:1,TEXTURES:17},__e_186=setTimeout;function t(t,e){var i=e.useCachedSetTimeout?__e_186:setTimeout;return new Promise((function(e){i(e,t)}))}var _$cjs_186=function(e){var i=t(e,{useCachedSetTimeout:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).useCachedSetTimeout});function r(t){return i.then((function(){return t}))}return r.then=function(){return i.then.apply(i,arguments)},r.catch=Promise.resolve().catch,r};const CHAR_MAP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"\xa3$%^&*()-_=+[{]};:'@#~,<.>/?\\| ",FONTS=["h11p.jf","h12b.jf","h12p.jf","h13b.jf","h14b.jf","h16b.jf","h20b.jf","h24b.jf"],INPUT_STYLES={position:"absolute",display:"none",padding:0,border:0,outline:0,opacity:0,fontFamily:"sans"};function getMousePosition(t,e){const i=t.getBoundingClientRect(),r=t.width/i.width,s=t.height/i.height;return{x:(e.clientX-i.left)*r|0,y:(e.clientY-i.top)*s|0}}var _$gameShell_214=class{constructor(t){this._container=t,this._container.style.position="relative",this._canvas=document.createElement("canvas"),this._canvas.style.width="100%",this._canvas.style.height="100%",this._container.appendChild(this._canvas),this._graphics=new _$graphics_217(this._canvas),this.options={middleClickCamera:!1,mouseWheel:!1,resetCompass:!1,zoomCamera:!1,showRoofs:!0,remainingExperience:!1,totalExperience:!1,wordFilter:!0,accountManagement:!0,fpsCounter:!1,retryLoginOnDisconnect:!0,mobile:!1},this.middleButtonDown=!1,this.mouseScrollDelta=0,this.mouseActionTimeout=0,this.logoHeaderText=null,this.mouseX=0,this.mouseY=0,this.mouseButtonDown=0,this.lastMouseButtonDown=0,this.timings=[],this.resetTimings(),this.stopTimeout=0,this.interlaceTimer=0,this.loadingProgressPercent=0,this.imageLogo=null,this.graphics=null,this.appletWidth=512,this.appletHeight=346,this.targetFPS=20,this.maxDrawTime=1e3,this.loadingStep=1,this.hasRefererLogoNotUsed=!1,this.loadingProgessText="Loading",this.fontTimesRoman15=new _$font_216("Times New Roman",0,15),this.fontHelvetica13b=new _$font_216("Helvetica",_$font_216.BOLD,13),this.fontHelvetica12=new _$font_216("Helvetica",0,12),this.keyLeft=!1,this.keyRight=!1,this.keyUp=!1,this.keyDown=!1,this.keySpace=!1,this.keyHome=!1,this.keyPgUp=!1,this.keyPgDown=!1,this.ctrl=!1,this.threadSleep=1,this.interlace=!1,this.inputTextCurrent="",this.inputTextFinal="",this.inputPMCurrent="",this.inputPMFinal=""}async startApplication(t,e,i){window.document.title=i,this._canvas.tabIndex=0,this._canvas.width=t,this._canvas.height=e,this._container.style.width=t+"px",this._container.style.height=e+"px",console.log("Started application"),this.appletWidth=t,this.appletHeight=e,this.options.mobile?(this._canvas.addEventListener("touchstart",t=>{console.log("touchstart"),1===t.touches.length&&(clearTimeout(this.rightClickTimeout),this.rightClickTimeout=setTimeout(()=>{this.disableEndClick=!0,t={button:2,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY},this.mousePressed(t),this.mouseReleased(t)},500))}),this._canvas.addEventListener("touchmove",t=>{console.log("touchmoving"),this.touchMoving?this.mouseMoved({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}):(clearTimeout(this.rightClickTimeout),this.mousePressed({button:1,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),this.touchMoving=!0)}),this._canvas.addEventListener("touchend",t=>{t.preventDefault(),console.log("touchend"),this.disableEndClick?this.disableEndClick=!1:(clearTimeout(this.rightClickTimeout),t={button:this.touchMoving?1:0,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},this.touchMoving?this.touchMoving=!1:this.mousePressed(t),this.mouseReleased(t))})):(this._canvas.addEventListener("mousedown",this.mousePressed.bind(this)),window.addEventListener("mousemove",this.mouseMoved.bind(this)),window.addEventListener("mouseup",this.mouseReleased.bind(this))),this._canvas.addEventListener("wheel",this.mouseWheel.bind(this)),this._canvas.addEventListener("contextmenu",t=>(t.preventDefault(),!1)),this._canvas.addEventListener("keydown",this.keyPressed.bind(this)),this._canvas.addEventListener("keyup",this.keyReleased.bind(this)),this.options.mobile&&(this.toggleKeyboard=!1,this.mobileInput=document.createElement("input"),Object.assign(this.mobileInput.style,INPUT_STYLES),this.mobilePassword=document.createElement("input"),this.mobilePassword.type="password",Object.assign(this.mobilePassword.style,INPUT_STYLES),this.mobileInput.addEventListener("keydown",this.mobileKeyDown.bind(this)),this.mobilePassword.addEventListener("keydown",this.mobileKeyDown.bind(this)),this.mobileInput.addEventListener("blur",this.closeKeyboard.bind(this)),this.mobilePassword.addEventListener("blur",this.closeKeyboard.bind(this)),this._container.appendChild(this.mobileInput),this._container.appendChild(this.mobilePassword)),this.loadingStep=1,await this.run()}closeKeyboard(){clearInterval(this.keyboardUpdateInterval),this.mobileInputEl.style.display="none",this._canvas.focus()}openKeyboard(t="text",e,i,r){this.mobileInputCaret=-1,this.lastMobileInput=e,this.toggleKeyboard=!0,this.mobileInputEl="password"===t?this.mobilePassword:this.mobileInput,this.mobileInputEl.value=e,this.mobileInputEl.maxLength=i,this.mobileInputEl.style.display="block";for(const[s,n]of Object.entries(r))this.mobileInputEl.style[s]=n;this.keyboardUpdateInterval=setInterval(()=>{this.mobileKeyboardUpdate()},125)}mobileKeyDown(t){t.keyCode===_$keycodes_218.ENTER&&(this.closeKeyboard(),this.keyPressed(t))}mobileKeyboardUpdate(){this.mobileInputCaret=this.mobileInputEl.selectionStart;const t=this.mobileInputEl.value;if(t!==this.lastMobileInput){for(let t=0;t<this.lastMobileInput.length;t+=1)this.keyPressed({keyCode:_$keycodes_218.BACKSPACE});for(let e=0;e<t.length;e+=1)this.keyPressed({key:t[e]});this.lastMobileInput=t}}keyPressed(t){const e=t.keyCode;let i=t.key&&1===t.key.length?t.key.charCodeAt(0):65535;t.preventDefault&&t.preventDefault(),[8,10,13,9].includes(e)&&(i=e),this.handleKeyPress(i),e===_$keycodes_218.LEFT_ARROW?this.keyLeft=!0:e===_$keycodes_218.RIGHT_ARROW?this.keyRight=!0:e===_$keycodes_218.UP_ARROW?this.keyUp=!0:e===_$keycodes_218.DOWN_ARROW?this.keyDown=!0:e===_$keycodes_218.SPACE?this.keySpace=!0:e===_$keycodes_218.F1?this.interlace=!this.interlace:e===_$keycodes_218.HOME?this.keyHome=!0:e===_$keycodes_218.PAGE_UP?this.keyPgUp=!0:e===_$keycodes_218.PAGE_DOWN?this.keyPgDown=!0:e===_$keycodes_218.CTRL&&(this.ctrl=!0);let r=!1;for(let s=0;s<CHAR_MAP.length;s++)if(CHAR_MAP.charCodeAt(s)===i){r=!0;break}r&&(this.inputTextCurrent.length<20&&(this.inputTextCurrent+=String.fromCharCode(i)),this.inputPMCurrent.length<80&&(this.inputPMCurrent+=String.fromCharCode(i))),e===_$keycodes_218.ENTER?(this.inputTextFinal=this.inputTextCurrent,this.inputPMFinal=this.inputPMCurrent):e===_$keycodes_218.BACKSPACE&&(this.inputTextCurrent.length>0&&(this.inputTextCurrent=this.inputTextCurrent.substring(0,this.inputTextCurrent.length-1)),this.inputPMCurrent.length>0&&(this.inputPMCurrent=this.inputPMCurrent.substring(0,this.inputPMCurrent.length-1))),this.options.mobile&&setTimeout(()=>{this.toggleKeyboard&&(this.toggleKeyboard=!1,this.mobileInputEl.focus())},125)}keyReleased(t){t.preventDefault();const e=t.keyCode;e===_$keycodes_218.LEFT_ARROW?this.keyLeft=!1:e===_$keycodes_218.RIGHT_ARROW?this.keyRight=!1:e===_$keycodes_218.UP_ARROW?this.keyUp=!1:e===_$keycodes_218.DOWN_ARROW?this.keyDown=!1:e===_$keycodes_218.SPACE?this.keySpace=!1:e===_$keycodes_218.HOME?this.keyHome=!1:e===_$keycodes_218.PAGE_UP?this.keyPgUp=!1:e===_$keycodes_218.PAGE_DOWN?this.keyPgDown=!1:e===_$keycodes_218.CTRL&&(this.ctrl=!1)}mouseMoved(t){const{x:e,y:i}=getMousePosition(this._canvas,t);this.mouseX=e,this.mouseY=i,this.mouseActionTimeout=0}mouseReleased(t){const{x:e,y:i}=getMousePosition(this._canvas,t);this.mouseX=e,this.mouseY=i,this.mouseButtonDown=0,1===t.button&&(this.middleButtonDown=!1)}mouseOut(t){const{x:e,y:i}=getMousePosition(this._canvas,t);this.mouseX=e,this.mouseY=i,this.mouseButtonDown=0,this.middleButtonDown=!1}mousePressed(t){1===t.button&&t.preventDefault&&t.preventDefault(),this.options.mobile&&setTimeout(()=>{this.toggleKeyboard&&(this.toggleKeyboard=!1,this.mobileInputEl.focus())},125);const{x:e,y:i}=getMousePosition(this._canvas,t);if(this.mouseX=e,this.mouseY=i,this.options.middleClickCamera&&1===t.button)return this.middleButtonDown=!0,this.originRotation=this.cameraRotation,void(this.originMouseX=this.mouseX);t.metaKey||2===t.button?this.mouseButtonDown=2:this.mouseButtonDown=1,this.lastMouseButtonDown=this.mouseButtonDown,this.mouseActionTimeout=0,this.handleMouseDown(this.mouseButtonDown,e,i)}mouseWheel(t){if(this.options.mouseWheel&&document.activeElement===this._canvas)return t.preventDefault(),0===t.deltaMode?this.mouseScrollDelta=Math.floor(t.deltaY/14):1===t.deltaMode&&(this.mouseScrollDelta=Math.floor(t.deltaY)),!1}setTargetFps(t){this.targetFPS=1e3/t}resetTimings(){for(let t=0;t<10;t+=1)this.timings[t]=0}start(){this.stopTimeout>=0&&(this.stopTimeout=0)}stop(){this.stopTimeout>=0&&(this.stopTimeout=4e3/this.targetFPS)}async run(){1===this.loadingStep&&(this.loadingStep=2,this.graphics=this.getGraphics(),await this.loadJagex(),this.drawLoadingScreen(0,"Loading..."),await this.startGame(),this.loadingStep=0);let t=0,e=256,i=1,r=0;for(let s=0;s<10;s++)this.timings[s]=Date.now();for(;this.stopTimeout>=0;){if(this.stopTimeout>0&&(this.stopTimeout--,0===this.stopTimeout))return void this.onClosing();const s=e,n=i;e=300,i=1;const o=Date.now();if(0===this.timings[t]?(e=s,i=n):o>this.timings[t]&&(e=2560*this.targetFPS/(o-this.timings[t])|0),e<25&&(e=25),e>256&&(e=256,(i=this.targetFPS-(o-this.timings[t])/10|0)<this.threadSleep&&(i=this.threadSleep)),await _$cjs_186(i),this.timings[t]=o,t=(t+1)%10,i>1)for(let t=0;t<10;t++)0!==this.timings[t]&&(this.timings[t]+=i);let a=0;for(;r<256;)if(await this.handleInputs(),r+=e,++a>this.maxDrawTime){r=0,this.interlaceTimer+=6,this.interlaceTimer>25&&(this.interlaceTimer=0,this.interlace=!0);break}this.interlaceTimer--,r&=255,this.draw(),this.fps=1e3*e/(256*this.targetFPS),this.mouseScrollDelta=0}}async loadJagex(){this.graphics.setColor(_$color_215.black),this.graphics.fillRect(0,0,this.appletWidth,this.appletHeight);const t=await this.readDataFile("jagex.jag","Jagex library",0);if(t){const e=_$utility_288.loadData("logo.tga",0,t);this.imageLogo=this.parseTGA(e)}const e=await this.readDataFile(`fonts${_$version_289.FONTS}.jag`,"Game fonts",5);if(t)for(let i=0;i<FONTS.length;i+=1){const t=FONTS[i];_$Surface_259.createFont(_$utility_288.loadData(t,0,e),i)}}drawLoadingScreen(t,e){let i=(this.appletWidth-281)/2|0,r=(this.appletHeight-148)/2|0;this.graphics.setColor(_$color_215.black),this.graphics.fillRect(0,0,this.appletWidth,this.appletHeight),this.hasRefererLogoNotUsed||this.graphics.drawImage(this.imageLogo,i,r),i+=2,r+=90,this.loadingProgressPercent=t,this.loadingProgessText=e,this.graphics.setColor(new _$color_215(132,132,132)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new _$color_215(220,0,0)),this.graphics.drawRect(i-2,r-2,280,23),this.graphics.fillRect(i,r,277*t/100|0,20),this.graphics.setColor(new _$color_215(198,198,198)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new _$color_215(255,255,255)),this.drawString(this.graphics,e,this.fontTimesRoman15,i+138,r+10),this.hasRefererLogoNotUsed?(this.graphics.setColor(new _$color_215(132,132,152)),this.drawString(this.graphics,"\xa92001-2002 Andrew Gower and Jagex Ltd",this.fontHelvetica12,i+138,this.appletHeight-20)):(this.drawString(this.graphics,"Created by JAGeX - visit www.jagex.com",this.fontHelvetica13b,i+138,r+30),this.drawString(this.graphics,"\xa92001-2002 Andrew Gower and Jagex Ltd",this.fontHelvetica13b,i+138,r+44)),this.logoHeaderText&&(this.graphics.setColor(_$color_215.white),this.drawString(this.graphics,this.logoHeaderText,this.fontHelvetica13b,i+138,r-120))}showLoadingProgress(t,e){const i=2+((this.appletWidth-281)/2|0),r=90+((this.appletHeight-148)/2|0);this.loadingProgressPercent=t,this.loadingProgessText=e,this.graphics.setColor(new _$color_215(132,132,132)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new _$color_215(220,0,0));const s=277*t/100|0;this.graphics.fillRect(i,r,s,20),this.graphics.setColor(_$color_215.black),this.graphics.fillRect(i+s,r,277-s,20),this.graphics.setColor(new _$color_215(198,198,198)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new _$color_215(255,255,255)),this.drawString(this.graphics,e,this.fontTimesRoman15,i+138,r+10)}drawString(t,e,i,r,s){t.setFont(i);const{width:n,height:o}=t.ctx.measureText(e);t.drawString(e,r-(n/2|0),s+(o/4|0))}parseTGA(t){const e=new _$tga_203;e.load(new Uint8Array(t.buffer));const i=e.getCanvas();return i.getContext("2d").getImageData(0,0,i.width,i.height)}async readDataFile(t,e,i){t="./data204/"+t,this.showLoadingProgress(i,`Loading ${e} - 0%`);const r=_$utility_288.openFile(t),s=new Int8Array(6);await r.readFully(s,0,6);const n=((255&s[0])<<16)+((255&s[1])<<8)+(255&s[2]),o=((255&s[3])<<16)+((255&s[4])<<8)+(255&s[5]);this.showLoadingProgress(i,`Loading ${e} - 5%`);let a=0;const h=new Int8Array(o);for(;a<o;){let t=o-a;t>1e3&&(t=1e3),await r.readFully(h,a,t),a+=t,this.showLoadingProgress(i,`Loading ${e} - `+(5+95*a/o|0)+"%")}if(this.showLoadingProgress(i,"Unpacking "+e),o!==n){const t=new Int8Array(n);return _$bzlib_207.decompress(t,n,h,o,0),t}return h}getGraphics(){return this._graphics}async createSocket(t,e){const i=new _$socket_220(t,e);return await i.connect(),i}},_$packetStream_253={};class PacketStream{constructor(t){this.socket=t,this.closed=!1,this.closing=!1,this.delay=0,this.isaacIncoming=null,this.isaacOutgoing=null,this.length=0,this.maxReadTries=0,this.packet8Check=8,this.packetData=null,this.packetEnd=3,this.packetMaxLength=5e3,this.packetStart=0,this.readTries=0,this.socketException=!1,this.socketExceptionMessage=""}async readBytes(t,e){await this.readStreamBytes(t,0,e)}async readPacket(t){try{if(this.readTries++,this.maxReadTries>0&&this.readTries>this.maxReadTries)return this.socketException=!0,this.socketExceptionMessage="time-out",this.maxReadTries+=this.maxReadTries,0;if(0===this.length&&this.availableStream()>=2&&(this.length=await this.readStream(),this.length>=160&&(this.length=256*(this.length-160)+await this.readStream())),this.length>0&&this.availableStream()>=this.length){this.length>=160?await this.readBytes(this.length,t):(t[this.length-1]=255&await this.readStream(),this.length>1&&await this.readBytes(this.length-1,t));let e=this.length;return this.length=0,this.readTries=0,e}}catch(e){this.socketException=!0,this.socketExceptionMessage=e.message}return 0}hasPacket(){return this.packetStart>0}writePacket(t){if(this.socketException)throw this.packetStart=0,this.packetEnd=3,this.socketException=!1,new Error(this.socketExceptionMessage);this.delay++,this.delay<t||(this.packetStart>0&&(this.delay=0,this.writeStreamBytes(this.packetData,0,this.packetStart)),this.packetStart=0,this.packetEnd=3)}sendPacket(){if(null!==this.isaacOutgoing){let t=255&this.packetData[this.packetStart+2];this.packetData[this.packetStart+2]=t+this.isaacOutgoing.getNextValue()&255}8!==this.packet8Check&&this.packetEnd++;const t=this.packetEnd-this.packetStart-2;if(t>=160?(this.packetData[this.packetStart]=160+(t/256|0)&255,this.packetData[this.packetStart+1]=255&t):(this.packetData[this.packetStart]=255&t,this.packetEnd--,this.packetData[this.packetStart+1]=this.packetData[this.packetEnd]),this.packetMaxLength<=1e4){let t=255&this.packetData[this.packetStart+2];PacketStream.anIntArray537[t]++,PacketStream.anIntArray541[t]+=this.packetEnd-this.packetStart}this.packetStart=this.packetEnd}putBytes(t,e,i){for(let r=0;r<i;r++)this.packetData[this.packetEnd++]=255&t[e+r]}putLong(t){this.putInt(t.shiftRight(32).toInt()),this.putInt(t.toInt())}newPacket(t){if(this.packetStart>(4*this.packetMaxLength/5|0))try{this.writePacket(0)}catch(e){this.socketException=!0,this.socketExceptionMessage=e.message}null===this.packetData&&(this.packetData=new Int8Array(this.packetMaxLength)),this.packetData[this.packetStart+2]=255&t,this.packetData[this.packetStart+3]=0,this.packetEnd=this.packetStart+3,this.packet8Check=8}async getLong(){let t=await this.getShort(),e=await this.getShort(),i=await this.getShort(),r=await this.getShort();return _$Long_134.fromInt(t).shiftLeft(48).add(_$Long_134.fromInt(e).shiftLeft(32)).add(i<<16).add(r)}putShort(t){this.packetData[this.packetEnd++]=t>>8&255,this.packetData[this.packetEnd++]=255&t}putInt(t){this.packetData[this.packetEnd++]=t>>24&255,this.packetData[this.packetEnd++]=t>>16&255,this.packetData[this.packetEnd++]=t>>8&255,this.packetData[this.packetEnd++]=255&t}async getShort(){return 256*await this.getByte()+await this.getByte()}putString(t){this.putBytes(function(t){const e=new Uint16Array(t.length);for(let i=0;i<t.length;i+=1)e[i]=t.charCodeAt(i);return e}(t),0,t.length)}putByte(t){this.packetData[this.packetEnd++]=255&t}isaacCommand(t){return t}async getByte(){return 255&await this.readStream()}flushPacket(){this.sendPacket(),this.writePacket(0)}closeStream(){this.closing=!0,this.socket.close(),this.closed=!0}async readStream(){return this.closing?0:await this.socket.read()}availableStream(){return this.closing?0:this.socket.available()}async readStreamBytes(t,e,i){this.closing||await this.socket.readBytes(i,e,t)}writeStreamBytes(t,e,i){this.closing||this.socket.write(t,e,i)}}PacketStream.anIntArray537=new Int32Array(256),PacketStream.anIntArray541=new Int32Array(256),_$packetStream_253=PacketStream;var _$client_223={APPEARANCE:235,BANK_CLOSE:212,BANK_DEPOSIT:23,BANK_WITHDRAW:22,CAST_GROUND:158,CAST_GROUNDITEM:249,CAST_INVITEM:4,CAST_NPC:50,CAST_OBJECT:99,CAST_PLAYER:229,CAST_SELF:137,CAST_WALLOBJECT:180,CHANGE_PASSWORD:25,CHAT:216,CHOOSE_OPTION:116,CLOSE_CONNECTION:31,COMBAT_STYLE:29,COMMAND:38,DUEL_ACCEPT:176,DUEL_CONFIRM_ACCEPT:77,DUEL_DECLINE:197,DUEL_ITEM_UPDATE:33,DUEL_SETTINGS:8,FRIEND_ADD:195,FRIEND_REMOVE:167,GROUNDITEM_TAKE:247,IGNORE_ADD:132,IGNORE_REMOVE:241,INV_CMD:90,INV_DROP:246,INV_UNEQUIP:170,INV_WEAR:169,KNOWN_PLAYERS:163,LOGIN:0,LOGOUT:102,NPC_ATTACK:190,NPC_CMD:202,NPC_TALK:153,OBJECT_CMD1:136,OBJECT_CMD2:79,PACKET_EXCEPTION:3,PING:67,PLAYER_ATTACK:171,PLAYER_DUEL:103,PLAYER_FOLLOW:165,PLAYER_TRADE:142,PM:218,PRAYER_OFF:254,PRAYER_ON:60,RECOVER_CANCEL:196,RECOVER_GET_QUESTIONS:233,RECOVER_REQUEST:220,RECOVER_SET:208,RECOVER_SET_REQUEST:203,REGISTER:2,REPORT_ABUSE:206,SESSION:32,SETTINGS_GAME:111,SETTINGS_PRIVACY:64,SHOP_BUY:236,SHOP_CLOSE:166,SHOP_SELL:221,SLEEP_WORD:45,TRADE_ACCEPT:55,TRADE_CONFIRM_ACCEPT:104,TRADE_DECLINE:230,TRADE_ITEM_UPDATE:46,USEWITH_GROUNDITEM:53,USEWITH_INVITEM:91,USEWITH_NPC:135,USEWITH_OBJECT:115,USEWITH_PLAYER:113,USEWITH_WALLOBJECT:161,WALK:187,WALK_ACTION:16,WALL_OBJECT_COMMAND1:14,WALL_OBJECT_COMMAND2:127},_$gameConnection_211={};class GameConnection extends _$gameShell_214{constructor(t){super(t),this.friendListCount=0,this.ignoreListCount=0,this.settingsBlockChat=0,this.settingsBlockPrivate=0,this.settingsBlockTrade=0,this.settingsBlockDuel=0,this.sessionID=new _$Long_134(0),this.worldFullTimeout=0,this.moderatorLevel=0,this.autoLoginTimeout=0,this.packetLastRead=0,this.messageIndex=0,this.server="undefined"!=typeof window&&window.serverAddress||"rsc-server-production.up.railway.app",this.port="undefined"!=typeof window&&window.serverPort||(this.server.includes("railway.app")?null:43595),this.username="",this.password="",this.incomingPacket=new Int8Array(5e3),this.friendListOnline=new Int32Array(200),this.friendListHashes=[];for(let e=0;e<200;e+=1)this.friendListHashes.push(new _$Long_134(0));this.ignoreList=[];for(let e=0;e<GameConnection.maxSocialListSize;e+=1)this.ignoreList.push(new _$Long_134(0));this.messageTokens=new Int32Array(GameConnection.maxSocialListSize)}async register(t,i){if(this.worldFullTimeout>0)return this.showLoginScreenStatus("Please wait...","Connecting to server"),await _$cjs_186(2e3),void this.showLoginScreenStatus("Sorry! The server is currently full.","Please try again later");try{t=_$utility_288.formatAuthString(t,20),i=_$utility_288.formatAuthString(i,20),this.showLoginScreenStatus("Please wait...","Connecting to server"),this.packetStream=new _$packetStream_253(await this.createSocket(this.server,this.port),this);const e=_$utility_288.usernameToHash(t);this.packetStream.newPacket(_$client_223.SESSION),this.packetStream.putByte(e.shiftRight(16).and(31).toInt()),this.packetStream.flushPacket();const r=await this.packetStream.getLong();if(this.sessionID=r,r.equals(0))return void this.showLoginScreenStatus("Login server offline.","Please try again in a few mins");console.log("Verb: Session id: "+r),this.packetStream.newPacket(_$client_223.REGISTER),this.packetStream.putShort(GameConnection.clientVersion),this.packetStream.putString(t),this.packetStream.putString(i),this.packetStream.flushPacket();const s=await this.packetStream.readStream();switch(this.packetStream.closeStream(),console.log("Newplayer response: "+s),s){case 2:return void this.resetLoginVars();case 13:case 3:return void this.showLoginScreenStatus("Username already taken.","Please choose another username");case 4:return void this.showLoginScreenStatus("That username is already in use.","Wait 60 seconds then retry");case 5:return void this.showLoginScreenStatus("The client has been updated.","Please reload this page");case 6:return void this.showLoginScreenStatus("You may only use 1 character at once.","Your ip-address is already in use");case 7:return void this.showLoginScreenStatus("Login attempts exceeded!","Please try again in 5 minutes");case 11:return void this.showLoginScreenStatus("Account has been temporarily disabled","for cheating or abuse");case 12:return void this.showLoginScreenStatus("Account has been permanently disabled","for cheating or abuse");case 14:return this.showLoginScreenStatus("Sorry! The server is currently full.","Please try again later"),void(this.worldFullTimeout=1500);case 15:return void this.showLoginScreenStatus("You need a members account","to login to this server");case 16:return void this.showLoginScreenStatus("Please login to a members server","to access member-only features");default:return void this.showLoginScreenStatus("Error unable to create username.","Unrecognised response code")}}catch(e){console.error(e),this.showLoginScreenStatus("Error unable to create user.","Unrecognised response code")}}async login(t,i,r){if(this.worldFullTimeout>0)return this.showLoginScreenStatus("Please wait...","Connecting to server"),await _$cjs_186(2e3),void this.showLoginScreenStatus("Sorry! The server is currently full.","Please try again later");try{if(this.username=t,t=_$utility_288.formatAuthString(t,20),this.password=i,i=_$utility_288.formatAuthString(i,20),0===t.trim().length)return void this.showLoginScreenStatus("You must enter both a username","and a password - Please try again");r?this.drawTextBox("Connection lost! Please wait...","Attempting to re-establish"):this.showLoginScreenStatus("Please wait...","Connecting to server"),this.packetStream=new _$packetStream_253(await this.createSocket(this.server,this.port),this),this.packetStream.maxReadTries=GameConnection.maxReadTries,this.packetStream.newPacket(_$client_223.SESSION);const e=_$utility_288.usernameToHash(t);this.packetStream.putByte(e.shiftRight(16).and(31).toInt()),this.packetStream.flushPacket();const s=await this.packetStream.getLong();if(this.sessionID=s,s.equals(0))return void this.showLoginScreenStatus("Login server offline.","Please try again in a few mins");console.log("Verb: Session id: "+s);const n=new Int32Array(4);n[0]=99999999*Math.random()|0,n[1]=99999999*Math.random()|0,n[2]=s.shiftRight(32).toInt(),n[3]=s.toInt(),this.packetStream.newPacket(_$client_223.LOGIN),this.packetStream.putByte(+r),this.packetStream.putShort(GameConnection.clientVersion),this.packetStream.putByte(0),this.packetStream.putByte(10),this.packetStream.putInt(n[0]),this.packetStream.putInt(n[1]),this.packetStream.putInt(n[2]),this.packetStream.putInt(n[3]),this.packetStream.putInt(0),this.packetStream.putString(t),this.packetStream.putString(i),this.packetStream.flushPacket();const o=await this.packetStream.readStream();if(console.log("login response:"+o),25===o)return this.moderatorLevel=1,this.autoLoginTimeout=0,void this.resetGame();if(0===o)return this.moderatorLevel=0,this.autoLoginTimeout=0,void this.resetGame();if(1===o)return void(this.autoLoginTimeout=0);if(r)return t="",i="",void this.resetLoginVars();switch(o){case-1:return void this.showLoginScreenStatus("Error unable to login.","Server timed out");case 3:return void this.showLoginScreenStatus("Invalid username or password.","Try again, or create a new account");case 4:return void this.showLoginScreenStatus("That username is already logged in.","Wait 60 seconds then retry");case 5:return void this.showLoginScreenStatus("The client has been updated.","Please reload this page");case 6:return void this.showLoginScreenStatus("You may only use 1 character at once.","Your ip-address is already in use");case 7:return void this.showLoginScreenStatus("Login attempts exceeded!","Please try again in 5 minutes");case 8:return void this.showLoginScreenStatus("Error unable to login.","Server rejected session");case 9:return void this.showLoginScreenStatus("Error unable to login.","Loginserver rejected session");case 10:return void this.showLoginScreenStatus("That username is already in use.","Wait 60 seconds then retry");case 11:return void this.showLoginScreenStatus("Account temporarily disabled.","Check your message inbox for details");case 12:return void this.showLoginScreenStatus("Account permanently disabled.","Check your message inbox for details");case 14:return this.showLoginScreenStatus("Sorry! This world is currently full.","Please try a different world"),void(this.worldFullTimeout=1500);case 15:return void this.showLoginScreenStatus("You need a members account","to login to this world");case 16:return void this.showLoginScreenStatus("Error - no reply from loginserver.","Please try again");case 17:return void this.showLoginScreenStatus("Error - failed to decode profile.","Contact customer support");case 18:return void this.showLoginScreenStatus("Account suspected stolen.","Press 'recover a locked account' on front page.");case 20:return void this.showLoginScreenStatus("Error - loginserver mismatch","Please try a different world");case 21:return void this.showLoginScreenStatus("Unable to login.","That is not an RS-Classic account");case 22:return void this.showLoginScreenStatus("Password suspected stolen.","Press 'change your password' on front page.");default:return void this.showLoginScreenStatus("Error unable to login.","Unrecognised response code")}}catch(e){console.error(e)}this.autoLoginTimeout>0&&(await _$cjs_186(5e3),this.autoLoginTimeout--,await this.login(this.username,this.password,r)),r?(this.username="",this.password="",this.resetLoginVars()):this.showLoginScreenStatus("Sorry! Unable to connect.","Check internet settings or try another world")}async recoverAttempt(t){this.showLoginScreenStatus("Please wait...","Connecting to server");try{this.packetStream=new _$packetStream_253(await this.createSocket(this.server,this.port),this),this.packetStream.maxReadTries=this.maxReadTries,this.packetStream.newPacket(),this.packetStream.putLong(_$utility_288.usernameToHash(t)),this.packetStream.flushPacket();const e=await this.packetStream.readStream();if(console.log("Getpq response: "+e),0===e)return void this.showLoginScreenStatus("Sorry, the recovery questions for this user have not been set","");for(let t=0;t<5;t++){const e=await this.packetStream.readStream();if(e<0)throw new Error("invalid recovery question length");const r=new Int8Array(e);await this.packetStream.readBytes(e,r);const s=(i=r.slice(0,e),Array.from(i).map(t=>String.fromCharCode(t)).join(""));this.panelRecoverUser.updateText(this.controlRecoverQuestions[t],s)}if(this.recentRecoverFail)return void this.showLoginScreenStatus("Sorry, you have already attempted 1 recovery, try again later","");this.loginScreen=3,this.panelRecoverUser.updateText(this.controlRecoverInfo1,"@yel@To prove this is your account please provide the answers to"),this.panelRecoverUser.updateText(this.controlRecoverInfo2,"@yel@your security questions. You will then be able to reset your password");for(let t=0;t<5;t++)this.panelRecoverUser.updateText(this.controlRecoverAnswers[t],"");this.panelRecoverUser.updateText(this.controlRecoverOldPassword,""),this.panelRecoverUser.updateText(this.controlRecoverNewPassword,""),this.panelRecoverUser.updateText(this.controlRecoverConfirmPassword,"")}catch(e){return console.error(e),void this.showLoginScreenStatus("Sorry! Unable to connect.","Check leternet settings or try another world")}var i}closeConnection(){if(null!==this.packetStream)try{this.packetStream.newPacket(_$client_223.CLOSE_CONNECTION),this.packetStream.flushPacket()}catch(e){console.error(e)}this.username="",this.password="",this.resetLoginVars()}async lostConnection(){try{throw new Error("")}catch(e){console.error(e)}this.options.retryLoginOnDisconnect&&(this.autoLoginTimeout=10),await this.login(this.username,this.password,!0)}drawTextBox(t,e){const i=this.getGraphics(),r=new _$font_216("Helvetica",1,15);i.setColor(_$color_215.black),i.fillRect(116,147,280,50),i.setColor(_$color_215.white),i.drawRect(116,147,280,50),this.drawString(i,t,r,256,162),this.drawString(i,e,r,256,182)}async checkConnection(){const t=Date.now();this.packetStream.hasPacket()&&(this.packetLastRead=t),t-this.packetLastRead>5e3&&(this.packetLastRead=t,this.packetStream.newPacket(_$client_223.PING),this.packetStream.sendPacket());try{this.packetStream.writePacket(20)}catch(e){return void await this.lostConnection()}const i=await this.packetStream.readPacket(this.incomingPacket);if(i>0){const t=this.packetStream.isaacCommand(255&this.incomingPacket[0]);this.handleIncomingPacket(t,i,this.incomingPacket)}}sortFriendsList(){let t=!0;for(;t;){t=!1;for(let e=0;e<this.friendListCount-1;e++)if(255!==this.friendListOnline[e]&&255===this.friendListOnline[e+1]||0===this.friendListOnline[e]&&0!==this.friendListOnline[e+1]){const i=this.friendListOnline[e];this.friendListOnline[e]=this.friendListOnline[e+1],this.friendListOnline[e+1]=i;const r=this.friendListHashes[e];this.friendListHashes[e]=this.friendListHashes[e+1],this.friendListHashes[e+1]=r,t=!0}}}sendPrivacySettings(t,e,i,r){this.packetStream.newPacket(_$client_223.SETTINGS_PRIVACY),this.packetStream.putByte(t),this.packetStream.putByte(e),this.packetStream.putByte(i),this.packetStream.putByte(r),this.packetStream.sendPacket()}ignoreAdd(t){const e=_$utility_288.usernameToHash(t);this.packetStream.newPacket(_$client_223.IGNORE_ADD),this.packetStream.putLong(e),this.packetStream.sendPacket();for(let i=0;i<this.ignoreListCount;i++)if(this.ignoreList[i].equals(e))return;return this.ignoreListCount>=GameConnection.maxSocialListSize?void 0:void(this.ignoreList[this.ignoreListCount++]=e)}ignoreRemove(t){this.packetStream.newPacket(_$client_223.IGNORE_REMOVE),this.packetStream.putLong(t),this.packetStream.sendPacket();for(let e=0;e<this.ignoreListCount;e++)if(this.ignoreList[e].equals(t)){this.ignoreListCount--;for(let t=e;t<this.ignoreListCount;t++)this.ignoreList[t]=this.ignoreList[t+1];return}}friendAdd(t){this.packetStream.newPacket(_$client_223.FRIEND_ADD),this.packetStream.putLong(_$utility_288.usernameToHash(t)),this.packetStream.sendPacket();const e=_$utility_288.usernameToHash(t);for(let i=0;i<this.friendListCount;i++)if(this.friendListHashes[i].equals(e))return;return this.friendListCount>=GameConnection.maxSocialListSize?void 0:(this.friendListHashes[this.friendListCount]=e,this.friendListOnline[this.friendListCount]=0,void this.friendListCount++)}friendRemove(t){this.packetStream.newPacket(_$client_223.FRIEND_REMOVE),this.packetStream.putLong(t),this.packetStream.sendPacket();for(let e=0;e<this.friendListCount;e++)if(this.friendListHashes[e].equals(t)){this.friendListCount--;for(let t=e;t<this.friendListCount;t++)this.friendListHashes[t]=this.friendListHashes[t+1],this.friendListOnline[t]=this.friendListOnline[t+1];break}this.showServerMessage(`@pri@${_$utility_288.hashToUsername(t)} has been removed from your friends list`)}sendPrivateMessage(t,e,i){this.packetStream.newPacket(_$client_223.PM),this.packetStream.putLong(t),this.packetStream.putBytes(e,0,i),this.packetStream.sendPacket()}sendChatMessage(t,e){this.packetStream.newPacket(_$client_223.CHAT),this.packetStream.putBytes(t,0,e),this.packetStream.sendPacket()}sendCommandString(t){this.packetStream.newPacket(_$client_223.COMMAND),this.packetStream.putString(t),this.packetStream.sendPacket()}}GameConnection.clientVersion=1,GameConnection.maxReadTries=0,GameConnection.maxSocialListSize=100,_$gameConnection_211=GameConnection;var _$iota_131=function(t){for(var e=new Array(t),i=0;i<t;++i)e[i]=i;return e};function isBuffer(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var _$isBuffer_132=function(t){return null!=t&&(isBuffer(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&isBuffer(t.slice(0,0))}(t)||!!t._isBuffer)},hasTypedArrays="undefined"!=typeof Float64Array;function compare1st(t,e){return t[0]-e[0]}function order(){var t,e=this.stride,i=new Array(e.length);for(t=0;t<i.length;++t)i[t]=[Math.abs(e[t]),t];i.sort(compare1st);var r=new Array(i.length);for(t=0;t<r.length;++t)r[t]=i[t][1];return r}function compileConstructor(t,e){var i=["View",e,"d",t].join("");e<0&&(i="View_Nil"+t);var r="generic"===t;if(-1===e){var s="function "+i+"(a){this.data=a;};var proto="+i+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+i+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+i+"(a){return new "+i+"(a);}";return new Function(s)()}if(0===e)return s="function "+i+"(a,d) {this.data = a;this.offset = d};var proto="+i+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+i+"_copy() {return new "+i+"(this.data,this.offset)};proto.pick=function "+i+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+i+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+i+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+i+"(a,b,c,d){return new "+i+"(a,d)}",new Function("TrivialArray",s)(CACHED_CONSTRUCTORS[t][0]);s=["'use strict'"];var n=_$iota_131(e),o=n.map((function(t){return"i"+t})),a="this.offset+"+n.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),h=n.map((function(t){return"b"+t})).join(","),u=n.map((function(t){return"c"+t})).join(",");s.push("function "+i+"(a,"+h+","+u+",d){this.data=a","this.shape=["+h+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+i+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),s.push("Object.defineProperty(proto,'size',{get:function "+i+"_size(){return "+n.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),e<4?(s.push("function "+i+"_order(){"),2===e?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+i+"_set("+o.join(",")+",v){"),r?s.push("return this.data.set("+a+",v)}"):s.push("return this.data["+a+"]=v}"),s.push("proto.get=function "+i+"_get("+o.join(",")+"){"),r?s.push("return this.data.get("+a+")}"):s.push("return this.data["+a+"]}"),s.push("proto.index=function "+i+"_index(",o.join(),"){return "+a+"}"),s.push("proto.hi=function "+i+"_hi("+o.join(",")+"){return new "+i+"(this.data,"+n.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+n.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var l=n.map((function(t){return"a"+t+"=this.shape["+t+"]"})),c=n.map((function(t){return"c"+t+"=this.stride["+t+"]"}));s.push("proto.lo=function "+i+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+c.join(","));for(var f=0;f<e;++f)s.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");for(s.push("return new "+i+"(this.data,"+n.map((function(t){return"a"+t})).join(",")+","+n.map((function(t){return"c"+t})).join(",")+",b)}"),s.push("proto.step=function "+i+"_step("+o.join(",")+"){var "+n.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+n.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),f=0;f<e;++f)s.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");s.push("return new "+i+"(this.data,"+n.map((function(t){return"a"+t})).join(",")+","+n.map((function(t){return"b"+t})).join(",")+",c)}");var d=new Array(e),m=new Array(e);for(f=0;f<e;++f)d[f]="a[i"+f+"]",m[f]="b[i"+f+"]";for(s.push("proto.transpose=function "+i+"_transpose("+o+"){"+o.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+i+"(this.data,"+d.join(",")+","+m.join(",")+",this.offset)}"),s.push("proto.pick=function "+i+"_pick("+o+"){var a=[],b=[],c=this.offset"),f=0;f<e;++f)s.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");return s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+i+"(data,shape,stride,offset){return new "+i+"(data,"+n.map((function(t){return"shape["+t+"]"})).join(",")+","+n.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",s.join("\n"))(CACHED_CONSTRUCTORS[t],order)}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]},_$ndarray_140=function(t,e,i,r){if(void 0===t)return(0,CACHED_CONSTRUCTORS.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var s=e.length;if(void 0===i){i=new Array(s);for(var n=s-1,o=1;n>=0;--n)i[n]=o,o*=e[n]}if(void 0===r)for(r=0,n=0;n<s;++n)i[n]<0&&(r-=(e[n]-1)*i[n]);for(var a=function(t){if(_$isBuffer_132(t))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),h=CACHED_CONSTRUCTORS[a];h.length<=s+1;)h.push(compileConstructor(a,h.length-1));return(0,h[s+1])(t,e,i,r)},_$gameData_212={};class GameData{static getModelIndex(t){if(/^na$/i.test(t))return 0;for(let e=0;e<GameData.modelCount;e++)if(GameData.modelName[e].toLowerCase()===t.toLowerCase())return e;return GameData.modelName[GameData.modelCount++]=t,GameData.modelCount-1}static getUnsignedByte(){let t=255&GameData.dataInteger[GameData.offset];return GameData.offset++,t}static getUnsignedShort(){let t=_$utility_288.getUnsignedShort(GameData.dataInteger,GameData.offset);return GameData.offset+=2,t}static getUnsignedInt(){let t=_$utility_288.getUnsignedInt(GameData.dataInteger,GameData.offset);return GameData.offset+=4,t>99999999&&(t=99999999-t),t}static getString(){let t="";for(t="";0!==GameData.dataString[GameData.stringOffset];t+=String.fromCharCode(GameData.dataString[GameData.stringOffset++]));return GameData.stringOffset++,t}static loadData(t,e){GameData.dataString=_$utility_288.loadData("string.dat",0,t),GameData.stringOffset=0,GameData.dataInteger=_$utility_288.loadData("integer.dat",0,t),GameData.offset=0;let i=0;for(GameData.itemCount=GameData.getUnsignedShort(),GameData.itemName=[],GameData.itemDescription=[],GameData.itemCommand=[],GameData.itemPicture=new Int32Array(GameData.itemCount),GameData.itemBasePrice=new Int32Array(GameData.itemCount),GameData.itemStackable=new Int32Array(GameData.itemCount),GameData.itemUnused=new Int32Array(GameData.itemCount),GameData.itemWearable=new Int32Array(GameData.itemCount),GameData.itemMask=new Int32Array(GameData.itemCount),GameData.itemSpecial=new Int32Array(GameData.itemCount),GameData.itemMembers=new Int32Array(GameData.itemCount),i=0;i<GameData.itemCount;i++)GameData.itemName.push(GameData.getString());for(i=0;i<GameData.itemCount;i++)GameData.itemDescription.push(GameData.getString());for(i=0;i<GameData.itemCount;i++)GameData.itemCommand.push(GameData.getString());for(i=0;i<GameData.itemCount;i++)GameData.itemPicture[i]=GameData.getUnsignedShort(),GameData.itemPicture[i]+1>GameData.itemSpriteCount&&(GameData.itemSpriteCount=GameData.itemPicture[i]+1);for(i=0;i<GameData.itemCount;i++)GameData.itemBasePrice[i]=GameData.getUnsignedInt();for(i=0;i<GameData.itemCount;i++)GameData.itemStackable[i]=GameData.getUnsignedByte();for(i=0;i<GameData.itemCount;i++)GameData.itemUnused[i]=GameData.getUnsignedByte();for(i=0;i<GameData.itemCount;i++)GameData.itemWearable[i]=GameData.getUnsignedShort();for(i=0;i<GameData.itemCount;i++)GameData.itemMask[i]=GameData.getUnsignedInt();for(i=0;i<GameData.itemCount;i++)GameData.itemSpecial[i]=GameData.getUnsignedByte();for(i=0;i<GameData.itemCount;i++)GameData.itemMembers[i]=GameData.getUnsignedByte();for(i=0;i<GameData.itemCount;i++)e||1!==GameData.itemMembers[i]||(GameData.itemName[i]="Members object",GameData.itemDescription[i]="You need to be a member to use this object",GameData.itemBasePrice[i]=0,GameData.itemCommand[i]="",GameData.itemUnused[0]=0,GameData.itemWearable[i]=0,GameData.itemSpecial[i]=1);for(GameData.npcCount=GameData.getUnsignedShort(),GameData.npcName=[],GameData.npcDescription=[],GameData.npcCommand=[],GameData.npcAttack=new Int32Array(GameData.npcCount),GameData.npcStrength=new Int32Array(GameData.npcCount),GameData.npcHits=new Int32Array(GameData.npcCount),GameData.npcDefense=new Int32Array(GameData.npcCount),GameData.npcAttackable=new Int32Array(GameData.npcCount),GameData.npcSprite=_$ndarray_140(new Int32Array(12*GameData.npcCount),[GameData.npcCount,12]),GameData.npcColourHair=new Int32Array(GameData.npcCount),GameData.npcColourTop=new Int32Array(GameData.npcCount),GameData.npcColorBottom=new Int32Array(GameData.npcCount),GameData.npcColourSkin=new Int32Array(GameData.npcCount),GameData.npcWidth=new Int32Array(GameData.npcCount),GameData.npcHeight=new Int32Array(GameData.npcCount),GameData.npcWalkModel=new Int32Array(GameData.npcCount),GameData.npcCombatModel=new Int32Array(GameData.npcCount),GameData.npcCombatAnimation=new Int32Array(GameData.npcCount),i=0;i<GameData.npcCount;i++)GameData.npcName.push(GameData.getString());for(i=0;i<GameData.npcCount;i++)GameData.npcDescription.push(GameData.getString());for(i=0;i<GameData.npcCount;i++)GameData.npcAttack[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)GameData.npcStrength[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)GameData.npcHits[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)GameData.npcDefense[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)GameData.npcAttackable[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)for(let t=0;t<12;t++)GameData.npcSprite.set(i,t,GameData.getUnsignedByte()),255===GameData.npcSprite.get(i,t)&&GameData.npcSprite.set(i,t,-1);for(i=0;i<GameData.npcCount;i++)GameData.npcColourHair[i]=GameData.getUnsignedInt();for(i=0;i<GameData.npcCount;i++)GameData.npcColourTop[i]=GameData.getUnsignedInt();for(i=0;i<GameData.npcCount;i++)GameData.npcColorBottom[i]=GameData.getUnsignedInt();for(i=0;i<GameData.npcCount;i++)GameData.npcColourSkin[i]=GameData.getUnsignedInt();for(i=0;i<GameData.npcCount;i++)GameData.npcWidth[i]=GameData.getUnsignedShort();for(i=0;i<GameData.npcCount;i++)GameData.npcHeight[i]=GameData.getUnsignedShort();for(i=0;i<GameData.npcCount;i++)GameData.npcWalkModel[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)GameData.npcCombatModel[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)GameData.npcCombatAnimation[i]=GameData.getUnsignedByte();for(i=0;i<GameData.npcCount;i++)GameData.npcCommand[i]=GameData.getString();for(GameData.textureCount=GameData.getUnsignedShort(),GameData.textureName=[],GameData.textureSubtypeName=[],i=0;i<GameData.textureCount;i++)GameData.textureName.push(GameData.getString());for(i=0;i<GameData.textureCount;i++)GameData.textureSubtypeName.push(GameData.getString());for(GameData.animationCount=GameData.getUnsignedShort(),GameData.animationName=[],GameData.animationCharacterColour=new Int32Array(GameData.animationCount),GameData.animationGender=new Int32Array(GameData.animationCount),GameData.animationHasA=new Int32Array(GameData.animationCount),GameData.animationHasF=new Int32Array(GameData.animationCount),GameData.animationNumber=new Int32Array(GameData.animationCount),i=0;i<GameData.animationCount;i++)GameData.animationName.push(GameData.getString());for(i=0;i<GameData.animationCount;i++)GameData.animationCharacterColour[i]=GameData.getUnsignedInt();for(i=0;i<GameData.animationCount;i++)GameData.animationGender[i]=GameData.getUnsignedByte();for(i=0;i<GameData.animationCount;i++)GameData.animationHasA[i]=GameData.getUnsignedByte();for(i=0;i<GameData.animationCount;i++)GameData.animationHasF[i]=GameData.getUnsignedByte();for(i=0;i<GameData.animationCount;i++)GameData.animationNumber[i]=GameData.getUnsignedByte();for(GameData.objectCount=GameData.getUnsignedShort(),GameData.objectName=[],GameData.objectDescription=[],GameData.objectCommand1=[],GameData.objectCommand2=[],GameData.objectModelIndex=new Int32Array(GameData.objectCount),GameData.objectWidth=new Int32Array(GameData.objectCount),GameData.objectHeight=new Int32Array(GameData.objectCount),GameData.objectType=new Int32Array(GameData.objectCount),GameData.objectElevation=new Int32Array(GameData.objectCount),i=0;i<GameData.objectCount;i++)GameData.objectName.push(GameData.getString());for(i=0;i<GameData.objectCount;i++)GameData.objectDescription.push(GameData.getString());for(i=0;i<GameData.objectCount;i++)GameData.objectCommand1.push(GameData.getString());for(i=0;i<GameData.objectCount;i++)GameData.objectCommand2.push(GameData.getString());for(i=0;i<GameData.objectCount;i++)GameData.objectModelIndex[i]=GameData.getModelIndex(GameData.getString());for(i=0;i<GameData.objectCount;i++)GameData.objectWidth[i]=GameData.getUnsignedByte();for(i=0;i<GameData.objectCount;i++)GameData.objectHeight[i]=GameData.getUnsignedByte();for(i=0;i<GameData.objectCount;i++)GameData.objectType[i]=GameData.getUnsignedByte();for(i=0;i<GameData.objectCount;i++)GameData.objectElevation[i]=GameData.getUnsignedByte();for(GameData.wallObjectCount=GameData.getUnsignedShort(),GameData.wallObjectName=[],GameData.wallObjectDescription=[],GameData.wallObjectCommand1=[],GameData.wallObjectCommand2=[],GameData.wallObjectHeight=new Int32Array(GameData.wallObjectCount),GameData.wallObjectTextureFront=new Int32Array(GameData.wallObjectCount),GameData.wallObjectTextureBack=new Int32Array(GameData.wallObjectCount),GameData.wallObjectAdjacent=new Int32Array(GameData.wallObjectCount),GameData.wallObjectInvisible=new Int32Array(GameData.wallObjectCount),i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectName.push(GameData.getString());for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectDescription.push(GameData.getString());for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectCommand1.push(GameData.getString());for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectCommand2.push(GameData.getString());for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectHeight[i]=GameData.getUnsignedShort();for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectTextureFront[i]=GameData.getUnsignedInt();for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectTextureBack[i]=GameData.getUnsignedInt();for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectAdjacent[i]=GameData.getUnsignedByte();for(i=0;i<GameData.wallObjectCount;i++)GameData.wallObjectInvisible[i]=GameData.getUnsignedByte();for(GameData.roofCount=GameData.getUnsignedShort(),GameData.roofHeight=new Int32Array(GameData.roofCount),GameData.roofNumVertices=new Int32Array(GameData.roofCount),i=0;i<GameData.roofCount;i++)GameData.roofHeight[i]=GameData.getUnsignedByte();for(i=0;i<GameData.roofCount;i++)GameData.roofNumVertices[i]=GameData.getUnsignedByte();for(GameData.tileCount=GameData.getUnsignedShort(),GameData.tileDecoration=new Int32Array(GameData.tileCount),GameData.tileType=new Int32Array(GameData.tileCount),GameData.tileAdjacent=new Int32Array(GameData.tileCount),i=0;i<GameData.tileCount;i++)GameData.tileDecoration[i]=GameData.getUnsignedInt();for(i=0;i<GameData.tileCount;i++)GameData.tileType[i]=GameData.getUnsignedByte();for(i=0;i<GameData.tileCount;i++)GameData.tileAdjacent[i]=GameData.getUnsignedByte();for(GameData.projectileSprite=GameData.getUnsignedShort(),GameData.spellCount=GameData.getUnsignedShort(),GameData.spellName=[],GameData.spellDescription=[],GameData.spellLevel=new Int32Array(GameData.spellCount),GameData.spellRunesRequired=new Int32Array(GameData.spellCount),GameData.spellType=new Int32Array(GameData.spellCount),GameData.spellRunesId=[],GameData.spellRunesCount=[],i=0;i<GameData.spellCount;i++)GameData.spellName.push(GameData.getString());for(i=0;i<GameData.spellCount;i++)GameData.spellDescription.push(GameData.getString());for(i=0;i<GameData.spellCount;i++)GameData.spellLevel[i]=GameData.getUnsignedByte();for(i=0;i<GameData.spellCount;i++)GameData.spellRunesRequired[i]=GameData.getUnsignedByte();for(i=0;i<GameData.spellCount;i++)GameData.spellType[i]=GameData.getUnsignedByte();for(i=0;i<GameData.spellCount;i++){const t=GameData.getUnsignedByte();GameData.spellRunesId.push(new Int32Array(t));for(let e=0;e<t;e++)GameData.spellRunesId[i][e]=GameData.getUnsignedShort()}for(i=0;i<GameData.spellCount;i++){let t=GameData.getUnsignedByte();GameData.spellRunesCount.push(new Int32Array(t));for(let e=0;e<t;e++)GameData.spellRunesCount[i][e]=GameData.getUnsignedByte()}for(GameData.prayerCount=GameData.getUnsignedShort(),GameData.prayerName=[],GameData.prayerDescription=[],GameData.prayerLevel=new Int32Array(GameData.prayerCount),GameData.prayerDrain=new Int32Array(GameData.prayerCount),i=0;i<GameData.prayerCount;i++)GameData.prayerName.push(GameData.getString());for(i=0;i<GameData.prayerCount;i++)GameData.prayerDescription.push(GameData.getString());for(i=0;i<GameData.prayerCount;i++)GameData.prayerLevel[i]=GameData.getUnsignedByte();for(i=0;i<GameData.prayerCount;i++)GameData.prayerDrain[i]=GameData.getUnsignedByte();GameData.dataString=null,GameData.dataInteger=null}}GameData.modelName=[],GameData.modelName.length=5e3,GameData.modelName.fill(null),GameData.spellCount=0,GameData.itemCount=0,GameData.itemSpriteCount=0,GameData.tileCount=0,GameData.wallObjectCount=0,GameData.modelCount=0,GameData.prayerCount=0,GameData.projectileSprite=0,GameData.npcCount=0,GameData.textureCount=0,GameData.roofCount=0,GameData.objectCount=0,GameData.animationCount=0,GameData.stringOffset=0,GameData.offset=0,_$gameData_212=GameData;var _$polygon_255=class{constructor(){this.minPlaneX=0,this.minPlaneY=0,this.maxPlaneX=0,this.maxPlaneY=0,this.minZ=0,this.maxZ=0,this.model=null,this.face=0,this.depth=0,this.normalX=0,this.normalY=0,this.normalZ=0,this.visibility=0,this.facefill=0,this.skipSomething=!1,this.index=0,this.index2=0}},_$scanline_256=class{constructor(){this.startX=0,this.endX=0,this.startS=0,this.endS=0}},_$scene_257={};const COLOUR_TRANSPARENT=12345678;class Scene{constructor(t,e,i,r){this.lastVisiblePolygonsCount=0,this.anIntArray377=null,this.textureCount=0,this.textureColoursUsed=null,this.textureColourList=null,this.textureDimension=null,this.textureLoadedNumber=null,this.texturePixels=null,this.textureBackTransparent=null,this.textureColours64=null,this.textureColours128=null,this.scanlines=null,this.minY=0,this.maxY=0,this.interlace=!1,this.mouseX=0,this.mouseY=0,this.mousePickedCount=0,this.newStart=0,this.newEnd=0,this.cameraX=0,this.cameraY=0,this.cameraZ=0,this.cameraYaw=0,this.cameraPitch=0,this.cameraRoll=0,this.rampCount=50,this.gradientBase=new Int32Array(this.rampCount),this.gradientRamps=[];for(let s=0;s<this.rampCount;s+=1)this.gradientRamps.push(new Int32Array(256));this.clipNear=5,this.clipFar3d=1e3,this.clipFar2d=1e3,this.fogZFalloff=20,this.fogZDistance=10,this.wideBand=!1,this.mousePickingActive=!1,this.mousePickedMax=100,this.mousePickedModels=[],this.mousePickedModels.length=this.mousePickedMax,this.mousePickedModels.fill(null),this.mousePickedFaces=new Int32Array(this.mousePickedMax),this.width=512,this.clipX=256,this.clipY=192,this.baseX=256,this.baseY=256,this.viewDistance=8,this.normalMagnitude=4,this.planeX=new Int32Array(40),this.planeY=new Int32Array(40),this.vertexShade=new Int32Array(40),this.vertexX=new Int32Array(40),this.vertexY=new Int32Array(40),this.vertexZ=new Int32Array(40),this.interlace=!1,this.surface=t,this.clipX=t.width2/2|0,this.clipY=t.height2/2|0,this.raster=t.pixels,this.modelCount=0,this.maxModelCount=e,this.models=[],this.models.length=this.maxModelCount,this.models.fill(null),this.visiblePolygonsCount=0,this.visiblePolygons=[];for(let s=0;s<i;s++)this.visiblePolygons.push(new _$polygon_255);this.spriteCount=0,this.spriteId=new Int32Array(r),this.spriteWidth=new Int32Array(r),this.spriteHeight=new Int32Array(r),this.spriteX=new Int32Array(r),this.spriteZ=new Int32Array(r),this.spriteY=new Int32Array(r),this.spriteTranslateX=new Int32Array(r),this.cameraX=0,this.cameraY=0,this.cameraZ=0,this.cameraYaw=0,this.cameraPitch=0,this.cameraRoll=0;for(let s=0;s<256;s++)Scene.sin512Cache[s]=32768*Math.sin(.02454369*s)|0,Scene.sin512Cache[s+256]=32768*Math.cos(.02454369*s)|0;for(let s=0;s<1024;s++)Scene.sinCosCache[s]=32768*Math.sin(.00613592315*s)|0,Scene.sinCosCache[s+1024]=32768*Math.cos(.00613592315*s)|0}static textureScanline(t,e,i,r,s,n,o,a,h,u,l,c,f,d){if(l<=0)return;let m=0,p=0,_=0;0!==o&&(i=s/o<<7,r=n/o<<7),i<0?i=0:i>16256&&(i=16256),s+=a,n+=h,0!==(o+=u)&&(m=s/o<<7,p=n/o<<7),m<0?m=0:m>16256&&(m=16256);let g=m-i>>4,b=p-r>>4;for(let y=l>>4;y>0;y--)i+=6291456&f,_=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,r+=b,i=(16383&(i+=g))+(6291456&f),_=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,r+=b,i=(16383&(i+=g))+(6291456&f),_=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,r+=b,i=(16383&(i+=g))+(6291456&f),_=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>_,i=m,r=p,s+=a,n+=h,0!==(o+=u)&&(m=s/o<<7,p=n/o<<7),m<0?m=0:m>16256&&(m=16256),g=m-i>>4,b=p-r>>4;for(let y=0;y<(15&l);y++)0==(3&y)&&(i=(16383&i)+(6291456&f),_=f>>23,f+=d),t[c++]=e[(16256&r)+(i>>7)]>>>_,i+=g,r+=b}static textureTranslucentScanline(t,e,i,r,s,n,o,a,h,u,l,c,f,d){if(l<=0)return;let m=0,p=0,_=0;0!==o&&(i=s/o<<7,r=n/o<<7),i<0?i=0:i>16256&&(i=16256),s+=a,n+=h,0!==(o+=u)&&(m=s/o<<7,p=n/o<<7),m<0?m=0:m>16256&&(m=16256);let g=m-i>>4,b=p-r>>4;for(let y=l>>4;y>0;y--)i+=6291456&f,_=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),r+=b,i=(16383&(i+=g))+(6291456&f),_=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),r+=b,i=(16383&(i+=g))+(6291456&f),_=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),r+=b,i=(16383&(i+=g))+(6291456&f),_=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i=m,r=p,s+=a,n+=h,0!==(o+=u)&&(m=s/o<<7,p=n/o<<7),m<0?m=0:m>16256&&(m=16256),g=m-i>>4,b=p-r>>4;for(let y=0;y<(15&l);y++)0==(3&y)&&(i=(16383&i)+(6291456&f),_=f>>23,f+=d),t[c++]=(e[(16256&r)+(i>>7)]>>>_)+(t[c]>>1&8355711),i+=g,r+=b}static textureBackTranslucentScanline(t,e,i,r,s,n,o,a,h,u,l,c,f,d,m){if(c<=0)return;let p=0,_=0;m<<=2,0!==a&&(p=n/a<<7,_=o/a<<7),p<0?p=0:p>16256&&(p=16256);for(let g=c;g>0;g-=16){n+=h,o+=u,i=p,r=_,0!==(a+=l)&&(p=n/a<<7,_=o/a<<7),p<0?p=0:p>16256&&(p=16256);let c=p-i>>4,b=_-r>>4,y=d>>23;if(i+=6291456&d,d+=m,g<16)for(let n=0;n<g;n++)0!=(e=s[(16256&r)+(i>>7)]>>>y)&&(t[f]=e),f++,i+=c,r+=b,3==(3&n)&&(i=(16383&i)+(6291456&d),y=d>>23,d+=m);else 0!=(e=s[(16256&r)+(i>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,i=(16383&(i+=c))+(6291456&d),y=d>>23,d+=m,0!=(e=s[(16256&(r+=b))+(i>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,i=(16383&(i+=c))+(6291456&d),y=d>>23,d+=m,0!=(e=s[(16256&(r+=b))+(i>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,i=(16383&(i+=c))+(6291456&d),y=d>>23,d+=m,0!=(e=s[(16256&(r+=b))+(i>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++,0!=(e=s[(16256&(r+=b))+((i+=c)>>7)]>>>y)&&(t[f]=e),f++}}static textureScanline2(t,e,i,r,s,n,o,a,h,u,l,c,f,d){if(l<=0)return;let m=0,p=0;d<<=2,0!==o&&(m=s/o<<6,p=n/o<<6),m<0?m=0:m>4032&&(m=4032);for(let _=l;_>0;_-=16){s+=a,n+=h,i=m,r=p,0!==(o+=u)&&(m=s/o<<6,p=n/o<<6),m<0?m=0:m>4032&&(m=4032);let l=m-i>>4,g=p-r>>4,b=f>>20;if(i+=786432&f,f+=d,_<16)for(let s=0;s<_;s++)t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,3==(3&s)&&(i=(4095&i)+(786432&f),b=f>>20,f+=d);else t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,r+=g,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,r+=g,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,r+=g,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=g,t[c++]=e[(4032&r)+(i>>6)]>>>b}}static textureTranslucentScanline2(t,e,i,r,s,n,o,a,h,u,l,c,f,d){if(l<=0)return;let m=0,p=0;d<<=2,0!==o&&(m=s/o<<6,p=n/o<<6),m<0?m=0:m>4032&&(m=4032);for(let _=l;_>0;_-=16){s+=a,n+=h,i=m,r=p,0!==(o+=u)&&(m=s/o<<6,p=n/o<<6),m<0?m=0:m>4032&&(m=4032);let l=m-i>>4,g=p-r>>4,b=f>>20;if(i+=786432&f,f+=d,_<16)for(let s=0;s<_;s++)t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,3==(3&s)&&(i=(4095&i)+(786432&f),b=f>>20,f+=d);else t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),r+=g,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),r+=g,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),r+=g,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=g,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711)}}static textureBackTranslucentScanline2(t,e,i,r,s,n,o,a,h,u,l,c,f,d,m){if(c<=0)return;let p=0,_=0;m<<=2,0!==a&&(p=n/a<<6,_=o/a<<6),p<0?p=0:p>4032&&(p=4032);for(let g=c;g>0;g-=16){n+=h,o+=u,i=p,r=_,0!==(a+=l)&&(p=n/a<<6,_=o/a<<6),p<0?p=0:p>4032&&(p=4032);let c=p-i>>4,b=_-r>>4,y=d>>20;if(i+=786432&d,d+=m,g<16)for(let n=0;n<g;n++)0!=(e=s[(4032&r)+(i>>6)]>>>y)&&(t[f]=e),f++,i+=c,r+=b,3==(3&n)&&(i=(4095&i)+(786432&d),y=d>>20,d+=m);else 0!=(e=s[(4032&r)+(i>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,i=(4095&(i+=c))+(786432&d),y=d>>20,d+=m,0!=(e=s[(4032&(r+=b))+(i>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,i=(4095&(i+=c))+(786432&d),y=d>>20,d+=m,0!=(e=s[(4032&(r+=b))+(i>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,i=(4095&(i+=c))+(786432&d),y=d>>20,d+=m,0!=(e=s[(4032&(r+=b))+(i>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++,0!=(e=s[(4032&(r+=b))+((i+=c)>>6)]>>>y)&&(t[f]=e),f++}}static gradientScanline(t,e,i,r,s,n,o){if(e>=0)return;o<<=1,r=s[n>>8&255],n+=o;let a=e/8|0;for(let h=a;h<0;h++)t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o,t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o,t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o,t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o;a=-e%8;for(let h=0;h<a;h++)t[i++]=r,1==(1&h)&&(r=s[n>>8&255],n+=o)}static textureGradientScanline(t,e,i,r,s,n,o){if(e>=0)return;o<<=2,r=s[n>>8&255],n+=o;let a=e/16|0;for(let h=a;h<0;h++)t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=s[n>>8&255],n+=o,t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=s[n>>8&255],n+=o,t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=s[n>>8&255],n+=o,t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=s[n>>8&255],n+=o;a=-e%16;for(let h=0;h<a;h++)t[i++]=r+(t[i]>>1&8355711),3==(3&h)&&(r=s[n>>8&255],n+=o,n+=o)}static gradientScanline2(t,e,i,r,s,n,o){if(e>=0)return;o<<=2,r=s[n>>8&255],n+=o;let a=e/16|0;for(let h=a;h<0;h++)t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o,t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o,t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o,t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=s[n>>8&255],n+=o;a=-e%16;for(let h=0;h<a;h++)t[i++]=r,3==(3&h)&&(r=s[n>>8&255],n+=o)}static rgb(t,e,i){return-1-1024*(t/8|0)-32*(e/8|0)-(i/8|0)}addModel(t){null===t&&console.log("Warning tried to add null object!"),this.modelCount<this.maxModelCount&&(this.models[this.modelCount++]=t)}removeModel(t){for(let e=0;e<this.modelCount;e++)if(this.models[e]===t){this.modelCount--;for(let t=e;t<this.modelCount;t++)this.models[t]=this.models[t+1]}}dispose(){this.clear();for(let t=0;t<this.modelCount;t++)this.models[t]=null;this.modelCount=0}clear(){this.spriteCount=0,this.view.clear()}reduceSprites(t){this.spriteCount-=t,this.view.reduce(t,2*t),this.spriteCount<0&&(this.spriteCount=0)}addSprite(t,e,i,r,s,n,o){this.spriteId[this.spriteCount]=t,this.spriteX[this.spriteCount]=e,this.spriteZ[this.spriteCount]=i,this.spriteY[this.spriteCount]=r,this.spriteWidth[this.spriteCount]=s,this.spriteHeight[this.spriteCount]=n,this.spriteTranslateX[this.spriteCount]=0;const a=this.view.createVertex(e,i,r),h=this.view.createVertex(e,i-n,r),u=new Int32Array([a,h]);return this.view.createFace(2,u,0,0),this.view.faceTag[this.spriteCount]=o,this.view.isLocalPlayer[this.spriteCount++]=0,this.spriteCount-1}setLocalPlayer(t){this.view.isLocalPlayer[t]=1}setSpriteTranslateX(t,e){this.spriteTranslateX[t]=e}setMouseLoc(t,e){this.mouseX=t-this.baseX,this.mouseY=e,this.mousePickedCount=0,this.mousePickingActive=!0}getMousePickedCount(){return this.mousePickedCount}getMousePickedFaces(){return this.mousePickedFaces}getMousePickedModels(){return this.mousePickedModels}setBounds(t,e,i,r,s,n){this.clipX=i,this.clipY=r,this.baseX=t,this.baseY=e,this.width=s,this.viewDistance=n,this.scanlines=[];for(let o=0;o<r+e;o++)this.scanlines.push(new _$scanline_256)}polygonsQSort(t,e,i){if(e<i){let r=e-1,s=i+1,n=(e+i)/2|0,o=t[n];t[n]=t[e],t[e]=o;let a=o.depth;for(;r<s;){do{s--}while(t[s].depth<a);do{r++}while(t[r].depth>a);if(r<s){let e=t[r];t[r]=t[s],t[s]=e}}this.polygonsQSort(t,e,s),this.polygonsQSort(t,s+1,i)}}polygonsIntersectSort(t,e,i){for(let s=0;s<=i;s++)e[s].skipSomething=!1,e[s].index=s,e[s].index2=-1;let r=0;for(;;){for(;e[r].skipSomething;)r++;if(r===i)return;let s=e[r];s.skipSomething=!0;let n=r,o=r+t;o>=i&&(o=i-1);for(let t=o;t>=n+1;t--){let i=e[t];s.minPlaneX<i.maxPlaneX&&i.minPlaneX<s.maxPlaneX&&s.minPlaneY<i.maxPlaneY&&i.minPlaneY<s.maxPlaneY&&s.index!==i.index2&&!this.separatePolygon(s,i)&&this.heuristicPolygon(i,s)&&(this.polygonsOrder(e,n,t),e[t]!==i&&t++,n=this.newStart,i.index2=s.index)}}}polygonsOrder(t,e,i){for(;;){let r=t[e];for(let n=e+1;n<=i;n++){let s=t[n];if(!this.separatePolygon(s,r))break;if(t[e]=s,t[n]=r,(e=n)===i)return this.newStart=e,this.newEnd=e-1,!0}let s=t[i];for(let n=i-1;n>=e;n--){let r=t[n];if(!this.separatePolygon(s,r))break;if(t[i]=r,t[n]=s,e===(i=n))return this.newStart=i+1,this.newEnd=i,!0}if(e+1>=i)return this.newStart=e,this.newEnd=i,!1;if(!this.polygonsOrder(t,e+1,i))return this.newStart=e,!1;i=this.newEnd}}setFrustum(t,e,i){let r=1024-this.cameraYaw&1023,s=1024-this.cameraPitch&1023,n=1024-this.cameraRoll&1023;if(0!==n){let i=Scene.sinCosCache[n],r=Scene.sinCosCache[n+1024],s=e*i+t*r>>15;e=e*r-t*i>>15,t=s}if(0!==r){let t=Scene.sinCosCache[r],s=Scene.sinCosCache[r+1024],n=e*s-i*t>>15;i=e*t+i*s>>15,e=n}if(0!==s){let e=Scene.sinCosCache[s],r=Scene.sinCosCache[s+1024],n=i*e+t*r>>15;i=i*r-t*e>>15,t=n}t<Scene.frustumMaxX&&(Scene.frustumMaxX=t),t>Scene.frustumMinX&&(Scene.frustumMinX=t),e<Scene.frustumMaxY&&(Scene.frustumMaxY=e),e>Scene.frustumMinY&&(Scene.frustumMinY=e),i<Scene.frustumFarZ&&(Scene.frustumFarZ=i),i>Scene.frustumNearZ&&(Scene.frustumNearZ=i)}render(){this.interlace=this.surface.interlace;let t=this.clipX*this.clipFar3d>>this.viewDistance,e=this.clipY*this.clipFar3d>>this.viewDistance;Scene.frustumMaxX=0,Scene.frustumMinX=0,Scene.frustumMaxY=0,Scene.frustumMinY=0,Scene.frustumFarZ=0,Scene.frustumNearZ=0,this.setFrustum(-t,-e,this.clipFar3d),this.setFrustum(-t,e,this.clipFar3d),this.setFrustum(t,-e,this.clipFar3d),this.setFrustum(t,e,this.clipFar3d),this.setFrustum(-this.clipX,-this.clipY,0),this.setFrustum(-this.clipX,this.clipY,0),this.setFrustum(this.clipX,-this.clipY,0),this.setFrustum(this.clipX,this.clipY,0),Scene.frustumMaxX+=this.cameraX,Scene.frustumMinX+=this.cameraX,Scene.frustumMaxY+=this.cameraY,Scene.frustumMinY+=this.cameraY,Scene.frustumFarZ+=this.cameraZ,Scene.frustumNearZ+=this.cameraZ,this.models[this.modelCount]=this.view,this.view.transformState=2;for(let r=0;r<this.modelCount;r++)this.models[r].project(this.cameraX,this.cameraY,this.cameraZ,this.cameraYaw,this.cameraPitch,this.cameraRoll,this.viewDistance,this.clipNear);this.models[this.modelCount].project(this.cameraX,this.cameraY,this.cameraZ,this.cameraYaw,this.cameraPitch,this.cameraRoll,this.viewDistance,this.clipNear),this.visiblePolygonsCount=0;for(let r=0;r<this.modelCount;r++){let t=this.models[r];if(t.visible)for(let e=0;e<t.numFaces;e++){let i=t.faceNumVertices[e],r=t.faceVertices[e],s=!1;for(let e=0;e<i;e++){let i=t.projectVertexZ[r[e]];if(!(i<=this.clipNear||i>=this.clipFar3d)){s=!0;break}}if(s){let s=0;for(let e=0;e<i;e++){let i=t.vertexViewX[r[e]];if(i>-this.clipX&&(s|=1),i<this.clipX&&(s|=2),3===s)break}if(3===s){let s=0;for(let e=0;e<i;e++){let i=t.vertexViewY[r[e]];if(i>-this.clipY&&(s|=1),i<this.clipY&&(s|=2),3===s)break}if(3===s){let s=this.visiblePolygons[this.visiblePolygonsCount];s.model=t,s.face=e,this.initialisePolygon3D(this.visiblePolygonsCount);let n=0;if((n=s.visibility<0?t.faceFillFront[e]:t.faceFillBack[e])!==COLOUR_TRANSPARENT){let e=0;for(let s=0;s<i;s++)e+=t.projectVertexZ[r[s]];s.depth=(e/i|0)+t.depth,s.facefill=n,this.visiblePolygonsCount++}}}}}}let i=this.view;if(i.visible)for(let r=0;r<i.numFaces;r++){let t=i.faceVertices[r],e=t[0],s=i.vertexViewX[e],n=i.vertexViewY[e],o=i.projectVertexZ[e];if(o>this.clipNear&&o<this.clipFar2d){let e=(this.spriteWidth[r]<<this.viewDistance)/o|0,a=(this.spriteHeight[r]<<this.viewDistance)/o|0;if(s-(e/2|0)<=this.clipX&&s+(e/2|0)>=-this.clipX&&n-a<=this.clipY&&n>=-this.clipY){let e=this.visiblePolygons[this.visiblePolygonsCount];e.model=i,e.face=r,this.initialisePolygon2D(this.visiblePolygonsCount),e.depth=(o+i.projectVertexZ[t[1]])/2|0,this.visiblePolygonsCount++}}}if(0!==this.visiblePolygonsCount){this.lastVisiblePolygonsCount=this.visiblePolygonsCount,this.polygonsQSort(this.visiblePolygons,0,this.visiblePolygonsCount-1),this.polygonsIntersectSort(100,this.visiblePolygons,this.visiblePolygonsCount);for(let t=0;t<this.visiblePolygonsCount;t++){let e=this.visiblePolygons[t],i=e.model,r=e.face;if(i===this.view){let t=i.faceVertices[r],e=t[0],s=i.vertexViewX[e],n=i.vertexViewY[e],o=i.projectVertexZ[e],a=(this.spriteWidth[r]<<this.viewDistance)/o|0,h=(this.spriteHeight[r]<<this.viewDistance)/o|0,u=i.vertexViewX[t[1]]-s,l=s-(a/2|0),c=this.baseY+n-h;this.surface._spriteClipping_from7(l+this.baseX,c,a,h,this.spriteId[r],u,(256<<this.viewDistance)/o|0),this.mousePickingActive&&this.mousePickedCount<this.mousePickedMax&&(l+=(this.spriteTranslateX[r]<<this.viewDistance)/o|0,this.mouseY>=c&&this.mouseY<=c+h&&this.mouseX>=l&&this.mouseX<=l+a&&!i.unpickable&&0===i.isLocalPlayer[r]&&(this.mousePickedModels[this.mousePickedCount]=i,this.mousePickedFaces[this.mousePickedCount]=r,this.mousePickedCount++))}else{let t=0,s=0,n=i.faceNumVertices[r],o=i.faceVertices[r];i.faceIntensity[r]!==COLOUR_TRANSPARENT&&(s=e.visibility<0?i.lightAmbience-i.faceIntensity[r]:i.lightAmbience+i.faceIntensity[r]);for(let a=0;a<n;a++){let h=o[a];if(this.vertexX[a]=i.projectVertexX[h],this.vertexY[a]=i.projectVertexY[h],this.vertexZ[a]=i.projectVertexZ[h],i.faceIntensity[r]===COLOUR_TRANSPARENT&&(s=e.visibility<0?i.lightAmbience-i.vertexIntensity[h]+i.vertexAmbience[h]:i.lightAmbience+i.vertexIntensity[h]+i.vertexAmbience[h]),i.projectVertexZ[h]>=this.clipNear)this.planeX[t]=i.vertexViewX[h],this.planeY[t]=i.vertexViewY[h],this.vertexShade[t]=s,i.projectVertexZ[h]>this.fogZDistance&&(this.vertexShade[t]+=(i.projectVertexZ[h]-this.fogZDistance)/this.fogZFalloff|0),t++;else{let e=0;if(e=0===a?o[n-1]:o[a-1],i.projectVertexZ[e]>=this.clipNear){let r=i.projectVertexZ[h]-i.projectVertexZ[e],n=i.projectVertexX[h]-((i.projectVertexX[h]-i.projectVertexX[e])*(i.projectVertexZ[h]-this.clipNear)/r|0),o=i.projectVertexY[h]-((i.projectVertexY[h]-i.projectVertexY[e])*(i.projectVertexZ[h]-this.clipNear)/r|0);this.planeX[t]=(n<<this.viewDistance)/this.clipNear|0,this.planeY[t]=(o<<this.viewDistance)/this.clipNear|0,this.vertexShade[t]=s,t++}if(e=a===n-1?o[0]:o[a+1],i.projectVertexZ[e]>=this.clipNear){let r=i.projectVertexZ[h]-i.projectVertexZ[e],n=i.projectVertexX[h]-((i.projectVertexX[h]-i.projectVertexX[e])*(i.projectVertexZ[h]-this.clipNear)/r|0),o=i.projectVertexY[h]-((i.projectVertexY[h]-i.projectVertexY[e])*(i.projectVertexZ[h]-this.clipNear)/r|0);this.planeX[t]=(n<<this.viewDistance)/this.clipNear|0,this.planeY[t]=(o<<this.viewDistance)/this.clipNear|0,this.vertexShade[t]=s,t++}}}for(let i=0;i<n;i++)this.vertexShade[i]<0?this.vertexShade[i]=0:this.vertexShade[i]>255&&(this.vertexShade[i]=255),e.facefill>=0&&(1===this.textureDimension[e.facefill]?this.vertexShade[i]<<=9:this.vertexShade[i]<<=6);this.generateScanlines(0,0,0,0,t,this.planeX,this.planeY,this.vertexShade,i,r),this.maxY>this.minY&&this.rasterize(0,0,n,this.vertexX,this.vertexY,this.vertexZ,e.facefill,i)}}this.mousePickingActive=!1}}generateScanlines(t,e,i,r,s,n,o,a,h,u){if(3===s){let s=o[0]+this.baseY,h=o[1]+this.baseY,u=o[2]+this.baseY,l=n[0],c=n[1],f=n[2],d=a[0],m=a[1],p=a[2],_=this.baseY+this.clipY-1,g=0,b=0,y=0,w=0,v=COLOUR_TRANSPARENT,M=-COLOUR_TRANSPARENT;u!==s&&(b=(f-l<<8)/(u-s)|0,w=(p-d<<8)/(u-s)|0,s<u?(g=l<<8,y=d<<8,v=s,M=u):(g=f<<8,y=p<<8,v=u,M=s),v<0&&(g-=b*v,y-=w*v,v=0),M>_&&(M=_));let S=0,C=0,I=0,T=0,A=COLOUR_TRANSPARENT,k=-COLOUR_TRANSPARENT;h!==s&&(C=(c-l<<8)/(h-s)|0,T=(m-d<<8)/(h-s)|0,s<h?(S=l<<8,I=d<<8,A=s,k=h):(S=c<<8,I=m<<8,A=h,k=s),A<0&&(S-=C*A|0,I-=T*A|0,A=0),k>_&&(k=_));let B=0,x=0,E=0,$=0,D=COLOUR_TRANSPARENT,L=-COLOUR_TRANSPARENT;u!==h&&(x=(f-c<<8)/(u-h)|0,$=(p-m<<8)/(u-h)|0,h<u?(B=c<<8,E=m<<8,D=h,L=u):(B=f<<8,E=p<<8,D=u,L=h),D<0&&(B-=x*D|0,E-=$*D|0,D=0),L>_&&(L=_)),this.minY=v,A<this.minY&&(this.minY=A),D<this.minY&&(this.minY=D),this.maxY=M,k>this.maxY&&(this.maxY=k),L>this.maxY&&(this.maxY=L);let P=0;for(i=this.minY;i<this.maxY;i++){i>=v&&i<M?(t=e=g,r=P=y,g+=b,y+=w):(t=655360,e=-655360),i>=A&&i<k&&(S<t&&(t=S,r=I),S>e&&(e=S,P=I),S+=C,I+=T),i>=D&&i<L&&(B<t&&(t=B,r=E),B>e&&(e=B,P=E),B+=x,E+=$);let s=this.scanlines[i];s.startX=t,s.endX=e,s.startS=r,s.endS=P}this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY)}else if(4===s){let s=o[0]+this.baseY,h=o[1]+this.baseY,u=o[2]+this.baseY,l=o[3]+this.baseY,c=n[0],f=n[1],d=n[2],m=n[3],p=a[0],_=a[1],g=a[2],b=a[3],y=this.baseY+this.clipY-1,w=0,v=0,M=0,S=0,C=COLOUR_TRANSPARENT,I=-COLOUR_TRANSPARENT;l!==s&&(v=(m-c<<8)/(l-s)|0,S=(b-p<<8)/(l-s)|0,s<l?(w=c<<8,M=p<<8,C=s,I=l):(w=m<<8,M=b<<8,C=l,I=s),C<0&&(w-=v*C,M-=S*C,C=0),I>y&&(I=y));let T=0,A=0,k=0,B=0,x=COLOUR_TRANSPARENT,E=-COLOUR_TRANSPARENT;h!==s&&(A=(f-c<<8)/(h-s)|0,B=(_-p<<8)/(h-s)|0,s<h?(T=c<<8,k=p<<8,x=s,E=h):(T=f<<8,k=_<<8,x=h,E=s),x<0&&(T-=A*x,k-=B*x,x=0),E>y&&(E=y));let $=0,D=0,L=0,P=0,R=COLOUR_TRANSPARENT,O=-COLOUR_TRANSPARENT;u!==h&&(D=(d-f<<8)/(u-h)|0,P=(g-_<<8)/(u-h)|0,h<u?($=f<<8,L=_<<8,R=h,O=u):($=d<<8,L=g<<8,R=u,O=h),R<0&&($-=D*R,L-=P*R,R=0),O>y&&(O=y));let U=0,N=0,j=0,Y=0,X=COLOUR_TRANSPARENT,F=-COLOUR_TRANSPARENT;l!==u&&(N=(m-d<<8)/(l-u)|0,Y=(b-g<<8)/(l-u)|0,u<l?(U=d<<8,j=g<<8,X=u,F=l):(U=m<<8,j=b<<8,X=l,F=u),X<0&&(U-=N*X,j-=Y*X,X=0),F>y&&(F=y)),this.minY=C,x<this.minY&&(this.minY=x),R<this.minY&&(this.minY=R),X<this.minY&&(this.minY=X),this.maxY=I,E>this.maxY&&(this.maxY=E),O>this.maxY&&(this.maxY=O),F>this.maxY&&(this.maxY=F);let H=0;for(i=this.minY;i<this.maxY;i++){i>=C&&i<I?(t=e=w,r=H=M,w+=v,M+=S):(t=655360,e=-655360),i>=x&&i<E&&(T<t&&(t=T,r=k),T>e&&(e=T,H=k),T+=A,k+=B),i>=R&&i<O&&($<t&&(t=$,r=L),$>e&&(e=$,H=L),$+=D,L+=P),i>=X&&i<F&&(U<t&&(t=U,r=j),U>e&&(e=U,H=j),U+=N,j+=Y);let s=this.scanlines[i];s.startX=t,s.endX=e,s.startS=r,s.endS=H}this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY)}else{for(this.maxY=this.minY=o[0]+=this.baseY,i=1;i<s;i++){let t=0;(t=o[i]+=this.baseY)<this.minY?this.minY=t:t>this.maxY&&(this.maxY=t)}if(this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY),this.maxY>=this.baseY+this.clipY&&(this.maxY=this.baseY+this.clipY-1),this.minY>=this.maxY)return;for(i=this.minY;i<this.maxY;i++){let t=this.scanlines[i];t.startX=655360,t.endX=-655360}let t=s-1,e=o[0],r=o[t];if(e<r){let s=n[0]<<8,o=(n[t]-n[0]<<8)/(r-e)|0,h=a[0]<<8,u=(a[t]-a[0]<<8)/(r-e)|0;for(e<0&&(s-=o*e,h-=u*e,e=0),r>this.maxY&&(r=this.maxY),i=e;i<=r;i++){let t=this.scanlines[i];t.startX=t.endX=s,t.startS=t.endS=h,s+=o,h+=u}}else if(e>r){let s=n[t]<<8,o=(n[0]-n[t]<<8)/(e-r)|0,h=a[t]<<8,u=(a[0]-a[t]<<8)/(e-r)|0;for(r<0&&(s-=o*r,h-=u*r,r=0),e>this.maxY&&(e=this.maxY),i=r;i<=e;i++){let t=this.scanlines[i];t.startX=t.endX=s,t.startS=t.endS=h,s+=o,h+=u}}for(i=0;i<t;i++){let t=i+1,e=o[i],r=o[t];if(e<r){let s=n[i]<<8,o=(n[t]-n[i]<<8)/(r-e)|0,h=a[i]<<8,u=(a[t]-a[i]<<8)/(r-e)|0;e<0&&(s-=o*e,h-=u*e,e=0),r>this.maxY&&(r=this.maxY);for(let t=e;t<=r;t++){let e=this.scanlines[t];s<e.startX&&(e.startX=s,e.startS=h),s>e.endX&&(e.endX=s,e.endS=h),s+=o,h+=u}}else if(e>r){let s=n[t]<<8,o=(n[i]-n[t]<<8)/(e-r)|0,h=a[t]<<8,u=(a[i]-a[t]<<8)/(e-r)|0;r<0&&(s-=o*r,h-=u*r,r=0),e>this.maxY&&(e=this.maxY);for(let t=r;t<=e;t++){let e=this.scanlines[t];s<e.startX&&(e.startX=s,e.startS=h),s>e.endX&&(e.endX=s,e.endS=h),s+=o,h+=u}}}this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY)}if(this.mousePickingActive&&this.mousePickedCount<this.mousePickedMax&&this.mouseY>=this.minY&&this.mouseY<this.maxY){let t=this.scanlines[this.mouseY];this.mouseX>=t.startX>>8&&this.mouseX<=t.endX>>8&&t.startX<=t.endX&&!h.unpickable&&0===h.isLocalPlayer[u]&&(this.mousePickedModels[this.mousePickedCount]=h,this.mousePickedFaces[this.mousePickedCount]=u,this.mousePickedCount++)}}rasterize(t,e,i,r,s,n,o,a){if(-2===o)return;if(o>=0){o>=this.textureCount&&(o=0),this.prepareTexture(o);let h=r[0],u=s[0],l=n[0],c=h-r[1],f=u-s[1],d=l-n[1],m=r[--i]-h,p=s[i]-u,_=n[i]-l;if(1===this.textureDimension[o]){let i=m*u-p*h<<12,r=p*l-_*u<<5-this.viewDistance+7+4,s=_*h-m*l<<5-this.viewDistance+7,n=c*u-f*h<<12,g=f*l-d*u<<5-this.viewDistance+7+4,b=d*h-c*l<<5-this.viewDistance+7,y=f*m-c*p<<5,w=d*p-f*_<<5-this.viewDistance+4,v=c*_-d*m>>this.viewDistance-5,M=r>>4,S=g>>4,C=w>>4,I=this.minY-this.baseY,T=this.width,A=this.baseX+this.minY*T,k=1;if(i+=s*I,n+=b*I,y+=v*I,this.interlace&&(1==(1&this.minY)&&(this.minY++,i+=s,n+=b,y+=v,A+=T),s<<=1,b<<=1,v<<=1,T<<=1,k=2),a.textureTranslucent){for(t=this.minY;t<this.maxY;t+=k){let a=this.scanlines[t];e=a.startX>>8;let h=a.endX>>8,u=h-e;if(u<=0)i+=s,n+=b,y+=v,A+=T;else{let t=a.startS,l=(a.endS-t)/u|0;e<-this.clipX&&(t+=(-this.clipX-e)*l,u=h-(e=-this.clipX)),h>this.clipX&&(u=this.clipX-e),Scene.textureTranslucentScanline(this.raster,this.texturePixels[o],0,0,i+M*e,n+S*e,y+C*e,r,g,w,u,A+e,t,l<<2),i+=s,n+=b,y+=v,A+=T}}return}if(!this.textureBackTransparent[o]){for(t=this.minY;t<this.maxY;t+=k){let a=this.scanlines[t];e=a.startX>>8;let h=a.endX>>8,u=h-e;if(u<=0)i+=s,n+=b,y+=v,A+=T;else{let t=a.startS,l=(a.endS-t)/u|0;e<-this.clipX&&(t+=(-this.clipX-e)*l,u=h-(e=-this.clipX)),h>this.clipX&&(u=this.clipX-e),Scene.textureScanline(this.raster,this.texturePixels[o],0,0,i+M*e,n+S*e,y+C*e,r,g,w,u,A+e,t,l<<2),i+=s,n+=b,y+=v,A+=T}}return}for(t=this.minY;t<this.maxY;t+=k){let a=this.scanlines[t];e=a.startX>>8;let h=a.endX>>8,u=h-e;if(u<=0)i+=s,n+=b,y+=v,A+=T;else{let t=a.startS,l=(a.endS-t)/u|0;e<-this.clipX&&(t+=(-this.clipX-e)*l,u=h-(e=-this.clipX)),h>this.clipX&&(u=this.clipX-e),Scene.textureBackTranslucentScanline(this.raster,0,0,0,this.texturePixels[o],i+M*e,n+S*e,y+C*e,r,g,w,u,A+e,t,l),i+=s,n+=b,y+=v,A+=T}}return}let g=m*u-p*h<<11,b=p*l-_*u<<5-this.viewDistance+6+4,y=_*h-m*l<<5-this.viewDistance+6,w=c*u-f*h<<11,v=f*l-d*u<<5-this.viewDistance+6+4,M=d*h-c*l<<5-this.viewDistance+6,S=f*m-c*p<<5,C=d*p-f*_<<5-this.viewDistance+4,I=c*_-d*m>>this.viewDistance-5,T=b>>4,A=v>>4,k=C>>4,B=this.minY-this.baseY,x=this.width,E=this.baseX+this.minY*x,$=1;if(g+=y*B,w+=M*B,S+=I*B,this.interlace&&(1==(1&this.minY)&&(this.minY++,g+=y,w+=M,S+=I,E+=x),y<<=1,M<<=1,I<<=1,x<<=1,$=2),a.textureTranslucent){for(t=this.minY;t<this.maxY;t+=$){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,s=r-e;if(s<=0)g+=y,w+=M,S+=I,E+=x;else{let t=i.startS,n=(i.endS-t)/s|0;e<-this.clipX&&(t+=(-this.clipX-e)*n,s=r-(e=-this.clipX)),r>this.clipX&&(s=this.clipX-e),Scene.textureTranslucentScanline2(this.raster,this.texturePixels[o],0,0,g+T*e,w+A*e,S+k*e,b,v,C,s,E+e,t,n),g+=y,w+=M,S+=I,E+=x}}return}if(!this.textureBackTransparent[o]){for(t=this.minY;t<this.maxY;t+=$){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,s=r-e;if(s<=0)g+=y,w+=M,S+=I,E+=x;else{let t=i.startS,n=(i.endS-t)/s|0;e<-this.clipX&&(t+=(-this.clipX-e)*n,s=r-(e=-this.clipX)),r>this.clipX&&(s=this.clipX-e),Scene.textureScanline2(this.raster,this.texturePixels[o],0,0,g+T*e,w+A*e,S+k*e,b,v,C,s,E+e,t,n),g+=y,w+=M,S+=I,E+=x}}return}for(t=this.minY;t<this.maxY;t+=$){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,s=r-e;if(s<=0)g+=y,w+=M,S+=I,E+=x;else{let t=i.startS,n=(i.endS-t)/s|0;e<-this.clipX&&(t+=(-this.clipX-e)*n,s=r-(e=-this.clipX)),r>this.clipX&&(s=this.clipX-e),Scene.textureBackTranslucentScanline2(this.raster,0,0,0,this.texturePixels[o],g+T*e,w+A*e,S+k*e,b,v,C,s,E+e,t,n),g+=y,w+=M,S+=I,E+=x}}return}for(let c=0;c<this.rampCount;c++){if(this.gradientBase[c]===o){this.anIntArray377=this.gradientRamps[c];break}if(c===this.rampCount-1){let t=Math.random()*this.rampCount|0;this.gradientBase[t]=o;let e=8*((o=-1-o)>>10&31),i=8*(o>>5&31),r=8*(31&o);for(let s=0;s<256;s++){let n=s*s,o=e*n/65536|0,a=i*n/65536|0,h=r*n/65536|0;this.gradientRamps[t][255-s]=(o<<16)+(a<<8)+h}this.anIntArray377=this.gradientRamps[t]}}let h=this.width,u=this.baseX+this.minY*h,l=1;if(this.interlace&&(1==(1&this.minY)&&(this.minY++,u+=h),h<<=1,l=2),a.transparent)for(t=this.minY;t<this.maxY;t+=l){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,s=r-e;if(s<=0)u+=h;else{let t=i.startS,n=(i.endS-t)/s|0;e<-this.clipX&&(t+=(-this.clipX-e)*n,s=r-(e=-this.clipX)),r>this.clipX&&(s=this.clipX-e),Scene.textureGradientScanline(this.raster,-s,u+e,0,this.anIntArray377,t,n),u+=h}}else if(this.wideBand)for(t=this.minY;t<this.maxY;t+=l){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,s=r-e;if(s<=0)u+=h;else{let t=i.startS,n=(i.endS-t)/s|0;e<-this.clipX&&(t+=(-this.clipX-e)*n,s=r-(e=-this.clipX)),r>this.clipX&&(s=this.clipX-e),Scene.gradientScanline(this.raster,-s,u+e,0,this.anIntArray377,t,n),u+=h}}else for(t=this.minY;t<this.maxY;t+=l){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,s=r-e;if(s<=0)u+=h;else{let t=i.startS,n=(i.endS-t)/s|0;e<-this.clipX&&(t+=(-this.clipX-e)*n,s=r-(e=-this.clipX)),r>this.clipX&&(s=this.clipX-e),Scene.gradientScanline2(this.raster,-s,u+e,0,this.anIntArray377,t,n),u+=h}}}setCamera(t,e,i,r,s,n,o){r&=1023,s&=1023,n&=1023,this.cameraYaw=1024-r&1023,this.cameraPitch=1024-s&1023,this.cameraRoll=1024-n&1023;let a=0,h=0,u=o;if(0!==r){let t=Scene.sinCosCache[r],e=Scene.sinCosCache[r+1024],i=h*e-u*t>>15;u=h*t+u*e>>15,h=i}if(0!==s){let t=Scene.sinCosCache[s],e=Scene.sinCosCache[s+1024],i=u*t+a*e>>15;u=u*e-a*t>>15,a=i}if(0!==n){let t=Scene.sinCosCache[n],e=Scene.sinCosCache[n+1024],i=h*t+a*e>>15;h=h*e-a*t>>15,a=i}this.cameraX=t-a,this.cameraY=e-h,this.cameraZ=i-u}initialisePolygon3D(t){let e=this.visiblePolygons[t],i=e.model,r=e.face,s=i.faceVertices[r],n=i.faceNumVertices[r],o=i.normalScale[r],a=i.projectVertexX[s[0]],h=i.projectVertexY[s[0]],u=i.projectVertexZ[s[0]],l=i.projectVertexX[s[1]]-a,c=i.projectVertexY[s[1]]-h,f=i.projectVertexZ[s[1]]-u,d=i.projectVertexX[s[2]]-a,m=i.projectVertexY[s[2]]-h,p=i.projectVertexZ[s[2]]-u,_=c*p-m*f,g=f*d-p*l,b=l*m-d*c;if(-1===o){for(o=0;_>25e3||g>25e3||b>25e3||_<-25e3||g<-25e3||b<-25e3;b>>=1)o++,_>>=1,g>>=1;i.normalScale[r]=o,i.normalMagnitude[r]=this.normalMagnitude*Math.sqrt(_*_+g*g+b*b)|0}else _>>=o,g>>=o,b>>=o;e.visibility=a*_+h*g+u*b,e.normalX=_,e.normalY=g,e.normalZ=b;let y=i.projectVertexZ[s[0]],w=y,v=i.vertexViewX[s[0]],M=v,S=i.vertexViewY[s[0]],C=S;for(let I=1;I<n;I++){let t=i.projectVertexZ[s[I]];t>w?w=t:t<y&&(y=t),(t=i.vertexViewX[s[I]])>M?M=t:t<v&&(v=t),(t=i.vertexViewY[s[I]])>C?C=t:t<S&&(S=t)}e.minZ=y,e.maxZ=w,e.minPlaneX=v,e.maxPlaneX=M,e.minPlaneY=S,e.maxPlaneY=C}initialisePolygon2D(t){let e=this.visiblePolygons[t],i=e.model,r=e.face,s=i.faceVertices[r],n=i.projectVertexX[s[0]],o=i.projectVertexY[s[0]],a=i.projectVertexZ[s[0]];i.normalMagnitude[r]=1,i.normalScale[r]=0,e.visibility=0*n+0*o+1*a,e.normalX=0,e.normalY=0,e.normalZ=1;let h=i.projectVertexZ[s[0]],u=h,l=i.vertexViewX[s[0]],c=l;i.vertexViewX[s[1]]<l?l=i.vertexViewX[s[1]]:c=i.vertexViewX[s[1]];let f=i.vertexViewY[s[1]],d=i.vertexViewY[s[0]],m=i.projectVertexZ[s[1]];m>u?u=m:m<h&&(h=m),(m=i.vertexViewX[s[1]])>c?c=m:m<l&&(l=m),(m=i.vertexViewY[s[1]])>d?d=m:m<f&&(f=m),e.minZ=h,e.maxZ=u,e.minPlaneX=l-20,e.maxPlaneX=c+20,e.minPlaneY=f,e.maxPlaneY=d}separatePolygon(t,e){if(t.minPlaneX>=e.maxPlaneX)return!0;if(e.minPlaneX>=t.maxPlaneX)return!0;if(t.minPlaneY>=e.maxPlaneY)return!0;if(e.minPlaneY>=t.maxPlaneY)return!0;if(t.minZ>=e.maxZ)return!0;if(e.minZ>t.maxZ)return!1;let i=t.model,r=e.model,s=t.face,n=e.face,o=i.faceVertices[s],a=r.faceVertices[n],h=i.faceNumVertices[s],u=r.faceNumVertices[n],l=r.projectVertexX[a[0]],c=r.projectVertexY[a[0]],f=r.projectVertexZ[a[0]],d=e.normalX,m=e.normalY,p=e.normalZ,_=r.normalMagnitude[n],g=e.visibility,b=!1;for(let S=0;S<h;S++){let t=o[S],e=(l-i.projectVertexX[t])*d+(c-i.projectVertexY[t])*m+(f-i.projectVertexZ[t])*p;if(!(e>=-_||g>=0)||!(e<=_||g<=0)){b=!0;break}}if(!b)return!0;l=i.projectVertexX[o[0]],c=i.projectVertexY[o[0]],f=i.projectVertexZ[o[0]],d=t.normalX,m=t.normalY,p=t.normalZ,_=i.normalMagnitude[s],g=t.visibility,b=!1;for(let S=0;S<u;S++){let t=a[S],e=(l-r.projectVertexX[t])*d+(c-r.projectVertexY[t])*m+(f-r.projectVertexZ[t])*p;if(!(e>=-_||g<=0)||!(e<=_||g>=0)){b=!0;break}}if(!b)return!0;let y=null,w=null;if(2===h){y=new Int32Array(4),w=new Int32Array(4);let t=o[0],e=o[1];y[0]=i.vertexViewX[t]-20,y[1]=i.vertexViewX[e]-20,y[2]=i.vertexViewX[e]+20,y[3]=i.vertexViewX[t]+20,w[0]=w[3]=i.vertexViewY[t],w[1]=w[2]=i.vertexViewY[e]}else{y=new Int32Array(h),w=new Int32Array(h);for(let t=0;t<h;t++){let e=o[t];y[t]=i.vertexViewX[e],w[t]=i.vertexViewY[e]}}let v=null,M=null;if(2===u){v=new Int32Array(4),M=new Int32Array(4);let t=a[0],e=a[1];v[0]=r.vertexViewX[t]-20,v[1]=r.vertexViewX[e]-20,v[2]=r.vertexViewX[e]+20,v[3]=r.vertexViewX[t]+20,M[0]=M[3]=r.vertexViewY[t],M[1]=M[2]=r.vertexViewY[e]}else{v=new Int32Array(u),M=new Int32Array(u);for(let t=0;t<u;t++){let e=a[t];v[t]=r.vertexViewX[e],M[t]=r.vertexViewY[e]}}return!this.intersect(y,w,v,M)}heuristicPolygon(t,e){let i=t.model,r=e.model,s=t.face,n=e.face,o=i.faceVertices[s],a=r.faceVertices[n],h=i.faceNumVertices[s],u=r.faceNumVertices[n],l=r.projectVertexX[a[0]],c=r.projectVertexY[a[0]],f=r.projectVertexZ[a[0]],d=e.normalX,m=e.normalY,p=e.normalZ,_=r.normalMagnitude[n],g=e.visibility,b=!1;for(let y=0;y<h;y++){let t=o[y],e=(l-i.projectVertexX[t])*d+(c-i.projectVertexY[t])*m+(f-i.projectVertexZ[t])*p;if(!(e>=-_||g>=0)||!(e<=_||g<=0)){b=!0;break}}if(!b)return!0;l=i.projectVertexX[o[0]],c=i.projectVertexY[o[0]],f=i.projectVertexZ[o[0]],d=t.normalX,m=t.normalY,p=t.normalZ,_=i.normalMagnitude[s],g=t.visibility,b=!1;for(let y=0;y<u;y++){let t=a[y],e=(l-r.projectVertexX[t])*d+(c-r.projectVertexY[t])*m+(f-r.projectVertexZ[t])*p;if(!(e>=-_||g<=0)||!(e<=_||g>=0)){b=!0;break}}return!b}allocateTextures(t,e,i){this.textureCount=t,this.textureColoursUsed=[],this.textureColoursUsed.length=t,this.textureColoursUsed.fill(null),this.textureColourList=[],this.textureColourList.length=t,this.textureColourList.fill(null),this.textureDimension=new Int32Array(t),this.textureLoadedNumber=[],this.textureLoadedNumber.length=t,this.textureLoadedNumber.fill(null),this.textureBackTransparent=new Int8Array(t),this.texturePixels=[],this.texturePixels.length=t,this.texturePixels.fill(null),Scene.textureCountLoaded=new _$Long_134(0);for(let r=0;r<t;r+=1)this.textureLoadedNumber.push(new _$Long_134(0));this.textureColours64=[],this.textureColours64.length=e,this.textureColours64.fill(null),this.textureColours128=[],this.textureColours128.length=i,this.textureColours128.fill(null)}defineTexture(t,e,i,r){this.textureColoursUsed[t]=e,this.textureColourList[t]=i,this.textureDimension[t]=r,this.textureLoadedNumber[t]=new _$Long_134(0),this.textureBackTransparent[t]=!1,this.texturePixels[t]=null,this.prepareTexture(t)}prepareTexture(t){if(t<0)return;if(Scene.textureCountLoaded=Scene.textureCountLoaded.add(1),this.textureLoadedNumber[t]=new _$Long_134(Scene.textureCountLoaded),null!==this.texturePixels[t])return;if(0===this.textureDimension[t]){for(let r=0;r<this.textureColours64.length;r++)if(null===this.textureColours64[r])return this.textureColours64[r]=new Int32Array(16384),this.texturePixels[t]=this.textureColours64[r],void this.setTexturePixels(t);let e=new _$Long_134(1).shiftLeft(30),i=0;for(let r=0;r<this.textureCount;r++)r!==t&&0===this.textureDimension[r]&&null!==this.texturePixels[r]&&this.textureLoadedNumber[r].lessThan(e)&&(e=this.textureLoadedNumber[r],i=r);return this.texturePixels[t]=this.texturePixels[i],this.texturePixels[i]=null,void this.setTexturePixels(t)}for(let r=0;r<this.textureColours128.length;r++)if(null===this.textureColours128[r])return this.textureColours128[r]=new Int32Array(65536),this.texturePixels[t]=this.textureColours128[r],void this.setTexturePixels(t);let e=new _$Long_134(1).shiftLeft(30),i=0;for(let r=0;r<this.textureCount;r++)r!==t&&1===this.textureDimension[r]&&null!==this.texturePixels[r]&&this.textureLoadedNumber[r].lessThan(e)&&(e=this.textureLoadedNumber[r],i=r);this.texturePixels[t]=this.texturePixels[i],this.texturePixels[i]=null,this.setTexturePixels(t)}setTexturePixels(t){let e=0;e=0===this.textureDimension[t]?64:128;let i=this.texturePixels[t],r=0;for(let s=0;s<e;s++)for(let n=0;n<e;n++){let o=this.textureColourList[t][255&this.textureColoursUsed[t][n+s*e]];0==(o&=16316671)?o=1:16253183===o&&(o=0,this.textureBackTransparent[t]=!0),i[r++]=o}for(let s=0;s<r;s++){let t=i[s];i[r+s]=t-(t>>>3)&16316671,i[2*r+s]=t-(t>>>2)&16316671,i[3*r+s]=t-(t>>>2)-(t>>>3)&16316671}}doSOemthingWithTheFuckinFountainFuck(t){if(null===this.texturePixels[t])return;let e=this.texturePixels[t];for(let r=0;r<64;r++){let i=r+4032,s=e[i];for(let t=0;t<63;t++)e[i]=e[i-64],i-=64;this.texturePixels[t][i]=s}let i=4096;for(let r=0;r<i;r++){let t=e[r];e[i+r]=t-(t>>>3)&16316671,e[8192+r]=t-(t>>>2)&16316671,e[3*i+r]=t-(t>>>2)-(t>>>3)&16316671}}method302(t){return t===COLOUR_TRANSPARENT?0:(this.prepareTexture(t),t>=0?this.texturePixels[t][0]:t<0?(((t=-(t+1))>>10&31)<<19)+((t>>5&31)<<11)+((31&t)<<3):0)}_setLight_from3(t,e,i){0===t&&0===e&&0===i&&(t=32);for(let r=0;r<this.modelCount;r++)this.models[r]._setLight_from3(t,e,i)}_setLight_from5(t,e,i,r,s){0===i&&0===r&&0===s&&(i=32);for(let n=0;n<this.modelCount;n++)this.models[n]._setLight_from5(t,e,i,r,s)}method306(t,e,i,r,s){return r===e?t:t+((i-t)*(s-e)/(r-e)|0)}method307(t,e,i,r,s){return s&&t<=i||t<i?t>r||e>i||e>r||!s:t<r||e<i||e<r||s}method308(t,e,i,r){return r&&t<=i||t<i?e>i||!r:e<i||r}intersect(t,e,i,r){let s,n,o=t.length,a=i.length,h=0,u=s=e[0],l=0,c=n=r[0],f=0;for(let y=1;y<o;y++)e[y]<s?(s=e[y],l=y):e[y]>u&&(u=e[y]);for(let y=1;y<a;y++)r[y]<n?(n=r[y],f=y):r[y]>c&&(c=r[y]);if(n>=u)return!1;if(s>=c)return!1;let d=0,m=0,p=!1;if(e[l]<r[f]){for(d=l;e[d]<r[f];d=(d+1)%o);for(;e[l]<r[f];l=(l-1+o)%o);let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f];if(p=s<u|n<u,this.method308(s,n,u,p))return!0;m=(f+1)%a,f=(f-1+a)%a,l===d&&(h=1)}else{for(m=f;r[m]<e[l];m=(m+1)%a);for(;r[f]<e[l];f=(f-1+a)%a);let s=t[l],n=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[l]),u=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[l]);if(p=s<n|s<u,this.method308(n,u,s,!p))return!0;d=(l+1)%o,l=(l-1+o)%o,f===m&&(h=2)}for(;0===h;)if(e[l]<e[d])if(e[l]<r[f])if(e[l]<r[m]){let s=t[l],n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],e[l]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[l]),c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[l]);if(this.method307(s,n,u,c,p))return!0;(l=(l-1+o)%o)===d&&(h=1)}else{let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[m]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[m]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],r[m]),c=i[m];if(this.method307(s,n,u,c,p))return!0;f===(m=(m+1)%a)&&(h=2)}else if(r[f]<r[m]){let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f],c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],r[f]);if(this.method307(s,n,u,c,p))return!0;(f=(f-1+a)%a)===m&&(h=2)}else{let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[m]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[m]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],r[m]),c=i[m];if(this.method307(s,n,u,c,p))return!0;f===(m=(m+1)%a)&&(h=2)}else if(e[d]<r[f])if(e[d]<r[m]){let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],e[d]),n=t[d],u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[d]),c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[d]);if(this.method307(s,n,u,c,p))return!0;l===(d=(d+1)%o)&&(h=1)}else{let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[m]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[m]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],r[m]),c=i[m];if(this.method307(s,n,u,c,p))return!0;f===(m=(m+1)%a)&&(h=2)}else if(r[f]<r[m]){let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f],c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],r[f]);if(this.method307(s,n,u,c,p))return!0;(f=(f-1+a)%a)===m&&(h=2)}else{let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[m]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[m]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],r[m]),c=i[m];if(this.method307(s,n,u,c,p))return!0;f===(m=(m+1)%a)&&(h=2)}for(;1===h;)if(e[l]<r[f]){if(e[l]<r[m]){let s=t[l],n=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[l]),o=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[l]);return this.method308(n,o,s,!p)}let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[m]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[m]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],r[m]),c=i[m];if(this.method307(s,n,u,c,p))return!0;f===(m=(m+1)%a)&&(h=0)}else if(r[f]<r[m]){let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f],c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],r[f]);if(this.method307(s,n,u,c,p))return!0;(f=(f-1+a)%a)===m&&(h=0)}else{let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[m]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[m]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],r[m]),c=i[m];if(this.method307(s,n,u,c,p))return!0;f===(m=(m+1)%a)&&(h=0)}for(;2===h;)if(r[f]<e[l]){if(r[f]<e[d]){let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),a=i[f];return this.method308(s,n,a,p)}let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],e[d]),n=t[d],u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[d]),c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[d]);if(this.method307(s,n,u,c,p))return!0;l===(d=(d+1)%o)&&(h=0)}else if(e[l]<e[d]){let s=t[l],n=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],e[l]),u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[l]),c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[l]);if(this.method307(s,n,u,c,p))return!0;(l=(l-1+o)%o)===d&&(h=0)}else{let s=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],e[d]),n=t[d],u=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[d]),c=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[d]);if(this.method307(s,n,u,c,p))return!0;l===(d=(d+1)%o)&&(h=0)}if(e[l]<r[f]){let s=t[l],n=this.method306(i[(f+1)%a],r[(f+1)%a],i[f],r[f],e[l]),o=this.method306(i[(m-1+a)%a],r[(m-1+a)%a],i[m],r[m],e[l]);return this.method308(n,o,s,!p)}let _=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),g=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),b=i[f];return this.method308(_,g,b,p)}}Scene.frustumFarZ=0,Scene.frustumMaxX=0,Scene.frustumMaxY=0,Scene.frustumMinX=0,Scene.frustumMinY=0,Scene.frustumNearZ=0,Scene.sin512Cache=new Int32Array(512),Scene.sinCosCache=new Int32Array(2048),Scene.textureCountLoaded=new _$Long_134(0),_$scene_257=Scene;var _$gameModel_213={};const __COLOUR_TRANSPARENT_213=12345678;class GameModel{constructor(){this.numVertices=0,this.numFaces=0,this.transformState=0,this.visible=!1,this.textureTranslucent=!1,this.transparent=!1,this.isolated=!1,this.unlit=!1,this.unpickable=!1,this.projected=!1,this.autocommit=!1,this.depth=0,this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.z1=0,this.z2=0,this.key=-1,this.maxVerts=0,this.lightDiffuse=512,this.lightAmbience=32,this.magic=0,this.maxFaces=0,this.baseX=0,this.baseY=0,this.baseZ=0,this.scaleFx=0,this.scaleFy=0,this.scaleFz=0,this.shearXy=0,this.shearXz=0,this.shearYx=0,this.shearYz=0,this.shearZx=0,this.shearZy=0,this.transformKind=0,this.diameter=0,this.lightDirectionX=180,this.lightDirectionY=155,this.lightDirectionZ=95,this.lightDirectionMagnitude=0,this.dataPtr=0,this.orientationYaw=0,this.orientationPitch=0,this.orientationRoll=0,this.projectVertexX=null,this.projectVertexY=null,this.projectVertexZ=null,this.vertexViewX=null,this.vertexViewY=null,this.vertexIntensity=null,this.vertexAmbience=null,this.faceNumVertices=null,this.faceVertices=null,this.faceFillFront=null,this.faceFillBack=null,this.normalMagnitude=null,this.normalScale=null,this.faceIntensity=null,this.faceNormalX=null,this.faceNormalY=null,this.faceNormalZ=null,this.faceTag=null,this.isLocalPlayer=null,this.vertexX=null,this.vertexY=null,this.vertexZ=null,this.vertexTransformedX=null,this.vertexTransformedY=null,this.vertexTransformedZ=null,this.faceTransStateThing=null,this.faceBoundLeft=null,this.faceBoundRight=null,this.faceBoundBottom=null,this.faceBoundTop=null,this.faceBoundNear=null,this.faceBoundFar=null}static _from2(t,e){let i=new GameModel;i.transformState=1,i.visible=!0,i.textureTranslucent=!1,i.transparent=!1,i.autocommit=!1,i.isolated=!1,i.unlit=!1,i.unpickable=!1,i.projected=!1,i.magic=__COLOUR_TRANSPARENT_213,i.diameter=__COLOUR_TRANSPARENT_213,i.lightDirectionMagnitude=256,i.allocate(t,e),i.faceTransStateThing=[];for(let r=0;r<i.numFaces;r++)i.faceTransStateThing.push(new Int32Array([0]));return i}static _from2A(t,e){let i=new GameModel;return i.transformState=1,i.visible=!0,i.textureTranslucent=!1,i.transparent=!1,i.autocommit=!1,i.isolated=!1,i.unlit=!1,i.unpickable=!1,i.projected=!1,i.magic=__COLOUR_TRANSPARENT_213,i.diameter=__COLOUR_TRANSPARENT_213,i.lightDirectionMagnitude=256,i.merge(t,e,!0),i}static fromBytes(t,e){let i=new GameModel;i.transformState=1,i.visible=!0,i.textureTranslucent=!1,i.transparent=!1,i.autocommit=!1,i.isolated=!1,i.unlit=!1,i.unpickable=!1,i.projected=!1,i.magic=__COLOUR_TRANSPARENT_213,i.diameter=__COLOUR_TRANSPARENT_213,i.lightDirectionMagnitude=256;const r=_$utility_288.getUnsignedShort(t,e);e+=2;const s=_$utility_288.getUnsignedShort(t,e);e+=2,i.allocate(r,s),i.faceTransStateThing=[],i.faceTransStateThing.length=s;for(let n=0;n<s;n+=1)i.faceTransStateThing[n]=[0];for(let n=0;n<r;n++)i.vertexX[n]=_$utility_288.getSignedShort(t,e),e+=2;for(let n=0;n<r;n++)i.vertexY[n]=_$utility_288.getSignedShort(t,e),e+=2;for(let n=0;n<r;n++)i.vertexZ[n]=_$utility_288.getSignedShort(t,e),e+=2;i.numVertices=r;for(let n=0;n<s;n++)i.faceNumVertices[n]=255&t[e++];for(let n=0;n<s;n++)i.faceFillFront[n]=_$utility_288.getSignedShort(t,e),e+=2,32767===i.faceFillFront[n]&&(i.faceFillFront[n]=i.magic);for(let n=0;n<s;n++)i.faceFillBack[n]=_$utility_288.getSignedShort(t,e),e+=2,32767===i.faceFillBack[n]&&(i.faceFillBack[n]=i.magic);for(let n=0;n<s;n++){const r=255&t[e++];i.faceIntensity[n]=0===r?0:i.magic}for(let n=0;n<s;n++){i.faceVertices[n]=new Int32Array(i.faceNumVertices[n]);for(let s=0;s<i.faceNumVertices[n];s++)r<256?i.faceVertices[n][s]=255&t[e++]:(i.faceVertices[n][s]=_$utility_288.getUnsignedShort(t,e),e+=2)}return i.numFaces=s,i.transformState=1,i}static _from6(t,e,i,r,s,n){let o=new GameModel;return o.transformState=1,o.visible=!0,o.textureTranslucent=!1,o.transparent=!1,o.projected=!1,o.magic=__COLOUR_TRANSPARENT_213,o.diameter=__COLOUR_TRANSPARENT_213,o.lightDirectionMagnitude=256,o.autocommit=i,o.isolated=r,o.unlit=s,o.unpickable=n,o.merge(t,e,!1),o}static _from7(t,e,i,r,s,n,o){let a=new GameModel;return a.transformState=1,a.visible=!0,a.textureTranslucent=!1,a.transparent=!1,a.magic=__COLOUR_TRANSPARENT_213,a.diameter=__COLOUR_TRANSPARENT_213,a.lightDirectionMagnitude=256,a.autocommit=i,a.isolated=r,a.unlit=s,a.unpickable=n,a.projected=o,a.allocate(t,e),a}allocate(t,e){this.vertexX=new Int32Array(t),this.vertexY=new Int32Array(t),this.vertexZ=new Int32Array(t),this.vertexIntensity=new Int32Array(t),this.vertexAmbience=new Int8Array(t),this.faceNumVertices=new Int32Array(e),this.faceVertices=[],this.faceVertices.length=e,this.faceVertices.fill(null),this.faceFillFront=new Int32Array(e),this.faceFillBack=new Int32Array(e),this.faceIntensity=new Int32Array(e),this.normalScale=new Int32Array(e),this.normalMagnitude=new Int32Array(e),this.projected||(this.projectVertexX=new Int32Array(t),this.projectVertexY=new Int32Array(t),this.projectVertexZ=new Int32Array(t),this.vertexViewX=new Int32Array(t),this.vertexViewY=new Int32Array(t)),this.unpickable||(this.isLocalPlayer=new Int8Array(e),this.faceTag=new Int32Array(e)),this.autocommit?(this.vertexTransformedX=this.vertexX,this.vertexTransformedY=this.vertexY,this.vertexTransformedZ=this.vertexZ):(this.vertexTransformedX=new Int32Array(t),this.vertexTransformedY=new Int32Array(t),this.vertexTransformedZ=new Int32Array(t)),this.unlit&&this.isolated||(this.faceNormalX=new Int32Array(e),this.faceNormalY=new Int32Array(e),this.faceNormalZ=new Int32Array(e)),this.isolated||(this.faceBoundLeft=new Int32Array(e),this.faceBoundRight=new Int32Array(e),this.faceBoundBottom=new Int32Array(e),this.faceBoundTop=new Int32Array(e),this.faceBoundNear=new Int32Array(e),this.faceBoundFar=new Int32Array(e)),this.numFaces=0,this.numVertices=0,this.maxVerts=t,this.maxFaces=e,this.baseX=this.baseY=this.baseZ=0,this.orientationYaw=this.orientationPitch=this.orientationRoll=0,this.scaleFx=this.scaleFy=this.scaleFz=256,this.shearXy=this.shearXz=this.shearYx=this.shearYz=this.shearZx=this.shearZy=256,this.transformKind=0}projectionPrepare(){this.projectVertexX=new Int32Array(this.numVertices),this.projectVertexY=new Int32Array(this.numVertices),this.projectVertexZ=new Int32Array(this.numVertices),this.vertexViewX=new Int32Array(this.numVertices),this.vertexViewY=new Int32Array(this.numVertices)}clear(){this.numFaces=0,this.numVertices=0}reduce(t,e){this.numFaces-=t,this.numFaces<0&&(this.numFaces=0),this.numVertices-=e,this.numVertices<0&&(this.numVertices=0)}merge(t,e,i){let r=0,s=0;for(let n=0;n<e;n++)r+=t[n].numFaces,s+=t[n].numVertices;this.allocate(s,r),i&&(this.faceTransStateThing=[],this.faceTransStateThing.length=r);for(let n=0;n<e;n++){let r=t[n];r.commit(),this.lightAmbience=r.lightAmbience,this.lightDiffuse=r.lightDiffuse,this.lightDirectionX=r.lightDirectionX,this.lightDirectionY=r.lightDirectionY,this.lightDirectionZ=r.lightDirectionZ,this.lightDirectionMagnitude=r.lightDirectionMagnitude;for(let t=0;t<r.numFaces;t++){let s=new Int32Array(r.faceNumVertices[t]),o=r.faceVertices[t];for(let e=0;e<r.faceNumVertices[t];e++)s[e]=this.vertexAt(r.vertexX[o[e]],r.vertexY[o[e]],r.vertexZ[o[e]]);let a=this.createFace(r.faceNumVertices[t],s,r.faceFillFront[t],r.faceFillBack[t]);if(this.faceIntensity[a]=r.faceIntensity[t],this.normalScale[a]=r.normalScale[t],this.normalMagnitude[a]=r.normalMagnitude[t],i)if(e>1){this.faceTransStateThing[a]=new Int32Array(r.faceTransStateThing[t].length+1),this.faceTransStateThing[a][0]=n;for(let e=0;e<r.faceTransStateThing[t].length;e++)this.faceTransStateThing[a][e+1]=r.faceTransStateThing[t][e]}else{this.faceTransStateThing[a]=new Int32Array(r.faceTransStateThing[t].length);for(let e=0;e<r.faceTransStateThing[t].length;e++)this.faceTransStateThing[a][e]=r.faceTransStateThing[t][e]}}}this.transformState=1}vertexAt(t,e,i){for(let r=0;r<this.numVertices;r++)if(this.vertexX[r]===t&&this.vertexY[r]===e&&this.vertexZ[r]===i)return r;return this.numVertices>=this.maxVerts?-1:(this.vertexX[this.numVertices]=t,this.vertexY[this.numVertices]=e,this.vertexZ[this.numVertices]=i,this.numVertices++)}createVertex(t,e,i){return this.numVertices>=this.maxVerts?-1:(this.vertexX[this.numVertices]=t,this.vertexY[this.numVertices]=e,this.vertexZ[this.numVertices]=i,this.numVertices++)}createFace(t,e,i,r){return this.numFaces>=this.maxFaces?-1:(this.faceNumVertices[this.numFaces]=t,this.faceVertices[this.numFaces]=e,this.faceFillFront[this.numFaces]=i,this.faceFillBack[this.numFaces]=r,this.transformState=1,this.numFaces++)}split(t,e,i,r,s,n,o,a){this.commit();let h=new Int32Array(n),u=new Int32Array(n);for(let c=0;c<n;c++)h[c]=0,u[c]=0;for(let c=0;c<this.numFaces;c++){let t=0,e=0,n=this.faceNumVertices[c],o=this.faceVertices[c];for(let i=0;i<n;i++)t+=this.vertexX[o[i]],e+=this.vertexZ[o[i]];let a=(t/(n*i)|0)+(e/(n*r)|0)*s;h[a]+=n,u[a]++}let l=[];for(let c=0;c<n;c++)h[c]>o&&(h[c]=o),l.push(GameModel._from7(h[c],u[c],!0,!0,!0,a,!0)),l[c].lightDiffuse=this.lightDiffuse,l[c].lightAmbience=this.lightAmbience;for(let c=0;c<this.numFaces;c++){let t=0,e=0,n=this.faceNumVertices[c],o=this.faceVertices[c];for(let i=0;i<n;i++)t+=this.vertexX[o[i]],e+=this.vertexZ[o[i]];let a=(t/(n*i)|0)+(e/(n*r)|0)*s;this.copyLighting(l[a],o,n,c)}for(let c=0;c<n;c++)l[c].projectionPrepare();return l}copyLighting(t,e,i,r){let s=new Int32Array(i);for(let o=0;o<i;o++){let i=s[o]=t.vertexAt(this.vertexX[e[o]],this.vertexY[e[o]],this.vertexZ[e[o]]);t.vertexIntensity[i]=this.vertexIntensity[e[o]],t.vertexAmbience[i]=this.vertexAmbience[e[o]]}let n=t.createFace(i,s,this.faceFillFront[r],this.faceFillBack[r]);t.unpickable||this.unpickable||(t.faceTag[n]=this.faceTag[r]),t.faceIntensity[n]=this.faceIntensity[r],t.normalScale[n]=this.normalScale[r],t.normalMagnitude[n]=this.normalMagnitude[r]}_setLight_from5(t,e,i,r,s){this.lightAmbience=256-4*t,this.lightDiffuse=16*(64-e)+128,this.unlit||(this.lightDirectionX=i,this.lightDirectionY=r,this.lightDirectionZ=s,this.lightDirectionMagnitude=0|Math.sqrt(i*i+r*r+s*s),this.light())}_setLight_from6(t,e,i,r,s,n){if(this.lightAmbience=256-4*e,this.lightDiffuse=16*(64-i)+128,!this.unlit){for(let e=0;e<this.numFaces;e++)this.faceIntensity[e]=t?this.magic:0;this.lightDirectionX=r,this.lightDirectionY=s,this.lightDirectionZ=n,this.lightDirectionMagnitude=0|Math.sqrt(r*r+s*s+n*n),this.light()}}_setLight_from3(t,e,i){this.unlit||(this.lightDirectionX=t,this.lightDirectionY=e,this.lightDirectionZ=i,this.lightDirectionMagnitude=0|Math.sqrt(t*t+e*e+i*i),this.light())}setVertexAmbience(t,e){this.vertexAmbience[t]=255&e}rotate(t,e,i){this.orientationYaw=this.orientationYaw+t&255,this.orientationPitch=this.orientationPitch+e&255,this.orientationRoll=this.orientationRoll+i&255,this.determineTransformKind(),this.transformState=1}orient(t,e,i){this.orientationYaw=255&t,this.orientationPitch=255&e,this.orientationRoll=255&i,this.determineTransformKind(),this.transformState=1}translate(t,e,i){this.baseX+=t,this.baseY+=e,this.baseZ+=i,this.determineTransformKind(),this.transformState=1}place(t,e,i){this.baseX=t,this.baseY=e,this.baseZ=i,this.determineTransformKind(),this.transformState=1}determineTransformKind(){256!==this.shearXy||256!==this.shearXz||256!==this.shearYx||256!==this.shearYz||256!==this.shearZx||256!==this.shearZy?this.transformKind=4:256!==this.scaleFx||256!==this.scaleFy||256!==this.scaleFz?this.transformKind=3:0!==this.orientationYaw||0!==this.orientationPitch||0!==this.orientationRoll?this.transformKind=2:0!==this.baseX||0!==this.baseY||0!==this.baseZ?this.transformKind=1:this.transformKind=0}applyTranslate(t,e,i){for(let r=0;r<this.numVertices;r++)this.vertexTransformedX[r]+=t,this.vertexTransformedY[r]+=e,this.vertexTransformedZ[r]+=i}applyRotation(t,e,i){for(let r=0;r<this.numVertices;r++){if(0!==i){let t=GameModel.sine9[i],e=GameModel.sine9[i+256],s=this.vertexTransformedY[r]*t+this.vertexTransformedX[r]*e>>15;this.vertexTransformedY[r]=this.vertexTransformedY[r]*e-this.vertexTransformedX[r]*t>>15,this.vertexTransformedX[r]=s}if(0!==t){let e=GameModel.sine9[t],i=GameModel.sine9[t+256],s=this.vertexTransformedY[r]*i-this.vertexTransformedZ[r]*e>>15;this.vertexTransformedZ[r]=this.vertexTransformedY[r]*e+this.vertexTransformedZ[r]*i>>15,this.vertexTransformedY[r]=s}if(0!==e){let t=GameModel.sine9[e],i=GameModel.sine9[e+256],s=this.vertexTransformedZ[r]*t+this.vertexTransformedX[r]*i>>15;this.vertexTransformedZ[r]=this.vertexTransformedZ[r]*i-this.vertexTransformedX[r]*t>>15,this.vertexTransformedX[r]=s}}}applyShear(t,e,i,r,s,n){for(let o=0;o<this.numVertices;o++)0!==t&&(this.vertexTransformedX[o]+=this.vertexTransformedY[o]*t>>8),0!==e&&(this.vertexTransformedZ[o]+=this.vertexTransformedY[o]*e>>8),0!==i&&(this.vertexTransformedX[o]+=this.vertexTransformedZ[o]*i>>8),0!==r&&(this.vertexTransformedY[o]+=this.vertexTransformedZ[o]*r>>8),0!==s&&(this.vertexTransformedZ[o]+=this.vertexTransformedX[o]*s>>8),0!==n&&(this.vertexTransformedY[o]+=this.vertexTransformedX[o]*n>>8)}applyScale(t,e,i){for(let r=0;r<this.numVertices;r++)this.vertexTransformedX[r]=this.vertexTransformedX[r]*t>>8,this.vertexTransformedY[r]=this.vertexTransformedY[r]*e>>8,this.vertexTransformedZ[r]=this.vertexTransformedZ[r]*i>>8}computeBounds(){this.x1=this.y1=this.z1=999999,this.diameter=this.x2=this.y2=this.z2=-999999;for(let t=0;t<this.numFaces;t++){let e=this.faceVertices[t],i=e[0],r=this.faceNumVertices[t],s=0,n=s=this.vertexTransformedX[i],o=0,a=o=this.vertexTransformedY[i],h=0,u=h=this.vertexTransformedZ[i];for(let t=0;t<r;t++)i=e[t],this.vertexTransformedX[i]<s?s=this.vertexTransformedX[i]:this.vertexTransformedX[i]>n&&(n=this.vertexTransformedX[i]),this.vertexTransformedY[i]<o?o=this.vertexTransformedY[i]:this.vertexTransformedY[i]>a&&(a=this.vertexTransformedY[i]),this.vertexTransformedZ[i]<h?h=this.vertexTransformedZ[i]:this.vertexTransformedZ[i]>u&&(u=this.vertexTransformedZ[i]);this.isolated||(this.faceBoundLeft[t]=s,this.faceBoundRight[t]=n,this.faceBoundBottom[t]=o,this.faceBoundTop[t]=a,this.faceBoundNear[t]=h,this.faceBoundFar[t]=u),n-s>this.diameter&&(this.diameter=n-s),a-o>this.diameter&&(this.diameter=a-o),u-h>this.diameter&&(this.diameter=u-h),s<this.x1&&(this.x1=s),n>this.x2&&(this.x2=n),o<this.y1&&(this.y1=o),a>this.y2&&(this.y2=a),h<this.z1&&(this.z1=h),u>this.z2&&(this.z2=u)}}light(){if(this.unlit)return;let t=this.lightDiffuse*this.lightDirectionMagnitude>>8;for(let n=0;n<this.numFaces;n++)this.faceIntensity[n]!==this.magic&&(this.faceIntensity[n]=(this.faceNormalX[n]*this.lightDirectionX+this.faceNormalY[n]*this.lightDirectionY+this.faceNormalZ[n]*this.lightDirectionZ)/t|0);let e=new Int32Array(this.numVertices),i=new Int32Array(this.numVertices),r=new Int32Array(this.numVertices),s=new Int32Array(this.numVertices);for(let n=0;n<this.numVertices;n++)e[n]=0,i[n]=0,r[n]=0,s[n]=0;for(let n=0;n<this.numFaces;n++)if(this.faceIntensity[n]===this.magic)for(let t=0;t<this.faceNumVertices[n];t++){let o=this.faceVertices[n][t];e[o]+=this.faceNormalX[n],i[o]+=this.faceNormalY[n],r[o]+=this.faceNormalZ[n],s[o]++}for(let n=0;n<this.numVertices;n++)s[n]>0&&(this.vertexIntensity[n]=(e[n]*this.lightDirectionX+i[n]*this.lightDirectionY+r[n]*this.lightDirectionZ)/(t*s[n])|0)}relight(){if(!this.unlit||!this.isolated){for(let t=0;t<this.numFaces;t++){let e,i=this.faceVertices[t],r=this.vertexTransformedX[i[0]],s=this.vertexTransformedY[i[0]],n=this.vertexTransformedZ[i[0]],o=this.vertexTransformedX[i[1]]-r,a=this.vertexTransformedY[i[1]]-s,h=this.vertexTransformedZ[i[1]]-n,u=this.vertexTransformedX[i[2]]-r,l=this.vertexTransformedY[i[2]]-s,c=this.vertexTransformedZ[i[2]]-n,f=a*c-l*h,d=h*u-c*o;for(e=o*l-u*a;f>8192||d>8192||e>8192||f<-8192||d<-8192||e<-8192;e>>=1)f>>=1,d>>=1;let m=256*Math.sqrt(f*f+d*d+e*e)|0;m<=0&&(m=1),this.faceNormalX[t]=65536*f/m|0,this.faceNormalY[t]=65536*d/m|0,this.faceNormalZ[t]=65535*e/m|0,this.normalScale[t]=-1}this.light()}}apply(){if(2===this.transformState){this.transformState=0;for(let t=0;t<this.numVertices;t++)this.vertexTransformedX[t]=this.vertexX[t],this.vertexTransformedY[t]=this.vertexY[t],this.vertexTransformedZ[t]=this.vertexZ[t];return this.x1=this.y1=this.z1=-9999999,void(this.diameter=this.x2=this.y2=this.z2=9999999)}if(1===this.transformState){this.transformState=0;for(let t=0;t<this.numVertices;t++)this.vertexTransformedX[t]=this.vertexX[t],this.vertexTransformedY[t]=this.vertexY[t],this.vertexTransformedZ[t]=this.vertexZ[t];this.transformKind>=2&&this.applyRotation(this.orientationYaw,this.orientationPitch,this.orientationRoll),this.transformKind>=3&&this.applyScale(this.scaleFx,this.scaleFy,this.scaleFz),this.transformKind>=4&&this.applyShear(this.shearXy,this.shearXz,this.shearYx,this.shearYz,this.shearZx,this.shearZy),this.transformKind>=1&&this.applyTranslate(this.baseX,this.baseY,this.baseZ),this.computeBounds(),this.relight()}}project(t,e,i,r,s,n,o,a){if(this.apply(),this.z1>_$scene_257.frustumNearZ||this.z2<_$scene_257.frustumFarZ||this.x1>_$scene_257.frustumMinX||this.x2<_$scene_257.frustumMaxX||this.y1>_$scene_257.frustumMinY||this.y2<_$scene_257.frustumMaxY)return void(this.visible=!1);this.visible=!0;let h=0,u=0,l=0,c=0,f=0,d=0;0!==n&&(h=GameModel.sine11[n],u=GameModel.sine11[n+1024]),0!==s&&(f=GameModel.sine11[s],d=GameModel.sine11[s+1024]),0!==r&&(l=GameModel.sine11[r],c=GameModel.sine11[r+1024]);for(let m=0;m<this.numVertices;m++){let p=this.vertexTransformedX[m]-t,_=this.vertexTransformedY[m]-e,g=this.vertexTransformedZ[m]-i;if(0!==n){let t=_*h+p*u>>15;_=_*u-p*h>>15,p=t}if(0!==s){let t=g*f+p*d>>15;g=g*d-p*f>>15,p=t}if(0!==r){let t=_*c-g*l>>15;g=_*l+g*c>>15,_=t}this.vertexViewX[m]=g>=a?(p<<o)/g|0:p<<o,this.vertexViewY[m]=g>=a?(_<<o)/g|0:_<<o,this.projectVertexX[m]=p,this.projectVertexY[m]=_,this.projectVertexZ[m]=g}}commit(){this.apply();for(let t=0;t<this.numVertices;t++)this.vertexX[t]=this.vertexTransformedX[t],this.vertexY[t]=this.vertexTransformedY[t],this.vertexZ[t]=this.vertexTransformedZ[t];this.baseX=this.baseY=this.baseZ=0,this.orientationYaw=this.orientationPitch=this.orientationRoll=0,this.scaleFx=this.scaleFy=this.scaleFz=256,this.shearXy=this.shearXz=this.shearYx=this.shearYz=this.shearZx=this.shearZy=256,this.transformKind=0}copy(...t){if(!t||!t.length){let t=GameModel._from2A([this],1);return t.depth=this.depth,t.transparent=this.transparent,t}const[e,i,r,s]=t;let n=GameModel._from6([this],1,e,i,r,s);return n.depth=this.depth,n}copyPosition(t){this.orientationYaw=t.orientationYaw,this.orientationPitch=t.orientationPitch,this.orientationRoll=t.orientationRoll,this.baseX=t.baseX,this.baseY=t.baseY,this.baseZ=t.baseZ,this.determineTransformKind(),this.transformState=1}readBase64(t){for(;10===t[this.dataPtr]||13===t[this.dataPtr];this.dataPtr++);let e=4096*GameModel.base64Alphabet[255&t[this.dataPtr++]]+64*GameModel.base64Alphabet[255&t[this.dataPtr++]]+GameModel.base64Alphabet[255&t[this.dataPtr++]]-131072|0;return 123456===e&&(e=this.magic),e}}GameModel.sine9=new Int32Array(512),GameModel.sine11=new Int32Array(2048),GameModel.base64Alphabet=new Int32Array(256);for(let n=0;n<256;n++)GameModel.sine9[n]=32768*Math.sin(.02454369*n)|0,GameModel.sine9[n+256]=32768*Math.cos(.02454369*n)|0;for(let n=0;n<1024;n++)GameModel.sine11[n]=32768*Math.sin(.00613592315*n)|0,GameModel.sine11[n+1024]=32768*Math.cos(.00613592315*n)|0;for(let n=0;n<10;n++)GameModel.base64Alphabet[48+n]=n;for(let n=0;n<26;n++)GameModel.base64Alphabet[65+n]=n+10;for(let n=0;n<26;n++)GameModel.base64Alphabet[97+n]=n+36;GameModel.base64Alphabet[163]=62,GameModel.base64Alphabet[36]=63,_$gameModel_213=GameModel;var _$panel_254={};const controlTypes={TEXT:0,CENTRE_TEXT:1,GRADIENT_BG:2,HORIZ_LINE:3,TEXT_LIST:4,LIST_INPUT:5,TEXT_INPUT:6,HORIZ_OPTION:7,VERT_OPTION:8,I_TEXT_LIST:9,BUTTON:10,ROUND_BOX:11,IMAGE:12,CHECKBOX:14},__CHAR_SET_254="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"\xa3$%^&*()-_=+[{]};:'@#~,<.>/?\\| ";class Panel{constructor(t,e){this.controlCount=0,this.mouseX=0,this.mouseY=0,this.mouseLastButtonDown=0,this.mouseButtonDown=0,this.mouseMetaButtonHeld=0,this.mouseScrollDelta=0,this.focusControlIndex=-1,this.aBoolean219=!0,this.surface=t,this.maxControls=e,this.controlShown=new Int8Array(e),this.controlListScrollbarHandleDragged=new Int8Array(e),this.controlMaskText=new Int8Array(e),this.controlClicked=new Int8Array(e),this.controlUseAlternativeColour=new Int8Array(e),this.controlFlashText=new Int32Array(e),this.controlListEntryCount=new Int32Array(e),this.controlListEntryMouseButtonDown=new Int32Array(e),this.controlListEntryMouseOver=new Int32Array(e),this.controlX=new Int32Array(e),this.controlY=new Int32Array(e),this.controlType=new Int32Array(e),this.controlWidth=new Int32Array(e),this.controlHeight=new Int32Array(e),this.controlInputMaxLen=new Int32Array(e),this.controlTextSize=new Int32Array(e),this.controlText=[],this.controlText.length=e,this.controlListEntries=[];for(let i=0;i<e;i+=1)this.controlListEntries.push([]);this.colourScrollbarTop=this.rgbToIntMod(114,114,176),this.colourScrollbarBottom=this.rgbToIntMod(14,14,62),this.colourScrollbarHandleLeft=this.rgbToIntMod(200,208,232),this.colourScrollbarHandleMid=this.rgbToIntMod(96,129,184),this.colourScrollbarHandleRight=this.rgbToIntMod(53,95,115),this.colourRoundedBoxOut=this.rgbToIntMod(117,142,171),this.colourRoundedBoxMid=this.rgbToIntMod(98,122,158),this.colourRoundedBoxIn=this.rgbToIntMod(86,100,136),this.colourBoxTopNBottom=this.rgbToIntMod(135,146,179),this.colourBoxTopNBottom2=this.rgbToIntMod(97,112,151),this.colourBoxLeftNRight2=this.rgbToIntMod(88,102,136),this.colourBoxLeftNRight=this.rgbToIntMod(84,93,120)}rgbToIntMod(t,e,i){return _$Surface_259.rgbToInt(Panel.redMod*t/114|0,Panel.greenMod*e/114|0,Panel.blueMod*i/176|0)}handleMouse(t,e,i,r,s=0){if(this.mouseX=t,this.mouseY=e,this.mouseButtonDown=r,this.mouseScrollDelta=s,0!==i&&(this.mouseLastButtonDown=i),1===i)for(let n=0;n<this.controlCount;n++)this.controlShown[n]&&this.controlType[n]===controlTypes.BUTTON&&this.mouseX>=this.controlX[n]&&this.mouseY>=this.controlY[n]&&this.mouseX<=this.controlX[n]+this.controlWidth[n]&&this.mouseY<=this.controlY[n]+this.controlHeight[n]&&(this.controlClicked[n]=!0),this.controlShown[n]&&this.controlType[n]===controlTypes.CHECKBOX&&this.mouseX>=this.controlX[n]&&this.mouseY>=this.controlY[n]&&this.mouseX<=this.controlX[n]+this.controlWidth[n]&&this.mouseY<=this.controlY[n]+this.controlHeight[n]&&(this.controlListEntryMouseButtonDown[n]=1-this.controlListEntryMouseButtonDown[n]);1===r?this.mouseMetaButtonHeld++:this.mouseMetaButtonHeld=0}isClicked(t){return!(!this.controlShown[t]||!this.controlClicked[t]||(this.controlClicked[t]=!1,0))}keyPress(t){if(0!==t&&-1!==this.focusControlIndex&&null!==this.controlText[this.focusControlIndex]&&this.controlShown[this.focusControlIndex]){const e=this.controlText[this.focusControlIndex].length;if(8===t&&e>0&&(this.controlText[this.focusControlIndex]=this.controlText[this.focusControlIndex].slice(0,e-1)),(10===t||13===t)&&e>0&&(this.controlClicked[this.focusControlIndex]=!0),e<this.controlInputMaxLen[this.focusControlIndex])for(let i=0;i<__CHAR_SET_254.length;i++)t===__CHAR_SET_254.charCodeAt(i)&&(this.controlText[this.focusControlIndex]+=String.fromCharCode(t));if(9===t)do{this.focusControlIndex=(this.focusControlIndex+1)%this.controlCount}while(5!==this.controlType[this.focusControlIndex]&&6!==this.controlType[this.focusControlIndex])}}drawPanel(){for(let t=0;t<this.controlCount;t++)this.controlShown[t]&&(this.controlType[t]===controlTypes.TEXT?this.drawText(t,this.controlX[t],this.controlY[t],this.controlText[t],this.controlTextSize[t]):this.controlType[t]===controlTypes.CENTRE_TEXT?this.drawText(t,this.controlX[t]-(this.surface.textWidth(this.controlText[t],this.controlTextSize[t])/2|0),this.controlY[t],this.controlText[t],this.controlTextSize[t]):this.controlType[t]===controlTypes.GRADIENT_BG?this.drawBox(this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t]):this.controlType[t]===controlTypes.HORIZ_LINE?this.drawLineHoriz(this.controlX[t],this.controlY[t],this.controlWidth[t]):this.controlType[t]===controlTypes.TEXT_LIST?this.drawTextList(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t],this.controlTextSize[t],this.controlListEntries[t],this.controlListEntryCount[t],this.controlFlashText[t]):this.controlType[t]===controlTypes.LIST_INPUT||this.controlType[t]===controlTypes.TEXT_INPUT?this.drawTextInput(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t],this.controlText[t],this.controlTextSize[t]):this.controlType[t]===controlTypes.HORIZ_OPTION?this.drawOptionListHoriz(t,this.controlX[t],this.controlY[t],this.controlTextSize[t],this.controlListEntries[t]):this.controlType[t]===controlTypes.VERT_OPTION?this.drawOptionListVert(t,this.controlX[t],this.controlY[t],this.controlTextSize[t],this.controlListEntries[t]):this.controlType[t]===controlTypes.I_TEXT_LIST?this.drawTextListInteractive(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t],this.controlTextSize[t],this.controlListEntries[t],this.controlListEntryCount[t],this.controlFlashText[t]):this.controlType[t]===controlTypes.ROUND_BOX?this.drawRoundedBox(this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t]):this.controlType[t]===controlTypes.IMAGE?this.drawPicture(this.controlX[t],this.controlY[t],this.controlTextSize[t]):this.controlType[t]===controlTypes.CHECKBOX&&this.drawCheckbox(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t]));this.mouseLastButtonDown=0}drawCheckbox(t,e,i,r,s){if(this.surface.drawBox(e,i,r,s,16777215),this.surface.drawLineHoriz(e,i,r,this.colourBoxTopNBottom),this.surface.drawLineVert(e,i,s,this.colourBoxTopNBottom),this.surface.drawLineHoriz(e,i+s-1,r,this.colourBoxLeftNRight),this.surface.drawLineVert(e+r-1,i,s,this.colourBoxLeftNRight),1===this.controlListEntryMouseButtonDown[t])for(let n=0;n<s;n++)this.surface.drawLineHoriz(e+n,i+n,1,0),this.surface.drawLineHoriz(e+r-1-n,i+n,1,0)}drawText(t,e,i,r,s){const n=i+(this.surface.textHeight(s)/3|0);this.drawString(t,e,n,r,s)}drawString(t,e,i,r,s){let n;n=this.controlUseAlternativeColour[t]?16777215:0,this.surface.drawString(r,e,i,s,n)}drawTextInput(t,e,i,r,s,n,o){let a=n;if(this.controlMaskText[t]){const t=a.length;a="";for(let e=0;e<t;e++)a+="X"}if(this.controlType[t]===controlTypes.LIST_INPUT?1===this.mouseLastButtonDown&&this.mouseX>=e&&this.mouseY>=i-(s/2|0)&&this.mouseX<=e+r&&this.mouseY<=i+(s/2|0)&&(this.focusControlIndex=t,this.setMobileFocus(t,n)):this.controlType[t]===controlTypes.TEXT_INPUT&&(1===this.mouseLastButtonDown&&this.mouseX>=e-(r/2|0)&&this.mouseY>=i-(s/2|0)&&this.mouseX<=e+r/2&&this.mouseY<=i+(s/2|0)&&(this.focusControlIndex=t,this.setMobileFocus(t,n)),e-=this.surface.textWidth(a,o)/2|0),this.focusControlIndex===t){const{mudclient:t}=this.surface,e=t.mobileInputCaret;t.options.mobile&&-1!==e?a=a.slice(0,e)+"*"+a.slice(e):a+="*"}const h=i+(this.surface.textHeight(o)/3|0);this.drawString(t,e,h,a,o)}drawBox(t,e,i,r){if(this.surface.setBounds(t,e,t+i,e+r),this.surface.drawGradient(t,e,i,r,this.colourBoxLeftNRight,this.colourBoxTopNBottom),Panel.drawBackgroundArrow)for(let s=t-(63&e);s<t+i;s+=128)for(let t=e-(31&e);t<e+r;t+=128)this.surface.drawSpriteAlpha(s,t,6+Panel.baseSpriteStart,128);this.surface.drawLineHoriz(t,e,i,this.colourBoxTopNBottom),this.surface.drawLineHoriz(t+1,e+1,i-2,this.colourBoxTopNBottom),this.surface.drawLineHoriz(t+2,e+2,i-4,this.colourBoxTopNBottom2),this.surface.drawLineVert(t,e,r,this.colourBoxTopNBottom),this.surface.drawLineVert(t+1,e+1,r-2,this.colourBoxTopNBottom),this.surface.drawLineVert(t+2,e+2,r-4,this.colourBoxTopNBottom2),this.surface.drawLineHoriz(t,e+r-1,i,this.colourBoxLeftNRight),this.surface.drawLineHoriz(t+1,e+r-2,i-2,this.colourBoxLeftNRight),this.surface.drawLineHoriz(t+2,e+r-3,i-4,this.colourBoxLeftNRight2),this.surface.drawLineVert(t+i-1,e,r,this.colourBoxLeftNRight),this.surface.drawLineVert(t+i-2,e+1,r-2,this.colourBoxLeftNRight),this.surface.drawLineVert(t+i-3,e+2,r-4,this.colourBoxLeftNRight2),this.surface.resetBounds()}drawRoundedBox(t,e,i,r){this.surface.drawBox(t,e,i,r,0),this.surface.drawBoxEdge(t,e,i,r,this.colourRoundedBoxOut),this.surface.drawBoxEdge(t+1,e+1,i-2,r-2,this.colourRoundedBoxMid),this.surface.drawBoxEdge(t+2,e+2,i-4,r-4,this.colourRoundedBoxIn),this.surface._drawSprite_from3(t,e,2+Panel.baseSpriteStart),this.surface._drawSprite_from3(t+i-7,e,3+Panel.baseSpriteStart),this.surface._drawSprite_from3(t,e+r-7,4+Panel.baseSpriteStart),this.surface._drawSprite_from3(t+i-7,e+r-7,5+Panel.baseSpriteStart)}drawPicture(t,e,i){this.surface._drawSprite_from3(t,e,i)}drawLineHoriz(t,e,i){this.surface.drawLineHoriz(t,e,i,16777215)}drawTextList(t,e,i,r,s,n,o,a,h){const u=s/this.surface.textHeight(n)|0,l=a-u;if(h>l&&(h=l),h<0&&(h=0),this.controlFlashText[t]=h,u<a){const n=e+r-12;let o=(s-27)*u/a|0;o<6&&(o=6);let c=(s-27-o)*h/l|0;0!==this.mouseScrollDelta&&this.mouseX>e&&this.mouseX<e+r&&this.mouseY>i&&this.mouseY<i+s&&((h+=this.mouseScrollDelta)<0?h=0:h>l&&(h=l),this.controlFlashText[t]=h),1===this.mouseButtonDown&&this.mouseX>=n&&this.mouseX<=n+12&&(this.mouseY>i&&this.mouseY<i+12&&h>0&&h--,this.mouseY>i+s-12&&this.mouseY<i+s&&h<a-u&&h++,this.controlFlashText[t]=h),1===this.mouseButtonDown&&(this.mouseX>=n&&this.mouseX<=n+12||this.mouseX>=n-12&&this.mouseX<=n+24&&this.controlListScrollbarHandleDragged[t])?this.mouseY>i+12&&this.mouseY<i+s-12&&(this.controlListScrollbarHandleDragged[t]=!0,(h=(this.mouseY-i-12-(o/2|0))*a/(s-24)|0)>l&&(h=l),h<0&&(h=0),this.controlFlashText[t]=h):this.controlListScrollbarHandleDragged[t]=!1,c=(s-27-o)*h/(a-u)|0,this.drawListContainer(e,i,r,s,c,o)}const c=s-u*this.surface.textHeight(n);let f=i+(5*this.surface.textHeight(n)/6+c/2)|0;for(let d=h;d<a;d++)if(this.drawString(t,e+2,f,o[d],n),(f+=this.surface.textHeight(n)-Panel.textListEntryHeightMod)>=i+s)return}drawListContainer(t,e,i,r,s,n){const o=t+i-12;this.surface.drawBoxEdge(o,e,12,r,0),this.surface._drawSprite_from3(o+1,e+1,Panel.baseSpriteStart),this.surface._drawSprite_from3(o+1,e+r-12,Panel.baseSpriteStart+1),this.surface.drawLineHoriz(o,e+13,12,0),this.surface.drawLineHoriz(o,e+r-13,12,0),this.surface.drawGradient(o+1,e+14,11,r-27,this.colourScrollbarTop,this.colourScrollbarBottom),this.surface.drawBox(o+3,s+e+14,7,n,this.colourScrollbarHandleMid),this.surface.drawLineVert(o+2,s+e+14,n,this.colourScrollbarHandleLeft),this.surface.drawLineVert(o+2+8,s+e+14,n,this.colourScrollbarHandleRight)}drawOptionListHoriz(t,e,i,r,s){let n=0;const o=s.length;for(let u=0;u<o;u++)n+=this.surface.textWidth(s[u],r),u<o-1&&(n+=this.surface.textWidth("  ",r));let a=e-(n/2|0);const h=i+(this.surface.textHeight(r)/3|0);for(let u=0;u<o;u++){let e;e=this.controlUseAlternativeColour[t]?16777215:0,this.mouseX>=a&&this.mouseX<=a+this.surface.textWidth(s[u],r)&&this.mouseY<=h&&this.mouseY>h-this.surface.textHeight(r)&&(e=this.controlUseAlternativeColour[t]?8421504:16777215,1===this.mouseLastButtonDown&&(this.controlListEntryMouseButtonDown[t]=u,this.controlClicked[t]=!0)),this.controlListEntryMouseButtonDown[t]===u&&(e=this.controlUseAlternativeColour[t]?16711680:12582912),this.surface.drawString(s[u],a,h,r,e),a+=this.surface.textWidth(s[u]+"  ",r)}}drawOptionListVert(t,e,i,r,s){const n=s.length;let o=i-(this.surface.textHeight(r)*(n-1)/2|0);for(let a=0;a<n;a++){let i;i=this.controlUseAlternativeColour[t]?16777215:0;const n=this.surface.textWidth(s[a],r);this.mouseX>=e-(n/2|0)&&this.mouseX<=e+(n/2|0)&&this.mouseY-2<=o&&this.mouseY-2>o-this.surface.textHeight(r)&&(i=this.controlUseAlternativeColour[t]?8421504:16777215,1===this.mouseLastButtonDown&&(this.controlListEntryMouseButtonDown[t]=a,this.controlClicked[t]=!0)),this.controlListEntryMouseButtonDown[t]===a&&(i=this.controlUseAlternativeColour[t]?16711680:12582912),this.surface.drawString(s[a],e-(n/2|0),o,r,i),o+=this.surface.textHeight(r)}}drawTextListInteractive(t,e,i,r,s,n,o,a,h){const u=s/this.surface.textHeight(n)|0,l=a-u;if(u<a){const n=e+r-12;let o=(s-27)*u/a|0;o<6&&(o=6);let c=(s-27-o)*h/l|0;0!==this.mouseScrollDelta&&this.mouseX>e&&this.mouseX<e+r&&this.mouseY>i&&this.mouseY<i+s&&((h+=this.mouseScrollDelta)<0?h=0:h>l&&(h=l),this.controlFlashText[t]=h),1===this.mouseButtonDown&&this.mouseX>=n&&this.mouseX<=n+12&&(this.mouseY>i&&this.mouseY<i+12&&h>0&&h--,this.mouseY>i+s-12&&this.mouseY<i+s&&h<l&&h++,this.controlFlashText[t]=h),1===this.mouseButtonDown&&(this.mouseX>=n&&this.mouseX<=n+12||this.mouseX>=n-12&&this.mouseX<=n+24&&this.controlListScrollbarHandleDragged[t])?this.mouseY>i+12&&this.mouseY<i+s-12&&(this.controlListScrollbarHandleDragged[t]=!0,(h=(this.mouseY-i-12-(o/2|0))*a/(s-24)|0)<0&&(h=0),h>l&&(h=l),this.controlFlashText[t]=h):this.controlListScrollbarHandleDragged[t]=!1,c=(s-27-o)*h/l|0,this.drawListContainer(e,i,r,s,c,o)}else h=0,this.controlFlashText[t]=0;this.controlListEntryMouseOver[t]=-1;const c=s-u*this.surface.textHeight(n);let f=i+((5*this.surface.textHeight(n)/6|0)+c/2|0);for(let d=h;d<a;d++){let a;if(a=this.controlUseAlternativeColour[t]?16777215:0,this.mouseX>=e+2&&this.mouseX<=e+r-12&&this.mouseY-2<=f&&this.mouseY-2>f-this.surface.textHeight(n)&&(a=this.controlUseAlternativeColour[t]?8421504:16777215,this.controlListEntryMouseOver[t]=d,1===this.mouseLastButtonDown&&(this.controlListEntryMouseButtonDown[t]=d,this.controlClicked[t]=!0)),this.controlListEntryMouseButtonDown[t]===d&&this.aBoolean219&&(a=16711680),this.surface.drawString(o[d],e+2,f,n,a),(f+=this.surface.textHeight(n))>=i+s)return}}addText(t,e,i,r,s){return this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=r,this.controlUseAlternativeColour[this.controlCount]=s,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlText[this.controlCount]=i,this.controlCount++}addTextCentre(t,e,i,r,s){return this.controlType[this.controlCount]=controlTypes.CENTRE_TEXT,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=r,this.controlUseAlternativeColour[this.controlCount]=s,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlText[this.controlCount]=i,this.controlCount++}addButtonBackground(t,e,i,r){return this.controlType[this.controlCount]=controlTypes.GRADIENT_BG,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(i/2|0),this.controlY[this.controlCount]=e-(r/2|0),this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlCount++}addBoxRounded(t,e,i,r){return this.controlType[this.controlCount]=controlTypes.ROUND_BOX,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(i/2|0),this.controlY[this.controlCount]=e-(r/2|0),this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlCount++}addSprite(t,e,i){const r=this.surface.spriteWidth[i],s=this.surface.spriteHeight[i];return this.controlType[this.controlCount]=controlTypes.IMAGE,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(r/2|0),this.controlY[this.controlCount]=e-(s/2|0),this.controlWidth[this.controlCount]=r,this.controlHeight[this.controlCount]=s,this.controlTextSize[this.controlCount]=i,this.controlCount++}addTextList(t,e,i,r,s,n,o){return this.controlType[this.controlCount]=controlTypes.TEXT_LIST,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlUseAlternativeColour[this.controlCount]=o,this.controlTextSize[this.controlCount]=s,this.controlInputMaxLen[this.controlCount]=n,this.controlListEntryCount[this.controlCount]=0,this.controlFlashText[this.controlCount]=0,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=n,this.controlListEntries[this.controlCount].fill(null),this.controlCount++}addTextListInput(t,e,i,r,s,n,o,a){return this.controlType[this.controlCount]=controlTypes.LIST_INPUT,this.controlShown[this.controlCount]=!0,this.controlMaskText[this.controlCount]=o,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=s,this.controlUseAlternativeColour[this.controlCount]=a,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlInputMaxLen[this.controlCount]=n,this.controlText[this.controlCount]="",this.controlCount++}addTextInput(t,e,i,r,s,n,o,a){return this.controlType[this.controlCount]=controlTypes.TEXT_INPUT,this.controlShown[this.controlCount]=!0,this.controlMaskText[this.controlCount]=o,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=s,this.controlUseAlternativeColour[this.controlCount]=a,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlInputMaxLen[this.controlCount]=n,this.controlText[this.controlCount]="",this.controlCount++}addTextListInteractive(t,e,i,r,s,n,o){return this.controlType[this.controlCount]=controlTypes.I_TEXT_LIST,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=s,this.controlUseAlternativeColour[this.controlCount]=o,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlInputMaxLen[this.controlCount]=n,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=n,this.controlListEntries[this.controlCount].fill(null),this.controlListEntryCount[this.controlCount]=0,this.controlFlashText[this.controlCount]=0,this.controlListEntryMouseButtonDown[this.controlCount]=-1,this.controlListEntryMouseOver[this.controlCount]=-1,this.controlCount++}addButton(t,e,i,r){return this.controlType[this.controlCount]=controlTypes.BUTTON,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(i/2|0),this.controlY[this.controlCount]=e-(r/2|0),this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlCount++}addLineHoriz(t,e,i){return this.controlType[this.controlCount]=controlTypes.HORIZ_LINE,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlCount++}addOptionListHoriz(t,e,i,r,s){return this.controlType[this.controlCount]=controlTypes.HORIZ_OPTION,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlTextSize[this.controlCount]=i,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=r,this.controlListEntries[this.controlCount].fill(null),this.controlListEntryCount[this.controlCount]=0,this.controlUseAlternativeColour[this.controlCount]=s,this.controlClicked[this.controlCount]=!1,this.controlCount++}addOptionListVert(t,e,i,r,s){return this.controlType[this.controlCount]=controlTypes.VERT_OPTION,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlTextSize[this.controlCount]=i,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=r,this.controlListEntries[this.controlCount].fill(null),this.controlListEntryCount[this.controlCount]=0,this.controlUseAlternativeColour[this.controlCount]=s,this.controlClicked[this.controlCount]=!1,this.controlCount++}addCheckbox(t,e,i,r){return this.controlType[this.controlCount]=controlTypes.CHECKBOX,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlListEntryMouseButtonDown[this.controlCount]=0,this.controlCount++}toggleCheckbox(t,e){this.controlListEntryMouseButtonDown[t]=+e}isActivated(t){return 0!==this.controlListEntryMouseButtonDown[t]}clearList(t){this.controlListEntryCount[t]=0}resetListProps(t){this.controlFlashText[t]=0,this.controlListEntryMouseOver[t]=-1}addListEntry(t,e,i){this.controlListEntries[t][e]=i,e+1>this.controlListEntryCount[t]&&(this.controlListEntryCount[t]=e+1)}removeListEntry(t,e,i){let r=this.controlListEntryCount[t]++;if(r>=this.controlInputMaxLen[t]){r--,this.controlListEntryCount[t]--;for(let e=0;e<r;e++)this.controlListEntries[t][e]=this.controlListEntries[t][e+1]}this.controlListEntries[t][r]=e,i&&(this.controlFlashText[t]=999999)}updateText(t,e){this.controlText[t]=e}getText(t){return null===this.controlText[t]?"null":this.controlText[t]}show(t){this.controlShown[t]=!0}hide(t){this.controlShown[t]=!1}setFocus(t){this.focusControlIndex=t,this.setMobileFocus(t,this.controlText[t])}getListEntryIndex(t){return this.controlListEntryMouseOver[t]}setMobileFocus(t,e){const{mudclient:i}=this.surface;if(!i.options.mobile)return;const r=this.controlMaskText[t],s=this.controlType[t]===controlTypes.LIST_INPUT,n=this.controlWidth[t],o=this.controlHeight[t],a=s?this.controlX[t]:this.controlX[t]-Math.floor(n/2);i.openKeyboard(r?"password":"text",e,this.controlInputMaxLen[t],{width:n+"px",height:o+"px",top:this.controlY[t]-Math.floor(o/2)+"px",left:a+"px",fontSize:s?"12px":"14px",textAlign:s?"left":"center"})}}Panel.baseSpriteStart=0,Panel.drawBackgroundArrow=!0,Panel.redMod=114,Panel.greenMod=114,Panel.blueMod=176,Panel.textListEntryHeightMod=0,_$panel_254=Panel;var _$dist_152={exports:{}},__global_152,factory;__global_152=this,factory=function(){"use strict";class t{constructor(t){this.init(t)}init(t){this.option=Object.assign({},{inputCodec:"Int16",channels:1,sampleRate:8e3,flushTime:1e3},t),this.samples=new Float32Array,this.interval=setInterval(this.flush.bind(this),this.option.flushTime),this.convertValue=this.getConvertValue(),this.typedArray=this.getTypedArray(),this.initAudioContext()}getConvertValue(){const t={Int8:128,Int16:32768,Int32:2147483648,Float32:1};if(!t[this.option.inputCodec])throw new Error("wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32");return t[this.option.inputCodec]}getTypedArray(){const t={Int8:Int8Array,Int16:Int16Array,Int32:Int32Array,Float32:Float32Array};if(!t[this.option.inputCodec])throw new Error("wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32");return t[this.option.inputCodec]}initAudioContext(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=10,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime}static isTypedArray(t){return t.byteLength&&t.buffer&&t.buffer.constructor==ArrayBuffer||t.constructor==ArrayBuffer}isSupported(e){if(!t.isTypedArray(e))throw new Error("\u8bf7\u4f20\u5165ArrayBuffer\u6216\u8005\u4efb\u610fTypedArray");return!0}feed(t){this.isSupported(t),t=this.getFormatedValue(t);const e=new Float32Array(this.samples.length+t.length);e.set(this.samples,0),e.set(t,this.samples.length),this.samples=e}getFormatedValue(t){t=t.constructor==ArrayBuffer?new this.typedArray(t):new this.typedArray(t.buffer);let e=new Float32Array(t.length);for(let i=0;i<t.length;i++)e[i]=t[i]/this.convertValue;return e}volume(t){this.gainNode.gain.value=t}destroy(){this.interval&&clearInterval(this.interval),this.samples=null,this.audioCtx.close(),this.audioCtx=null}flush(){if(!this.samples.length)return;var t=this.audioCtx.createBufferSource();const e=this.samples.length/this.option.channels,i=this.audioCtx.createBuffer(this.option.channels,e,this.option.sampleRate);for(let r=0;r<this.option.channels;r++){const t=i.getChannelData(r);let s=r,n=50;for(let i=0;i<e;i++)t[i]=this.samples[s],i<50&&(t[i]=t[i]*i/50),i>=e-51&&(t[i]=t[i]*n--/50),s+=this.option.channels}this.startTime<this.audioCtx.currentTime&&(this.startTime=this.audioCtx.currentTime),console.log("start vs current "+this.startTime+" vs "+this.audioCtx.currentTime+" duration: "+i.duration),t.buffer=i,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=i.duration,this.samples=new Float32Array}async pause(){await this.audioCtx.suspend()}async continue(){await this.audioCtx.resume()}}return t},"object"==typeof _$dist_152.exports?_$dist_152.exports=factory():"function"==typeof define&&define.amd?define(factory):(__global_152=__global_152||self).PCMPlayer=factory(),_$dist_152=_$dist_152.exports;var _$alawmulaw_26={exports:{}},d,__e_26;d=this,__e_26=function(t){function e(t){var e=~(t=-32768==t?-32767:t)>>8&128;if(e||(t*=-1),32635<t&&(t=32635),256<=t){var i=n[t>>8&127];t=i<<4|t>>i+3&15}else t>>=4;return t^e^85}function i(t){var e=0;128&(t^=85)&&(t&=-129,e=-1);var i=4+((240&t)>>4);return t=4!=i?1<<i|(15&t)<<i-4|1<<i-5:t<<1|1,-8*(0===e?t:-t)}function r(t){var e=t>>8&128;0!=e&&(t=-t),32635<(t+=132)&&(t=32635);var i=a[t>>7&255];return~(e|i<<4|t>>i+3&15)}function s(t){var e=(t=~t)>>4&7;return e=h[e]+((15&t)<<e+3),0!=(128&t)&&(e=-e),e}var n=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],o=Object.freeze({__proto__:null,encodeSample:e,decodeSample:i,encode:function(t){for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=e(t[r]);return i},decode:function(t){for(var e=new Int16Array(t.length),r=0;r<t.length;r++)e[r]=i(t[r]);return e}}),a=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],h=[0,132,396,924,1980,4092,8316,16764],u=Object.freeze({__proto__:null,encodeSample:r,decodeSample:s,encode:function(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=r(t[i]);return e},decode:function(t){for(var e=new Int16Array(t.length),i=0;i<t.length;i++)e[i]=s(t[i]);return e}});t.alaw=o,t.mulaw=u,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof _$alawmulaw_26.exports?__e_26(_$alawmulaw_26.exports):"function"==typeof define&&define.amd?define(["exports"],__e_26):__e_26((d=d||self).alawmulaw={}),_$alawmulaw_26=_$alawmulaw_26.exports;const{mulaw:mulaw}=_$alawmulaw_26;var _$streamAudioPlayer_258=class{constructor(){this.player=new _$dist_152({encoding:"16bitInt",channels:1,sampleRate:8e3})}stopPlayer(){this.player.destroy()}writeStream(t,e,i){const r=mulaw.decode(new Uint8Array(t.slice(e,e+i)));this.player.feed(r)}},_$wordFilter_290={};const __C_0_290="0".charCodeAt(0),__C_9_290="9".charCodeAt(0),__C_A_290="a".charCodeAt(0),C_ASTERISK="*".charCodeAt(0),C_BACKSLASH="\\".charCodeAt(0),__C_BIG_A_290="A".charCodeAt(0),__C_BIG_Z_290="Z".charCodeAt(0),C_COMMA=",".charCodeAt(0),C_DOT=".".charCodeAt(0),C_J="j".charCodeAt(0),C_Q="q".charCodeAt(0),C_SINGLE_QUOTE="'".charCodeAt(0),C_SLASH="/".charCodeAt(0),C_SPACE=" ".charCodeAt(0),C_V="v".charCodeAt(0),C_X="x".charCodeAt(0),__C_Z_290="z".charCodeAt(0);function toCharArray(t){const e=new Uint16Array(t.length);for(let i=0;i<t.length;i+=1)e[i]=t.charCodeAt(i);return e}function fromCharArray(t){return Array.from(t).map(t=>String.fromCharCode(t)).join("")}class WordFilter{static loadFilters(t,e,i,r){WordFilter.loadBad(e),WordFilter.loadHost(i),WordFilter.loadFragments(t),WordFilter.loadTLD(r)}static loadTLD(t){const e=t.getUnsignedInt();WordFilter.tldList=[],WordFilter.tldType=new Int32Array(e);for(let i=0;i<e;i++){WordFilter.tldType[i]=t.getUnsignedByte();const e=new Uint16Array(t.getUnsignedByte());for(let i=0;i<e.length;i++)e[i]=t.getUnsignedByte();WordFilter.tldList.push(e)}}static loadBad(t){const e=t.getUnsignedInt();WordFilter.badList=[],WordFilter.badList.length=e,WordFilter.badList.fill(null),WordFilter.badCharIds=[],WordFilter.badCharIds.length=e,WordFilter.badCharIds.fill(null),WordFilter.readBuffer(t,WordFilter.badList,WordFilter.badCharIds)}static loadHost(t){const e=t.getUnsignedInt();WordFilter.hostList=[],WordFilter.hostList.length=e,WordFilter.hostList.fill(null),WordFilter.hostCharIds=[],WordFilter.hostCharIds.length=e,WordFilter.hostCharIds.fill(null),WordFilter.readBuffer(t,WordFilter.hostList,WordFilter.hostCharIds)}static loadFragments(t){WordFilter.hashFragments=new Int32Array(t.getUnsignedInt());for(let e=0;e<WordFilter.hashFragments.length;e++)WordFilter.hashFragments[e]=t.getUnsignedShort()}static readBuffer(t,e,i){for(let r=0;r<e.length;r++){const s=new Uint16Array(t.getUnsignedByte());for(let e=0;e<s.length;e++)s[e]=t.getUnsignedByte();e[r]=s;const n=[];n.length=t.getUnsignedInt();for(let e=0;e<n.length;e++)n[e]=[255&t.getUnsignedByte(),255&t.getUnsignedByte()];n.length>0&&(i[r]=n)}}static filter(t){const e=toCharArray(t.toLowerCase());WordFilter.applyDotSlashFilter(e),WordFilter.applyBadwordFilter(e),WordFilter.applyHostFilter(e),WordFilter.filterDigits(e);for(let i=0;i<WordFilter.ignoreList.length;i++)for(let r=-1;-1!==(r=t.indexOf(WordFilter.ignoreList[i],r+1));){const t=toCharArray(WordFilter.ignoreList[i]);for(let i=0;i<t.length;i++)e[i+r]=t[i]}return WordFilter.forceLowerCase&&(WordFilter.stripLowerCase(toCharArray(t),e),WordFilter.toLowerCase(e)),fromCharArray(e)}static stripLowerCase(t,e){for(let i=0;i<t.length;i++)e[i]!==C_ASTERISK&&WordFilter.isUpperCase(t[i])&&(e[i]=t[i])}static toLowerCase(t){let e=!0;for(let i=0;i<t.length;i++){const r=t[i];WordFilter.isLetter(r)?e?WordFilter.isLowerCase(r)&&(e=!1):WordFilter.isUpperCase(r)&&(t[i]=r+97-65):e=!0}}static applyBadwordFilter(t){for(let e=0;e<2;e++)for(let i=WordFilter.badList.length-1;i>=0;i--)WordFilter.applyWordFilter(t,WordFilter.badList[i],WordFilter.badCharIds[i])}static applyHostFilter(t){for(let e=WordFilter.hostList.length-1;e>=0;e--)WordFilter.applyWordFilter(t,WordFilter.hostList[e],WordFilter.hostCharIds[e])}static applyDotSlashFilter(t){const e=t.slice(),i=toCharArray("dot");WordFilter.applyWordFilter(e,i,null);const r=t.slice(),s=toCharArray("slash");WordFilter.applyWordFilter(r,s,null);for(let n=0;n<WordFilter.tldList.length;n++)WordFilter.applyTLDFilter(t,e,r,WordFilter.tldList[n],WordFilter.tldType[n])}static applyTLDFilter(t,e,i,r,s){if(!(r.length>t.length))for(let n=0;n<=t.length-r.length;n++){let o=n,a=0;for(;o<t.length;){let e=0;const i=t[o];let s=0;if(o+1<t.length&&(s=t[o+1]),a<r.length&&(e=WordFilter.compareLettersNumbers(r[a],i,s))>0)o+=e,a++;else{if(0===a)break;if((e=WordFilter.compareLettersNumbers(r[a-1],i,s))>0)o+=e;else{if(a>=r.length||!WordFilter.isSpecial(i))break;o++}}}if(a>=r.length){let a=!1;const h=WordFilter.getAsteriskCount(t,e,n),u=WordFilter.getAsteriskCount2(t,i,o-1);if(WordFilter.DEBUGTLD&&console.log(`Potential tld: ${r} at char ${n} (type="${s}, startmatch="${h}, endmatch=${u})`),1===s&&h>0&&u>0&&(a=!0),2===s&&(h>2&&u>0||h>0&&u>2)&&(a=!0),3===s&&h>0&&u>2&&(a=!0),a){WordFilter.DEBUGTLD&&console.log(`Filtered tld: ${r} at char ${n}`);let s=n,a=o-1;if(h>2){if(4===h){let t=!1;for(let i=s-1;i>=0;i--)if(t){if(e[i]!==C_ASTERISK)break;s=i}else e[i]===C_ASTERISK&&(s=i,t=!0)}let i=!1;for(let e=s-1;e>=0;e--)if(i){if(WordFilter.isSpecial(t[e]))break;s=e}else WordFilter.isSpecial(t[e])||(i=!0,s=e)}if(u>2){if(4===u){let e=!1;for(let r=a+1;r<t.length;r++)if(e){if(i[r]!==C_ASTERISK)break;a=r}else i[r]===C_ASTERISK&&(a=r,e=!0)}let e=!1;for(let i=a+1;i<t.length;i++)if(e){if(WordFilter.isSpecial(t[i]))break;a=i}else WordFilter.isSpecial(t[i])||(e=!0,a=i)}for(let e=s;e<=a;e++)t[e]=C_ASTERISK}}}}static getAsteriskCount(t,e,i){if(0===i)return 2;for(let s=i-1;s>=0&&WordFilter.isSpecial(t[s]);s--)if(t[s]===C_COMMA||t[s]===C_DOT)return 3;let r=0;for(let s=i-1;s>=0&&WordFilter.isSpecial(e[s]);s--)e[s]===C_ASTERISK&&r++;return r>=3?4:WordFilter.isSpecial(t[i-1])?1:0}static getAsteriskCount2(t,e,i){if(i+1===t.length)return 2;for(let s=i+1;s<t.length&&WordFilter.isSpecial(t[s]);s++)if(t[s]===C_BACKSLASH||t[s]===C_SLASH)return 3;let r=0;for(let s=i+1;s<t.length&&WordFilter.isSpecial(e[s]);s++)e[s]===C_ASTERISK&&r++;return r>=5?4:WordFilter.isSpecial(t[i+1])?1:0}static applyWordFilter(t,e,i){if(!(e.length>t.length))for(let r=0;r<=t.length-e.length;r++){let s=r,n=0,o=!1;for(;s<t.length;){let i=0;const r=t[s];let a=0;if(s+1<t.length&&(a=t[s+1]),n<e.length&&(i=WordFilter.compareLettersSymbols(e[n],r,a))>0)s+=i,n++;else{if(0===n)break;if((i=WordFilter.compareLettersSymbols(e[n-1],r,a))>0)s+=i;else{if(n>=e.length||!WordFilter.isNotLowerCase(r))break;WordFilter.isSpecial(r)&&r!==C_SINGLE_QUOTE&&(o=!0),s++}}}if(n>=e.length){let n=!0;if(WordFilter.DEBUGTLD&&console.log(`Potential word: ${e} at char ${r}`),o){let e=!1,i=!1;if((r-1<0||WordFilter.isSpecial(t[r-1])&&t[r-1]!==C_SINGLE_QUOTE)&&(e=!0),(s>=t.length||WordFilter.isSpecial(t[s])&&t[s]!==C_SINGLE_QUOTE)&&(i=!0),!e||!i){let i=!1,o=r-2;for(e&&(o=r);!i&&o<s;o++)if(o>=0&&(!WordFilter.isSpecial(t[o])||t[o]===C_SINGLE_QUOTE)){const e=new Uint16Array(3);let r;for(r=0;r<3&&!(o+r>=t.length||WordFilter.isSpecial(t[o+r])&&t[o+r]!==C_SINGLE_QUOTE);r++)e[r]=t[o+r];let s=!0;0===r&&(s=!1),r<3&&o-1>=0&&(!WordFilter.isSpecial(t[o-1])||t[o-1]===C_SINGLE_QUOTE)&&(s=!1),s&&!WordFilter.containsFragmentHashes(e)&&(i=!0)}i||(n=!1)}}else{let e=C_SPACE;r-1>=0&&(e=t[r-1]);let o=C_SPACE;s<t.length&&(o=t[s]);const a=WordFilter.getCharId(e),h=WordFilter.getCharId(o);i&&WordFilter.compareCharIds(i,a,h)&&(n=!1)}if(n){WordFilter.DEBUGWORD&&console.log(`Filtered word: ${e} at char ${r}`);for(let e=r;e<s;e++)t[e]=C_ASTERISK}}}}static compareCharIds(t,e,i){let r=0;if(t[r][0]===e&&t[r][1]===i)return!0;let s=t.length-1;if(t[s][0]===e&&t[s][1]===i)return!0;for(;r!==s&&r+1!==s;){const n=(r+s)/2|0;if(t[n][0]===e&&t[n][1]===i)return!0;e<t[n][0]||e===t[n][0]&&i<t[n][1]?s=n:r=n}return!1}static compareLettersNumbers(t,e,i){return t=String.fromCharCode(t),e=String.fromCharCode(e),i=String.fromCharCode(i),t===e||"e"===t&&"3"===e?1:("t"!==t||"7"!==e&&"+"!==e)&&("a"!==t||"4"!==e&&"@"!==e)?"o"===t&&"0"===e||"i"===t&&"1"===e||"s"===t&&"5"===e?1:"f"===t&&"p"===e&&"h"===i?2:"g"===t&&"9"===e?1:0:1}static compareLettersSymbols(t,e,i){if(t=String.fromCharCode(t),e=String.fromCharCode(e),i=String.fromCharCode(i),"*"===t)return 0;if(t===e)return 1;if(t>="a"&&t<="z"){if("e"===t)return"3"===e?1:0;if("t"===t)return"7"===e?1:0;if("a"===t)return"4"===e||"@"===e?1:0;if("o"===t)return"0"===e||"*"===e?1:"("===e&&")"===i?2:0;if("i"===t)return"y"===e||"l"===e||"j"===e||"l"===e||"!"===e||":"===e||";"===e?1:0;if("n"===t)return 0;if("s"===t)return"5"===e||"z"===e||"$"===e?1:0;if("r"===t)return 0;if("h"===t)return 0;if("l"===t)return"1"===e?1:0;if("d"===t)return 0;if("c"===t)return"("===e?1:0;if("u"===t)return"v"===e?1:0;if("m"===t)return 0;if("f"===t)return"p"===e&&"h"===i?2:0;if("p"===t)return 0;if("g"===t)return"9"===e||"6"===e?1:0;if("w"===t)return"v"===e&&"v"===i?2:0;if("y"===t)return 0;if("b"===t)return"1"===e&&"3"===i?2:0;if("v"===t)return 0;if("k"===t)return 0;if("x"===t)return")"===e&&"("===i?2:0;if("j"===t)return 0;if("q"===t)return 0;if("z"===t)return 0}if(t>="0"&&t<="9"){if("0"===t)return"o"===e||"O"===e?1:"("===e&&")"===i?2:0;if("1"===t)return"l"!==e?0:1;if("2"===t)return 0;if("3"===t)return 0;if("4"===t)return 0;if("5"===t)return 0;if("6"===t)return 0;if("7"===t)return 0;if("8"===t)return 0;if("9"===t)return 0}return"-"===t?0:","===t?"."===e?1:0:"."===t?","===e?1:0:"("===t||")"===t?0:"!"===t?"i"===e?1:0:("'"===t||WordFilter.DEBUGWORD&&console.log(`Letter=${t} not matched`),0)}static getCharId(t){return t>=__C_A_290&&t<=__C_Z_290?t-97+1:t===C_SINGLE_QUOTE?28:t>=__C_0_290&&t<=__C_9_290?t-48+29:27}static filterDigits(t){let e=0,i=0,r=0,s=0;for(;-1!=(e=WordFilter.indexOfDigit(t,i));){let n=!1;for(let r=i;r>=0&&r<e&&!n;r++)WordFilter.isSpecial(t[r])||WordFilter.isNotLowerCase(t[r])||(n=!0);n&&(r=0),0===r&&(s=e),i=WordFilter.indexOfNonDigit(t,e);let o=0;for(let r=e;r<i;r++)o=10*o+t[r]-48;if(o>255||i-e>8?r=0:r++,4===r){for(let e=s;e<i;e++)t[e]=C_ASTERISK;r=0}}}static indexOfDigit(t,e){for(let i=e;i<t.length&&i>=0;i++)if(t[i]>=__C_0_290&&t[i]<=__C_9_290)return i;return-1}static indexOfNonDigit(t,e){for(let i=e;i<t.length&&i>=0;i++)if(t[i]<__C_0_290||t[i]>__C_9_290)return i;return t.length}static isSpecial(t){return!WordFilter.isLetter(t)&&!WordFilter.isDigit(t)}static isNotLowerCase(t){return t<__C_A_290||t>__C_Z_290||t===C_V||t===C_X||t===C_J||t===C_Q||t===__C_Z_290}static isLetter(t){return t>=__C_A_290&&t<=__C_Z_290||t>=__C_BIG_A_290&&t<=__C_BIG_Z_290}static isDigit(t){return t>=__C_0_290&&t<=__C_9_290}static isLowerCase(t){return t>=__C_A_290&&t<=__C_Z_290}static isUpperCase(t){return t>=__C_BIG_A_290&&t<=__C_BIG_Z_290}static containsFragmentHashes(t){let e=!0;for(let n=0;n<t.length;n++)WordFilter.isDigit(t[n])||0===t[n]||(e=!1);if(e)return!0;const i=WordFilter.wordToHash(t);let r=0,s=WordFilter.hashFragments.length-1;if(i===WordFilter.hashFragments[r]||i===WordFilter.hashFragments[s])return!0;for(;r!=s&&r+1!=s;){const t=(r+s)/2|0;if(i===WordFilter.hashFragments[t])return!0;i<WordFilter.hashFragments[t]?s=t:r=t}return!1}static wordToHash(t){if(t.length>6)return 0;let e=0;for(let i=0;i<t.length;i++){const r=t[t.length-i-1];if(r>=__C_A_290&&r<=__C_Z_290)e=38*e+r-97+1|0;else if(r===C_SINGLE_QUOTE)e=38*e+27|0;else if(r>=__C_0_290&&r<=__C_9_290)e=38*e+r-48+28|0;else if(0!==r)return WordFilter.DEBUGWORD&&console.log("wordToHash failed on "+fromCharArray(t)),0}return e}}WordFilter.DEBUGTLD=!1,WordFilter.DEBUGWORD=!1,WordFilter.forceLowerCase=!0,WordFilter.ignoreList=["cook","cook's","cooks","seeks","sheet"],_$wordFilter_290=WordFilter;var _$world_291={};class World{constructor(t,e){this.regionWidth=96,this.regionHeight=96,this.anInt585=128,this.parentModel=null,this.landscapePack=null,this.mapPack=null,this.memberLandscapePack=null,this.memberMapPack=null,this.worldInitialised=!0,this.objectAdjacency=_$ndarray_140(new Int32Array(this.regionWidth*this.regionHeight),[this.regionWidth,this.regionHeight]),this.tileDirection=_$ndarray_140(new Int8Array(9216),[4,2304]),this.wallModels=[],this.roofModels=[];for(let i=0;i<4;i+=1){this.wallModels.push([]),this.roofModels.push([]);for(let t=0;t<64;t+=1)this.wallModels[i].push(null),this.roofModels[i].push(null)}this.terrainColours=new Int32Array(256),this.wallsNorthSouth=_$ndarray_140(new Int8Array(9216),[4,2304]),this.wallsRoof=_$ndarray_140(new Int8Array(9216),[4,2304]),this.terrainHeight=_$ndarray_140(new Int8Array(9216),[4,2304]),this.terrainColour=_$ndarray_140(new Int8Array(9216),[4,2304]),this.localY=new Int32Array(18432),this.tileDecoration=_$ndarray_140(new Int8Array(9216),[4,2304]),this.routeVia=_$ndarray_140(new Int32Array(this.regionWidth*this.regionHeight),[this.regionWidth,this.regionHeight]),this.wallsDiagonal=_$ndarray_140(new Int32Array(9216),[4,2304]),this.wallsEastWest=_$ndarray_140(new Int8Array(9216),[4,2304]),this.aBoolean592=!1,this.playerAlive=!1,this.terrainHeightLocal=_$ndarray_140(new Int32Array(this.regionWidth*this.regionHeight),[this.regionWidth,this.regionHeight]),this.terrainModels=[],this.terrainModels.length=64,this.terrainModels.fill(null),this.localX=new Int32Array(18432),this.baseMediaSprite=750,this.scene=t,this.surface=e;for(let i=0;i<64;i++)this.terrainColours[i]=_$scene_257.rgb(255-4*i,255-(1.75*i|0),255-4*i);for(let i=0;i<64;i++)this.terrainColours[i+64]=_$scene_257.rgb(3*i,144,0);for(let i=0;i<64;i++)this.terrainColours[i+128]=_$scene_257.rgb(192-(1.5*i|0),144-(1.5*i|0),0);for(let i=0;i<64;i++)this.terrainColours[i+192]=_$scene_257.rgb(96-(1.5*i|0),48+(1.5*i|0),0)}getWallEastWest(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.wallsEastWest.get(i,48*t+e)}setTerrainAmbience(t,e,i,r,s){let n=this.terrainModels[t+8*e];for(let o=0;o<n.numVertices;o++)if(n.vertexX[o]===i*this.anInt585&&n.vertexZ[o]===r*this.anInt585)return void n.setVertexAmbience(o,s)}getWallRoof(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),this.wallsRoof.get(i,48*t+e)}getElevation(t,e){let i=t>>7,r=e>>7,s=127&t,n=127&e;if(i<0||r<0||i>=95||r>=95)return 0;let o=0,a=0,h=0;return s<=this.anInt585-n?(o=this.getTerrainHeight(i,r),a=this.getTerrainHeight(i+1,r)-o,h=this.getTerrainHeight(i,r+1)-o):(o=this.getTerrainHeight(i+1,r+1),a=this.getTerrainHeight(i,r+1)-o,h=this.getTerrainHeight(i+1,r)-o,s=this.anInt585-s,n=this.anInt585-n),o+(a*s/this.anInt585|0)+(h*n/this.anInt585|0)}getWallDiagonal(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),this.wallsDiagonal.get(i,48*t+e)}removeObject2(t,e,i){if(!(t<0||e<0||t>=95||e>=95||1!==_$gameData_212.objectType[i]&&2!==_$gameData_212.objectType[i])){let r=this.getTileDirection(t,e),s=0,n=0;0===r||4===r?(s=_$gameData_212.objectWidth[i],n=_$gameData_212.objectHeight[i]):(n=_$gameData_212.objectWidth[i],s=_$gameData_212.objectHeight[i]);for(let o=t;o<t+s;o++)for(let t=e;t<e+n;t++){const e=this.objectAdjacency.get(o,t);1===_$gameData_212.objectType[i]?this.objectAdjacency.set(o,t,64|e):0===r?(this.objectAdjacency.set(o,t,2|e),o>0&&this._setObjectAdjacency_from3(o-1,t,8)):2===r?(this.objectAdjacency.set(o,t,4|e),t<95&&this._setObjectAdjacency_from3(o,t+1,1)):4===r?(this.objectAdjacency.set(o,t,8|e),o<95&&this._setObjectAdjacency_from3(o+1,t,2)):6===r&&(this.objectAdjacency.set(o,t,1|e),t>0&&this._setObjectAdjacency_from3(o,t-1,4))}this.method404(t,e,s,n)}}removeWallObject(t,e,i,r){if(!(t<0||e<0||t>=95||e>=95)&&1===_$gameData_212.wallObjectAdjacent[r]){const r=this.objectAdjacency.get(t,e);0===i?(this.objectAdjacency.set(t,e,65534&r),e>0&&this.method407(t,e-1,4)):1===i?(this.objectAdjacency.set(t,e,65533&r),t>0&&this.method407(t-1,e,8)):2===i?this.objectAdjacency.set(t,e,65519&r):3===i&&this.objectAdjacency.set(t,e,65503&r),this.method404(t,e,1,1)}}method402(t,e,i,r,s){let n=3*t,o=3*e,a=this.scene.method302(r),h=this.scene.method302(s);if(a=a>>1&8355711,h=h>>1&8355711,0===i)return this.surface.drawLineHoriz(n,o,3,a),this.surface.drawLineHoriz(n,o+1,2,a),this.surface.drawLineHoriz(n,o+2,1,a),this.surface.drawLineHoriz(n+2,o+1,1,h),void this.surface.drawLineHoriz(n+1,o+2,2,h);1===i&&(this.surface.drawLineHoriz(n,o,3,h),this.surface.drawLineHoriz(n+1,o+1,2,h),this.surface.drawLineHoriz(n+2,o+2,1,h),this.surface.drawLineHoriz(n,o+1,1,a),this.surface.drawLineHoriz(n,o+2,2,a))}_loadSection_from4I(t,e,i,r){const s="m"+i+(t/10|0)+t%10+(e/10|0)+e%10;if(!this.landscapePack)return;let n=_$utility_288.loadData(s+".hei",0,this.landscapePack);if(!n&&this.memberLandscapePack&&(n=_$utility_288.loadData(s+".hei",0,this.memberLandscapePack)),n&&n.length){let t=0,e=0;for(let i=0;i<2304;){let s=255&n[t++];if(s<128&&(this.terrainHeight.set(r,i++,255&s),e=s),s>=128)for(let t=0;t<s-128;t++)this.terrainHeight.set(r,i++,255&e)}e=64;for(let i=0;i<48;i++)for(let t=0;t<48;t++)e=this.terrainHeight.get(r,48*t+i)+e&127,this.terrainHeight.set(r,48*t+i,2*e&255);e=0;for(let i=0;i<2304;){let s=255&n[t++];if(s<128&&(this.terrainColour.set(r,i++,255&s),e=s),s>=128)for(let t=0;t<s-128;t++)this.terrainColour.set(r,i++,255&e)}e=35;for(let i=0;i<48;i++)for(let t=0;t<48;t++)e=this.terrainColour.get(r,48*t+i)+e&127,this.terrainColour.set(r,48*t+i,2*e&255)}else for(let o=0;o<2304;o++)this.terrainHeight.set(r,o,0),this.terrainColour.set(r,o,0);if(!(n=_$utility_288.loadData(s+".dat",0,this.mapPack))&&this.memberMapPack&&(n=_$utility_288.loadData(s+".dat",0,this.memberMapPack)),n&&n.length){let t=0;for(let i=0;i<2304;i++)this.wallsNorthSouth.set(r,i,n[t++]);for(let i=0;i<2304;i++)this.wallsEastWest.set(r,i,n[t++]);for(let i=0;i<2304;i++)this.wallsDiagonal.set(r,i,255&n[t++]);for(let i=0;i<2304;i++){let e=255&n[t++];e>0&&this.wallsDiagonal.set(r,i,e+12e3)}for(let i=0;i<2304;){let e=255&n[t++];if(e<128)this.wallsRoof.set(r,i++,255&e);else for(let t=0;t<e-128;t++)this.wallsRoof.set(r,i++,0)}let e=0;for(let i=0;i<2304;){let s=255&n[t++];if(s<128)this.tileDecoration.set(r,i++,255&s),e=s;else for(let t=0;t<s-128;t++)this.tileDecoration.set(r,i++,e)}for(let i=0;i<2304;){let e=255&n[t++];if(e<128)this.tileDirection.set(r,i++,255&e);else for(let t=0;t<e-128;t++)this.tileDirection.set(r,i++,0)}if((n=_$utility_288.loadData(s+".loc",0,this.mapPack))&&n.length){t=0;for(let e=0;e<2304;){let i=255&n[t++];i<128?this.wallsDiagonal.set(r,e++,i+48e3):e+=i-128}return}}else for(let o=0;o<2304;o++)this.terrainHeight.set(r,o,0),this.terrainColour.set(r,o,0),this.wallsNorthSouth.set(r,o,0),this.wallsEastWest.set(r,o,0),this.wallsDiagonal.set(r,o,0),this.wallsRoof.set(r,o,0),this.tileDecoration.set(r,o,0),0===i&&this.tileDecoration.set(r,o,-6),3===i&&this.tileDecoration.set(r,o,8),this.tileDirection.set(r,o,0)}loadSection(...t){switch(t.length){case 3:return this._loadSection_from3(...t);case 4:return"number"==typeof t[3]?this._loadSection_from4I(...t):this._loadSection_from4(...t)}}method404(t,e,i,r){if(!(t<1||e<1||t+i>=this.regionWidth||e+r>=this.regionHeight))for(let s=t;s<=t+i;s++)for(let t=e;t<=e+r;t++)0!=(99&this.getObjectAdjacency(s,t))||0!=(89&this.getObjectAdjacency(s-1,t))||0!=(86&this.getObjectAdjacency(s,t-1))||0!=(108&this.getObjectAdjacency(s-1,t-1))?this.method425(s,t,35):this.method425(s,t,0)}getObjectAdjacency(t,e){return t<0||e<0||t>=this.regionWidth||e>=this.regionHeight?0:this.objectAdjacency.get(t,e)}hasRoof(t,e){return this.getWallRoof(t,e)>0&&this.getWallRoof(t-1,e)>0&&this.getWallRoof(t-1,e-1)>0&&this.getWallRoof(t,e-1)>0}method407(t,e,i){const r=this.objectAdjacency.get(t,e);this.objectAdjacency.set(t,e,r&65535-i)}getTerrainColour(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.terrainColour.get(i,48*t+e)}reset(){this.worldInitialised&&this.scene.dispose();for(let t=0;t<64;t++){this.terrainModels[t]=null;for(let e=0;e<4;e++)this.wallModels[e][t]=null;for(let e=0;e<4;e++)this.roofModels[e][t]=null}}setTiles(){for(let t=0;t<this.regionWidth;t++)for(let e=0;e<this.regionHeight;e++)250===this.getTileDecoration(t,e,0)&&(47===t&&250!==this.getTileDecoration(t+1,e,0)&&2!==this.getTileDecoration(t+1,e,0)||47===e&&250!==this.getTileDecoration(t,e+1,0)&&2!==this.getTileDecoration(t,e+1,0)?this.setTileDecoration(t,e,9):this.setTileDecoration(t,e,2))}getWallNorthSouth(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.wallsNorthSouth.get(i,48*t+e)}getTileDirection(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),this.tileDirection.get(i,48*t+e)}_getTileDecoration_from4(t,e,i,r){const s=this._getTileDecoration_from3(t,e);return 0===s?r:_$gameData_212.tileDecoration[s-1]}_getTileDecoration_from3(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.tileDecoration.get(i,48*t+e)}getTileDecoration(...t){switch(t.length){case 3:return this._getTileDecoration_from3(...t);case 4:return this._getTileDecoration_from4(...t)}}setTileDecoration(t,e,i){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return;let r=0;t>=48&&e<48?(r=1,t-=48):t<48&&e>=48?(r=2,e-=48):t>=48&&e>=48&&(r=3,t-=48,e-=48),this.tileDecoration.set(r,48*t+e,255&i)}route(t,e,i,r,s,n,o,a,h){for(let _=0;_<this.regionWidth;_++)for(let t=0;t<this.regionHeight;t++)this.routeVia.set(_,t,0);let u=0,l=0,c=t,f=e;this.routeVia.set(t,e,99),o[u]=t,a[u++]=e;let d,m=o.length,p=!1;for(;l!==u;){if(c=o[l],f=a[l],l=(l+1)%m,c>=i&&c<=s&&f>=r&&f<=n){p=!0;break}if(h){if(c>0&&c-1>=i&&c-1<=s&&f>=r&&f<=n&&0==(8&this.objectAdjacency.get(c-1,f))){p=!0;break}if(c<95&&c+1>=i&&c+1<=s&&f>=r&&f<=n&&0==(2&this.objectAdjacency.get(c+1,f))){p=!0;break}if(f>0&&c>=i&&c<=s&&f-1>=r&&f-1<=n&&0==(4&this.objectAdjacency.get(c,f-1))){p=!0;break}if(f<95&&c>=i&&c<=s&&f+1>=r&&f+1<=n&&0==(1&this.objectAdjacency.get(c,f+1))){p=!0;break}}c>0&&0===this.routeVia.get(c-1,f)&&0==(120&this.objectAdjacency.get(c-1,f))&&(o[u]=c-1,a[u]=f,u=(u+1)%m,this.routeVia.set(c-1,f,2)),c<95&&0===this.routeVia.get(c+1,f)&&0==(114&this.objectAdjacency.get(c+1,f))&&(o[u]=c+1,a[u]=f,u=(u+1)%m,this.routeVia.set(c+1,f,8)),f>0&&0===this.routeVia.get(c,f-1)&&0==(116&this.objectAdjacency.get(c,f-1))&&(o[u]=c,a[u]=f-1,u=(u+1)%m,this.routeVia.set(c,f-1,1)),f<95&&0===this.routeVia.get(c,f+1)&&0==(113&this.objectAdjacency.get(c,f+1))&&(o[u]=c,a[u]=f+1,u=(u+1)%m,this.routeVia.set(c,f+1,4)),c>0&&f>0&&0==(116&this.objectAdjacency.get(c,f-1))&&0==(120&this.objectAdjacency.get(c-1,f))&&0==(124&this.objectAdjacency.get(c-1,f-1))&&0===this.routeVia.get(c-1,f-1)&&(o[u]=c-1,a[u]=f-1,u=(u+1)%m,this.routeVia.set(c-1,f-1,3)),c<95&&f>0&&0==(116&this.objectAdjacency.get(c,f-1))&&0==(114&this.objectAdjacency.get(c+1,f))&&0==(118&this.objectAdjacency.get(c+1,f-1))&&0===this.routeVia.get(c+1,f-1)&&(o[u]=c+1,a[u]=f-1,u=(u+1)%m,this.routeVia.set(c+1,f-1,9)),c>0&&f<95&&0==(113&this.objectAdjacency.get(c,f+1))&&0==(120&this.objectAdjacency.get(c-1,f))&&0==(121&this.objectAdjacency.get(c-1,f+1))&&0===this.routeVia.get(c-1,f+1)&&(o[u]=c-1,a[u]=f+1,u=(u+1)%m,this.routeVia.set(c-1,f+1,6)),c<95&&f<95&&0==(113&this.objectAdjacency.get(c,f+1))&&0==(114&this.objectAdjacency.get(c+1,f))&&0==(115&this.objectAdjacency.get(c+1,f+1))&&0===this.routeVia.get(c+1,f+1)&&(o[u]=c+1,a[u]=f+1,u=(u+1)%m,this.routeVia.set(c+1,f+1,12))}if(!p)return-1;o[l=0]=c,a[l++]=f;for(let _=d=this.routeVia.get(c,f);c!==t||f!==e;_=this.routeVia.get(c,f))_!==d&&(d=_,o[l]=c,a[l++]=f),0!=(2&_)?c++:0!=(8&_)&&c--,0!=(1&_)?f++:0!=(4&_)&&f--;return l}_setObjectAdjacency_from4(t,e,i,r){if(!(t<0||e<0||t>=95||e>=95)&&1===_$gameData_212.wallObjectAdjacent[r]){const r=this.objectAdjacency.get(t,e);0===i?(this.objectAdjacency.set(t,e,1|r),e>0&&this._setObjectAdjacency_from3(t,e-1,4)):1===i?(this.objectAdjacency.set(t,e,2|r),t>0&&this._setObjectAdjacency_from3(t-1,e,8)):2===i?this.objectAdjacency.set(t,e,16|r):3===i&&this.objectAdjacency.set(t,e,32|r),this.method404(t,e,1,1)}}setObjectAdjacency(...t){switch(t.length){case 4:return this._setObjectAdjacency_from4(...t);case 3:return this._setObjectAdjacency_from3(...t)}}_loadSection_from4(t,e,i,r){let s=(t+24)/48|0,n=(e+24)/48|0;if(this._loadSection_from4I(s-1,n-1,i,0),this._loadSection_from4I(s,n-1,i,1),this._loadSection_from4I(s-1,n,i,2),this._loadSection_from4I(s,n,i,3),this.setTiles(),null===this.parentModel&&(this.parentModel=_$gameModel_213._from7(18688,18688,!0,!0,!1,!1,!0)),r){this.surface.blackScreen();for(let e=0;e<this.regionWidth;e++)for(let t=0;t<this.regionHeight;t++)this.objectAdjacency.set(e,t,0);let t=this.parentModel;t.clear();for(let e=0;e<this.regionWidth;e++)for(let r=0;r<this.regionHeight;r++){let s=-this.getTerrainHeight(e,r);this.getTileDecoration(e,r,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e,r,i)-1]&&(s=0),this.getTileDecoration(e-1,r,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e-1,r,i)-1]&&(s=0),this.getTileDecoration(e,r-1,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e,r-1,i)-1]&&(s=0),this.getTileDecoration(e-1,r-1,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e-1,r-1,i)-1]&&(s=0);let n=t.vertexAt(e*this.anInt585,s,r*this.anInt585),o=(10*Math.random()|0)-5;t.setVertexAmbience(n,o)}for(let e=0;e<95;e++)for(let r=0;r<95;r++){let s=this.getTerrainColour(e,r),n=this.terrainColours[s],o=n,a=n,h=0;if(1!==i&&2!==i||(n=World.colourTransparent,o=World.colourTransparent,a=World.colourTransparent),this.getTileDecoration(e,r,i)>0){let t=this.getTileDecoration(e,r,i),s=_$gameData_212.tileType[t-1],u=this.getTileType(e,r,i);if(n=o=_$gameData_212.tileDecoration[t-1],4===s&&(n=1,o=1,12===t&&(n=31,o=31)),5===s?this.getWallDiagonal(e,r)>0&&this.getWallDiagonal(e,r)<24e3&&(this.getTileDecoration(e-1,r,i,a)!==World.colourTransparent&&this.getTileDecoration(e,r-1,i,a)!==World.colourTransparent?(n=this.getTileDecoration(e-1,r,i,a),h=0):this.getTileDecoration(e+1,r,i,a)!==World.colourTransparent&&this.getTileDecoration(e,r+1,i,a)!==World.colourTransparent?(o=this.getTileDecoration(e+1,r,i,a),h=0):this.getTileDecoration(e+1,r,i,a)!==World.colourTransparent&&this.getTileDecoration(e,r-1,i,a)!==World.colourTransparent?(o=this.getTileDecoration(e+1,r,i,a),h=1):this.getTileDecoration(e-1,r,i,a)!==World.colourTransparent&&this.getTileDecoration(e,r+1,i,a)!==World.colourTransparent&&(n=this.getTileDecoration(e-1,r,i,a),h=1)):(2!==s||this.getWallDiagonal(e,r)>0&&this.getWallDiagonal(e,r)<24e3)&&(this.getTileType(e-1,r,i)!==u&&this.getTileType(e,r-1,i)!==u?(n=a,h=0):this.getTileType(e+1,r,i)!==u&&this.getTileType(e,r+1,i)!==u?(o=a,h=0):this.getTileType(e+1,r,i)!==u&&this.getTileType(e,r-1,i)!==u?(o=a,h=1):this.getTileType(e-1,r,i)!==u&&this.getTileType(e,r+1,i)!==u&&(n=a,h=1)),0!==_$gameData_212.tileAdjacent[t-1]){const t=this.objectAdjacency.get(e,r);this.objectAdjacency.set(e,r,64|t)}if(2===_$gameData_212.tileType[t-1]){const t=this.objectAdjacency.get(e,r);this.objectAdjacency.set(e,r,128|t)}}this.method402(e,r,h,n,o);let u=this.getTerrainHeight(e+1,r+1)-this.getTerrainHeight(e+1,r)+this.getTerrainHeight(e,r+1)-this.getTerrainHeight(e,r);if(n!==o||0!==u){let i=new Int32Array(3),s=new Int32Array(3);if(0===h){if(n!==World.colourTransparent){i[0]=r+96*e+96,i[1]=r+96*e,i[2]=r+96*e+1;let s=t.createFace(3,i,World.colourTransparent,n);this.localX[s]=e,this.localY[s]=r,t.faceTag[s]=2e5+s}if(o!==World.colourTransparent){s[0]=r+96*e+1,s[1]=r+96*e+96+1,s[2]=r+96*e+96;let i=t.createFace(3,s,World.colourTransparent,o);this.localX[i]=e,this.localY[i]=r,t.faceTag[i]=2e5+i}}else{if(n!==World.colourTransparent){i[0]=r+96*e+1,i[1]=r+96*e+96+1,i[2]=r+96*e;let s=t.createFace(3,i,World.colourTransparent,n);this.localX[s]=e,this.localY[s]=r,t.faceTag[s]=2e5+s}if(o!==World.colourTransparent){s[0]=r+96*e+96,s[1]=r+96*e,s[2]=r+96*e+96+1;let i=t.createFace(3,s,World.colourTransparent,o);this.localX[i]=e,this.localY[i]=r,t.faceTag[i]=2e5+i}}}else if(n!==World.colourTransparent){let i=new Int32Array(4);i[0]=r+96*e+96,i[1]=r+96*e,i[2]=r+96*e+1,i[3]=r+96*e+96+1;let s=t.createFace(4,i,World.colourTransparent,n);this.localX[s]=e,this.localY[s]=r,t.faceTag[s]=2e5+s}}for(let e=1;e<95;e++)for(let r=1;r<95;r++)if(this.getTileDecoration(e,r,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e,r,i)-1]){let s=_$gameData_212.tileDecoration[this.getTileDecoration(e,r,i)-1],n=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),a=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),h=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([n,o,a,h]),l=t.createFace(4,u,s,World.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,s,s)}else if(0===this.getTileDecoration(e,r,i)||3!==_$gameData_212.tileType[this.getTileDecoration(e,r,i)-1]){if(this.getTileDecoration(e,r+1,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e,r+1,i)-1]){let s=_$gameData_212.tileDecoration[this.getTileDecoration(e,r+1,i)-1],n=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),a=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),h=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([n,o,a,h]),l=t.createFace(4,u,s,World.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,s,s)}if(this.getTileDecoration(e,r-1,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e,r-1,i)-1]){let s=_$gameData_212.tileDecoration[this.getTileDecoration(e,r-1,i)-1],n=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),a=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),h=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([n,o,a,h]),l=t.createFace(4,u,s,World.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,s,s)}if(this.getTileDecoration(e+1,r,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e+1,r,i)-1]){let s=_$gameData_212.tileDecoration[this.getTileDecoration(e+1,r,i)-1],n=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),a=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),h=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([n,o,a,h]),l=t.createFace(4,u,s,World.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,s,s)}if(this.getTileDecoration(e-1,r,i)>0&&4===_$gameData_212.tileType[this.getTileDecoration(e-1,r,i)-1]){let s=_$gameData_212.tileDecoration[this.getTileDecoration(e-1,r,i)-1],n=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),a=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),h=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([n,o,a,h]),l=t.createFace(4,u,s,World.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,s,s)}}t._setLight_from6(!0,40,48,-50,-10,-50),this.terrainModels=this.parentModel.split(0,0,1536,1536,8,64,233,!1);for(let e=0;e<64;e++)this.scene.addModel(this.terrainModels[e]);for(let e=0;e<this.regionWidth;e++)for(let t=0;t<this.regionHeight;t++)this.terrainHeightLocal.set(e,t,this.getTerrainHeight(e,t))}this.parentModel.clear();let o=6316128;for(let a=0;a<95;a++)for(let t=0;t<95;t++){let e=this.getWallEastWest(a,t);if(e>0&&(0===_$gameData_212.wallObjectInvisible[e-1]||this.aBoolean592)){if(this.method422(this.parentModel,e-1,a,t,a+1,t),r&&0!==_$gameData_212.wallObjectAdjacent[e-1]){const e=this.objectAdjacency.get(a,t);this.objectAdjacency.set(a,t,1|e),t>0&&this._setObjectAdjacency_from3(a,t-1,4)}r&&this.surface.drawLineHoriz(3*a,3*t,3,o)}if((e=this.getWallNorthSouth(a,t))>0&&(0===_$gameData_212.wallObjectInvisible[e-1]||this.aBoolean592)){if(this.method422(this.parentModel,e-1,a,t,a,t+1),r&&0!==_$gameData_212.wallObjectAdjacent[e-1]){const e=this.objectAdjacency.get(a,t);this.objectAdjacency.set(a,t,2|e),a>0&&this._setObjectAdjacency_from3(a-1,t,8)}r&&this.surface.drawLineVert(3*a,3*t,3,o)}if((e=this.getWallDiagonal(a,t))>0&&e<12e3&&(0===_$gameData_212.wallObjectInvisible[e-1]||this.aBoolean592)){if(this.method422(this.parentModel,e-1,a,t,a+1,t+1),r&&0!==_$gameData_212.wallObjectAdjacent[e-1]){const e=this.objectAdjacency.get(a,t);this.objectAdjacency.set(a,t,32|e)}r&&(this.surface.setPixel(3*a,3*t,o),this.surface.setPixel(3*a+1,3*t+1,o),this.surface.setPixel(3*a+2,3*t+2,o))}if(e>12e3&&e<24e3&&(0===_$gameData_212.wallObjectInvisible[e-12001]||this.aBoolean592)){if(this.method422(this.parentModel,e-12001,a+1,t,a,t+1),r&&0!==_$gameData_212.wallObjectAdjacent[e-12001]){const e=this.objectAdjacency.get(a,t);this.objectAdjacency.set(a,t,16|e)}r&&(this.surface.setPixel(3*a+2,3*t,o),this.surface.setPixel(3*a+1,3*t+1,o),this.surface.setPixel(3*a,3*t+2,o))}}r&&this.surface.drawSpriteMinimap(this.baseMediaSprite-1,0,0,285,285),this.parentModel._setLight_from6(!1,60,24,-50,-10,-50),this.wallModels[i]=this.parentModel.split(0,0,1536,1536,8,64,338,!0);for(let a=0;a<64;a++)this.scene.addModel(this.wallModels[i][a]);for(let a=0;a<95;a++)for(let t=0;t<95;t++){let e=this.getWallEastWest(a,t);e>0&&this.method428(e-1,a,t,a+1,t),(e=this.getWallNorthSouth(a,t))>0&&this.method428(e-1,a,t,a,t+1),(e=this.getWallDiagonal(a,t))>0&&e<12e3&&this.method428(e-1,a,t,a+1,t+1),e>12e3&&e<24e3&&this.method428(e-12001,a+1,t,a,t+1)}for(let a=1;a<95;a++)for(let t=1;t<95;t++)if(this.getWallRoof(a,t)>0){let e=a,i=t,r=a+1,s=t,n=a+1,o=t+1,h=a,u=t+1,l=0,c=this.terrainHeightLocal.get(e,i),f=this.terrainHeightLocal.get(r,s),d=this.terrainHeightLocal.get(n,o),m=this.terrainHeightLocal.get(h,u);if(c>8e4&&(c-=8e4),f>8e4&&(f-=8e4),d>8e4&&(d-=8e4),m>8e4&&(m-=8e4),c>l&&(l=c),f>l&&(l=f),d>l&&(l=d),m>l&&(l=m),l>=8e4&&(l-=8e4),c<8e4)this.terrainHeightLocal.set(e,i,l);else{const t=this.terrainHeightLocal.get(e,i);this.terrainHeightLocal.set(e,i,t-8e4)}if(f<8e4)this.terrainHeightLocal.set(r,s,l);else{const t=this.terrainHeightLocal.get(r,s);this.terrainHeightLocal.set(r,s,t-8e4)}if(d<8e4)this.terrainHeightLocal.set(n,o,l);else{const t=this.terrainHeightLocal.get(n,o);this.terrainHeightLocal.set(n,o,t-8e4)}if(m<8e4)this.terrainHeightLocal.set(h,u,l);else{const t=this.terrainHeightLocal.get(h,u);this.terrainHeightLocal.set(h,u,t-8e4)}}this.parentModel.clear();for(let a=1;a<95;a++)for(let t=1;t<95;t++){let e=this.getWallRoof(a,t);if(e>0){let i=a,r=t,s=a+1,n=t,o=a+1,h=t+1,u=a,l=t+1,c=a*this.anInt585,f=t*this.anInt585,d=c+this.anInt585,m=f+this.anInt585,p=c,_=f,g=d,b=m,y=this.terrainHeightLocal.get(i,r),w=this.terrainHeightLocal.get(s,n),v=this.terrainHeightLocal.get(o,h),M=this.terrainHeightLocal.get(u,l),S=_$gameData_212.roofHeight[e-1];this.hasRoof(i,r)&&y<8e4&&(y+=S+8e4,this.terrainHeightLocal.set(i,r,y)),this.hasRoof(s,n)&&w<8e4&&(w+=S+8e4,this.terrainHeightLocal.set(s,n,w)),this.hasRoof(o,h)&&v<8e4&&(v+=S+8e4,this.terrainHeightLocal.set(o,h,v)),this.hasRoof(u,l)&&M<8e4&&(M+=S+8e4,this.terrainHeightLocal.set(u,l,M)),y>=8e4&&(y-=8e4),w>=8e4&&(w-=8e4),v>=8e4&&(v-=8e4),M>=8e4&&(M-=8e4);let C=16;if(this.method427(i-1,r)||(c-=C),this.method427(i+1,r)||(c+=C),this.method427(i,r-1)||(f-=C),this.method427(i,r+1)||(f+=C),this.method427(s-1,n)||(d-=C),this.method427(s+1,n)||(d+=C),this.method427(s,n-1)||(_-=C),this.method427(s,n+1)||(_+=C),this.method427(o-1,h)||(g-=C),this.method427(o+1,h)||(g+=C),this.method427(o,h-1)||(m-=C),this.method427(o,h+1)||(m+=C),this.method427(u-1,l)||(p-=C),this.method427(u+1,l)||(p+=C),this.method427(u,l-1)||(b-=C),this.method427(u,l+1)||(b+=C),e=_$gameData_212.roofNumVertices[e-1],y=-y,w=-w,v=-v,M=-M,this.getWallDiagonal(a,t)>12e3&&this.getWallDiagonal(a,t)<24e3&&0===this.getWallRoof(a-1,t-1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(g,v,m),t[1]=this.parentModel.vertexAt(p,M,b),t[2]=this.parentModel.vertexAt(d,w,_),this.parentModel.createFace(3,t,e,World.colourTransparent)}else if(this.getWallDiagonal(a,t)>12e3&&this.getWallDiagonal(a,t)<24e3&&0===this.getWallRoof(a+1,t+1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(c,y,f),t[1]=this.parentModel.vertexAt(d,w,_),t[2]=this.parentModel.vertexAt(p,M,b),this.parentModel.createFace(3,t,e,World.colourTransparent)}else if(this.getWallDiagonal(a,t)>0&&this.getWallDiagonal(a,t)<12e3&&0===this.getWallRoof(a+1,t-1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(p,M,b),t[1]=this.parentModel.vertexAt(c,y,f),t[2]=this.parentModel.vertexAt(g,v,m),this.parentModel.createFace(3,t,e,World.colourTransparent)}else if(this.getWallDiagonal(a,t)>0&&this.getWallDiagonal(a,t)<12e3&&0===this.getWallRoof(a-1,t+1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(d,w,_),t[1]=this.parentModel.vertexAt(g,v,m),t[2]=this.parentModel.vertexAt(c,y,f),this.parentModel.createFace(3,t,e,World.colourTransparent)}else if(y===w&&v===M){let t=new Int32Array(4);t[0]=this.parentModel.vertexAt(c,y,f),t[1]=this.parentModel.vertexAt(d,w,_),t[2]=this.parentModel.vertexAt(g,v,m),t[3]=this.parentModel.vertexAt(p,M,b),this.parentModel.createFace(4,t,e,World.colourTransparent)}else if(y===M&&w===v){let t=new Int32Array(4);t[0]=this.parentModel.vertexAt(p,M,b),t[1]=this.parentModel.vertexAt(c,y,f),t[2]=this.parentModel.vertexAt(d,w,_),t[3]=this.parentModel.vertexAt(g,v,m),this.parentModel.createFace(4,t,e,World.colourTransparent)}else{let i=!0;if(this.getWallRoof(a-1,t-1)>0&&(i=!1),this.getWallRoof(a+1,t+1)>0&&(i=!1),i){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(c,y,f),t[1]=this.parentModel.vertexAt(d,w,_),t[2]=this.parentModel.vertexAt(p,M,b),this.parentModel.createFace(3,t,e,World.colourTransparent);let i=new Int32Array(3);i[0]=this.parentModel.vertexAt(g,v,m),i[1]=this.parentModel.vertexAt(p,M,b),i[2]=this.parentModel.vertexAt(d,w,_),this.parentModel.createFace(3,i,e,World.colourTransparent)}else{let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(d,w,_),t[1]=this.parentModel.vertexAt(g,v,m),t[2]=this.parentModel.vertexAt(c,y,f),this.parentModel.createFace(3,t,e,World.colourTransparent);let i=new Int32Array(3);i[0]=this.parentModel.vertexAt(p,M,b),i[1]=this.parentModel.vertexAt(c,y,f),i[2]=this.parentModel.vertexAt(g,v,m),this.parentModel.createFace(3,i,e,World.colourTransparent)}}}}this.parentModel._setLight_from6(!0,50,50,-50,-10,-50),this.roofModels[i]=this.parentModel.split(0,0,1536,1536,8,64,169,!0);for(let a=0;a<64;a++)this.scene.addModel(this.roofModels[i][a]);if(null===this.roofModels[i][0])throw new EvalError("null roof!");for(let a=0;a<this.regionWidth;a++)for(let t=0;t<this.regionHeight;t++)if(this.terrainHeightLocal.get(a,t)>=8e4){const e=this.terrainHeightLocal.get(a,t);this.terrainHeightLocal.set(a,t,e-8e4)}}_setObjectAdjacency_from3(t,e,i){const r=this.objectAdjacency.get(t,e);this.objectAdjacency.set(t,e,r|i)}getTileType(t,e,i){let r=this.getTileDecoration(t,e,i);return 0===r?-1:2!==_$gameData_212.tileType[r-1]?0:1}addModels(t){for(let e=0;e<94;e++)for(let i=0;i<94;i++)if(this.getWallDiagonal(e,i)>48e3&&this.getWallDiagonal(e,i)<6e4){let r=this.getWallDiagonal(e,i)-48001,s=this.getTileDirection(e,i),n=0,o=0;0===s||4===s?(n=_$gameData_212.objectWidth[r],o=_$gameData_212.objectHeight[r]):(o=_$gameData_212.objectWidth[r],n=_$gameData_212.objectHeight[r]),this.removeObject2(e,i,r);let a=t[_$gameData_212.objectModelIndex[r]].copy(!1,!0,!1,!1),h=(e+e+n)*this.anInt585/2|0,u=(i+i+o)*this.anInt585/2|0;if(a.translate(h,-this.getElevation(h,u),u),a.orient(0,32*this.getTileDirection(e,i),0),this.scene.addModel(a),a._setLight_from5(48,48,-50,-10,-50),n>1||o>1)for(let t=e;t<e+n;t++)for(let s=i;s<i+o;s++)if((t>e||s>i)&&this.getWallDiagonal(t,s)-48001===r){let e=t,i=s,r=0;e>=48&&i<48?(r=1,e-=48):e<48&&i>=48?(r=2,i-=48):e>=48&&i>=48&&(r=3,e-=48,i-=48),this.wallsDiagonal.set(r,48*e+i,0)}}}method422(t,e,i,r,s,n){this.method425(i,r,40),this.method425(s,n,40);let o=_$gameData_212.wallObjectHeight[e],a=_$gameData_212.wallObjectTextureFront[e],h=_$gameData_212.wallObjectTextureBack[e],u=i*this.anInt585,l=r*this.anInt585,c=s*this.anInt585,f=n*this.anInt585,d=t.vertexAt(u,-this.terrainHeightLocal.get(i,r),l),m=t.vertexAt(u,-this.terrainHeightLocal.get(i,r)-o,l),p=t.vertexAt(c,-this.terrainHeightLocal.get(s,n)-o,f),_=t.vertexAt(c,-this.terrainHeightLocal.get(s,n),f),g=new Int32Array([d,m,p,_]),b=t.createFace(4,g,a,h);return 5===_$gameData_212.wallObjectInvisible[e]?void(t.faceTag[b]=3e4+e):void(t.faceTag[b]=0)}getTerrainHeight(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),3*(255&this.terrainHeight.get(i,48*t+e))}_loadSection_from3(t,e,i){this.reset();let r=(t+24)/48|0,s=(e+24)/48|0;this._loadSection_from4(t,e,i,!0),0===i&&(this._loadSection_from4(t,e,1,!1),this._loadSection_from4(t,e,2,!1),this._loadSection_from4I(r-1,s-1,i,0),this._loadSection_from4I(r,s-1,i,1),this._loadSection_from4I(r-1,s,i,2),this._loadSection_from4I(r,s,i,3),this.setTiles())}method425(t,e,i){let r=t/12|0,s=e/12|0,n=(t-1)/12|0,o=(e-1)/12|0;this.setTerrainAmbience(r,s,t,e,i),r!==n&&this.setTerrainAmbience(n,s,t,e,i),s!==o&&this.setTerrainAmbience(r,o,t,e,i),r!==n&&s!==o&&this.setTerrainAmbience(n,o,t,e,i)}removeObject(t,e,i){if(!(t<0||e<0||t>=95||e>=95||1!==_$gameData_212.objectType[i]&&2!==_$gameData_212.objectType[i])){let r=this.getTileDirection(t,e),s=0,n=0;0===r||4===r?(s=_$gameData_212.objectWidth[i],n=_$gameData_212.objectHeight[i]):(n=_$gameData_212.objectWidth[i],s=_$gameData_212.objectHeight[i]);for(let o=t;o<t+s;o++)for(let t=e;t<e+n;t++){const e=this.objectAdjacency.get(o,t);1===_$gameData_212.objectType[i]?this.objectAdjacency.set(o,t,65471&e):0===r?(this.objectAdjacency.set(o,t,65533&e),o>0&&this.method407(o-1,t,8)):2===r?(this.objectAdjacency.set(o,t,65531&e),t<95&&this.method407(o,t+1,1)):4===r?(this.objectAdjacency.set(o,t,65527&e),o<95&&this.method407(o+1,t,2)):6===r&&(this.objectAdjacency.set(o,t,65534&e),t>0&&this.method407(o,t-1,4))}this.method404(t,e,s,n)}}method427(t,e){return this.getWallRoof(t,e)>0||this.getWallRoof(t-1,e)>0||this.getWallRoof(t-1,e-1)>0||this.getWallRoof(t,e-1)>0}method428(t,e,i,r,s){let n=_$gameData_212.wallObjectHeight[t];const o=this.terrainHeightLocal.get(e,i);o<8e4&&this.terrainHeightLocal.set(e,i,o+8e4+n);const a=this.terrainHeightLocal.get(r,s);a<8e4&&this.terrainHeightLocal.set(r,s,a+8e4+n)}}World.colourTransparent=12345678,_$world_291=World;var _$chatMessage_208={};const __C_A_208="a".charCodeAt(0),C_AT="@".charCodeAt(0),__C_DOT_208=".".charCodeAt(0),C_EXCLM="!".charCodeAt(0),C_PRCNT="%".charCodeAt(0),__C_SPACE_208=" ".charCodeAt(0),__C_Z_208="z".charCodeAt(0),C_CENT="\uffe0".charCodeAt(0);class ChatMessage{static descramble(t,i,r){try{let e=0,n=-1;for(let s=0;s<r;s++){const r=255&t[i++];let s=r>>4&15;-1===n?s<13?ChatMessage.chars[e++]=ChatMessage.charMap[s]:n=s:(ChatMessage.chars[e++]=ChatMessage.charMap[(n<<4)+s-195],n=-1),s=15&r,-1===n?s<13?ChatMessage.chars[e++]=ChatMessage.charMap[s]:n=s:(ChatMessage.chars[e++]=ChatMessage.charMap[(n<<4)+s-195],n=-1)}let o=!0;for(let t=0;t<e;t++){const e=ChatMessage.chars[t];t>4&&e===C_AT&&(ChatMessage.chars[t]=__C_SPACE_208),e===C_PRCNT&&(ChatMessage.chars[t]=__C_SPACE_208),o&&e>=__C_A_208&&e<=__C_Z_208&&(ChatMessage.chars[t]+=C_CENT,o=!1),e!==__C_DOT_208&&e!==C_EXCLM||(o=!0)}return s=ChatMessage.chars.slice(0,e),Array.from(s).map(t=>String.fromCharCode(t)).join("")}catch(e){return"."}var s}static scramble(t){t.length>80&&(t=t.slice(0,80)),t=t.toLowerCase();let e=0,i=-1;for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);let n=0;for(let t=0;t<ChatMessage.charMap.length;t++)if(s===ChatMessage.charMap[t]){n=t;break}n>12&&(n+=195),-1===i?n<13?i=n:ChatMessage.scrambledBytes[e++]=255&n:n<13?(ChatMessage.scrambledBytes[e++]=(i<<4)+n&255,i=-1):(ChatMessage.scrambledBytes[e++]=(i<<4)+(n>>4)&255,i=15&n)}return-1!==i&&(ChatMessage.scrambledBytes[e++]=i<<4&255),e}}ChatMessage.scrambledBytes=new Int8Array(100),ChatMessage.chars=new Uint16Array(100),ChatMessage.charMap=new Uint16Array([" ","e","t","a","o","i","h","n","s","r","d","l","u","m","w","c","y","f","g","p","b","v","k","x","j","q","z","0","1","2","3","4","5","6","7","8","9"," ","!","?",".",",",":",";","(",")","-","&","*","\\","'","@","#","+","=","\xa3","$","%",'"',"[","]"].map(t=>t.charCodeAt(0))),_$chatMessage_208=ChatMessage;var _$server_224={APPEARANCE:59,BANK_CLOSE:203,BANK_OPEN:42,BANK_UPDATE:249,CLOSE_CONNECTION:4,DUEL_ACCEPTED:210,DUEL_CLOSE:225,DUEL_CONFIRM_OPEN:172,DUEL_OPEN:176,DUEL_OPPONENT_ACCEPTED:253,DUEL_SETTINGS:30,DUEL_UPDATE:6,FRIEND_LIST:71,FRIEND_MESSAGE:120,FRIEND_STATUS_CHANGE:149,GAME_SETTINGS:240,IGNORE_LIST:109,INVENTORY_ITEMS:53,INVENTORY_ITEM_REMOVE:123,INVENTORY_ITEM_UPDATE:90,LOGOUT_DENY:183,MESSAGE:131,OPTION_LIST:245,OPTION_LIST_CLOSE:252,PLAYER_DIED:83,PLAYER_QUEST_LIST:5,PLAYER_STAT_EQUIPMENT_BONUS:153,PLAYER_STAT_EXPERIENCE_UPDATE:33,PLAYER_STAT_FATIGUE:114,PLAYER_STAT_FATIGUE_ASLEEP:244,PLAYER_STAT_LIST:156,PLAYER_STAT_UPDATE:159,PRAYER_STATUS:206,PRIVACY_SETTINGS:51,REGION_ENTITY_UPDATE:211,REGION_GROUND_ITEMS:99,REGION_NPCS:79,REGION_NPC_UPDATE:104,REGION_OBJECTS:48,REGION_PLAYERS:191,REGION_PLAYER_UPDATE:234,REGION_WALL_OBJECTS:91,SERVER_MESSAGE:89,SERVER_MESSAGE_ONTOP:222,SHOP_CLOSE:137,SHOP_OPEN:101,SLEEP_CLOSE:84,SLEEP_INCORRECT:194,SLEEP_OPEN:117,SOUND:204,SYSTEM_UPDATE:52,TELEPORT_BUBBLE:36,TRADE_CLOSE:128,TRADE_CONFIRM_OPEN:20,TRADE_ITEMS:97,TRADE_OPEN:92,TRADE_RECIPIENT_STATUS:162,TRADE_STATUS:15,WELCOME:182,WORLD_INFO:25};const applyUIComponents=_$ui_265({}),getPacketHandlers=_$packetHandlers_230({}),__clientOpcodes_222=_$client_223,ZOOM_MIN=450,ZOOM_MAX=1250,ZOOM_INDOORS=550,ZOOM_OUTDOORS=750,MENU_MAX=250,PATH_STEPS_MAX=8e3,PLAYERS_MAX=500,NPCS_MAX=500,GAME_OBJECTS_MAX=1e3,WALL_OBJECTS_MAX=500,PLAYERS_SERVER_MAX=4e3,GROUND_ITEMS_MAX=5e3,NPCS_SERVER_MAX=5e3,OBJECTS_MAX=1500,PLAYER_STAT_COUNT=18,QUEST_COUNT=50,PLAYER_STAT_EQUIPMENT_COUNT=5,ANIMATED_MODELS=["torcha2","torcha3","torcha4","skulltorcha2","skulltorcha3","skulltorcha4","firea2","firea3","fireplacea2","fireplacea3","firespell2","firespell3","lightning2","lightning3","clawspell2","clawspell3","clawspell4","clawspell5","spellcharge2","spellcharge3"];var _$mudclient_222=class extends _$gameConnection_211{constructor(t){super(t),applyUIComponents(this),this.packetHandlers=getPacketHandlers(this),this.localRegionX=0,this.localRegionY=0,this.messageTabSelected=0,this.mouseClickXX=0,this.mouseClickXY=0,this.privateMessageTarget=new _$Long_134(0),this.controlListQuest=0,this.controlListMagic=0,this.packetErrorCount=0,this.mouseButtonDownTime=0,this.mouseButtonItemCountIncrement=0,this.animationIndex=0,this.cameraRotationX=0,this.tradeConfirmAccepted=!1,this.appearanceHeadType=0,this.appearanceSkinColour=0,this.anInt707=0,this.deathScreenTimeout=0,this.cameraRotationY=0,this.welcomeUnreadMessages=0,this.logoutTimeout=0,this.tradeRecipientConfirmHash=new _$Long_134(0),this.loginTimer=0,this.npcCombatModelArray1=new Int32Array([0,1,2,1,0,0,0,0]),this.npcCombatModelArray2=new Int32Array([0,0,0,0,0,1,2,1]),this.systemUpdate=0,this.graphics=null,this.regionX=0,this.regionY=0,this.welcomScreenAlreadyShown=!1,this.mouseButtonClick=0,this.healthBarCount=0,this.spriteMedia=0,this.spriteUtil=0,this.spriteItem=0,this.spriteProjectile=0,this.spriteTexture=0,this.spriteTextureWorld=0,this.spriteLogo=0,this.teleportBubbleCount=0,this.mouseClickCount=0,this.shopSellPriceMod=0,this.shopBuyPriceMod=0,this.duelOptionRetreat=0,this.duelOptionMagic=0,this.duelOptionPrayer=0,this.duelOptionWeapons=0,this.groundItemCount=0,this.receivedMessagesCount=0,this.messageTabFlashAll=0,this.messageTabFlashHistory=0,this.messageTabFlashQuest=0,this.messageTabFlashPrivate=0,this.bankItemCount=0,this.objectAnimationNumberFireLightningSpell=0,this.objectAnimationNumberTorch=0,this.objectAnimationNumberClaw=0,this.loggedIn=0,this.npcCount=0,this.npcCacheCount=0,this.objectAnimationCount=0,this.tradeConfirmItemsCount=0,this.mouseClickXStep=0,this.newBankItemCount=0,this.npcAnimationArray=[new Int32Array([11,2,9,7,1,6,10,0,5,8,3,4]),new Int32Array([11,2,9,7,1,6,10,0,5,8,3,4]),new Int32Array([11,3,2,9,7,1,6,10,0,5,8,4]),new Int32Array([3,4,2,9,7,1,6,10,8,11,0,5]),new Int32Array([3,4,2,9,7,1,6,10,8,11,0,5]),new Int32Array([4,3,2,9,7,1,6,10,8,11,0,5]),new Int32Array([11,4,2,9,7,1,6,10,0,5,8,3]),new Int32Array([11,2,9,7,1,6,10,0,5,8,4,3])],this.npcWalkModel=new Int32Array([0,1,2,1]),this.referID=0,this.combatTimeout=0,this.optionMenuCount=0,this.errorLoadingCodebase=!1,this.cameraRotationTime=0,this.duelOpponentItemsCount=0,this.duelItemsCount=0,this.duelOfferOpponentItemCount=0,this.characterHairColours=new Int32Array([16760880,16752704,8409136,6307872,3158064,16736288,16728064,16777215,65280,65535]),this.characterTopBottomColours=new Int32Array([16711680,16744448,16769024,10543104,57344,32768,41088,45311,33023,12528,14680288,3158064,6307840,8409088,16777215]),this.characterSkinColours=new Int32Array([15523536,13415270,11766848,10056486,9461792]),this.itemsAboveHeadCount=0,this.statFatigue=0,this.fatigueSleeping=0,this.tradeRecipientConfirmItemsCount=0,this.tradeRecipientItemsCount=0,this.showDialogServerMessage=!1,this.menuX=0,this.menuY=0,this.menuWidth=0,this.menuHeight=0,this.menuItemsCount=0,this.showUITab=0,this.tradeItemsCount=0,this.planeWidth=0,this.planeHeight=0,this.planeMultiplier=0,this.playerQuestPoints=0,this.welcomeLastLoggedInDays=0,this.inventoryItemsCount=0,this.duelOpponentNameHash=new _$Long_134(0),this.minimapRandom1=0,this.minimapRandom2=0,this.objectCount=0,this.duelOfferItemCount=0,this.cameraAutoRotatePlayerX=0,this.cameraAutoRotatePlayerY=0,this.playerCount=0,this.knownPlayerCount=0,this.spriteCount=0,this.wallObjectCount=0,this.welcomeRecoverySetDays=0,this.localLowerX=0,this.localLowerY=0,this.localUpperX=0,this.localUpperY=0,this.world=null,this.welcomeLastLoggedInIP=0,this.sleepWordDelayTimer=0,this.menuIndices=new Int32Array(MENU_MAX),this.cameraAutoAngleDebug=!1,this.wallObjectDirection=new Int32Array(WALL_OBJECTS_MAX),this.wallObjectId=new Int32Array(WALL_OBJECTS_MAX),this.cameraRotationXIncrement=2,this.inventoryMaxItemCount=30,this.bankItemsMax=48,this.optionMenuEntry=[],this.optionMenuEntry.length=5,this.optionMenuEntry.fill(null),this.newBankItems=new Int32Array(256),this.newBankItemsCount=new Int32Array(256),this.teleportBubbleTime=new Int32Array(50),this.receivedMessageX=new Int32Array(50),this.receivedMessageY=new Int32Array(50),this.receivedMessageMidPoint=new Int32Array(50),this.receivedMessageHeight=new Int32Array(50),this.localPlayer=new _$gameCharacter_210,this.localPlayerServerIndex=-1,this.menuItemX=new Int32Array(MENU_MAX),this.menuItemY=new Int32Array(MENU_MAX),this.bankItems=new Int32Array(256),this.bankItemsCount=new Int32Array(256),this.appearanceBodyGender=1,this.appearance2Colour=2,this.appearanceHairColour=2,this.appearanceTopColour=8,this.appearanceBottomColour=14,this.appearanceHeadGender=1,this.loginUser="",this.loginPass="",this.cameraAngle=1,this.members=!1,this.optionSoundDisabled=!1,this.showRightClickMenu=!1,this.cameraRotationYIncrement=2,this.objectAlreadyInMenu=new Int8Array(OBJECTS_MAX),this.menuItemText1=[],this.menuItemText1.length=MENU_MAX,this.menuItemText1.fill(null),this.duelOpponentName="",this.lastObjectAnimationNumberFireLightningSpell=-1,this.lastObjectAnimationNumberTorch=-1,this.lastObjectAnimationNumberClaw=-1,this.planeIndex=-1,this.cameraRotation=128,this.teleportBubbleX=new Int32Array(50),this.errorLoadingData=!1,this.playerExperience=new Int32Array(PLAYER_STAT_COUNT),this.tradeRecipientAccepted=!1,this.tradeAccepted=!1,this.mouseClickXHistory=new Int32Array(8192),this.mouseClickYHistory=new Int32Array(8192),this.playerServerIndexes=new Int32Array(PLAYERS_MAX),this.teleportBubbleY=new Int32Array(50),this.receivedMessages=[],this.receivedMessages.length=50,this.receivedMessages.fill(null),this.showDialogDuelConfirm=!1,this.duelAccepted=!1,this.players=[],this.players.length=PLAYERS_MAX,this.players.fill(null),this.prayerOn=new Int8Array(50),this.menuIndex=new Int32Array(MENU_MAX),this.menuSourceIndex=new Int32Array(MENU_MAX),this.menuTargetIndex=new Int32Array(MENU_MAX),this.wallObjectAlreadyInMenu=new Int8Array(WALL_OBJECTS_MAX),this.magicLoc=128,this.errorLoadingMemory=!1,this.fogOfWar=!1,this.gameWidth=512,this.gameHeight=334,this.tradeConfirmItems=new Int32Array(14),this.tradeConfirmItemCount=new Int32Array(14),this.tradeRecipientName="",this.selectedSpell=-1,this.showOptionMenu=!1,this.playerStatCurrent=new Int32Array(PLAYER_STAT_COUNT),this.teleportBubbleType=new Int32Array(50),this.showDialogShop=!1,this.shopItem=new Int32Array(256),this.shopItemCount=new Int32Array(256),this.shopItemPrice=new Int32Array(256),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1,this.gameModels=[],this.gameModels.length=GAME_OBJECTS_MAX,this.gameModels.fill(null),this.showDialogDuel=!1,this.serverMessage="",this.duelOpponentItems=new Int32Array(8),this.duelOpponentItemCount=new Int32Array(8),this.duelItems=new Int32Array(8),this.duelItemCount=new Int32Array(8),this.playerStatBase=new Int32Array(PLAYER_STAT_COUNT),this.npcsCache=[],this.npcsCache.length=NPCS_MAX,this.npcsCache.fill(null),this.groundItemX=new Int32Array(GROUND_ITEMS_MAX),this.groundItemY=new Int32Array(GROUND_ITEMS_MAX),this.groundItemID=new Int32Array(GROUND_ITEMS_MAX),this.groundItemZ=new Int32Array(GROUND_ITEMS_MAX),this.bankSelectedItemSlot=-1,this.bankSelectedItem=-2,this.duelOfferOpponentItemId=new Int32Array(8),this.duelOfferOpponentItemStack=new Int32Array(8),this.messageHistoryTimeout=new Int32Array(5),this.optionCameraModeAuto=!0,this.objectX=new Int32Array(OBJECTS_MAX),this.objectY=new Int32Array(OBJECTS_MAX),this.objectId=new Int32Array(OBJECTS_MAX),this.objectDirection=new Int32Array(OBJECTS_MAX),this.selectedItemInventoryIndex=-1,this.selectedItemName="",this.loadingArea=!1,this.tradeRecipientConfirmItems=new Int32Array(14),this.tradeRecipientConfirmItemCount=new Int32Array(14),this.tradeRecipientItems=new Int32Array(14),this.tradeRecipientItemCount=new Int32Array(14),this.showDialogServerMessage=!1,this.menuType=new Int32Array(MENU_MAX),this.questComplete=new Int8Array(QUEST_COUNT),this.wallObjectModel=[],this.wallObjectModel.length=WALL_OBJECTS_MAX,this.wallObjectModel.fill(null),this.actionBubbleX=new Int32Array(50),this.actionBubbleY=new Int32Array(50),this.cameraZoom=ZOOM_INDOORS,this.tradeItems=new Int32Array(14),this.tradeItemCount=new Int32Array(14),this.lastHeightOffset=-1,this.duelSettingsRetreat=!1,this.duelSettingsMagic=!1,this.duelSettingsPrayer=!1,this.duelSettingsWeapons=!1,this.showDialogBank=!1,this.loginUserDesc="",this.loginUserDisp="",this.optionMouseButtonOne=!1,this.inventoryItemId=new Int32Array(35),this.inventoryItemStackCount=new Int32Array(35),this.inventoryEquipped=new Int32Array(35),this.knownPlayers=[],this.knownPlayers.length=PLAYERS_MAX,this.knownPlayers.fill(null),this.messageHistory=[],this.messageHistory.length=5,this.messageHistory.fill(null),this.duelOfferItemId=new Int32Array(8),this.duelOfferItemStack=new Int32Array(8),this.actionBubbleScale=new Int32Array(50),this.actionBubbleItem=new Int32Array(50),this.sleepWordDelay=!0,this.showAppearanceChange=!1,this.shopSelectedItemIndex=-1,this.shopSelectedItemType=-2,this.projectileMaxRange=40,this.npcs=[],this.npcs.length=NPCS_MAX,this.npcs.fill(null),this.experienceArray=new Int32Array(99),this.healthBarX=new Int32Array(50),this.healthBarY=new Int32Array(50),this.healthBarMissing=new Int32Array(50),this.playerServer=[],this.playerServer.length=PLAYERS_SERVER_MAX,this.playerServer.fill(null),this.walkPathX=new Int32Array(PATH_STEPS_MAX),this.walkPathY=new Int32Array(PATH_STEPS_MAX),this.wallObjectX=new Int32Array(WALL_OBJECTS_MAX),this.wallObjectY=new Int32Array(WALL_OBJECTS_MAX),this.menuItemText2=[],this.menuItemText2.length=MENU_MAX,this.menuItemText2.fill(null),this.npcsServer=[],this.npcsServer.length=NPCS_SERVER_MAX,this.npcsServer.fill(null),this.playerStatEquipment=new Int32Array(PLAYER_STAT_EQUIPMENT_COUNT),this.objectModel=[],this.objectModel.length=OBJECTS_MAX,this.objectModel.fill(null),this.playerMsgHistory=[],this.playerMsgPtr=0,this.recoveryQuestions=["Where were you born?","What was your first teachers name?","What is your fathers middle name?","Who was your first best friend?","What is your favourite vacation spot?","What is your mothers middle name?","What was your first pets name?","What was the name of your first school?","What is your mothers maiden name?","Who was your first boyfriend/girlfriend?","What was the first computer game you purchased?","Who is your favourite actor/actress?","Who is your favourite author?","Who is your favourite musician?","Who is your favourite cartoon character?","What is your favourite book?","What is your favourite food?","What is your favourite movie?"],this.showRecoverChange=!1,this.recoverCustomQuestionIndex=-1,this.showChangePasswordStep=0,this.changePasswordOld="",this.changePasswordNew="",this.welcomeTipDay=0}playSoundFile(t){if(!this.audioPlayer||this.optionSoundDisabled)return;const e=t+".pcm";this.audioPlayer.writeStream(this.soundData,_$utility_288.getDataFileOffset(e,this.soundData),_$utility_288.getDataFileLength(e,this.soundData))}_walkToActionSource_from8(t,e,i,r,s,n,o,a){let h=this.world.route(t,e,i,r,s,n,this.walkPathX,this.walkPathY,o);if(-1===h){if(!a)return!1;h=1,this.walkPathX[0]=i,this.walkPathY[0]=r}h--,t=this.walkPathX[h],e=this.walkPathY[h],h--,a?this.packetStream.newPacket(__clientOpcodes_222.WALK_ACTION):this.packetStream.newPacket(__clientOpcodes_222.WALK),this.packetStream.putShort(t+this.regionX),this.packetStream.putShort(e+this.regionY),a&&-1===h&&(t+this.regionX)%5==0&&(h=0);for(let u=h;u>=0&&u>h-25;u--)this.packetStream.putByte(this.walkPathX[u]-t),this.packetStream.putByte(this.walkPathY[u]-e);return this.packetStream.sendPacket(),this.mouseClickXStep=-24,this.mouseClickXX=this.mouseX,this.mouseClickXY=this.mouseY,!0}walkTo(t,e,i,r,s,n,o,a){let h=this.world.route(t,e,i,r,s,n,this.walkPathX,this.walkPathY,o);if(-1===h)return!1;h--,t=this.walkPathX[h],e=this.walkPathY[h],h--,a?this.packetStream.newPacket(__clientOpcodes_222.WALK_ACTION):this.packetStream.newPacket(__clientOpcodes_222.WALK),this.packetStream.putShort(t+this.regionX),this.packetStream.putShort(e+this.regionY),a&&-1===h&&(t+this.regionX)%5==0&&(h=0);for(let u=h;u>=0&&u>h-25;u--)this.packetStream.putByte(this.walkPathX[u]-t),this.packetStream.putByte(this.walkPathY[u]-e);return this.packetStream.sendPacket(),this.mouseClickXStep=-24,this.mouseClickXX=this.mouseX,this.mouseClickXY=this.mouseY,!0}updateBankItems(){this.bankItemCount=this.newBankItemCount;for(let t=0;t<this.newBankItemCount;t++)this.bankItems[t]=this.newBankItems[t],this.bankItemsCount[t]=this.newBankItemsCount[t];for(let t=0;t<this.inventoryItemsCount&&!(this.bankItemCount>=this.bankItemsMax);t++){const e=this.inventoryItemId[t];let i=!1;for(let t=0;t<this.bankItemCount;t++)if(this.bankItems[t]===e){i=!0;break}i||(this.bankItems[this.bankItemCount]=e,this.bankItemsCount[this.bankItemCount]=0,this.bankItemCount++)}}drawAboveHeadStuff(){for(let t=0;t<this.receivedMessagesCount;t++){const e=this.surface.textHeight(1),i=this.receivedMessageX[t];let r=this.receivedMessageY[t];const s=this.receivedMessageMidPoint[t],n=this.receivedMessageHeight[t];let o=!0;for(;o;){o=!1;for(let a=0;a<t;a++)r+n>this.receivedMessageY[a]-e&&r-e<this.receivedMessageY[a]+this.receivedMessageHeight[a]&&i-s<this.receivedMessageX[a]+this.receivedMessageMidPoint[a]&&i+s>this.receivedMessageX[a]-this.receivedMessageMidPoint[a]&&this.receivedMessageY[a]-e-n<r&&(r=this.receivedMessageY[a]-e-n,o=!0)}this.receivedMessageY[t]=r,this.surface.drawParagraph(this.receivedMessages[t],i,r,1,16776960,300)}for(let t=0;t<this.itemsAboveHeadCount;t++){const e=this.actionBubbleX[t],i=this.actionBubbleY[t],r=this.actionBubbleScale[t],s=this.actionBubbleItem[t],n=39*r/100|0,o=27*r/100|0;this.surface.drawActionBubble(e-(n/2|0),i-o,n,o,this.spriteMedia+9,85);const a=36*r/100|0,h=24*r/100|0;this.surface._spriteClipping_from9(e-(a/2|0),i-o+(o/2|0)-(h/2|0),a,h,_$gameData_212.itemPicture[s]+this.spriteItem,_$gameData_212.itemMask[s],0,0,!1)}for(let t=0;t<this.healthBarCount;t++){const e=this.healthBarX[t],i=this.healthBarY[t],r=this.healthBarMissing[t];this.surface.drawBoxAlpha(e-15,i-3,r,5,65280,192),this.surface.drawBoxAlpha(e-15+r,i-3,30-r,5,16711680,192)}}_walkToActionSource_from5(t,e,i,r,s){this._walkToActionSource_from8(t,e,i,r,i,r,!1,s)}disposeAndCollect(){this.surface&&(this.surface.clear(),this.surface.pixels=null,this.surface=null),this.scene&&(this.scene.dispose(),this.scene=null),this.gameModels=null,this.objectModel=null,this.wallObjectModel=null,this.playerServer=null,this.players=null,this.npcsServer=null,this.npcs=null,this.localPlayer=null,this.world&&(this.world.terrainModels=null,this.world.wallModels=null,this.world.roofModels=null,this.world.parentModel=null,this.world=null)}drawUI(){if(0!==this.logoutTimeout)this.drawDialogLogout();else if(this.showDialogWelcome)this.drawDialogWelcome();else if(this.showDialogServerMessage)this.drawDialogServerMessage();else if(1===this.showUiWildWarn)this.drawDialogWildWarn();else if(this.showDialogBank&&0===this.combatTimeout)this.drawDialogBank();else if(this.showDialogShop&&0===this.combatTimeout)this.drawDialogShop();else if(this.showDialogTradeConfirm)this.drawDialogTradeConfirm();else if(this.showDialogTrade)this.drawDialogTrade();else if(this.showDialogDuelConfirm)this.drawDialogDuelConfirm();else if(this.showDialogDuel)this.drawDialogDuel();else if(1===this.showDialogReportAbuseStep)this.drawDialogReportAbuse();else if(2===this.showDialogReportAbuseStep)this.drawDialogReportAbuseInput();else if(0!==this.showChangePasswordStep)this.drawDialogChangePassword();else if(0!==this.showDialogSocialInput)this.drawDialogSocialInput();else{this.showOptionMenu&&(this.drawOptionMenu(),this.options.mobile&&(this.showUITab=0)),8!==this.localPlayer.animationCurrent&&9!==this.localPlayer.animationCurrent||this.drawDialogCombatStyle(),this.options.mobile?this.showOptionMenu||this.setActiveMobileUITab():this.setActiveUITab();const t=!this.showOptionMenu&&!this.showRightClickMenu;if(t&&(this.menuItemsCount=0),0===this.showUITab&&t&&this.createRightClickMenu(),1===this.showUITab?this.drawUiTabInventory(t):2===this.showUITab?this.drawUiTabMinimap(t):3===this.showUITab?this.drawUiTabPlayerInfo(t):4===this.showUITab?this.drawUiTabMagic(t):5===this.showUITab?this.drawUiTabSocial(t):6===this.showUITab&&this.drawUiTabOptions(t),this.showOptionMenu||(this.showRightClickMenu?this.drawRightClickMenu():this.createTopMouseMenu()),this.menuActionTimeout){const t=this.menuX<=this.gameWidth/2?8:-this.menuTextWidth-8;this.surface.drawBoxAlpha(t+this.menuX-4,this.menuY-4,this.menuTextWidth+4,18,12500670,192),this.surface.drawString(this.menuText,t+this.menuX-2,this.menuY+10,1,16777215),this.menuActionTimeout-=1}}this.mouseButtonClick=0}resetGame(){this.systemUpdate=0,this.combatStyle=0,this.logoutTimeout=0,this.loginScreen=0,this.loggedIn=1,this.resetPMText(),this.surface.blackScreen(),this.surface.draw(this.graphics,0,0);for(let t=0;t<this.objectCount;t++)this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]);for(let t=0;t<this.wallObjectCount;t++)this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]);this.objectCount=0,this.wallObjectCount=0,this.groundItemCount=0,this.playerCount=0;for(let t=0;t<PLAYERS_SERVER_MAX;t++)this.playerServer[t]=null;for(let t=0;t<PLAYERS_MAX;t++)this.players[t]=null;this.npcCount=0;for(let t=0;t<NPCS_SERVER_MAX;t++)this.npcsServer[t]=null;for(let t=0;t<NPCS_MAX;t++)this.npcs[t]=null;for(let t=0;t<this.prayerOn.length;t++)this.prayerOn[t]=!1;this.mouseButtonClick=0,this.lastMouseButtonDown=0,this.mouseButtonDown=0,this.showDialogShop=!1,this.showDialogBank=!1,this.isSleeping=!1,this.friendListCount=0}handleKeyPress(t){if(0===this.loggedIn&&(0===this.loginScreen&&this.panelLoginWelcome&&this.panelLoginWelcome.keyPress(t),1===this.loginScreen&&this.panelLoginNewUser&&this.panelLoginNewUser.keyPress(t),2===this.loginScreen&&this.panelLoginExistingUser&&this.panelLoginExistingUser.keyPress(t),3===this.loginScreen&&this.panelRecoverUser&&this.panelRecoverUser.keyPress(t)),1===this.loggedIn){if(this.showAppearanceChange&&this.panelAppearance)return void this.panelAppearance.keyPress(t);0===this.showChangePasswordStep&&0===this.showDialogSocialInput&&0===this.showDialogReportAbuseStep&&!this.isSleeping&&this.panelMessageTabs&&this.panelMessageTabs.keyPress(t),3!==this.showChangePasswordStep&&4!==this.showChangePasswordStep||(this.showChangePasswordStep=0)}}sendLogout(){if(0!==this.loggedIn){if(!(this.combatTimeout>450))return this.combatTimeout>0?void this.showMessage("@cya@You can't logout for 10 seconds after combat",3):(this.packetStream.newPacket(__clientOpcodes_222.LOGOUT),this.packetStream.sendPacket(),void(this.logoutTimeout=1e3));this.showMessage("@cya@You can't logout during combat!",3)}}createPlayer(t,e,i,r){null===this.playerServer[t]&&(this.playerServer[t]=new _$gameCharacter_210,this.playerServer[t].serverIndex=t,this.playerServer[t].serverId=0);const s=this.playerServer[t];let n=!1;for(let o=0;o<this.knownPlayerCount;o++)if(this.knownPlayers[o].serverIndex===t){n=!0;break}if(n){s.animationNext=r;let t=s.waypointCurrent;e===s.waypointsX[t]&&i===s.waypointsY[t]||(s.waypointCurrent=t=(t+1)%10,s.waypointsX[t]=e,s.waypointsY[t]=i)}else s.serverIndex=t,s.movingStep=0,s.waypointCurrent=0,s.waypointsX[0]=s.currentX=e,s.waypointsY[0]=s.currentY=i,s.animationNext=s.animationCurrent=r,s.stepCount=0;return this.players[this.playerCount++]=s,s}drawItem(t,e,i,r,s){const n=_$gameData_212.itemPicture[s]+this.spriteItem,o=_$gameData_212.itemMask[s];this.surface._spriteClipping_from9(t,e,i,r,n,o,0,0,!1)}async handleGameInput(){if(this.systemUpdate>1&&this.systemUpdate--,await this.checkConnection(),this.logoutTimeout>0&&this.logoutTimeout--,this.mouseActionTimeout>4500&&0===this.combatTimeout&&0===this.logoutTimeout)return this.mouseActionTimeout-=500,void this.sendLogout();if(8!==this.localPlayer.animationCurrent&&9!==this.localPlayer.animationCurrent||(this.combatTimeout=500),this.combatTimeout>0&&this.combatTimeout--,this.showAppearanceChange)this.handleAppearancePanelInput();else{for(let t=0;t<this.playerCount;t++){const e=this.players[t];if(!e)return void console.log("null character at ",t,this.playerCount);let i=(e.waypointCurrent+1)%10;if(e.movingStep!==i){let t,r=-1,s=e.movingStep,n=4;(t=s<i?i-s:10+i-s)>2&&(n=4*(t-1)),e.waypointsX[s]-e.currentX>3*this.magicLoc||e.waypointsY[s]-e.currentY>3*this.magicLoc||e.waypointsX[s]-e.currentX<3*-this.magicLoc||e.waypointsY[s]-e.currentY<3*-this.magicLoc||t>8?(e.currentX=e.waypointsX[s],e.currentY=e.waypointsY[s]):(e.currentX<e.waypointsX[s]?(e.currentX+=n,e.stepCount++,r=2):e.currentX>e.waypointsX[s]&&(e.currentX-=n,e.stepCount++,r=6),e.currentX-e.waypointsX[s]<n&&e.currentX-e.waypointsX[s]>-n&&(e.currentX=e.waypointsX[s]),e.currentY<e.waypointsY[s]?(e.currentY+=n,e.stepCount++,r=-1===r?4:2===r?3:5):e.currentY>e.waypointsY[s]&&(e.currentY-=n,e.stepCount++,r=-1===r?0:2===r?1:7),e.currentY-e.waypointsY[s]<n&&e.currentY-e.waypointsY[s]>-n&&(e.currentY=e.waypointsY[s])),-1!==r&&(e.animationCurrent=r),e.currentX===e.waypointsX[s]&&e.currentY===e.waypointsY[s]&&(e.movingStep=(s+1)%10)}else e.animationCurrent=e.animationNext;e.messageTimeout>0&&e.messageTimeout--,e.bubbleTimeout>0&&e.bubbleTimeout--,e.combatTimer>0&&e.combatTimer--,this.deathScreenTimeout>0&&(this.deathScreenTimeout--,0===this.deathScreenTimeout&&(this.showMessage("You have been granted another life. Be more careful this time!",3),this.showMessage("You retain your skills. Your objects land where you died",3)))}for(let t=0;t<this.npcCount;t++){const e=this.npcs[t];let i=(e.waypointCurrent+1)%10;if(e.movingStep!==i){let t,r=-1,s=e.movingStep,n=4;(t=s<i?i-s:10+i-s)>2&&(n=4*(t-1)),e.waypointsX[s]-e.currentX>3*this.magicLoc||e.waypointsY[s]-e.currentY>3*this.magicLoc||e.waypointsX[s]-e.currentX<3*-this.magicLoc||e.waypointsY[s]-e.currentY<3*-this.magicLoc||t>8?(e.currentX=e.waypointsX[s],e.currentY=e.waypointsY[s]):(e.currentX<e.waypointsX[s]?(e.currentX+=n,e.stepCount++,r=2):e.currentX>e.waypointsX[s]&&(e.currentX-=n,e.stepCount++,r=6),e.currentX-e.waypointsX[s]<n&&e.currentX-e.waypointsX[s]>-n&&(e.currentX=e.waypointsX[s]),e.currentY<e.waypointsY[s]?(e.currentY+=n,e.stepCount++,r=-1===r?4:2===r?3:5):e.currentY>e.waypointsY[s]&&(e.currentY-=n,e.stepCount++,r=-1===r?0:2===r?1:7),e.currentY-e.waypointsY[s]<n&&e.currentY-e.waypointsY[s]>-n&&(e.currentY=e.waypointsY[s])),-1!==r&&(e.animationCurrent=r),e.currentX===e.waypointsX[s]&&e.currentY===e.waypointsY[s]&&(e.movingStep=(s+1)%10)}else e.animationCurrent=e.animationNext,43===e.npcId&&e.stepCount++;e.messageTimeout>0&&e.messageTimeout--,e.bubbleTimeout>0&&e.bubbleTimeout--,e.combatTimer>0&&e.combatTimer--}2!==this.showUITab&&(_$Surface_259.anInt346>0&&this.sleepWordDelayTimer++,_$Surface_259.anInt347>0&&(this.sleepWordDelayTimer=0),_$Surface_259.anInt346=0,_$Surface_259.anInt347=0);for(let t=0;t<this.playerCount;t++){const e=this.players[t];e.projectileRange>0&&e.projectileRange--}if(this.cameraAutoAngleDebug)(this.cameraAutoRotatePlayerX-this.localPlayer.currentX<-500||this.cameraAutoRotatePlayerX-this.localPlayer.currentX>500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY<-500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY>500)&&(this.cameraAutoRotatePlayerX=this.localPlayer.currentX,this.cameraAutoRotatePlayerY=this.localPlayer.currentY);else if((this.cameraAutoRotatePlayerX-this.localPlayer.currentX<-500||this.cameraAutoRotatePlayerX-this.localPlayer.currentX>500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY<-500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY>500)&&(this.cameraAutoRotatePlayerX=this.localPlayer.currentX,this.cameraAutoRotatePlayerY=this.localPlayer.currentY),this.cameraAutoRotatePlayerX!==this.localPlayer.currentX&&(this.cameraAutoRotatePlayerX+=(this.localPlayer.currentX-this.cameraAutoRotatePlayerX)/(16+((this.cameraZoom-500)/15|0))|0),this.cameraAutoRotatePlayerY!==this.localPlayer.currentY&&(this.cameraAutoRotatePlayerY+=(this.localPlayer.currentY-this.cameraAutoRotatePlayerY)/(16+((this.cameraZoom-500)/15|0))|0),this.optionCameraModeAuto){let t=32*this.cameraAngle-this.cameraRotation,e=1;0!==t?(this.anInt707++,t>128?(e=-1,t=256-t):t>0?e=1:t<-128?(e=1,t=256+t):t<0&&(e=-1,t=-t),this.cameraRotation+=((this.anInt707*t+255)/256|0)*e,this.cameraRotation&=255):this.anInt707=0}if(this.sleepWordDelayTimer>20&&(this.sleepWordDelay=!1,this.sleepWordDelayTimer=0),this.isSleeping)this.handleSleepInput();else{if(await this.handleMesssageTabsInput(),0!==this.deathScreenTimeout&&(this.lastMouseButtonDown=0),this.showDialogTrade||this.showDialogDuel?(0!==this.mouseButtonDown?this.mouseButtonDownTime++:this.mouseButtonDownTime=0,this.mouseButtonDownTime>600?this.mouseButtonItemCountIncrement+=5e3:this.mouseButtonDownTime>450?this.mouseButtonItemCountIncrement+=500:this.mouseButtonDownTime>300?this.mouseButtonItemCountIncrement+=50:this.mouseButtonDownTime>150?this.mouseButtonItemCountIncrement+=5:(this.mouseButtonDownTime>50||this.mouseButtonDownTime>20&&0==(5&this.mouseButtonDownTime))&&this.mouseButtonItemCountIncrement++):(this.mouseButtonDownTime=0,this.mouseButtonItemCountIncrement=0),1===this.lastMouseButtonDown?this.mouseButtonClick=1:2===this.lastMouseButtonDown&&(this.mouseButtonClick=2),this.scene.setMouseLoc(this.mouseX,this.mouseY),this.lastMouseButtonDown=0,this.optionCameraModeAuto){if(0===this.anInt707||this.cameraAutoAngleDebug){if(this.keyLeft&&(this.cameraAngle=this.cameraAngle+1&7,this.keyLeft=!1,!this.fogOfWar)){0==(1&this.cameraAngle)&&(this.cameraAngle=this.cameraAngle+1&7);for(let t=0;t<8&&!this.isValidCameraAngle(this.cameraAngle);t++)this.cameraAngle=this.cameraAngle+1&7}if(this.keyRight&&(this.cameraAngle=this.cameraAngle+7&7,this.keyRight=!1,!this.fogOfWar)){0==(1&this.cameraAngle)&&(this.cameraAngle=this.cameraAngle+7&7);for(let t=0;t<8&&!this.isValidCameraAngle(this.cameraAngle);t++)this.cameraAngle=this.cameraAngle+7&7}}}else this.keyLeft?this.cameraRotation=this.cameraRotation+2&255:this.keyRight&&(this.cameraRotation=this.cameraRotation-2&255);!this.optionCameraModeAuto&&this.options.middleClickCamera&&this.middleButtonDown&&(this.cameraRotation=this.originRotation+(this.mouseX-this.originMouseX)/2&255),this.options.zoomCamera?this.handleCameraZoom():this.fogOfWar&&this.cameraZoom>ZOOM_INDOORS?this.cameraZoom-=4:!this.fogOfWar&&this.cameraZoom<ZOOM_OUTDOORS&&(this.cameraZoom+=4),this.mouseClickXStep>0?this.mouseClickXStep--:this.mouseClickXStep<0&&this.mouseClickXStep++,this.scene.doSOemthingWithTheFuckinFountainFuck(17),this.objectAnimationCount++,this.objectAnimationCount>5&&(this.objectAnimationCount=0,this.objectAnimationNumberFireLightningSpell=(this.objectAnimationNumberFireLightningSpell+1)%3,this.objectAnimationNumberTorch=(this.objectAnimationNumberTorch+1)%4,this.objectAnimationNumberClaw=(this.objectAnimationNumberClaw+1)%5);for(let t=0;t<this.objectCount;t++){const e=this.objectX[t],i=this.objectY[t];e>=0&&i>=0&&e<96&&i<96&&74===this.objectId[t]&&this.objectModel[t].rotate(1,0,0)}for(let t=0;t<this.teleportBubbleCount;t++)if(this.teleportBubbleTime[t]++,this.teleportBubbleTime[t]>50){this.teleportBubbleCount--;for(let e=t;e<this.teleportBubbleCount;e++)this.teleportBubbleX[e]=this.teleportBubbleX[e+1],this.teleportBubbleY[e]=this.teleportBubbleY[e+1],this.teleportBubbleTime[e]=this.teleportBubbleTime[e+1],this.teleportBubbleType[e]=this.teleportBubbleType[e+1]}}}}handleCameraZoom(){if(this.keyUp&&!this.ctrl?this.cameraZoom-=16:this.keyDown&&!this.ctrl?this.cameraZoom+=16:this.keyHome?this.cameraZoom=ZOOM_OUTDOORS:this.keyPgUp?this.cameraZoom=ZOOM_MIN:this.keyPgDown&&(this.cameraZoom=ZOOM_MAX),0!==this.mouseScrollDelta&&(2===this.showUITab||0===this.showUITab)){if(0!==this.messageTabSelected&&(this.options.mobile&&this.mouseY<70||!this.options.mobile&&this.mouseY>this.gameHeight-64))return;this.cameraZoom+=24*this.mouseScrollDelta}this.cameraZoom>=ZOOM_MAX?this.cameraZoom=ZOOM_MAX:this.cameraZoom<=ZOOM_MIN&&(this.cameraZoom=ZOOM_MIN)}autoRotateCamera(){if(1==(1&this.cameraAngle)&&this.isValidCameraAngle(this.cameraAngle))return;if(0==(1&this.cameraAngle)&&this.isValidCameraAngle(this.cameraAngle))return this.isValidCameraAngle(this.cameraAngle+1&7)?void(this.cameraAngle=this.cameraAngle+1&7):void(this.isValidCameraAngle(this.cameraAngle+7&7)&&(this.cameraAngle=this.cameraAngle+7&7));let t=new Int32Array([1,-1,2,-2,3,-3,4]);for(let e=0;e<7;e++)if(this.isValidCameraAngle(this.cameraAngle+t[e]+8&7)){this.cameraAngle=this.cameraAngle+t[e]+8&7;break}if(0==(1&this.cameraAngle)&&this.isValidCameraAngle(this.cameraAngle)){if(this.isValidCameraAngle(this.cameraAngle+1&7))return void(this.cameraAngle=this.cameraAngle+1&7);this.isValidCameraAngle(this.cameraAngle+7&7)&&(this.cameraAngle=this.cameraAngle+7&7)}}drawRightClickMenu(){if(0!==this.mouseButtonClick){for(let t=0;t<this.menuItemsCount;t++){const e=this.menuX+2,i=this.menuY+27+15*t;if(!(this.mouseX<=e-2||this.mouseY<=i-12||this.mouseY>=i+4||this.mouseX>=e-3+this.menuWidth)){this.menuItemClick(this.menuIndices[t]);break}}return this.mouseButtonClick=0,void(this.showRightClickMenu=!1)}if(this.mouseX<this.menuX-10||this.mouseY<this.menuY-10||this.mouseX>this.menuX+this.menuWidth+10||this.mouseY>this.menuY+this.menuHeight+10)this.showRightClickMenu=!1;else{this.surface.drawBoxAlpha(this.menuX,this.menuY,this.menuWidth,this.menuHeight,13684944,160),this.surface.drawString("Choose option",this.menuX+2,this.menuY+12,1,65535);for(let t=0;t<this.menuItemsCount;t++){const e=this.menuX+2,i=this.menuY+27+15*t;let r=16777215;this.mouseX>e-2&&this.mouseY>i-12&&this.mouseY<i+4&&this.mouseX<e-3+this.menuWidth&&(r=16776960),this.surface.drawString(this.menuItemText1[this.menuIndices[t]]+" "+this.menuItemText2[this.menuIndices[t]],e,i,1,r)}}}drawNpc(t,e,i,r,s,n,o){const a=this.npcs[s];let h=a.animationCurrent+(this.cameraRotation+16)/32&7,u=!1,l=h;5===l?(l=3,u=!0):6===l?(l=2,u=!0):7===l&&(l=1,u=!0);let c=3*l+this.npcWalkModel[(a.stepCount/_$gameData_212.npcWalkModel[a.npcId]|0)%4];8===a.animationCurrent?(l=5,h=2,u=!1,t-=_$gameData_212.npcCombatAnimation[a.npcId]*o/100|0,c=3*l+this.npcCombatModelArray1[((this.loginTimer/_$gameData_212.npcCombatModel[a.npcId]|0)-1)%8]):9===a.animationCurrent&&(l=5,h=2,u=!0,t+=_$gameData_212.npcCombatAnimation[a.npcId]*o/100|0,c=3*l+this.npcCombatModelArray2[(this.loginTimer/_$gameData_212.npcCombatModel[a.npcId]|0)%8]);for(let f=0;f<12;f++){let s=this.npcAnimationArray[h][f],o=_$gameData_212.npcSprite.get(a.npcId,s);if(o>=0){let s=0,h=0,f=c;if(u&&l>=1&&l<=3&&1===_$gameData_212.animationHasF[o]&&(f+=15),5!==l||1===_$gameData_212.animationHasA[o]){let l=f+_$gameData_212.animationNumber[o];s=s*i/this.surface.spriteWidthFull[l]|0,h=h*r/this.surface.spriteHeightFull[l]|0;let c=i*this.surface.spriteWidthFull[l]/this.surface.spriteWidthFull[_$gameData_212.animationNumber[o]]|0;s-=(c-i)/2|0;let d=_$gameData_212.animationCharacterColour[o],m=0;1===d?(d=_$gameData_212.npcColourHair[a.npcId],m=_$gameData_212.npcColourSkin[a.npcId]):2===d?(d=_$gameData_212.npcColourTop[a.npcId],m=_$gameData_212.npcColourSkin[a.npcId]):3===d&&(d=_$gameData_212.npcColorBottom[a.npcId],m=_$gameData_212.npcColourSkin[a.npcId]),this.surface._spriteClipping_from9(t+s,e+h,c,r,l,d,m,n,u)}}}if(a.messageTimeout>0&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=this.surface.textWidth(a.message,1)/2|0,this.receivedMessageMidPoint[this.receivedMessagesCount]>150&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=150),this.receivedMessageHeight[this.receivedMessagesCount]=(this.surface.textWidth(a.message,1)/300|0)*this.surface.textHeight(1),this.receivedMessageX[this.receivedMessagesCount]=t+(i/2|0),this.receivedMessageY[this.receivedMessagesCount]=e,this.receivedMessages[this.receivedMessagesCount++]=a.message),8===a.animationCurrent||9===a.animationCurrent||0!==a.combatTimer){if(a.combatTimer>0){let r=t;8===a.animationCurrent?r-=20*o/100|0:9===a.animationCurrent&&(r+=20*o/100|0);let s=30*a.healthCurrent/a.healthMax|0;this.healthBarX[this.healthBarCount]=r+(i/2|0),this.healthBarY[this.healthBarCount]=e,this.healthBarMissing[this.healthBarCount++]=s}if(a.combatTimer>150){let s=t;8===a.animationCurrent?s-=10*o/100|0:9===a.animationCurrent&&(s+=10*o/100|0),this.surface._drawSprite_from3(s+(i/2|0)-12,e+(r/2|0)-12,this.spriteMedia+12),this.surface.drawStringCenter(a.damageTaken.toString(),s+(i/2|0)-1,e+(r/2|0)+5,3,16777215)}}}walkToWallObject(t,e,i){0===i?this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e-1,t,e,!1,!0):1===i?this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t-1,e,t,e,!1,!0):this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e,t,e,!0,!0)}async loadGameConfig(){const t=await this.readDataFile(`config${_$version_289.CONFIG}.jag`,"Configuration",10);if(!t)return void(this.errorLoadingData=!0);_$gameData_212.loadData(t,this.members);const e=await this.readDataFile(`filter${_$version_289.FILTER}.jag`,"Chat system",15);if(!e)return void(this.errorLoadingData=!0);const i=new _$gameBuffer_209(_$utility_288.loadData("fragmentsenc.txt",0,e)),r=new _$gameBuffer_209(_$utility_288.loadData("badenc.txt",0,e)),s=new _$gameBuffer_209(_$utility_288.loadData("hostenc.txt",0,e)),n=new _$gameBuffer_209(_$utility_288.loadData("tldlist.txt",0,e));_$wordFilter_290.loadFilters(i,r,s,n)}addNpc(t,e,i,r,s){null===this.npcsServer[t]&&(this.npcsServer[t]=new _$gameCharacter_210,this.npcsServer[t].serverIndex=t);const n=this.npcsServer[t];let o=!1;for(let a=0;a<this.npcCacheCount;a++)if(this.npcsCache[a].serverIndex===t){o=!0;break}if(o){n.npcId=s,n.animationNext=r;let t=n.waypointCurrent;e===n.waypointsX[t]&&i===n.waypointsY[t]||(n.waypointCurrent=t=(t+1)%10,n.waypointsX[t]=e,n.waypointsY[t]=i)}else n.serverIndex=t,n.movingStep=0,n.waypointCurrent=0,n.waypointsX[0]=n.currentX=e,n.waypointsY[0]=n.currentY=i,n.npcId=s,n.animationNext=n.animationCurrent=r,n.stepCount=0;return this.npcs[this.npcCount++]=n,n}resetLoginVars(){this.systemUpdate=0,this.loginScreen=0,this.loggedIn=0,this.logoutTimeout=0}drawDialogDuel(){if(0!==this.mouseButtonClick&&0===this.mouseButtonItemCountIncrement&&(this.mouseButtonItemCountIncrement=1),this.mouseButtonItemCountIncrement>0){let t=this.mouseX-22,e=this.mouseY-36;if(t>=0&&e>=0&&t<468&&e<262){if(t>216&&e>30&&t<462&&e<235){let i=((t-217|0)/49|0)+5*((e-31)/34|0);if(i>=0&&i<this.inventoryItemsCount){let t=!1,e=0,r=this.inventoryItemId[i];for(let s=0;s<this.duelOfferItemCount;s++)if(this.duelOfferItemId[s]===r)if(0===_$gameData_212.itemStackable[r])for(let e=0;e<this.mouseButtonItemCountIncrement;e++)this.duelOfferItemStack[s]<this.inventoryItemStackCount[i]&&this.duelOfferItemStack[s]++,t=!0;else e++;if(this.getInventoryCount(r)<=e&&(t=!0),1===_$gameData_212.itemSpecial[r]&&(this.showMessage("This object cannot be added to a duel offer",3),t=!0),!t&&this.duelOfferItemCount<8&&(this.duelOfferItemId[this.duelOfferItemCount]=r,this.duelOfferItemStack[this.duelOfferItemCount]=1,this.duelOfferItemCount++,t=!0),t){this.packetStream.newPacket(__clientOpcodes_222.DUEL_ITEM_UPDATE),this.packetStream.putByte(this.duelOfferItemCount);for(let t=0;t<this.duelOfferItemCount;t++)this.packetStream.putShort(this.duelOfferItemId[t]),this.packetStream.putInt(this.duelOfferItemStack[t]);this.packetStream.sendPacket(),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1}}}if(t>8&&e>30&&t<205&&e<129){let i=((t-9)/49|0)+4*((e-31)/34|0);if(i>=0&&i<this.duelOfferItemCount){let t=this.duelOfferItemId[i];for(let e=0;e<this.mouseButtonItemCountIncrement;e++){if(!(0===_$gameData_212.itemStackable[t]&&this.duelOfferItemStack[i]>1)){this.duelOfferItemCount--,this.mouseButtonDownTime=0;for(let t=i;t<this.duelOfferItemCount;t++)this.duelOfferItemId[t]=this.duelOfferItemId[t+1],this.duelOfferItemStack[t]=this.duelOfferItemStack[t+1];break}this.duelOfferItemStack[i]--}this.packetStream.newPacket(__clientOpcodes_222.DUEL_ITEM_UPDATE),this.packetStream.putByte(this.duelOfferItemCount);for(let e=0;e<this.duelOfferItemCount;e++)this.packetStream.putShort(this.duelOfferItemId[e]),this.packetStream.putInt(this.duelOfferItemStack[e]);this.packetStream.sendPacket(),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1}}let i=!1;t>=93&&e>=221&&t<=104&&e<=232&&(this.duelSettingsRetreat=!this.duelSettingsRetreat,i=!0),t>=93&&e>=240&&t<=104&&e<=251&&(this.duelSettingsMagic=!this.duelSettingsMagic,i=!0),t>=191&&e>=221&&t<=202&&e<=232&&(this.duelSettingsPrayer=!this.duelSettingsPrayer,i=!0),t>=191&&e>=240&&t<=202&&e<=251&&(this.duelSettingsWeapons=!this.duelSettingsWeapons,i=!0),i&&(this.packetStream.newPacket(__clientOpcodes_222.DUEL_SETTINGS),this.packetStream.putByte(this.duelSettingsRetreat?1:0),this.packetStream.putByte(this.duelSettingsMagic?1:0),this.packetStream.putByte(this.duelSettingsPrayer?1:0),this.packetStream.putByte(this.duelSettingsWeapons?1:0),this.packetStream.sendPacket(),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1),t>=217&&e>=238&&t<=286&&e<=259&&(this.duelOfferAccepted=!0,this.packetStream.newPacket(__clientOpcodes_222.DUEL_ACCEPT),this.packetStream.sendPacket()),t>=394&&e>=238&&t<463&&e<259&&(this.showDialogDuel=!1,this.packetStream.newPacket(__clientOpcodes_222.DUEL_DECLINE),this.packetStream.sendPacket())}else 0!==this.mouseButtonClick&&(this.showDialogDuel=!1,this.packetStream.newPacket(__clientOpcodes_222.DUEL_DECLINE),this.packetStream.sendPacket());this.mouseButtonClick=0,this.mouseButtonItemCountIncrement=0}if(this.showDialogDuel){this.surface.drawBox(22,36,468,12,13175581),this.surface.drawBoxAlpha(22,48,468,18,10000536,160),this.surface.drawBoxAlpha(22,66,8,248,10000536,160),this.surface.drawBoxAlpha(227,66,11,248,10000536,160),this.surface.drawBoxAlpha(484,66,6,248,10000536,160),this.surface.drawBoxAlpha(30,135,197,24,10000536,160),this.surface.drawBoxAlpha(30,228,197,23,10000536,160),this.surface.drawBoxAlpha(30,294,197,20,10000536,160),this.surface.drawBoxAlpha(238,271,246,43,10000536,160),this.surface.drawBoxAlpha(30,66,197,69,13684944,160),this.surface.drawBoxAlpha(30,159,197,69,13684944,160),this.surface.drawBoxAlpha(30,251,197,43,13684944,160),this.surface.drawBoxAlpha(238,66,246,205,13684944,160);for(let t=0;t<3;t++)this.surface.drawLineHoriz(30,66+34*t,197,0);for(let t=0;t<3;t++)this.surface.drawLineHoriz(30,159+34*t,197,0);for(let t=0;t<7;t++)this.surface.drawLineHoriz(238,66+34*t,246,0);for(let t=0;t<6;t++)t<5&&this.surface.drawLineVert(30+49*t,66,69,0),t<5&&this.surface.drawLineVert(30+49*t,159,69,0),this.surface.drawLineVert(238+49*t,66,205,0);this.surface.drawLineHoriz(30,251,197,0),this.surface.drawLineHoriz(30,293,197,0),this.surface.drawLineVert(30,251,43,0),this.surface.drawLineVert(226,251,43,0),this.surface.drawString("Preparing to duel with: "+this.duelOpponentName,23,46,1,16777215),this.surface.drawString("Your Stake",31,63,4,16777215),this.surface.drawString("Opponent's Stake",31,156,4,16777215),this.surface.drawString("Duel Options",31,248,4,16777215),this.surface.drawString("Your Inventory",238,63,4,16777215),this.surface.drawString("No retreating",31,267,3,16776960),this.surface.drawString("No magic",31,286,3,16776960),this.surface.drawString("No prayer",132,267,3,16776960),this.surface.drawString("No weapons",132,286,3,16776960),this.surface.drawBoxEdge(115,257,11,11,16776960),this.duelSettingsRetreat&&this.surface.drawBox(117,259,7,7,16776960),this.surface.drawBoxEdge(115,276,11,11,16776960),this.duelSettingsMagic&&this.surface.drawBox(117,278,7,7,16776960),this.surface.drawBoxEdge(213,257,11,11,16776960),this.duelSettingsPrayer&&this.surface.drawBox(215,259,7,7,16776960),this.surface.drawBoxEdge(213,276,11,11,16776960),this.duelSettingsWeapons&&this.surface.drawBox(215,278,7,7,16776960),this.duelOfferAccepted||this.surface._drawSprite_from3(239,274,this.spriteMedia+25),this.surface._drawSprite_from3(416,274,this.spriteMedia+26),this.duelOfferOpponentAccepted&&(this.surface.drawStringCenter("Other player",363,282,1,16777215),this.surface.drawStringCenter("has accepted",363,292,1,16777215)),this.duelOfferAccepted&&(this.surface.drawStringCenter("Waiting for",274,282,1,16777215),this.surface.drawStringCenter("other player",274,292,1,16777215));for(let t=0;t<this.inventoryItemsCount;t++){let e=239+t%5*49,i=67+34*(t/5|0);this.surface._spriteClipping_from9(e,i,48,32,this.spriteItem+_$gameData_212.itemPicture[this.inventoryItemId[t]],_$gameData_212.itemMask[this.inventoryItemId[t]],0,0,!1),0===_$gameData_212.itemStackable[this.inventoryItemId[t]]&&this.surface.drawString(this.inventoryItemStackCount[t].toString(),e+1,i+10,1,16776960)}for(let t=0;t<this.duelOfferItemCount;t++){let e=31+t%4*49,i=67+34*(t/4|0);this.surface._spriteClipping_from9(e,i,48,32,this.spriteItem+_$gameData_212.itemPicture[this.duelOfferItemId[t]],_$gameData_212.itemMask[this.duelOfferItemId[t]],0,0,!1),0===_$gameData_212.itemStackable[this.duelOfferItemId[t]]&&this.surface.drawString(this.duelOfferItemStack[t].toString(),e+1,i+10,1,16776960),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>i&&this.mouseY<i+32&&this.surface.drawString(_$gameData_212.itemName[this.duelOfferItemId[t]]+": @whi@"+_$gameData_212.itemDescription[this.duelOfferItemId[t]],30,309,1,16776960)}for(let t=0;t<this.duelOfferOpponentItemCount;t++){let e=31+t%4*49,i=160+34*(t/4|0);this.surface._spriteClipping_from9(e,i,48,32,this.spriteItem+_$gameData_212.itemPicture[this.duelOfferOpponentItemId[t]],_$gameData_212.itemMask[this.duelOfferOpponentItemId[t]],0,0,!1),0===_$gameData_212.itemStackable[this.duelOfferOpponentItemId[t]]&&this.surface.drawString(this.duelOfferOpponentItemStack[t].toString(),e+1,i+10,1,16776960),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>i&&this.mouseY<i+32&&this.surface.drawString(_$gameData_212.itemName[this.duelOfferOpponentItemId[t]]+": @whi@"+_$gameData_212.itemDescription[this.duelOfferOpponentItemId[t]],30,309,1,16776960)}}}loadNextRegion(t,i){if(0!==this.deathScreenTimeout)return this.world.playerAlive=!1,!1;if(this.loadingArea=!1,t+=this.planeWidth,i+=this.planeHeight,this.lastHeightOffset===this.planeIndex&&t>this.localLowerX&&t<this.localUpperX&&i>this.localLowerY&&i<this.localUpperY)return this.world.playerAlive=!0,!1;this.surface.drawStringCenter("Loading... Please wait",256,192,1,16777215),this.drawChatMessageTabs(),this.surface.draw(this.graphics,0,0);let r=this.regionX,s=this.regionY,n=(t+24)/48|0,o=(i+24)/48|0;this.lastHeightOffset=this.planeIndex,this.regionX=48*n-48,this.regionY=48*o-48,this.localLowerX=48*n-32,this.localLowerY=48*o-32,this.localUpperX=48*n+32,this.localUpperY=48*o+32,this.world._loadSection_from3(t,i,this.lastHeightOffset),this.regionX-=this.planeWidth,this.regionY-=this.planeHeight;let a=this.regionX-r,h=this.regionY-s;for(let u=0;u<this.objectCount;u++){this.objectX[u]-=a,this.objectY[u]-=h;let t=this.objectX[u],i=this.objectY[u],r=this.objectId[u],s=this.objectModel[u];try{let e=this.objectDirection[u],n=0,o=0;0===e||4===e?(n=_$gameData_212.objectWidth[r],o=_$gameData_212.objectHeight[r]):(o=_$gameData_212.objectWidth[r],n=_$gameData_212.objectHeight[r]);let a=(t+t+n)*this.magicLoc/2|0,h=(i+i+o)*this.magicLoc/2|0;t>=0&&i>=0&&t<96&&i<96&&(this.scene.addModel(s),s.place(a,-this.world.getElevation(a,h),h),this.world.removeObject2(t,i,r),74===r&&s.translate(0,-480,0))}catch(e){console.log("Loc Error: "+e.message),console.error(e)}}for(let u=0;u<this.wallObjectCount;u++){this.wallObjectX[u]-=a,this.wallObjectY[u]-=h;let t=this.wallObjectX[u],i=this.wallObjectY[u],r=this.wallObjectId[u],s=this.wallObjectDirection[u];try{this.world._setObjectAdjacency_from4(t,i,s,r);let e=this.createModel(t,i,s,r,u);this.wallObjectModel[u]=e}catch(e){console.log("Bound Error: "+e.message),console.error(e)}}for(let e=0;e<this.groundItemCount;e++)this.groundItemX[e]-=a,this.groundItemY[e]-=h;for(let e=0;e<this.playerCount;e++){let t=this.players[e];t.currentX-=a*this.magicLoc,t.currentY-=h*this.magicLoc;for(let e=0;e<=t.waypointCurrent;e++)t.waypointsX[e]-=a*this.magicLoc,t.waypointsY[e]-=h*this.magicLoc}for(let e=0;e<this.npcCount;e++){let t=this.npcs[e];t.currentX-=a*this.magicLoc,t.currentY-=h*this.magicLoc;for(let e=0;e<=t.waypointCurrent;e++)t.waypointsX[e]-=a*this.magicLoc,t.waypointsY[e]-=h*this.magicLoc}return this.world.playerAlive=!0,!0}drawPlayer(t,e,i,r,s,n,o){const a=this.players[s];if(255===a.colourBottom)return;let h=a.animationCurrent+(this.cameraRotation+16)/32&7,u=!1,l=h;5===l?(l=3,u=!0):6===l?(l=2,u=!0):7===l&&(l=1,u=!0);let c=3*l+this.npcWalkModel[(a.stepCount/6|0)%4];8===a.animationCurrent?(h=2,u=!1,t-=5*o/100|0,c=3*(l=5)+this.npcCombatModelArray1[(this.loginTimer/5|0)%8]):9===a.animationCurrent&&(h=2,u=!0,t+=5*o/100|0,c=3*(l=5)+this.npcCombatModelArray2[(this.loginTimer/6|0)%8]);for(let f=0;f<12;f++){let s=this.npcAnimationArray[h][f],o=a.equippedItem[s]-1;if(o>=0){let h=0,f=0,d=c;if(u&&l>=1&&l<=3&&(1===_$gameData_212.animationHasF[o]?d+=15:4===s&&1===l?(h=-22,f=-3,d=3*l+this.npcWalkModel[(2+(a.stepCount/6|0))%4]):4===s&&2===l?(h=0,f=-8,d=3*l+this.npcWalkModel[(2+(a.stepCount/6|0))%4]):4===s&&3===l?(h=26,f=-5,d=3*l+this.npcWalkModel[(2+(a.stepCount/6|0))%4]):3===s&&1===l?(h=22,f=3,d=3*l+this.npcWalkModel[(2+(a.stepCount/6|0))%4]):3===s&&2===l?(h=0,f=8,d=3*l+this.npcWalkModel[(2+(a.stepCount/6|0))%4]):3===s&&3===l&&(h=-26,f=5,d=3*l+this.npcWalkModel[(2+(a.stepCount/6|0))%4])),5!==l||1===_$gameData_212.animationHasA[o]){let s=d+_$gameData_212.animationNumber[o];h=h*i/this.surface.spriteWidthFull[s]|0,f=f*r/this.surface.spriteHeightFull[s]|0;let l=i*this.surface.spriteWidthFull[s]/this.surface.spriteWidthFull[_$gameData_212.animationNumber[o]]|0;h-=(l-i)/2|0;let c=_$gameData_212.animationCharacterColour[o];const m=this.characterSkinColours[a.colourSkin];1===c?c=this.characterHairColours[a.colourHair]:2===c?c=this.characterTopBottomColours[a.colourTop]:3===c&&(c=this.characterTopBottomColours[a.colourBottom]),this.surface._spriteClipping_from9(t+h,e+f,l,r,s,c,m,n,u)}}}if(a.messageTimeout>0&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=this.surface.textWidth(a.message,1)/2|0,this.receivedMessageMidPoint[this.receivedMessagesCount]>150&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=150),this.receivedMessageHeight[this.receivedMessagesCount]=(this.surface.textWidth(a.message,1)/300|0)*this.surface.textHeight(1),this.receivedMessageX[this.receivedMessagesCount]=t+(i/2|0),this.receivedMessageY[this.receivedMessagesCount]=e,this.receivedMessages[this.receivedMessagesCount++]=a.message),a.bubbleTimeout>0&&(this.actionBubbleX[this.itemsAboveHeadCount]=t+(i/2|0),this.actionBubbleY[this.itemsAboveHeadCount]=e,this.actionBubbleScale[this.itemsAboveHeadCount]=o,this.actionBubbleItem[this.itemsAboveHeadCount++]=a.bubbleItem),8===a.animationCurrent||9===a.animationCurrent||0!==a.combatTimer){if(a.combatTimer>0){let r=t;8===a.animationCurrent?r-=20*o/100|0:9===a.animationCurrent&&(r+=20*o/100|0);let s=30*a.healthCurrent/a.healthMax|0;this.healthBarX[this.healthBarCount]=r+(i/2|0),this.healthBarY[this.healthBarCount]=e,this.healthBarMissing[this.healthBarCount++]=s}if(a.combatTimer>150){let s=t;8===a.animationCurrent?s-=10*o/100|0:9===a.animationCurrent&&(s+=10*o/100|0),this.surface._drawSprite_from3(s+(i/2|0)-12,e+(r/2|0)-12,this.spriteMedia+11),this.surface.drawStringCenter(a.damageTaken.toString(),s+(i/2|0)-1,e+(r/2|0)+5,3,16777215)}}if(1===a.skullVisible&&0===a.bubbleTimeout){let r=n+t+(i/2|0);8===a.animationCurrent?r-=20*o/100|0:9===a.animationCurrent&&(r+=20*o/100|0);let s=16*o/100|0,h=16*o/100|0;this.surface._spriteClipping_from5(r-(s/2|0),e-(h/2|0)-(10*o/100|0),s,h,this.spriteMedia+13)}}async loadMedia(){const t=await this.readDataFile(`media${_$version_289.MEDIA}.jag`,"2d graphics",20);if(null===t)return void(this.errorLoadingData=!0);const e=_$utility_288.loadData("index.dat",0,t);this.surface.parseSprite(this.spriteMedia,_$utility_288.loadData("inv1.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+1,_$utility_288.loadData("inv2.dat",0,t),e,6),this.surface.parseSprite(this.spriteMedia+9,_$utility_288.loadData("bubble.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+10,_$utility_288.loadData("runescape.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+11,_$utility_288.loadData("splat.dat",0,t),e,3),this.surface.parseSprite(this.spriteMedia+14,_$utility_288.loadData("icon.dat",0,t),e,8),this.surface.parseSprite(this.spriteMedia+22,_$utility_288.loadData("hbar.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+23,_$utility_288.loadData("hbar2.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+24,_$utility_288.loadData("compass.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+25,_$utility_288.loadData("buttons.dat",0,t),e,2),this.surface.parseSprite(this.spriteUtil,_$utility_288.loadData("scrollbar.dat",0,t),e,2),this.surface.parseSprite(this.spriteUtil+2,_$utility_288.loadData("corners.dat",0,t),e,4),this.surface.parseSprite(this.spriteUtil+6,_$utility_288.loadData("arrows.dat",0,t),e,2),this.surface.parseSprite(this.spriteProjectile,_$utility_288.loadData("projectile.dat",0,t),e,_$gameData_212.projectileSprite);let i=_$gameData_212.itemSpriteCount;for(let r=1;i>0;r++){let s=i;i-=30,s>30&&(s=30),this.surface.parseSprite(this.spriteItem+30*(r-1),_$utility_288.loadData(`objects${r}.dat`,0,t),e,s)}this.surface.loadSprite(this.spriteMedia),this.surface.loadSprite(this.spriteMedia+9);for(let r=11;r<=26;r++)this.surface.loadSprite(this.spriteMedia+r);for(let r=0;r<_$gameData_212.projectileSprite;r++)this.surface.loadSprite(this.spriteProjectile+r);for(let r=0;r<_$gameData_212.itemSpriteCount;r++)this.surface.loadSprite(this.spriteItem+r)}async startGame(){if(this.port=this.port||43595,this.maxReadTries=1e3,_$gameConnection_211.clientVersion=_$version_289.CLIENT,await this.loadGameConfig(),this.errorLoadingData)return;this.spriteMedia=2e3,this.spriteUtil=this.spriteMedia+100,this.spriteItem=this.spriteUtil+50,this.spriteLogo=this.spriteItem+1e3,this.spriteProjectile=this.spriteLogo+10,this.spriteTexture=this.spriteProjectile+50,this.spriteTextureWorld=this.spriteTexture+10,this.graphics=this.getGraphics(),this.setTargetFps(50),this.surface=new _$Surface_259(this.gameWidth,this.gameHeight+12,4e3,this),this.surface.mudclientref=this,this.surface.setBounds(0,0,this.gameWidth,this.gameHeight+12),_$panel_254.drawBackgroundArrow=!1,_$panel_254.baseSpriteStart=this.spriteUtil;let t=this.surface.width2-199,e=36;this.options.mobile&&(t-=32,e=this.gameHeight/2-137.5|0),this.panelQuestList=new _$panel_254(this.surface,5),this.controlListQuest=this.panelQuestList.addTextListInteractive(t,e+24,196,251,1,500,!0),this.options.mobile&&(t=35,e=this.gameHeight/2-91|0),this.panelMagic=new _$panel_254(this.surface,5),this.controlListMagic=this.panelMagic.addTextListInteractive(t,e+24,196,90,1,500,!0),this.panelSocialList=new _$panel_254(this.surface,5),this.controlListSocialPlayers=this.panelSocialList.addTextListInteractive(t,e+40,196,126,1,500,!0),await this.loadMedia(),this.errorLoadingData||(await this.loadEntities(),this.errorLoadingData||(this.scene=new _$scene_257(this.surface,15e3,15e3,1e3),this.scene.view=_$gameModel_213._from2(1e6,1e3),this.scene.setBounds(this.gameWidth/2|0,this.gameHeight/2|0,this.gameWidth/2|0,this.gameHeight/2|0,this.gameWidth,9),this.scene.clipFar3d=2400,this.scene.clipFar2d=2400,this.scene.fogZFalloff=1,this.scene.fogZDistance=2300,this.scene._setLight_from3(-50,-10,-50),this.world=new _$world_291(this.scene,this.surface),this.world.baseMediaSprite=this.spriteMedia,await this.loadTextures(),this.errorLoadingData||(await this.loadModels(),this.errorLoadingData||(await this.loadMaps(),this.errorLoadingData||(this.members&&await this.loadSounds(),this.errorLoadingData||(this.showLoadingProgress(100,"Starting game..."),this.createMessageTabPanel(),this.createLoginPanels(),this.createAppearancePanel(),this.resetLoginScreenVariables(),this.renderLoginScreenViewports()))))))}hasInventoryItems(t,e){return!(31!==t||!(this.isItemEquipped(197)||this.isItemEquipped(615)||this.isItemEquipped(682)))||!(32!==t||!(this.isItemEquipped(102)||this.isItemEquipped(616)||this.isItemEquipped(683)))||!(33!==t||!(this.isItemEquipped(101)||this.isItemEquipped(617)||this.isItemEquipped(684)))||!(34!==t||!(this.isItemEquipped(103)||this.isItemEquipped(618)||this.isItemEquipped(685)))||this.getInventoryCount(t)>=e}getHostnameIP(t){return _$utility_288.ipToString(t)}cantLogout(){this.logoutTimeout=0,this.showMessage("@cya@Sorry, you can't logout at the moment",3)}drawGame(){if(0!==this.deathScreenTimeout)return this.surface.fadeToBlack(),this.surface.drawStringCenter("Oh dear! You are dead...",this.gameWidth/2|0,this.gameHeight/2|0,7,16711680),this.drawChatMessageTabs(),void this.surface.draw(this.graphics,0,0);if(this.showAppearanceChange)this.drawAppearancePanelCharacterSprites();else if(this.isSleeping)this.drawSleep();else if(this.world.playerAlive){for(let t=0;t<64;t++)this.scene.removeModel(this.world.roofModels[this.lastHeightOffset][t]),0===this.lastHeightOffset&&(this.scene.removeModel(this.world.wallModels[1][t]),this.scene.removeModel(this.world.roofModels[1][t]),this.scene.removeModel(this.world.wallModels[2][t]),this.scene.removeModel(this.world.roofModels[2][t])),this.options.showRoofs&&(this.fogOfWar=!0,0===this.lastHeightOffset&&0==(128&this.world.objectAdjacency.get(this.localPlayer.currentX/128|0,this.localPlayer.currentY/128|0))&&(this.scene.addModel(this.world.roofModels[this.lastHeightOffset][t]),0===this.lastHeightOffset&&(this.scene.addModel(this.world.wallModels[1][t]),this.scene.addModel(this.world.roofModels[1][t]),this.scene.addModel(this.world.wallModels[2][t]),this.scene.addModel(this.world.roofModels[2][t])),this.fogOfWar=!1));if(this.objectAnimationNumberFireLightningSpell!==this.lastObjectAnimationNumberFireLightningSpell){this.lastObjectAnimationNumberFireLightningSpell=this.objectAnimationNumberFireLightningSpell;for(let t=0;t<this.objectCount;t++)97===this.objectId[t]&&this.updateObjectAnimation(t,"firea"+(this.objectAnimationNumberFireLightningSpell+1)),274===this.objectId[t]&&this.updateObjectAnimation(t,"fireplacea"+(this.objectAnimationNumberFireLightningSpell+1)),1031===this.objectId[t]&&this.updateObjectAnimation(t,"lightning"+(this.objectAnimationNumberFireLightningSpell+1)),1036===this.objectId[t]&&this.updateObjectAnimation(t,"firespell"+(this.objectAnimationNumberFireLightningSpell+1)),1147===this.objectId[t]&&this.updateObjectAnimation(t,"spellcharge"+(this.objectAnimationNumberFireLightningSpell+1))}if(this.objectAnimationNumberTorch!==this.lastObjectAnimationNumberTorch){this.lastObjectAnimationNumberTorch=this.objectAnimationNumberTorch;for(let t=0;t<this.objectCount;t++)51===this.objectId[t]&&this.updateObjectAnimation(t,"torcha"+(this.objectAnimationNumberTorch+1)),143===this.objectId[t]&&this.updateObjectAnimation(t,"skulltorcha"+(this.objectAnimationNumberTorch+1))}if(this.objectAnimationNumberClaw!==this.lastObjectAnimationNumberClaw){this.lastObjectAnimationNumberClaw=this.objectAnimationNumberClaw;for(let t=0;t<this.objectCount;t++)1142===this.objectId[t]&&this.updateObjectAnimation(t,"clawspell"+(this.objectAnimationNumberClaw+1))}this.scene.reduceSprites(this.spriteCount),this.spriteCount=0;for(let t=0;t<this.playerCount;t++){const e=this.players[t];if(255!==e.colourBottom){const i=e.currentX,r=e.currentY,s=-this.world.getElevation(i,r),n=this.scene.addSprite(5e3+t,i,s,r,145,220,t+1e4);this.spriteCount++,e===this.localPlayer&&this.scene.setLocalPlayer(n),8===e.animationCurrent&&this.scene.setSpriteTranslateX(n,-30),9===e.animationCurrent&&this.scene.setSpriteTranslateX(n,30)}}for(let t=0;t<this.playerCount;t++){const e=this.players[t];if(e.projectileRange>0){let t=null;if(-1!==e.attackingNpcServerIndex?t=this.npcsServer[e.attackingNpcServerIndex]:-1!==e.attackingPlayerServerIndex&&(t=this.playerServer[e.attackingPlayerServerIndex]),t){const i=e.currentX,r=e.currentY,s=-this.world.getElevation(i,r)-110,n=t.currentX,o=t.currentY,a=-(this.world.getElevation(n,o)-_$gameData_212.npcHeight[t.npcId]/2|0),h=(i*e.projectileRange+n*(this.projectileMaxRange-e.projectileRange))/this.projectileMaxRange|0,u=(s*e.projectileRange+a*(this.projectileMaxRange-e.projectileRange))/this.projectileMaxRange|0,l=(r*e.projectileRange+o*(this.projectileMaxRange-e.projectileRange))/this.projectileMaxRange|0;this.scene.addSprite(this.spriteProjectile+e.incomingProjectileSprite,h,u,l,32,32,0),this.spriteCount++}}}for(let t=0;t<this.npcCount;t++){const e=this.npcs[t],i=e.currentX,r=e.currentY,s=-this.world.getElevation(i,r),n=this.scene.addSprite(2e4+t,i,s,r,_$gameData_212.npcWidth[e.npcId],_$gameData_212.npcHeight[e.npcId],t+3e4);this.spriteCount++,8===e.animationCurrent&&this.scene.setSpriteTranslateX(n,-30),9===e.animationCurrent&&this.scene.setSpriteTranslateX(n,30)}for(let t=0;t<this.groundItemCount;t++){const e=this.groundItemX[t]*this.magicLoc+64,i=this.groundItemY[t]*this.magicLoc+64;this.scene.addSprite(4e4+this.groundItemID[t],e,-this.world.getElevation(e,i)-this.groundItemZ[t],i,96,64,t+2e4),this.spriteCount++}for(let t=0;t<this.teleportBubbleCount;t++){const e=this.teleportBubbleX[t]*this.magicLoc+64,i=this.teleportBubbleY[t]*this.magicLoc+64,r=this.teleportBubbleType[t];0===r&&(this.scene.addSprite(5e4+t,e,-this.world.getElevation(e,i),i,128,256,t+5e4),this.spriteCount++),1===r&&(this.scene.addSprite(5e4+t,e,-this.world.getElevation(e,i),i,128,64,t+5e4),this.spriteCount++)}if(this.surface.interlace=!1,this.surface.blackScreen(),this.surface.interlace=this.interlace,3===this.lastHeightOffset){const t=40+(3*Math.random()|0),e=40+(7*Math.random()|0);this.scene._setLight_from5(t,e,-50,-10,-50)}if(this.itemsAboveHeadCount=0,this.receivedMessagesCount=0,this.healthBarCount=0,this.cameraAutoAngleDebug){if(this.optionCameraModeAuto&&!this.fogOfWar){const t=this.cameraAngle;this.autoRotateCamera(),this.cameraAngle!==t&&(this.cameraAutoRotatePlayerX=this.localPlayer.currentX,this.cameraAutoRotatePlayerY=this.localPlayer.currentY)}this.scene.clipFar3d=3e3,this.scene.clipFar2d=3e3,this.scene.fogZFalloff=1,this.scene.fogZDistance=2800,this.cameraRotation=32*this.cameraAngle;const t=this.cameraAutoRotatePlayerX+this.cameraRotationX,e=this.cameraAutoRotatePlayerY+this.cameraRotationY;this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,4*this.cameraRotation,0,2e3)}else{this.optionCameraModeAuto&&!this.fogOfWar&&this.autoRotateCamera(),this.interlace?(this.scene.clipFar3d=2200,this.scene.clipFar2d=2200,this.scene.fogZFalloff=1,this.scene.fogZDistance=2100):(this.scene.clipFar3d=2400,this.scene.clipFar2d=2400,this.scene.fogZFalloff=1,this.scene.fogZDistance=2300),this.cameraZoom>ZOOM_OUTDOORS&&(this.scene.clipFar3d+=1400,this.scene.clipFar2d+=1400,this.scene.fogZDistance+=1400);let t=this.cameraAutoRotatePlayerX+this.cameraRotationX,e=this.cameraAutoRotatePlayerY+this.cameraRotationY;this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,4*this.cameraRotation,0,2*this.cameraZoom)}if(this.scene.render(),this.drawAboveHeadStuff(),this.mouseClickXStep>0&&this.surface._drawSprite_from3(this.mouseClickXX-8,this.mouseClickXY-8,this.spriteMedia+14+((24-this.mouseClickXStep)/6|0)),this.mouseClickXStep<0&&this.surface._drawSprite_from3(this.mouseClickXX-8,this.mouseClickXY-8,this.spriteMedia+18+((24+this.mouseClickXStep)/6|0)),this.options.fpsCounter){const t=this.isInWild?70:0;this.surface.drawString("Fps: "+(0|this.fps),this.gameWidth-62-t,this.gameHeight-10,1,16776960)}if(0!==this.systemUpdate){let t=this.systemUpdate/50|0;const e=t/60|0;(t%=60)<10?this.surface.drawStringCenter("System update in: "+e+":0"+t,256,this.gameHeight-7,1,16776960):this.surface.drawStringCenter("System update in: "+e+":"+t,256,this.gameHeight-7,1,16776960)}if(!this.loadingArea){let t=2203-(this.localRegionY+this.planeHeight+this.regionY);if(this.localRegionX+this.planeWidth+this.regionX>=2640&&(t=-50),this.isInWild=t>0,this.isInWild){this.surface._drawSprite_from3(this.gameWidth-59,this.gameHeight-56,this.spriteMedia+13),this.surface.drawStringCenter("Wilderness",this.gameWidth-47,this.gameHeight-20,1,16776960);const e=1+(t/6|0);this.surface.drawStringCenter("Level: "+e,this.gameWidth-47,this.gameHeight-7,1,16776960),0===this.showUiWildWarn&&(this.showUiWildWarn=2)}0===this.showUiWildWarn&&t>-10&&t<=0&&(this.showUiWildWarn=1)}this.drawChatMessageTabsPanel(),this.options.mobile||this.surface._drawSpriteAlpha_from4(this.surface.width2-3-197,3,this.spriteMedia,128),this.drawUI(),this.surface.loggedIn=!1,this.drawChatMessageTabs(),this.surface.draw(this.graphics,0,0),this.options.mobile&&this.drawMobileUI()}}async loadSounds(){try{this.soundData=await this.readDataFile(`sounds${_$version_289.SOUNDS}.mem`,"Sound effects",90),this.audioPlayer=new _$streamAudioPlayer_258}catch(e){console.error(e)}}isItemEquipped(t){for(let e=0;e<this.inventoryItemsCount;e++)if(this.inventoryItemId[e]===t&&1===this.inventoryEquipped[e])return!0;return!1}async loadEntities(){const t=await this.readDataFile(`entity${_$version_289.ENTITY}.jag`,"people and monsters",30);if(!t)return void(this.errorLoadingData=!0);const e=_$utility_288.loadData("index.dat",0,t);let i=null,r=null;if(this.members){if(!(i=await this.readDataFile("entity"+_$version_289.ENTITY+".mem","member graphics",45)))return void(this.errorLoadingData=!0);r=_$utility_288.loadData("index.dat",0,i)}let s=0;this.animationIndex=0;t:for(let n=0;n<_$gameData_212.animationCount;n++){let o=_$gameData_212.animationName[n];for(let t=0;t<n;t++)if(_$gameData_212.animationName[t].toLowerCase()===o.toLowerCase()){_$gameData_212.animationNumber[n]=_$gameData_212.animationNumber[t];continue t}let a=_$utility_288.loadData(o+".dat",0,t),h=e;if(null===a&&this.members&&(a=_$utility_288.loadData(o+".dat",0,i),h=r),a){if(this.surface.parseSprite(this.animationIndex,a,h,15),s+=15,1===_$gameData_212.animationHasA[n]){let n=_$utility_288.loadData(o+"a.dat",0,t),a=e;null===n&&this.members&&(n=_$utility_288.loadData(o+"a.dat",0,i),a=r),this.surface.parseSprite(this.animationIndex+15,n,a,3),s+=3}if(1===_$gameData_212.animationHasF[n]){let n=_$utility_288.loadData(o+"f.dat",0,t),a=e;null===n&&this.members&&(n=_$utility_288.loadData(o+"f.dat",0,i),a=r),this.surface.parseSprite(this.animationIndex+18,n,a,9),s+=9}if(0!==_$gameData_212.animationGender[n])for(let t=this.animationIndex;t<this.animationIndex+27;t++)this.surface.loadSprite(t)}_$gameData_212.animationNumber[n]=this.animationIndex,this.animationIndex+=27}console.log("Loaded: "+s+" frames of animation")}draw(){if(this.errorLoadingData){const t=this.getGraphics();t.setColor(_$color_215.black),t.fillRect(0,0,512,356),t.setFont(new _$font_216("Helvetica",1,16)),t.setColor(_$color_215.yellow);let e=35;return t.drawString("Sorry, an error has occured whilst loading RuneScape",30,e),e+=50,t.setColor(_$color_215.white),t.drawString("To fix this try the following (in order):",30,e),e+=50,t.setColor(_$color_215.white),t.setFont(new _$font_216("Helvetica",1,12)),t.drawString("1: Try closing ALL open web-browser windows, and reloading",30,e),e+=30,t.drawString("2: Try clearing your web-browsers cache from tools->internet options",30,e),e+=30,t.drawString("3: Try using a different game-world",30,e),e+=30,t.drawString("4: Try rebooting your computer",30,e),e+=30,t.drawString("5: Try selecting a different version of Java from the play-game menu",30,e),void this.setTargetFps(1)}if(this.errorLoadingCodebase){const t=this.getGraphics();return t.setColor(_$color_215.black),t.fillRect(0,0,512,356),t.setFont(new _$font_216("Helvetica",1,20)),t.setColor(_$color_215.white),t.drawString("Error - unable to load game!",50,50),t.drawString("To play RuneScape make sure you play from",50,100),t.drawString("http://www.runescape.com",50,150),void this.setTargetFps(1)}if(this.errorLoadingMemory){const t=this.getGraphics();return t.setColor(_$color_215.black),t.fillRect(0,0,512,356),t.setFont(new _$font_216("Helvetica",1,20)),t.setColor(_$color_215.white),t.drawString("Error - out of memory!",50,50),t.drawString("Close ALL unnecessary programs",50,100),t.drawString("and windows before loading the game",50,150),t.drawString("RuneScape needs about 48meg of spare RAM",50,200),void this.setTargetFps(1)}try{0===this.loggedIn?(this.surface.loggedIn=!1,this.drawLoginScreens()):1===this.loggedIn&&(this.surface.loggedIn=!0,this.drawGame())}catch(e){console.error(e),this.disposeAndCollect(),this.errorLoadingMemory=!0}}onClosing(){this.closeConnection(),this.disposeAndCollect(),this.audioPlayer&&this.audioPlayer.stopPlayer()}drawDialogDuelConfirm(){this.surface.drawBox(22,36,468,16,192),this.surface.drawBoxAlpha(22,52,468,246,10000536,160),this.surface.drawStringCenter("Please confirm your duel with @yel@"+_$utility_288.hashToUsername(this.duelOpponentNameHash),256,48,1,16777215),this.surface.drawStringCenter("Your stake:",139,66,1,16776960);for(let t=0;t<this.duelItemsCount;t++){let e=_$gameData_212.itemName[this.duelItems[t]];0===_$gameData_212.itemStackable[this.duelItems[t]]&&(e=e+" x "+_$utility_288.formatConfirmAmount(this.duelItemCount[t])),this.surface.drawStringCenter(e,139,78+12*t,1,16777215)}0===this.duelItemsCount&&this.surface.drawStringCenter("Nothing!",139,78,1,16777215),this.surface.drawStringCenter("Your opponent's stake:",373,66,1,16776960);for(let t=0;t<this.duelOpponentItemsCount;t++){let e=_$gameData_212.itemName[this.duelOpponentItems[t]];0===_$gameData_212.itemStackable[this.duelOpponentItems[t]]&&(e=e+" x "+_$utility_288.formatConfirmAmount(this.duelOpponentItemCount[t])),this.surface.drawStringCenter(e,373,78+12*t,1,16777215)}0===this.duelOpponentItemsCount&&this.surface.drawStringCenter("Nothing!",373,78,1,16777215),0===this.duelOptionRetreat?this.surface.drawStringCenter("You can retreat from this duel",256,216,1,65280):this.surface.drawStringCenter("No retreat is possible!",256,216,1,16711680),0===this.duelOptionMagic?this.surface.drawStringCenter("Magic may be used",256,228,1,65280):this.surface.drawStringCenter("Magic cannot be used",256,228,1,16711680),0===this.duelOptionPrayer?this.surface.drawStringCenter("Prayer may be used",256,240,1,65280):this.surface.drawStringCenter("Prayer cannot be used",256,240,1,16711680),0===this.duelOptionWeapons?this.surface.drawStringCenter("Weapons may be used",256,252,1,65280):this.surface.drawStringCenter("Weapons cannot be used",256,252,1,16711680),this.surface.drawStringCenter("If you are sure click 'Accept' to begin the duel",256,266,1,16777215),this.duelAccepted?this.surface.drawStringCenter("Waiting for other player...",256,286,1,16776960):(this.surface._drawSprite_from3(105,274,this.spriteMedia+25),this.surface._drawSprite_from3(339,274,this.spriteMedia+26)),1===this.mouseButtonClick&&((this.mouseX<22||this.mouseY<36||this.mouseX>490||this.mouseY>298)&&(this.showDialogDuelConfirm=!1,this.packetStream.newPacket(__clientOpcodes_222.TRADE_DECLINE),this.packetStream.sendPacket()),this.mouseX>=105&&this.mouseX<=210&&this.mouseY>=274&&this.mouseY<=295&&(this.duelAccepted=!0,this.packetStream.newPacket(__clientOpcodes_222.DUEL_CONFIRM_ACCEPT),this.packetStream.sendPacket()),this.mouseX>=339&&this.mouseX<=445&&this.mouseY>=274&&this.mouseY<=295&&(this.showDialogDuelConfirm=!1,this.packetStream.newPacket(__clientOpcodes_222.DUEL_DECLINE),this.packetStream.sendPacket()),this.mouseButtonClick=0)}walkToGroundItem(t,e,i,r,s){return this.walkTo(t,e,i,r,i,r,!1,s)?void 0:void this._walkToActionSource_from8(t,e,i,r,i,r,!0,s)}async loadModels(){for(const e of ANIMATED_MODELS)_$gameData_212.getModelIndex(e);const t=await this.readDataFile(`models${_$version_289.MODELS}.jag`,"3d models",60);if(t)for(let e=0;e<_$gameData_212.modelCount;e++){const i=_$utility_288.getDataFileOffset(_$gameData_212.modelName[e]+".ob3",t);this.gameModels[e]=0!==i?_$gameModel_213.fromBytes(t,i):_$gameModel_213._from2(1,1),"giantcrystal"===_$gameData_212.modelName[e].toLowerCase()&&(this.gameModels[e].transparent=!0)}else this.errorLoadingData=!0}showMessage(t,e){if(2===e||4===e||6===e){for(;t.length>5&&"@"===t[0]&&"@"===t[4];t=t.substring(5));const e=t.indexOf(":");if(-1!==e){const i=t.substring(0,e),r=_$utility_288.usernameToHash(i);for(let t=0;t<this.ignoreListCount;t++)if(this.ignoreList[t].equals(r))return}}2===e?t="@yel@"+t:3===e||4===e?t="@whi@"+t:6===e&&(t="@cya@"+t),0!==this.messageTabSelected&&(4!==e&&3!==e||(this.messageTabFlashAll=200),2===e&&1!==this.messageTabSelected&&(this.messageTabFlashHistory=200),5===e&&2!==this.messageTabSelected&&(this.messageTabFlashQuest=200),6===e&&3!==this.messageTabSelected&&(this.messageTabFlashPrivate=200),3===e&&0!==this.messageTabSelected&&(this.messageTabSelected=0),6===e&&3!==this.messageTabSelected&&0!==this.messageTabSelected&&(this.messageTabSelected=0));for(let i=4;i>0;i--)this.messageHistory[i]=this.messageHistory[i-1],this.messageHistoryTimeout[i]=this.messageHistoryTimeout[i-1];if(this.messageHistory[0]=t,this.messageHistoryTimeout[0]=300,2===e)this.panelMessageTabs.controlFlashText[this.controlTextListChat]===this.panelMessageTabs.controlListEntryCount[this.controlTextListChat]-4?this.panelMessageTabs.removeListEntry(this.controlTextListChat,t,!0):this.panelMessageTabs.removeListEntry(this.controlTextListChat,t,!1);else if(5===e)this.panelMessageTabs.controlFlashText[this.controlTextListQuest]===this.panelMessageTabs.controlListEntryCount[this.controlTextListQuest]-4?this.panelMessageTabs.removeListEntry(this.controlTextListQuest,t,!0):this.panelMessageTabs.removeListEntry(this.controlTextListQuest,t,!1);else if(6===e){if(this.panelMessageTabs.controlFlashText[this.controlTextListPrivate]===this.panelMessageTabs.controlListEntryCount[this.controlTextListPrivate]-4)return void this.panelMessageTabs.removeListEntry(this.controlTextListPrivate,t,!0);this.panelMessageTabs.removeListEntry(this.controlTextListPrivate,t,!1)}}walkToObject(t,e,i,r){let s=0,n=0;0===i||4===i?(s=_$gameData_212.objectWidth[r],n=_$gameData_212.objectHeight[r]):(n=_$gameData_212.objectWidth[r],s=_$gameData_212.objectHeight[r]),2===_$gameData_212.objectType[r]||3===_$gameData_212.objectType[r]?(0===i?(t--,s++):2===i?n++:4===i?s++:6===i&&(e--,n++),this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e,t+s-1,e+n-1,!1,!0)):this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e,t+s-1,e+n-1,!0,!0)}getInventoryCount(t){let e=0;for(let i=0;i<this.inventoryItemsCount;i++)this.inventoryItemId[i]===t&&(1===_$gameData_212.itemStackable[t]?e++:e+=this.inventoryItemStackCount[i]);return e}async loadTextures(){const t=await this.readDataFile(`textures${_$version_289.TEXTURES}.jag`,"Textures",50);if(!t)return void(this.errorLoadingData=!0);const e=_$utility_288.loadData("index.dat",0,t);this.scene.allocateTextures(_$gameData_212.textureCount,7,11);for(let i=0;i<_$gameData_212.textureCount;i++){const r=_$gameData_212.textureName[i];let s=_$utility_288.loadData(r+".dat",0,t);this.surface.parseSprite(this.spriteTexture,s,e,1),this.surface.drawBox(0,0,128,128,16711935),this.surface._drawSprite_from3(0,0,this.spriteTexture);let n=this.surface.spriteWidthFull[this.spriteTexture],o=_$gameData_212.textureSubtypeName[i];if(o&&o.length>0){let i=_$utility_288.loadData(o+".dat",0,t);this.surface.parseSprite(this.spriteTexture,i,e,1),this.surface._drawSprite_from3(0,0,this.spriteTexture)}this.surface._drawSprite_from5(this.spriteTextureWorld+i,0,0,n,n);for(let t=0;t<n*n;t++)65280===this.surface.surfacePixels[this.spriteTextureWorld+i][t]&&(this.surface.surfacePixels[this.spriteTextureWorld+i][t]=16711935);this.surface.drawWorld(this.spriteTextureWorld+i),this.scene.defineTexture(i,this.surface.spriteColoursUsed[this.spriteTextureWorld+i],this.surface.spriteColourList[this.spriteTextureWorld+i],(n/64|0)-1)}}handleMouseDown(t,e,i){this.mouseClickXHistory[this.mouseClickCount]=e,this.mouseClickYHistory[this.mouseClickCount]=i,this.mouseClickCount=this.mouseClickCount+1&8191;for(let r=10;r<4e3;r++){let t=this.mouseClickCount-r&8191;if(this.mouseClickXHistory[t]===e&&this.mouseClickYHistory[t]===i){let s=!1;for(let n=1;n<r;n++){let o=this.mouseClickCount-n&8191,a=t-n&8191;if(this.mouseClickXHistory[a]===e&&this.mouseClickYHistory[a]===i||(s=!0),this.mouseClickXHistory[o]!==this.mouseClickXHistory[a]||this.mouseClickYHistory[o]!==this.mouseClickYHistory[a])break;if(n===r-1&&s&&0===this.combatTimeout&&0===this.logoutTimeout)return void this.sendLogout()}}}}drawTeleportBubble(t,e,i,r,s){const n=this.teleportBubbleType[s],o=this.teleportBubbleTime[s];if(0===n){const s=255+5*o*256;this.surface.drawCircle(t+(i/2|0),e+(r/2|0),20+2*o,s,255-5*o)}else if(1===n){const s=16711680+5*o*256;this.surface.drawCircle(t+(i/2|0),e+(r/2|0),10+o,s,255-5*o)}}showServerMessage(t){/^@bor@/.test(t)?this.showMessage(t,4):/^@que@/.test(t)?this.showMessage("@whi@"+t,5):/^@pri@/.test(t)?this.showMessage(t,6):this.showMessage(t,3)}updateObjectAnimation(t,e){const i=this.objectX[t],r=this.objectY[t],s=i-(this.localPlayer.currentX/128|0),n=r-(this.localPlayer.currentY/128|0);if(i>=0&&r>=0&&i<96&&r<96&&s>-7&&s<7&&n>-7&&n<7){this.scene.removeModel(this.objectModel[t]);const i=_$gameData_212.getModelIndex(e),r=this.gameModels[i].copy();this.scene.addModel(r),r._setLight_from6(!0,48,48,-50,-10,-50),r.copyPosition(this.objectModel[t]),r.key=t,this.objectModel[t]=r}}createTopMouseMenu(){(this.selectedSpell>=0||this.selectedItemInventoryIndex>=0)&&(this.menuItemText1[this.menuItemsCount]="Cancel",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=4e3,this.menuItemsCount++);for(let t=0;t<this.menuItemsCount;t++)this.menuIndices[t]=t;for(let t=!1;!t;){t=!0;for(let e=0;e<this.menuItemsCount-1;e++){let i=this.menuIndices[e],r=this.menuIndices[e+1];this.menuType[i]>this.menuType[r]&&(this.menuIndices[e]=r,this.menuIndices[e+1]=i,t=!1)}}if(this.menuItemsCount>20&&(this.menuItemsCount=20),this.menuItemsCount>0){let t=-1;for(let i=0;i<this.menuItemsCount;i++)if(!(null===this.menuItemText2[this.menuIndices[i]]||this.menuItemText2[this.menuIndices[i]].length<=0)){t=i;break}let e=null;if((this.selectedItemInventoryIndex>=0||this.selectedSpell>=0)&&1===this.menuItemsCount?e="Choose a target":(this.selectedItemInventoryIndex>=0||this.selectedSpell>=0)&&this.menuItemsCount>1?e="@whi@"+this.menuItemText1[this.menuIndices[0]]+" "+this.menuItemText2[this.menuIndices[0]]:-1!==t&&(e=this.menuItemText2[this.menuIndices[t]]+": @whi@"+this.menuItemText1[this.menuIndices[0]]),2===this.menuItemsCount&&e&&(e+="@whi@ / 1 more option"),this.menuItemsCount>2&&e&&(e=e+"@whi@ / "+(this.menuItemsCount-1)+" more options"),!this.options.mobile&&e&&this.surface.drawString(e,6,14,1,16776960),!this.optionMouseButtonOne&&1===this.mouseButtonClick||this.optionMouseButtonOne&&1===this.mouseButtonClick&&1===this.menuItemsCount)return this.menuItemClick(this.menuIndices[0]),void(this.mouseButtonClick=0);if(!this.optionMouseButtonOne&&2===this.mouseButtonClick||this.optionMouseButtonOne&&1===this.mouseButtonClick){this.menuHeight=15*(this.menuItemsCount+1),this.menuWidth=this.surface.textWidth("Choose option",1)+5;for(let t=0;t<this.menuItemsCount;t++){let e=this.surface.textWidth(this.menuItemText1[t]+" "+this.menuItemText2[t],1)+5;e>this.menuWidth&&(this.menuWidth=e)}this.menuX=this.mouseX-(this.menuWidth/2|0),this.menuY=this.mouseY-7,this.showRightClickMenu=!0,this.menuX<0&&(this.menuX=0),this.menuY<0&&(this.menuY=0),this.menuX+this.menuWidth>510&&(this.menuX=510-this.menuWidth),this.menuY+this.menuHeight>315&&(this.menuY=315-this.menuHeight),this.mouseButtonClick=0}}}menuItemClick(t){const e=this.menuItemX[t],i=this.menuItemY[t],r=this.menuIndex[t],s=this.menuSourceIndex[t],n=this.menuTargetIndex[t],o=this.menuType[t];switch(this.options.mobile&&this.menuItemText2[t]&&(this.menuText=`${this.menuItemText1[t]} ${this.menuItemText2[t]}`,this.menuTextWidth=this.surface.textWidth(this.menuText,1),this.menuX=this.mouseX,this.menuY=this.mouseY,this.menuActionTimeout=60),o){case 200:this.walkToGroundItem(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(__clientOpcodes_222.CAST_GROUNDITEM),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 210:this.walkToGroundItem(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(__clientOpcodes_222.USEWITH_GROUNDITEM),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 220:this.walkToGroundItem(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(__clientOpcodes_222.GROUNDITEM_TAKE),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket();break;case 3200:this.showMessage(_$gameData_212.itemDescription[r],3);break;case 300:this.walkToWallObject(e,i,r),this.packetStream.newPacket(__clientOpcodes_222.CAST_WALLOBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 310:this.walkToWallObject(e,i,r),this.packetStream.newPacket(__clientOpcodes_222.USEWITH_WALLOBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 320:this.walkToWallObject(e,i,r),this.packetStream.newPacket(__clientOpcodes_222.WALL_OBJECT_COMMAND1),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.sendPacket();break;case 2300:this.walkToWallObject(e,i,r),this.packetStream.newPacket(__clientOpcodes_222.WALL_OBJECT_COMMAND2),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.sendPacket();break;case 3300:this.showMessage(_$gameData_212.wallObjectDescription[r],3);break;case 400:this.walkToObject(e,i,r,s),this.packetStream.newPacket(__clientOpcodes_222.CAST_OBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 410:this.walkToObject(e,i,r,s),this.packetStream.newPacket(__clientOpcodes_222.USEWITH_OBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 420:this.walkToObject(e,i,r,s),this.packetStream.newPacket(__clientOpcodes_222.OBJECT_CMD1),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.sendPacket();break;case 2400:this.walkToObject(e,i,r,s),this.packetStream.newPacket(__clientOpcodes_222.OBJECT_CMD2),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.sendPacket();break;case 3400:this.showMessage(_$gameData_212.objectDescription[r],3);break;case 600:this.packetStream.newPacket(__clientOpcodes_222.CAST_INVITEM),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 610:this.packetStream.newPacket(__clientOpcodes_222.USEWITH_INVITEM),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 620:this.packetStream.newPacket(__clientOpcodes_222.INV_UNEQUIP),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 630:this.packetStream.newPacket(__clientOpcodes_222.INV_WEAR),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 640:this.packetStream.newPacket(__clientOpcodes_222.INV_CMD),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 650:this.selectedItemInventoryIndex=r,this.showUITab=0,this.selectedItemName=_$gameData_212.itemName[this.inventoryItemId[this.selectedItemInventoryIndex]];break;case 660:this.packetStream.newPacket(__clientOpcodes_222.INV_DROP),this.packetStream.putShort(r),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1,this.showUITab=0,this.showMessage("Dropping "+_$gameData_212.itemName[this.inventoryItemId[r]],4);break;case 3600:this.showMessage(_$gameData_212.itemDescription[r],3);break;case 700:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(__clientOpcodes_222.CAST_NPC),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedSpell=-1;break}case 710:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(__clientOpcodes_222.USEWITH_NPC),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break}case 720:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(__clientOpcodes_222.NPC_TALK),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 725:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(__clientOpcodes_222.NPC_CMD),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 715:case 2715:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(__clientOpcodes_222.NPC_ATTACK),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 3700:this.showMessage(_$gameData_212.npcDescription[r],3);break;case 800:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(__clientOpcodes_222.CAST_PLAYER),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedSpell=-1;break}case 810:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(__clientOpcodes_222.USEWITH_PLAYER),this.packetStream.putShort(r),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break}case 805:case 2805:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(__clientOpcodes_222.PLAYER_ATTACK),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 2806:this.packetStream.newPacket(__clientOpcodes_222.PLAYER_DUEL),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 2810:this.packetStream.newPacket(__clientOpcodes_222.PLAYER_TRADE),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 2820:this.packetStream.newPacket(__clientOpcodes_222.PLAYER_FOLLOW),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 900:this._walkToActionSource_from5(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(__clientOpcodes_222.CAST_GROUND),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 920:this._walkToActionSource_from5(this.localRegionX,this.localRegionY,e,i,!1),-24===this.mouseClickXStep&&(this.mouseClickXStep=24);break;case 1e3:this.packetStream.newPacket(__clientOpcodes_222.CAST_SELF),this.packetStream.putShort(r),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 4e3:this.selectedItemInventoryIndex=-1,this.selectedSpell=-1}}showLoginScreenStatus(t,e){1===this.loginScreen?this.panelLoginNewUser.updateText(this.controlRegisterStatus,t+" "+e):2===this.loginScreen&&this.panelLoginExistingUser.updateText(this.controlLoginStatus,t+" "+e),this.loginUserDisp=e,this.drawLoginScreens(),this.resetTimings()}async lostConnection(){this.systemUpdate=0,0!==this.logoutTimeout?this.resetLoginVars():await super.lostConnection()}isValidCameraAngle(t){const e=this.localPlayer.currentX/128|0,i=this.localPlayer.currentY/128|0;for(let r=2;r>=1;r--){if(1===t&&(128==(128&this.world.objectAdjacency.get(e,i-r))||128==(128&this.world.objectAdjacency.get(e-r,i))||128==(128&this.world.objectAdjacency.get(e-r,i-r))))return!1;if(3===t&&(128==(128&this.world.objectAdjacency.get(e,i+r))||128==(128&this.world.objectAdjacency.get(e-r,i))||128==(128&this.world.objectAdjacency.get(e-r,i+r))))return!1;if(5===t&&(128==(128&this.world.objectAdjacency.get(e,i+r))||128==(128&this.world.objectAdjacency.get(e+r,i))||128==(128&this.world.objectAdjacency.get(e+r,i+r))))return!1;if(7===t&&(128==(128&this.world.objectAdjacency.get(e,i-r))||128==(128&this.world.objectAdjacency.get(e+r,i))||128==(128&this.world.objectAdjacency.get(e+r,i-r))))return!1;if(0===t&&128==(128&this.world.objectAdjacency.get(e,i-r)))return!1;if(2===t&&128==(128&this.world.objectAdjacency.get(e-r,i)))return!1;if(4===t&&128==(128&this.world.objectAdjacency.get(e,i+r)))return!1;if(6===t&&128==(128&this.world.objectAdjacency.get(e+r,i)))return!1}return!0}resetLoginScreenVariables(){this.loggedIn=0,this.loginScreen=0,this.loginUser="",this.loginPass="",this.loginUserDesc="Please enter a username:",this.loginUserDisp=`*${this.loginUser}*`,this.playerCount=0,this.npcCount=0}handleIncomingPacket(t,i,r){try{const e=this.packetHandlers[t];if(!e)throw new Error("unhandled packet opcode "+t);e(r,i)}catch(e){if(console.error(e),this.packetErrorCount<3){let n=e.stack,o=n.length;this.packetStream.newPacket(__clientOpcodes_222.PACKET_EXCEPTION),this.packetStream.putShort(o),this.packetStream.putString(n),this.packetStream.putShort(o=(n="p-type: "+t+" p-size:"+i).length),this.packetStream.putString(n),this.packetStream.putShort(o=(n="rx:"+this.localRegionX+" ry:"+this.localRegionY+" num3l:"+this.objectCount).length),this.packetStream.putString(n),n="";for(let t=0;t<80&&t<i;t++)n=n+r[t]+" ";this.packetStream.putShort(n.length),this.packetStream.putString(n),this.packetStream.sendPacket(),this.packetErrorCount++}this.packetStream.closeStream(),this.resetLoginVars()}}createRightClickMenu(){let t=2203-(this.localRegionY+this.planeHeight+this.regionY);this.localRegionX+this.planeWidth+this.regionX>=2640&&(t=-50);let e=-1;for(let n=0;n<this.objectCount;n++)this.objectAlreadyInMenu[n]=!1;for(let n=0;n<this.wallObjectCount;n++)this.wallObjectAlreadyInMenu[n]=!1;let i=this.scene.getMousePickedCount(),r=this.scene.getMousePickedModels(),s=this.scene.getMousePickedFaces();for(let n=0;n<i&&!(this.menuItemsCount>200);n++){let i=s[n],o=r[n];if(o.faceTag[i]<=65535||o.faceTag[i]>=2e5&&o.faceTag[i]<=3e5)if(o===this.scene.view){let e=o.faceTag[i]%1e4;const r=o.faceTag[i]/1e4|0;if(1===r){let i="",r=0;this.localPlayer.level>0&&this.players[e].level>0&&(r=this.localPlayer.level-this.players[e].level),r<0&&(i="@or1@"),r<-3&&(i="@or2@"),r<-6&&(i="@or3@"),r<-9&&(i="@red@"),r>0&&(i="@gr1@"),r>3&&(i="@gr2@"),r>6&&(i="@gr3@"),r>9&&(i="@gre@"),i=" "+i+"(level-"+this.players[e].level+")",this.selectedSpell>=0?1!==_$gameData_212.spellType[this.selectedSpell]&&2!==_$gameData_212.spellType[this.selectedSpell]||(this.menuItemText1[this.menuItemsCount]="Cast "+_$gameData_212.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=800,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=810,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(t>0&&((this.players[e].currentY-64)/this.magicLoc+this.planeHeight+this.regionY|0)<2203?(this.menuItemText1[this.menuItemsCount]="Attack",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=r>=0&&r<5?805:2805,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++):this.members&&(this.menuItemText1[this.menuItemsCount]="Duel with",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuType[this.menuItemsCount]=2806,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Trade with",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=2810,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Follow",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=2820,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++)}else if(2===r)this.selectedSpell>=0?3===_$gameData_212.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+_$gameData_212.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@lre@"+_$gameData_212.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=200,this.menuItemX[this.menuItemsCount]=this.groundItemX[e],this.menuItemY[this.menuItemsCount]=this.groundItemY[e],this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@lre@"+_$gameData_212.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=210,this.menuItemX[this.menuItemsCount]=this.groundItemX[e],this.menuItemY[this.menuItemsCount]=this.groundItemY[e],this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(this.menuItemText1[this.menuItemsCount]="Take",this.menuItemText2[this.menuItemsCount]="@lre@"+_$gameData_212.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=220,this.menuItemX[this.menuItemsCount]=this.groundItemX[e],this.menuItemY[this.menuItemsCount]=this.groundItemY[e],this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@lre@"+_$gameData_212.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=3200,this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuItemsCount++);else if(3===r){let t="",i=-1;const r=this.npcs[e].npcId;if(_$gameData_212.npcAttackable[r]>0){const e=(_$gameData_212.npcAttack[r]+_$gameData_212.npcDefense[r]+_$gameData_212.npcStrength[r]+_$gameData_212.npcHits[r])/4|0,s=(this.playerStatBase[0]+this.playerStatBase[1]+this.playerStatBase[2]+this.playerStatBase[3]+27)/4|0;t="@yel@",(i=s-e)<0&&(t="@or1@"),i<-3&&(t="@or2@"),i<-6&&(t="@or3@"),i<-9&&(t="@red@"),i>0&&(t="@gr1@"),i>3&&(t="@gr2@"),i>6&&(t="@gr3@"),i>9&&(t="@gre@"),t=" "+t+"(level-"+e+")"}this.selectedSpell>=0?2===_$gameData_212.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+_$gameData_212.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@yel@"+_$gameData_212.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=700,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@yel@"+_$gameData_212.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=710,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(_$gameData_212.npcAttackable[r]>0&&(this.menuItemText1[this.menuItemsCount]="Attack",this.menuItemText2[this.menuItemsCount]="@yel@"+_$gameData_212.npcName[this.npcs[e].npcId]+t,this.menuType[this.menuItemsCount]=i>=0?715:2715,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Talk-to",this.menuItemText2[this.menuItemsCount]="@yel@"+_$gameData_212.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=720,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuItemsCount++,""!==_$gameData_212.npcCommand[r]&&(this.menuItemText1[this.menuItemsCount]=_$gameData_212.npcCommand[r],this.menuItemText2[this.menuItemsCount]="@yel@"+_$gameData_212.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=725,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@yel@"+_$gameData_212.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=3700,this.menuIndex[this.menuItemsCount]=this.npcs[e].npcId,this.menuItemsCount++)}}else if(o&&o.key>=1e4){const t=o.key-1e4,e=this.wallObjectId[t];this.wallObjectAlreadyInMenu[t]||(this.selectedSpell>=0?4===_$gameData_212.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+_$gameData_212.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.wallObjectName[e],this.menuType[this.menuItemsCount]=300,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.wallObjectName[e],this.menuType[this.menuItemsCount]=310,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(/^WalkTo$/i.test(_$gameData_212.wallObjectCommand1[e])||(this.menuItemText1[this.menuItemsCount]=_$gameData_212.wallObjectCommand1[e],this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.wallObjectName[e],this.menuType[this.menuItemsCount]=320,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuItemsCount++),/^Examine$/i.test(_$gameData_212.wallObjectCommand2[e])||(this.menuItemText1[this.menuItemsCount]=_$gameData_212.wallObjectCommand2[e],this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.wallObjectName[e],this.menuType[this.menuItemsCount]=2300,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.wallObjectName[e],this.menuType[this.menuItemsCount]=3300,this.menuIndex[this.menuItemsCount]=e,this.menuItemsCount++),this.wallObjectAlreadyInMenu[t]=!0)}else if(o&&o.key>=0){const t=o.key,e=this.objectId[t];this.objectAlreadyInMenu[t]||(this.selectedSpell>=0?5===_$gameData_212.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+_$gameData_212.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.objectName[e],this.menuType[this.menuItemsCount]=400,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuTargetIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.objectName[e],this.menuType[this.menuItemsCount]=410,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuTargetIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(/^WalkTo$/i.test(_$gameData_212.objectCommand1[e])||(this.menuItemText1[this.menuItemsCount]=_$gameData_212.objectCommand1[e],this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.objectName[e],this.menuType[this.menuItemsCount]=420,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuItemsCount++),/^Examine$/i.test(_$gameData_212.objectCommand2[e])||(this.menuItemText1[this.menuItemsCount]=_$gameData_212.objectCommand2[e],this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.objectName[e],this.menuType[this.menuItemsCount]=2400,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@cya@"+_$gameData_212.objectName[e],this.menuType[this.menuItemsCount]=3400,this.menuIndex[this.menuItemsCount]=e,this.menuItemsCount++),this.objectAlreadyInMenu[t]=!0)}else i>=0&&(i=o.faceTag[i]-2e5),i>=0&&(e=i)}if(this.selectedSpell>=0&&_$gameData_212.spellType[this.selectedSpell]<=1&&(this.menuItemText1[this.menuItemsCount]="Cast "+_$gameData_212.spellName[this.selectedSpell]+" on self",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=1e3,this.menuIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++),-1!==e)if(this.selectedSpell>=0){if(6===_$gameData_212.spellType[this.selectedSpell])return this.menuItemText1[this.menuItemsCount]="Cast "+_$gameData_212.spellName[this.selectedSpell]+" on ground",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=900,this.menuItemX[this.menuItemsCount]=this.world.localX[e],this.menuItemY[this.menuItemsCount]=this.world.localY[e],this.menuIndex[this.menuItemsCount]=this.selectedSpell,void this.menuItemsCount++}else this.selectedItemInventoryIndex<0&&(this.menuItemText1[this.menuItemsCount]="Walk here",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=920,this.menuItemX[this.menuItemsCount]=this.world.localX[e],this.menuItemY[this.menuItemsCount]=this.world.localY[e],this.menuItemsCount++)}async handleInputs(){if(!(this.errorLoadingCodebase||this.errorLoadingMemory||this.errorLoadingData))try{if(this.loginTimer++,0===this.loggedIn?(this.mouseActionTimeout=0,await this.handleLoginScreenInput()):1===this.loggedIn&&(this.mouseActionTimeout++,await this.handleGameInput()),this.lastMouseButtonDown=0,this.cameraRotationTime++,this.cameraRotationTime>500){this.cameraRotationTime=0;const t=4*Math.random()|0;1==(1&t)&&(this.cameraRotationX+=this.cameraRotationXIncrement),2==(2&t)&&(this.cameraRotationY+=this.cameraRotationYIncrement)}if(this.cameraRotationX<-50?this.cameraRotationXIncrement=2:this.cameraRotationX>50&&(this.cameraRotationXIncrement=-2),this.cameraRotationY<-50?this.cameraRotationYIncrement=2:this.cameraRotationY>50&&(this.cameraRotationYIncrement=-2),this.messageTabFlashAll>0&&this.messageTabFlashAll--,this.messageTabFlashHistory>0&&this.messageTabFlashHistory--,this.messageTabFlashQuest>0&&this.messageTabFlashQuest--,this.messageTabFlashPrivate>0)return void this.messageTabFlashPrivate--}catch(e){console.error(e),this.disposeAndCollect(),this.errorLoadingMemory=!0}}async loadMaps(){this.world.mapPack=await this.readDataFile(`maps${_$version_289.MAPS}.jag`,"map",70),this.members&&(this.world.memberMapPack=await this.readDataFile(`maps${_$version_289.MAPS}.mem`,"members map",75)),this.world.landscapePack=await this.readDataFile(`land${_$version_289.MAPS}.jag`,"landscape",80),this.members&&(this.world.memberLandscapePack=await this.readDataFile(`land${_$version_289.MAPS}.mem`,"members landscape",85))}createModel(t,e,i,r,s){let n=t,o=e,a=t,h=e;const u=_$gameData_212.wallObjectTextureFront[r],l=_$gameData_212.wallObjectTextureBack[r],c=_$gameData_212.wallObjectHeight[r],f=_$gameModel_213._from2(4,1);0===i?a=t+1:1===i?h=e+1:2===i?(n=t+1,h=e+1):3===i&&(a=t+1,h=e+1),n*=this.magicLoc,o*=this.magicLoc,a*=this.magicLoc,h*=this.magicLoc;const d=new Int32Array([f.vertexAt(n,-this.world.getElevation(n,o),o),f.vertexAt(n,-this.world.getElevation(n,o)-c,o),f.vertexAt(a,-this.world.getElevation(a,h)-c,h),f.vertexAt(a,-this.world.getElevation(a,h),h)]);return f.createFace(4,d,u,l),f._setLight_from6(!1,60,24,-50,-10,-50),t>=0&&e>=0&&t<96&&e<96&&this.scene.addModel(f),f.key=s+1e4,f}},_$rscClient_1={};if("undefined"==typeof window)throw new Error("rsc-client needs to run in a browser");(async()=>{const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.width="100%",t.style.height="100vh",t.style.margin="0",t.style.padding="0",t.style.overflow="hidden";const e=document.createElement("div");t.appendChild(e);const i=window.location.hash.slice(1).split(","),r=new _$mudclient_222(e);window.mcOptions=r.options,Object.assign(r.options,{middleClickCamera:!0,mouseWheel:!0,resetCompass:!0,zoomCamera:!0,accountManagement:!0,mobile:!1}),r.members="members"===i[0],r.server=i[1]?i[1]:"rsc-server-production.up.railway.app",r.port=i[2]&&!isNaN(+i[2])?+i[2]:r.server.includes("railway.app")?null:43595,r.threadSleep=10,document.body.style.margin="0",document.body.style.padding="0",document.body.style.height="100vh",document.body.style.overflow="hidden",document.body.style.backgroundColor="#000",document.body.appendChild(t),await r.startApplication(512,346,"Runescape by Andrew Gower")})()}();